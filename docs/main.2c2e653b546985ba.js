"use strict";(self.webpackChunkmayaramein_portfolio=self.webpackChunkmayaramein_portfolio||[]).push([[179],{8939:(gt,Se,U)=>{U.d(Se,{Dh:()=>Ie,GT:()=>we,cc:()=>Le,on:()=>Ne,pX:()=>le,xv:()=>me});var c=U(4537),j=U(7841);gt=U.hmd(gt);const L=["ngOnDestroy"],le=(oe,ce,et,tt={})=>new Proxy(oe,{get:(Pe,ve)=>et.runOutsideAngular(()=>{var fe;if(oe[ve])return!(null===(fe=tt?.spy)||void 0===fe)&&fe.get&&tt.spy.get(ve,oe[ve]),oe[ve];if(L.indexOf(ve)>-1)return()=>{};const je=ce.toPromise().then(ne=>{const ie=ne&&ne[ve];return"function"==typeof ie?ie.bind(ne):ie&&ie.then?ie.then(he=>et.run(()=>he)):et.run(()=>ie)});return new Proxy(()=>{},{get:(ne,ie)=>je[ie],apply:(ne,ie,he)=>je.then(K=>{var Y;const ae=K&&K(...he);return!(null===(Y=tt?.spy)||void 0===Y)&&Y.apply&&tt.spy.apply(ve,he,ae),ae})})})}),we=(oe,ce)=>{ce.forEach(et=>{Object.getOwnPropertyNames(et.prototype||et).forEach(tt=>{Object.defineProperty(oe.prototype,tt,Object.getOwnPropertyDescriptor(et.prototype||et,tt))})})};class ye{constructor(ce){return ce}}const Ie=new c.OlP("angularfire2.app.options"),me=new c.OlP("angularfire2.app.name");function Ne(oe,ce,et){const Pe="object"==typeof et&&et||{};Pe.name=Pe.name||"string"==typeof et&&et||"[DEFAULT]";const fe=j.Z.apps.filter(je=>je&&je.name===Pe.name)[0]||ce.runOutsideAngular(()=>j.Z.initializeApp(oe,Pe));try{JSON.stringify(oe)!==JSON.stringify(fe.options)&&q("error",`${fe.name} Firebase App already initialized with different options${gt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ye(fe)}const q=(oe,...ce)=>{(0,c.X6Q)()&&typeof console<"u"&&console[oe](...ce)};function Le(oe,ce,et,tt,Pe){const[,ve,fe]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===oe)||[];if(ve)return function Oe(oe,ce){try{return oe.toString()===ce.toString()}catch{return oe===ce}}(Pe,fe)||(ze("error",`${ce} was already initialized on the ${et} Firebase App with different settings.${be?" You may need to reload as Firebase is not HMR aware.":""}`),ze("warn",{is:Pe,was:fe})),ve;{const je=tt();return globalThis.\u0275AngularfireInstanceCache.push([oe,je,Pe]),je}}const be=!!gt.hot,ze=(oe,...ce)=>{(0,c.X6Q)()&&typeof console<"u"&&console[oe](...ce)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2367:(gt,Se,U)=>{U.d(Se,{$:()=>wl,A:()=>G,B:()=>Oe,G:()=>So,H:()=>ci,J:()=>gs,L:()=>$,M:()=>op,N:()=>ap,P:()=>xy,Q:()=>yd,R:()=>pb,T:()=>vd,U:()=>Oo,V:()=>Fo,W:()=>iy,X:()=>ab,Y:()=>yl,Z:()=>Tt,_:()=>lb,a:()=>Ws,a0:()=>ub,a1:()=>ir,a2:()=>Mu,a3:()=>Td,a4:()=>cy,a5:()=>cb,a6:()=>Kn,a7:()=>Ki,a8:()=>bl,a9:()=>Gs,aA:()=>B,aB:()=>Mi,aC:()=>Un,aD:()=>Kd,aE:()=>ht,aI:()=>va,aL:()=>ma,aa:()=>db,ab:()=>Sd,ac:()=>xd,af:()=>fy,ag:()=>py,ah:()=>pp,ak:()=>ml,al:()=>vy,an:()=>wy,ao:()=>Ld,ap:()=>he,aq:()=>Ae,ar:()=>Qe,as:()=>tt,at:()=>Da,au:()=>Ri,av:()=>bt,aw:()=>Pe,ax:()=>ne,ay:()=>Ol,az:()=>Y,b:()=>Vo,c:()=>Ln,d:()=>Ap,e:()=>Sp,f:()=>Vn,g:()=>xp,h:()=>gi,i:()=>Hu,j:()=>bs,k:()=>nh,l:()=>ys,m:()=>Qi,o:()=>me,r:()=>vs,s:()=>Ai,u:()=>Ip});var c=U(8239),j=U(3854),L=U(8026),le=U(5422),we=U(4762),ye=U(3910);const me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},G={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const Oe=function Q(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},be=function Le(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ze=new j.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ce=new le.Yd("@firebase/auth");function et(w,...m){ce.logLevel<=le.in.ERROR&&ce.error(`Auth (${L.SDK_VERSION}): ${w}`,...m)}function tt(w,...m){throw je(w,...m)}function Pe(w,...m){return je(w,...m)}function ve(w,m,y){const C=Object.assign(Object.assign({},be()),{[m]:y});return new j.LL("auth","Firebase",C).create(m,{appName:w.name})}function fe(w,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&tt(w,"argument-error"),ve(w,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(w,...m){if("string"!=typeof w){const y=m[0],C=[...m.slice(1)];return C[0]&&(C[0].appName=w.name),w._errorFactory.create(y,...C)}return ze.create(w,...m)}function ne(w,m,...y){if(!w)throw je(m,...y)}function ie(w){const m="INTERNAL ASSERTION FAILED: "+w;throw et(m),new Error(m)}function he(w,m){w||ie(m)}const K=new Map;function Y(w){he(w instanceof Function,"Expected a class definition");let m=K.get(w);return m?(he(m instanceof w,"Instance stored in cache mismatched with class"),m):(m=new w,K.set(w,m),m)}function Re(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.href)||""}function xe(){return"http:"===lt()||"https:"===lt()}function lt(){var w;return typeof self<"u"&&(null===(w=self.location)||void 0===w?void 0:w.protocol)||null}class $e{constructor(m,y){this.shortDelay=m,this.longDelay=y,he(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,j.uI)()||(0,j.b$)()}get(){return function Yt(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(xe()||(0,j.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ln(w,m){he(w.emulator,"Emulator should always be set here");const{url:y}=w.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class Hn{static initialize(m,y,C){this.fetchImpl=m,y&&(this.headersImpl=y),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ie("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ie("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ie("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const un={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Qt=new $e(3e4,6e4);function Vt(w,m){return w.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:w.tenantId}):m}function xt(w,m,y,C){return xr.apply(this,arguments)}function xr(){return(xr=(0,c.Z)(function*(w,m,y,C,A={}){return qi(w,A,(0,c.Z)(function*(){let P={},X={};C&&("GET"===m?X=C:P={body:JSON.stringify(C)});const pe=(0,j.xO)(Object.assign({key:w.config.apiKey},X)).slice(1),Ze=yield w._getAdditionalHeaders();return Ze["Content-Type"]="application/json",w.languageCode&&(Ze["X-Firebase-Locale"]=w.languageCode),Hn.fetch()(Gi(w,w.config.apiHost,y,pe),Object.assign({method:m,headers:Ze,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function qi(w,m,y){return js.apply(this,arguments)}function js(){return(js=(0,c.Z)(function*(w,m,y){w._canInitEmulator=!1;const C=Object.assign(Object.assign({},un),m);try{const A=new Fr(w),P=yield Promise.race([y(),A.promise]);A.clearNetworkTimeout();const X=yield P.json();if("needConfirmation"in X)throw Mr(w,"account-exists-with-different-credential",X);if(P.ok&&!("errorMessage"in X))return X;{const pe=P.ok?X.errorMessage:X.error.message,[Ze,ft]=pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ze)throw Mr(w,"credential-already-in-use",X);if("EMAIL_EXISTS"===Ze)throw Mr(w,"email-already-in-use",X);if("USER_DISABLED"===Ze)throw Mr(w,"user-disabled",X);const Ft=C[Ze]||Ze.toLowerCase().replace(/[_\s]+/g,"-");if(ft)throw ve(w,Ft,ft);tt(w,Ft)}}catch(A){if(A instanceof j.ZR)throw A;tt(w,"network-request-failed")}})).apply(this,arguments)}function Fn(w,m,y,C){return fs.apply(this,arguments)}function fs(){return(fs=(0,c.Z)(function*(w,m,y,C,A={}){const P=yield xt(w,m,y,C,A);return"mfaPendingCredential"in P&&tt(w,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Gi(w,m,y,C){const A=`${m}${y}?${C}`;return w.config.emulator?ln(w.config,A):`${w.config.apiScheme}://${A}`}class Fr{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,C)=>{this.timer=setTimeout(()=>C(Pe(this.auth,"network-request-failed")),Qt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Mr(w,m,y){const C={appName:w.name};y.email&&(C.email=y.email),y.phoneNumber&&(C.phoneNumber=y.phoneNumber);const A=Pe(w,m,C);return A.customData._tokenResponse=y,A}function $s(){return($s=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function Ke(w,m){return dr.apply(this,arguments)}function dr(){return(dr=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function nr(w,m){return _n.apply(this,arguments)}function _n(){return(_n=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function ei(w){if(w)try{const m=new Date(Number(w));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function Cn(){return(Cn=(0,c.Z)(function*(w,m=!1){const y=(0,j.m9)(w),C=yield y.getIdToken(m),A=ut(C);ne(A&&A.exp&&A.auth_time&&A.iat,y.auth,"internal-error");const P="object"==typeof A.firebase?A.firebase:void 0,X=P?.sign_in_provider;return{claims:A,token:C,authTime:ei(hn(A.auth_time)),issuedAtTime:ei(hn(A.iat)),expirationTime:ei(hn(A.exp)),signInProvider:X||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function hn(w){return 1e3*Number(w)}function ut(w){var m;const[y,C,A]=w.split(".");if(void 0===y||void 0===C||void 0===A)return et("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,j.tV)(C);return P?JSON.parse(P):(et("Failed to decode base64 JWT payload"),null)}catch(P){return et("Caught error parsing JWT payload as JSON",null===(m=P)||void 0===m?void 0:m.toString()),null}}function St(w,m){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(w,m,y=!1){if(y)return m;try{return yield m}catch(C){throw C instanceof j.ZR&&rr(C)&&w.auth.currentUser===w&&(yield w.auth.signOut()),C}})).apply(this,arguments)}function rr({code:w}){return"auth/user-disabled"===w||"auth/user-token-expired"===w}class Ur{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const A=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const C=this.getInterval(m);this.timerId=setTimeout((0,c.Z)(function*(){yield y.iteration()}),C)}iteration(){var m=this;return(0,c.Z)(function*(){var y;try{yield m.user.getIdToken(!0)}catch(C){return void("auth/network-request-failed"===(null===(y=C)||void 0===y?void 0:y.code)&&m.schedule(!0))}m.schedule()})()}}class Et{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=ei(this.lastLoginAt),this.creationTime=ei(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Rr(w){return At.apply(this,arguments)}function At(){return(At=(0,c.Z)(function*(w){var m;const y=w.auth,C=yield w.getIdToken(),A=yield St(w,nr(y,{idToken:C}));ne(A?.users.length,y,"internal-error");const P=A.users[0];w._notifyReloadListener(P);const X=null!==(m=P.providerUserInfo)&&void 0!==m&&m.length?Mn(P.providerUserInfo):[],pe=vr(w.providerData,X),Ft=!!w.isAnonymous&&!(w.email&&P.passwordHash||pe?.length),tn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:pe,metadata:new Et(P.createdAt,P.lastLoginAt),isAnonymous:Ft};Object.assign(w,tn)})).apply(this,arguments)}function Ht(){return(Ht=(0,c.Z)(function*(w){const m=(0,j.m9)(w);yield Rr(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function vr(w,m){return[...w.filter(C=>!m.some(A=>A.providerId===C.providerId)),...m]}function Mn(w){return w.map(m=>{var{providerId:y}=m,C=(0,we._T)(m,["providerId"]);return{providerId:y,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}function _e(){return(_e=(0,c.Z)(function*(w,m){const y=yield qi(w,{},(0,c.Z)(function*(){const C=(0,j.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:A,apiKey:P}=w.config,X=Gi(w,A,"/v1/token",`key=${P}`),pe=yield w._getAdditionalHeaders();return pe["Content-Type"]="application/x-www-form-urlencoded",Hn.fetch()(X,{method:"POST",headers:pe,body:C})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class Ye{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){ne(m.idToken,"internal-error"),ne(typeof m.idToken<"u","internal-error"),ne(typeof m.refreshToken<"u","internal-error");const y="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function ct(w){const m=ut(w);return ne(m,"internal-error"),ne(typeof m.exp<"u","internal-error"),ne(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var C=this;return(0,c.Z)(function*(){return ne(!C.accessToken||C.refreshToken,m,"user-token-expired"),y||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(m,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var C=this;return(0,c.Z)(function*(){const{accessToken:A,refreshToken:P,expiresIn:X}=yield function We(w,m){return _e.apply(this,arguments)}(m,y);C.updateTokensAndExpiration(A,P,Number(X))})()}updateTokensAndExpiration(m,y,C){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(m,y){const{refreshToken:C,accessToken:A,expirationTime:P}=y,X=new Ye;return C&&(ne("string"==typeof C,"internal-error",{appName:m}),X.refreshToken=C),A&&(ne("string"==typeof A,"internal-error",{appName:m}),X.accessToken=A),P&&(ne("number"==typeof P,"internal-error",{appName:m}),X.expirationTime=P),X}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new Ye,this.toJSON())}_performRefresh(){return ie("not implemented")}}function mt(w,m){ne("string"==typeof w||typeof w>"u","internal-error",{appName:m})}class yt{constructor(m){var{uid:y,auth:C,stsTokenManager:A}=m,P=(0,we._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ur(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=C,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Et(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,c.Z)(function*(){const C=yield St(y,y.stsTokenManager.getToken(y.auth,m));return ne(C,y.auth,"internal-error"),y.accessToken!==C&&(y.accessToken=C,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),C})()}getIdTokenResult(m){return function yn(w){return Cn.apply(this,arguments)}(this,m)}reload(){return function Ci(w){return Ht.apply(this,arguments)}(this)}_assign(m){this!==m&&(ne(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){return new yt(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(m){ne(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var C=this;return(0,c.Z)(function*(){let A=!1;m.idToken&&m.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(m),A=!0),y&&(yield Rr(C)),yield C.auth._persistUserIfCurrent(C),A&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var m=this;return(0,c.Z)(function*(){const y=yield m.getIdToken();return yield St(m,function ps(w,m){return $s.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var C,A,P,X,pe,Ze,ft,Ft;const tn=null!==(C=y.displayName)&&void 0!==C?C:void 0,Er=null!==(A=y.email)&&void 0!==A?A:void 0,_i=null!==(P=y.phoneNumber)&&void 0!==P?P:void 0,Qu=null!==(X=y.photoURL)&&void 0!==X?X:void 0,Ju=null!==(pe=y.tenantId)&&void 0!==pe?pe:void 0,Xu=null!==(Ze=y._redirectEventId)&&void 0!==Ze?Ze:void 0,Jo=null!==(ft=y.createdAt)&&void 0!==ft?ft:void 0,Fp=null!==(Ft=y.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:ah,emailVerified:ec,isAnonymous:Vl,providerData:Bl,stsTokenManager:to}=y;ne(ah&&to,m,"internal-error");const Oy=Ye.fromJSON(this.name,to);ne("string"==typeof ah,m,"internal-error"),mt(tn,m.name),mt(Er,m.name),ne("boolean"==typeof ec,m,"internal-error"),ne("boolean"==typeof Vl,m,"internal-error"),mt(_i,m.name),mt(Qu,m.name),mt(Ju,m.name),mt(Xu,m.name),mt(Jo,m.name),mt(Fp,m.name);const wn=new yt({uid:ah,auth:m,email:Er,emailVerified:ec,displayName:tn,isAnonymous:Vl,photoURL:Qu,phoneNumber:_i,tenantId:Ju,stsTokenManager:Oy,createdAt:Jo,lastLoginAt:Fp});return Bl&&Array.isArray(Bl)&&(wn.providerData=Bl.map(Fy=>Object.assign({},Fy))),Xu&&(wn._redirectEventId=Xu),wn}static _fromIdTokenResponse(m,y,C=!1){return(0,c.Z)(function*(){const A=new Ye;A.updateFromServerResponse(y);const P=new yt({uid:y.localId,auth:m,stsTokenManager:A,isAnonymous:C});return yield Rr(P),P})()}}const $=(()=>{class w{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,c.Z)(function*(){return!0})()}_set(y,C){var A=this;return(0,c.Z)(function*(){A.storage[y]=C})()}_get(y){var C=this;return(0,c.Z)(function*(){const A=C.storage[y];return void 0===A?null:A})()}_remove(y){var C=this;return(0,c.Z)(function*(){delete C.storage[y]})()}_addListener(y,C){}_removeListener(y,C){}}return w.type="NONE",w})();function B(w,m,y){return`firebase:${w}:${m}:${y}`}class Z{constructor(m,y,C){this.persistence=m,this.auth=y,this.userKey=C;const{config:A,name:P}=this.auth;this.fullUserKey=B(this.userKey,A.apiKey,P),this.fullPersistenceKey=B("persistence",A.apiKey,P),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,c.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?yt._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,c.Z)(function*(){if(y.persistence===m)return;const C=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,C?y.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,C="authUser"){return(0,c.Z)(function*(){if(!y.length)return new Z(Y($),m,C);const A=(yield Promise.all(y.map(function(){var ft=(0,c.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return ft.apply(this,arguments)}}()))).filter(ft=>ft);let P=A[0]||Y($);const X=B(C,m.config.apiKey,m.name);let pe=null;for(const ft of y)try{const Ft=yield ft._get(X);if(Ft){const tn=yt._fromJSON(m,Ft);ft!==P&&(pe=tn),P=ft;break}}catch{}const Ze=A.filter(ft=>ft._shouldAllowMigration);return P._shouldAllowMigration&&Ze.length?(P=Ze[0],pe&&(yield P._set(X,pe.toJSON())),yield Promise.all(y.map(function(){var ft=(0,c.Z)(function*(Ft){if(Ft!==P)try{yield Ft._remove(X)}catch{}});return function(Ft){return ft.apply(this,arguments)}}())),new Z(P,m,C)):new Z(P,m,C)})()}}function V(w){const m=w.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(Te(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(M(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(nt(m))return"Blackberry";if(ge(m))return"Webos";if(F(m))return"Safari";if((m.includes("chrome/")||te(m))&&!m.includes("edge/"))return"Chrome";if(Qe(m))return"Android";{const C=w.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function M(w=(0,j.z$)()){return/firefox\//i.test(w)}function F(w=(0,j.z$)()){const m=w.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function te(w=(0,j.z$)()){return/crios\//i.test(w)}function Te(w=(0,j.z$)()){return/iemobile/i.test(w)}function Qe(w=(0,j.z$)()){return/android/i.test(w)}function nt(w=(0,j.z$)()){return/blackberry/i.test(w)}function ge(w=(0,j.z$)()){return/webos/i.test(w)}function Ae(w=(0,j.z$)()){return/iphone|ipad|ipod/i.test(w)||/macintosh/i.test(w)&&/mobile/i.test(w)}function bt(w=(0,j.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(w)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(w)}function on(w=(0,j.z$)()){return Ae(w)||Qe(w)||ge(w)||nt(w)||/windows phone/i.test(w)||Te(w)}function gn(w,m=[]){let y;switch(w){case"Browser":y=V((0,j.z$)());break;case"Worker":y=`${V((0,j.z$)())}-${w}`;break;default:y=w}const C=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${L.SDK_VERSION}/${C}`}class ul{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const C=P=>new Promise((X,pe)=>{try{X(m(P))}catch(Ze){pe(Ze)}});C.onAbort=y,this.queue.push(C);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,c.Z)(function*(){var C;if(y.auth.currentUser===m)return;const A=[];try{for(const P of y.queue)yield P(m),P.onAbort&&A.push(P.onAbort)}catch(P){A.reverse();for(const X of A)try{X()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:null===(C=P)||void 0===C?void 0:C.message})}})()}}class cl{constructor(m,y,C){this.app=m,this.heartbeatServiceProvider=y,this.config=C,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Do(this),this.idTokenSubscription=new Do(this),this.beforeStateQueue=new ul(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ze,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=C.sdkClientVersion}_initializeWithPersistence(m,y){var C=this;return y&&(this._popupRedirectResolver=Y(y)),this._initializationPromise=this.queue((0,c.Z)(function*(){var A,P;if(!C._deleted&&(C.persistenceManager=yield Z.create(C,m),!C._deleted)){if(null!==(A=C._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(y),C.lastNotifiedUid=(null===(P=C.currentUser)||void 0===P?void 0:P.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,c.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,c.Z)(function*(){var C;const A=yield y.assertedPersistence.getCurrentUser();let P=A,X=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const pe=null===(C=y.redirectUser)||void 0===C?void 0:C._redirectEventId,Ze=P?._redirectEventId,ft=yield y.tryRedirectSignIn(m);(!pe||pe===Ze)&&ft?.user&&(P=ft.user,X=!0)}if(!P)return y.directlySetCurrentUser(null);if(!P._redirectEventId){if(X)try{yield y.beforeStateQueue.runMiddleware(P)}catch(pe){P=A,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(pe))}return P?y.reloadAndSetCurrentUserOrClear(P):y.directlySetCurrentUser(null)}return ne(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===P._redirectEventId?y.directlySetCurrentUser(P):y.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(m){var y=this;return(0,c.Z)(function*(){let C=null;try{C=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch{yield y._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,c.Z)(function*(){var C;try{yield Rr(m)}catch(A){if("auth/network-request-failed"!==(null===(C=A)||void 0===C?void 0:C.code))return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function Ut(){if(typeof navigator>"u")return null;const w=navigator;return w.languages&&w.languages[0]||w.language||null}()}_delete(){var m=this;return(0,c.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,c.Z)(function*(){const C=m?(0,j.m9)(m):null;return C&&ne(C.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(C&&C._clone(y))})()}_updateCurrentUser(m,y=!1){var C=this;return(0,c.Z)(function*(){if(!C._deleted)return m&&ne(C.tenantId===m.tenantId,C,"tenant-id-mismatch"),y||(yield C.beforeStateQueue.runMiddleware(m)),C.queue((0,c.Z)(function*(){yield C.directlySetCurrentUser(m),C.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,c.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,c.Z)(function*(){yield y.assertedPersistence.setPersistence(Y(m))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new j.LL("auth","Firebase",m())}onAuthStateChanged(m,y,C){return this.registerStateListener(this.authStateSubscription,m,y,C)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,C){return this.registerStateListener(this.idTokenSubscription,m,y,C)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var C=this;return(0,c.Z)(function*(){const A=yield C.getOrInitRedirectPersistenceManager(y);return null===m?A.removeCurrentUser():A.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,c.Z)(function*(){if(!y.redirectPersistenceManager){const C=m&&Y(m)||y._popupRedirectResolver;ne(C,y,"argument-error"),y.redirectPersistenceManager=yield Z.create(y,[Y(C._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,c.Z)(function*(){var C,A;return y._isInitialized&&(yield y.queue((0,c.Z)(function*(){}))),(null===(C=y._currentUser)||void 0===C?void 0:C._redirectEventId)===m?y._currentUser:(null===(A=y.redirectUser)||void 0===A?void 0:A._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,c.Z)(function*(){if(m===y.currentUser)return y.queue((0,c.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,C,A){if(this._deleted)return()=>{};const P="function"==typeof y?y:y.next.bind(y),X=this._isInitialized?Promise.resolve():this._initializationPromise;return ne(X,this,"internal-error"),X.then(()=>P(this.currentUser)),"function"==typeof y?m.addObserver(y,C,A):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,c.Z)(function*(){y.currentUser&&y.currentUser!==m&&y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh(),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return ne(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=gn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,c.Z)(function*(){var y;const C={"X-Client-Version":m.clientVersion};m.app.options.appId&&(C["X-Firebase-gmpid"]=m.app.options.appId);const A=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return A&&(C["X-Firebase-Client"]=A),C})()}}function ht(w){return(0,j.m9)(w)}class Do{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,j.ne)(y=>this.observer=y)}get next(){return ne(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function So(w,m,y){const C=ht(w);ne(C._canInitEmulator,C,"emulator-config-failed"),ne(/^https?:\/\//.test(m),C,"invalid-emulator-scheme");const A=!!y?.disableWarnings,P=Cu(m),{host:X,port:pe}=function Ao(w){const m=Cu(w),y=/(\/\/)?([^?#/]+)/.exec(w.substr(m.length));if(!y)return{host:"",port:null};const C=y[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(C);if(A){const P=A[1];return{host:P,port:zn(C.substr(P.length+1))}}{const[P,X]=C.split(":");return{host:P,port:zn(X)}}}(m);C.config.emulator={url:`${P}//${X}${null===pe?"":`:${pe}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:X,port:pe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function xo(){function w(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",w):w())}()}function Cu(w){const m=w.indexOf(":");return m<0?"":w.substr(0,m+1)}function zn(w){if(!w)return null;const m=Number(w);return isNaN(m)?null:m}class ci{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return ie("not implemented")}_getIdTokenResponse(m){return ie("not implemented")}_linkToIdToken(m,y){return ie("not implemented")}_getReauthenticationResolver(m){return ie("not implemented")}}function di(w,m){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:resetPassword",Vt(w,m))})).apply(this,arguments)}function fd(w,m){return cn.apply(this,arguments)}function cn(){return(cn=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function ny(w,m){return Iu.apply(this,arguments)}function Iu(){return(Iu=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:update",Vt(w,m))})).apply(this,arguments)}function hl(){return(hl=(0,c.Z)(function*(w,m){return Fn(w,"POST","/v1/accounts:signInWithPassword",Vt(w,m))})).apply(this,arguments)}function Ii(w,m){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:sendOobCode",Vt(w,m))})).apply(this,arguments)}function No(w,m){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,c.Z)(function*(w,m){return Ii(w,m)})).apply(this,arguments)}function ry(w,m){return hr.apply(this,arguments)}function hr(){return(hr=(0,c.Z)(function*(w,m){return Ii(w,m)})).apply(this,arguments)}function ti(w,m){return Po.apply(this,arguments)}function Po(){return(Po=(0,c.Z)(function*(w,m){return Ii(w,m)})).apply(this,arguments)}function Tu(w,m){return fa.apply(this,arguments)}function fa(){return(fa=(0,c.Z)(function*(w,m){return Ii(w,m)})).apply(this,arguments)}function Du(){return(Du=(0,c.Z)(function*(w,m){return Fn(w,"POST","/v1/accounts:signInWithEmailLink",Vt(w,m))})).apply(this,arguments)}function pd(){return(pd=(0,c.Z)(function*(w,m){return Fn(w,"POST","/v1/accounts:signInWithEmailLink",Vt(w,m))})).apply(this,arguments)}class fl extends ci{constructor(m,y,C,A=null){super("password",C),this._email=m,this._password=y,this._tenantId=A}static _fromEmailAndPassword(m,y){return new fl(m,y,"password")}static _fromEmailAndCode(m,y,C=null){return new fl(m,y,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,c.Z)(function*(){switch(y.signInMethod){case"password":return function dl(w,m){return hl.apply(this,arguments)}(m,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function Zi(w,m){return Du.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:tt(m,"internal-error")}})()}_linkToIdToken(m,y){var C=this;return(0,c.Z)(function*(){switch(C.signInMethod){case"password":return fd(m,{idToken:y,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function tb(w,m){return pd.apply(this,arguments)}(m,{idToken:y,email:C._email,oobCode:C._password});default:tt(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function ko(w,m){return hi.apply(this,arguments)}function hi(){return(hi=(0,c.Z)(function*(w,m){return Fn(w,"POST","/v1/accounts:signInWithIdp",Vt(w,m))})).apply(this,arguments)}class gs extends ci{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new gs(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):tt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:A}=y,P=(0,we._T)(y,["providerId","signInMethod"]);if(!C||!A)return null;const X=new gs(C,A);return X.idToken=P.idToken||void 0,X.accessToken=P.accessToken||void 0,X.secret=P.secret,X.nonce=P.nonce,X.pendingToken=P.pendingToken||null,X}_getIdTokenResponse(m){return ko(m,this.buildRequest())}_linkToIdToken(m,y){const C=this.buildRequest();return C.idToken=y,ko(m,C)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,ko(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,j.xO)(y)}return m}}function rb(w,m){return np.apply(this,arguments)}function np(){return(np=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:sendVerificationCode",Vt(w,m))})).apply(this,arguments)}function rp(){return(rp=(0,c.Z)(function*(w,m){return Fn(w,"POST","/v1/accounts:signInWithPhoneNumber",Vt(w,m))})).apply(this,arguments)}function ip(){return(ip=(0,c.Z)(function*(w,m){const y=yield Fn(w,"POST","/v1/accounts:signInWithPhoneNumber",Vt(w,m));if(y.temporaryProof)throw Mr(w,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const sb={USER_NOT_FOUND:"user-not-found"};function md(){return(md=(0,c.Z)(function*(w,m){return Fn(w,"POST","/v1/accounts:signInWithPhoneNumber",Vt(w,Object.assign(Object.assign({},m),{operation:"REAUTH"})),sb)})).apply(this,arguments)}class pa extends ci{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new pa({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new pa({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function gd(w,m){return rp.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function ib(w,m){return ip.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function ob(w,m){return md.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:C,verificationCode:A}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:C,code:A}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:C,phoneNumber:A,temporaryProof:P}=m;return C||y||A||P?new pa({verificationId:y,verificationCode:C,phoneNumber:A,temporaryProof:P}):null}}class Su{constructor(m){var y,C,A,P,X,pe;const Ze=(0,j.zd)((0,j.pd)(m)),ft=null!==(y=Ze.apiKey)&&void 0!==y?y:null,Ft=null!==(C=Ze.oobCode)&&void 0!==C?C:null,tn=function sp(w){switch(w){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Ze.mode)&&void 0!==A?A:null);ne(ft&&Ft&&tn,"argument-error"),this.apiKey=ft,this.operation=tn,this.code=Ft,this.continueUrl=null!==(P=Ze.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(X=Ze.languageCode)&&void 0!==X?X:null,this.tenantId=null!==(pe=Ze.tenantId)&&void 0!==pe?pe:null}static parseLink(m){const y=function _d(w){const m=(0,j.zd)((0,j.pd)(w)).link,y=m?(0,j.zd)((0,j.pd)(m)).deep_link_id:null,C=(0,j.zd)((0,j.pd)(w)).deep_link_id;return(C?(0,j.zd)((0,j.pd)(C)).link:null)||C||y||m||w}(m);try{return new Su(y)}catch{return null}}}let op=(()=>{class w{constructor(){this.providerId=w.PROVIDER_ID}static credential(y,C){return fl._fromEmailAndPassword(y,C)}static credentialWithLink(y,C){const A=Su.parseLink(C);return ne(A,"argument-error"),fl._fromEmailAndCode(y,A.code,A.tenantId)}}return w.PROVIDER_ID="password",w.EMAIL_PASSWORD_SIGN_IN_METHOD="password",w.EMAIL_LINK_SIGN_IN_METHOD="emailLink",w})();class wr{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class ga extends wr{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Oo extends ga{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return ne("providerId"in y&&"signInMethod"in y,"argument-error"),gs._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return ne(m.idToken||m.accessToken,"argument-error"),gs._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Oo.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Oo.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:C,oauthTokenSecret:A,pendingToken:P,nonce:X,providerId:pe}=m;if(!C&&!A&&!y&&!P||!pe)return null;try{return new Oo(pe)._credential({idToken:y,accessToken:C,nonce:X,pendingToken:P})}catch{return null}}}let ap=(()=>{class w extends ga{constructor(){super("facebook.com")}static credential(y){return gs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.FACEBOOK_SIGN_IN_METHOD="facebook.com",w.PROVIDER_ID="facebook.com",w})(),yd=(()=>{class w extends ga{constructor(){super("google.com"),this.addScope("profile")}static credential(y,C){return gs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:C})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:C,oauthAccessToken:A}=y;if(!C&&!A)return null;try{return w.credential(C,A)}catch{return null}}}return w.GOOGLE_SIGN_IN_METHOD="google.com",w.PROVIDER_ID="google.com",w})(),vd=(()=>{class w extends ga{constructor(){super("github.com")}static credential(y){return gs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return w.credential(y.oauthAccessToken)}catch{return null}}}return w.GITHUB_SIGN_IN_METHOD="github.com",w.PROVIDER_ID="github.com",w})();class ma extends ci{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return ko(m,this.buildRequest())}_linkToIdToken(m,y){const C=this.buildRequest();return C.idToken=y,ko(m,C)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,ko(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:C,signInMethod:A,pendingToken:P}=y;return C&&A&&P&&C===A?new ma(C,P):null}static _create(m,y){return new ma(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Fo extends wr{constructor(m){ne(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return Fo.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return Fo.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=ma.fromJSON(m);return ne(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:C}=m;if(!y||!C)return null;try{return ma._create(C,y)}catch{return null}}}let iy=(()=>{class w extends ga{constructor(){super("twitter.com")}static credential(y,C){return gs._fromParams({providerId:w.PROVIDER_ID,signInMethod:w.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:C})}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:C,oauthTokenSecret:A}=y;if(!C||!A)return null;try{return w.credential(C,A)}catch{return null}}}return w.TWITTER_SIGN_IN_METHOD="twitter.com",w.PROVIDER_ID="twitter.com",w})();function ni(w,m){return pl.apply(this,arguments)}function pl(){return(pl=(0,c.Z)(function*(w,m){return Fn(w,"POST","/v1/accounts:signUp",Vt(w,m))})).apply(this,arguments)}class Ti{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,C,A=!1){return(0,c.Z)(function*(){const P=yield yt._fromIdTokenResponse(m,C,A),X=gl(C);return new Ti({user:P,providerId:X,_tokenResponse:C,operationType:y})})()}static _forOperation(m,y,C){return(0,c.Z)(function*(){yield m._updateTokensIfNecessary(C,!0);const A=gl(C);return new Ti({user:m,providerId:A,_tokenResponse:C,operationType:y})})()}}function gl(w){return w.providerId?w.providerId:"phoneNumber"in w?"phone":null}function ab(w){return sy.apply(this,arguments)}function sy(){return(sy=(0,c.Z)(function*(w){var m;const y=ht(w);if(yield y._initializationPromise,null!==(m=y.currentUser)&&void 0!==m&&m.isAnonymous)return new Ti({user:y.currentUser,providerId:null,operationType:"signIn"});const C=yield ni(y,{returnSecureToken:!0}),A=yield Ti._fromIdTokenResponse(y,"signIn",C,!0);return yield y._updateCurrentUser(A.user),A})).apply(this,arguments)}class Nn extends j.ZR{constructor(m,y,C,A){var P;super(y.code,y.message),this.operationType=C,this.user=A,Object.setPrototypeOf(this,Nn.prototype),this.customData={appName:m.name,tenantId:null!==(P=m.tenantId)&&void 0!==P?P:void 0,_serverResponse:y.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(m,y,C,A){return new Nn(m,y,C,A)}}function cp(w,m,y,C){return("reauthenticate"===m?y._getReauthenticationResolver(w):y._getIdTokenResponse(w)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Nn._fromErrorAndOperation(w,P,m,C):P})}function oy(w){return new Set(w.map(({providerId:m})=>m).filter(m=>!!m))}function ml(w,m){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,c.Z)(function*(w,m){const y=(0,j.m9)(w);yield Hs(!0,y,m);const{providerUserInfo:C}=yield Ke(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),A=oy(C||[]);return y.providerData=y.providerData.filter(P=>A.has(P.providerId)),A.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function dp(w,m){return _l.apply(this,arguments)}function _l(){return(_l=(0,c.Z)(function*(w,m,y=!1){const C=yield St(w,m._linkToIdToken(w.auth,yield w.getIdToken()),y);return Ti._forOperation(w,"link",C)})).apply(this,arguments)}function Hs(w,m,y){return en.apply(this,arguments)}function en(){return(en=(0,c.Z)(function*(w,m,y){yield Rr(m);const A=!1===w?"provider-already-linked":"no-such-provider";ne(oy(m.providerData).has(y)===w,m.auth,A)})).apply(this,arguments)}function ay(w,m){return qs.apply(this,arguments)}function qs(){return(qs=(0,c.Z)(function*(w,m,y=!1){var C;const{auth:A}=w,P="reauthenticate";try{const X=yield St(w,cp(A,P,m,w),y);ne(X.idToken,A,"internal-error");const pe=ut(X.idToken);ne(pe,A,"internal-error");const{sub:Ze}=pe;return ne(w.uid===Ze,A,"user-mismatch"),Ti._forOperation(w,P,X)}catch(X){throw"auth/user-not-found"===(null===(C=X)||void 0===C?void 0:C.code)&&tt(A,"user-mismatch"),X}})).apply(this,arguments)}function ly(w,m){return zi.apply(this,arguments)}function zi(){return(zi=(0,c.Z)(function*(w,m,y=!1){const C="signIn",A=yield cp(w,C,m),P=yield Ti._fromIdTokenResponse(w,C,A);return y||(yield w._updateCurrentUser(P.user)),P})).apply(this,arguments)}function yl(w,m){return vl.apply(this,arguments)}function vl(){return(vl=(0,c.Z)(function*(w,m){return ly(ht(w),m)})).apply(this,arguments)}function Tt(w,m){return wd.apply(this,arguments)}function wd(){return(wd=(0,c.Z)(function*(w,m){const y=(0,j.m9)(w);return yield Hs(!1,y,m.providerId),dp(y,m)})).apply(this,arguments)}function lb(w,m){return Ed.apply(this,arguments)}function Ed(){return(Ed=(0,c.Z)(function*(w,m){return ay((0,j.m9)(w),m)})).apply(this,arguments)}function uy(w,m){return bd.apply(this,arguments)}function bd(){return(bd=(0,c.Z)(function*(w,m){return Fn(w,"POST","/v1/accounts:signInWithCustomToken",Vt(w,m))})).apply(this,arguments)}function wl(w,m){return Cd.apply(this,arguments)}function Cd(){return(Cd=(0,c.Z)(function*(w,m){const y=ht(w),C=yield uy(y,{token:m,returnSecureToken:!0}),A=yield Ti._fromIdTokenResponse(y,"signIn",C);return yield y._updateCurrentUser(A.user),A})).apply(this,arguments)}class Au{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?Ce._fromServerResponse(m,y):tt(m,"internal-error")}}class Ce extends Au{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new Ce(y)}}function $t(w,m,y){var C;ne((null===(C=y.url)||void 0===C?void 0:C.length)>0,w,"invalid-continue-uri"),ne(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,w,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(ne(y.iOS.bundleId.length>0,w,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(ne(y.android.packageName.length>0,w,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function ub(w,m,y){return Id.apply(this,arguments)}function Id(){return(Id=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w),A={requestType:"PASSWORD_RESET",email:m};y&&$t(C,A,y),yield ry(C,A)})).apply(this,arguments)}function ir(w,m,y){return xu.apply(this,arguments)}function xu(){return(xu=(0,c.Z)(function*(w,m,y){yield di((0,j.m9)(w),{oobCode:m,newPassword:y})})).apply(this,arguments)}function Mu(w,m){return fi.apply(this,arguments)}function fi(){return(fi=(0,c.Z)(function*(w,m){yield ny((0,j.m9)(w),{oobCode:m})})).apply(this,arguments)}function Td(w,m){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,c.Z)(function*(w,m){const y=(0,j.m9)(w),C=yield di(y,{oobCode:m}),A=C.requestType;switch(ne(A,y,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ne(C.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ne(C.mfaInfo,y,"internal-error");default:ne(C.email,y,"internal-error")}let P=null;return C.mfaInfo&&(P=Au._fromServerResponse(ht(y),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:P},operation:A}})).apply(this,arguments)}function cy(w,m){return Dd.apply(this,arguments)}function Dd(){return(Dd=(0,c.Z)(function*(w,m){const{data:y}=yield Td((0,j.m9)(w),m);return y.email})).apply(this,arguments)}function cb(w,m,y){return _a.apply(this,arguments)}function _a(){return(_a=(0,c.Z)(function*(w,m,y){const C=ht(w),A=yield ni(C,{returnSecureToken:!0,email:m,password:y}),P=yield Ti._fromIdTokenResponse(C,"signIn",A);return yield C._updateCurrentUser(P.user),P})).apply(this,arguments)}function Kn(w,m,y){return yl((0,j.m9)(w),op.credential(m,y))}function Ki(w,m,y){return El.apply(this,arguments)}function El(){return(El=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w),A={requestType:"EMAIL_SIGNIN",email:m};ne(y.handleCodeInApp,C,"argument-error"),y&&$t(C,A,y),yield ti(C,A)})).apply(this,arguments)}function bl(w,m){return"EMAIL_SIGNIN"===Su.parseLink(m)?.operation}function Gs(w,m,y){return hp.apply(this,arguments)}function hp(){return(hp=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w),A=op.credentialWithLink(m,y||Re());return ne(A._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),yl(C,A)})).apply(this,arguments)}function dy(w,m){return fp.apply(this,arguments)}function fp(){return(fp=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:createAuthUri",Vt(w,m))})).apply(this,arguments)}function db(w,m){return Nu.apply(this,arguments)}function Nu(){return(Nu=(0,c.Z)(function*(w,m){const C={identifier:m,continueUri:xe()?Re():"http://localhost"},{signinMethods:A}=yield dy((0,j.m9)(w),C);return A||[]})).apply(this,arguments)}function Sd(w,m){return Ad.apply(this,arguments)}function Ad(){return(Ad=(0,c.Z)(function*(w,m){const y=(0,j.m9)(w),A={requestType:"VERIFY_EMAIL",idToken:yield w.getIdToken()};m&&$t(y.auth,A,m);const{email:P}=yield No(y.auth,A);P!==w.email&&(yield w.reload())})).apply(this,arguments)}function xd(w,m,y){return Md.apply(this,arguments)}function Md(){return(Md=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield w.getIdToken(),newEmail:m};y&&$t(C.auth,P,y);const{email:X}=yield Tu(C.auth,P);X!==w.email&&(yield w.reload())})).apply(this,arguments)}function hy(w,m){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,c.Z)(function*(w,m){return xt(w,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function fy(w,m){return Rd.apply(this,arguments)}function Rd(){return(Rd=(0,c.Z)(function*(w,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const C=(0,j.m9)(w),P={idToken:yield C.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},X=yield St(C,hy(C.auth,P));C.displayName=X.displayName||null,C.photoURL=X.photoUrl||null;const pe=C.providerData.find(({providerId:Ze})=>"password"===Ze);pe&&(pe.displayName=C.displayName,pe.photoURL=C.photoURL),yield C._updateTokensIfNecessary(X)})).apply(this,arguments)}function py(w,m){return ya((0,j.m9)(w),m,null)}function pp(w,m){return ya((0,j.m9)(w),null,m)}function ya(w,m,y){return Lo.apply(this,arguments)}function Lo(){return(Lo=(0,c.Z)(function*(w,m,y){const{auth:C}=w,P={idToken:yield w.getIdToken(),returnSecureToken:!0};m&&(P.email=m),y&&(P.password=y);const X=yield St(w,fd(C,P));yield w._updateTokensIfNecessary(X,!0)})).apply(this,arguments)}class In{constructor(m,y,C={}){this.isNewUser=m,this.providerId=y,this.profile=C}}class ms extends In{constructor(m,y,C,A){super(m,y,C),this.username=A}}class Tn extends In{constructor(m,y){super(m,"facebook.com",y)}}class my extends ms{constructor(m,y){super(m,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class _y extends In{constructor(m,y){super(m,"google.com",y)}}class yy extends ms{constructor(m,y,C){super(m,"twitter.com",y,C)}}function vy(w){const{user:m,_tokenResponse:y}=w;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function gy(w){var m,y;if(!w)return null;const{providerId:C}=w,A=w.rawUserInfo?JSON.parse(w.rawUserInfo):{},P=w.isNewUser||"identitytoolkit#SignupNewUserResponse"===w.kind;if(!C&&w?.idToken){const X=null===(y=null===(m=ut(w.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(X)return new In(P,"anonymous"!==X&&"custom"!==X?X:null)}if(!C)return null;switch(C){case"facebook.com":return new Tn(P,A);case"github.com":return new my(P,A);case"google.com":return new _y(P,A);case"twitter.com":return new yy(P,A,w.screenName||null);case"custom":case"anonymous":return new In(P,null);default:return new In(P,C,A)}}(y)}class pi{constructor(m,y,C){this.type=m,this.credential=y,this.auth=C}static _fromIdtoken(m,y){return new pi("enroll",m,y)}static _fromMfaPendingCredential(m){return new pi("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,C;if(m?.multiFactorSession){if(null!==(y=m.multiFactorSession)&&void 0!==y&&y.pendingCredential)return pi._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(C=m.multiFactorSession)&&void 0!==C&&C.idToken)return pi._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Od{constructor(m,y,C){this.session=m,this.hints=y,this.signInResolver=C}static _fromError(m,y){const C=ht(m),A=y.customData._serverResponse,P=(A.mfaInfo||[]).map(pe=>Au._fromServerResponse(C,pe));ne(A.mfaPendingCredential,C,"internal-error");const X=pi._fromMfaPendingCredential(A.mfaPendingCredential);return new Od(X,P,function(){var pe=(0,c.Z)(function*(Ze){const ft=yield Ze._process(C,X);delete A.mfaInfo,delete A.mfaPendingCredential;const Ft=Object.assign(Object.assign({},A),{idToken:ft.idToken,refreshToken:ft.refreshToken});switch(y.operationType){case"signIn":const tn=yield Ti._fromIdTokenResponse(C,y.operationType,Ft);return yield C._updateCurrentUser(tn.user),tn;case"reauthenticate":return ne(y.user,C,"internal-error"),Ti._forOperation(y.user,y.operationType,Ft);default:tt(C,"internal-error")}});return function(Ze){return pe.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,c.Z)(function*(){return y.signInResolver(m)})()}}function wy(w,m){var y;const C=(0,j.m9)(w),A=m;return ne(m.customData.operationType,C,"argument-error"),ne(null===(y=A.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,C,"argument-error"),Od._fromError(C,A)}function Il(w,m){return xt(w,"POST","/v2/accounts/mfaEnrollment:start",Vt(w,m))}class Lu{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(C=>Au._fromServerResponse(m.auth,C)))})}static _fromUser(m){return new Lu(m)}getSession(){var m=this;return(0,c.Z)(function*(){return pi._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,y){var C=this;return(0,c.Z)(function*(){const A=m,P=yield C.getSession(),X=yield St(C.user,A._process(C.user.auth,P,y));return yield C.user._updateTokensIfNecessary(X),C.user.reload()})()}unenroll(m){var y=this;return(0,c.Z)(function*(){var C;const A="string"==typeof m?m:m.uid,P=yield y.user.getIdToken(),X=yield St(y.user,function Fu(w,m){return xt(w,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(w,m))}(y.user.auth,{idToken:P,mfaEnrollmentId:A}));y.enrolledFactors=y.enrolledFactors.filter(({uid:pe})=>pe!==A),yield y.user._updateTokensIfNecessary(X);try{yield y.user.reload()}catch(pe){if("auth/user-token-expired"!==(null===(C=pe)||void 0===C?void 0:C.code))throw pe}})()}}const Ey=new WeakMap;function Ld(w){const m=(0,j.m9)(w);return Ey.has(m)||Ey.set(m,Lu._fromUser(m)),Ey.get(m)}const _s="__sak";class Ud{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(_s,"1"),this.storage.removeItem(_s),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const Vo=(()=>{class w extends Ud{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,C)=>this.onStorageEvent(y,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vd(){const w=(0,j.z$)();return F(w)||Ae(w)}()&&function Wi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=on(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const C of Object.keys(this.listeners)){const A=this.storage.getItem(C),P=this.localCache[C];A!==P&&y(C,P,A)}}onStorageEvent(y,C=!1){if(!y.key)return void this.forAllChangedKeys((pe,Ze,ft)=>{this.notifyListeners(pe,ft)});const A=y.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const pe=this.storage.getItem(A);if(y.newValue!==pe)null!==y.newValue?this.storage.setItem(A,y.newValue):this.storage.removeItem(A);else if(this.localCache[A]===y.newValue&&!C)return}const P=()=>{const pe=this.storage.getItem(A);!C&&this.localCache[A]===pe||this.notifyListeners(A,pe)},X=this.storage.getItem(A);!function Rt(){return(0,j.w1)()&&10===document.documentMode}()||X===y.newValue||y.newValue===y.oldValue?P():setTimeout(P,10)}notifyListeners(y,C){this.localCache[y]=C;const A=this.listeners[y];if(A)for(const P of Array.from(A))P(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,C,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:C,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,C){var A=()=>super._set,P=this;return(0,c.Z)(function*(){yield A().call(P,y,C),P.localCache[y]=JSON.stringify(C)})()}_get(y){var C=()=>super._get,A=this;return(0,c.Z)(function*(){const P=yield C().call(A,y);return A.localCache[y]=JSON.stringify(P),P})()}_remove(y){var C=()=>super._remove,A=this;return(0,c.Z)(function*(){yield C().call(A,y),delete A.localCache[y]})()}}return w.type="LOCAL",w})(),Ws=(()=>{class w extends Ud{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,C){}_removeListener(y,C){}}return w.type="SESSION",w})();let Uu=(()=>{class w{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const C=this.receivers.find(P=>P.isListeningto(y));if(C)return C;const A=new w(y);return this.receivers.push(A),A}isListeningto(y){return this.eventTarget===y}handleEvent(y){var C=this;return(0,c.Z)(function*(){const A=y,{eventId:P,eventType:X,data:pe}=A.data,Ze=C.handlersMap[X];if(!Ze?.size)return;A.ports[0].postMessage({status:"ack",eventId:P,eventType:X});const ft=Array.from(Ze).map(function(){var tn=(0,c.Z)(function*(Er){return Er(A.origin,pe)});return function(Er){return tn.apply(this,arguments)}}()),Ft=yield function Bd(w){return Promise.all(w.map(function(){var m=(0,c.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(C){return{fulfilled:!1,reason:C}}});return function(y){return m.apply(this,arguments)}}()))}(ft);A.ports[0].postMessage({status:"done",eventId:P,eventType:X,response:Ft})})()}_subscribe(y,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(C)}_unsubscribe(y,C){this.handlersMap[y]&&C&&this.handlersMap[y].delete(C),(!C||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return w.receivers=[],w})();function va(w="",m=10){let y="";for(let C=0;C<m;C++)y+=Math.floor(10*Math.random());return w+y}class Iy{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,C=50){var A=this;return(0,c.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let X,pe;return new Promise((Ze,ft)=>{const Ft=va("",20);P.port1.start();const tn=setTimeout(()=>{ft(new Error("unsupported_event"))},C);pe={messageChannel:P,onMessage(Er){const _i=Er;if(_i.data.eventId===Ft)switch(_i.data.status){case"ack":clearTimeout(tn),X=setTimeout(()=>{ft(new Error("timeout"))},3e3);break;case"done":clearTimeout(X),Ze(_i.data.response);break;default:clearTimeout(tn),clearTimeout(X),ft(new Error("invalid_response"))}}},A.handlers.add(pe),P.port1.addEventListener("message",pe.onMessage),A.target.postMessage({eventType:m,eventId:Ft,data:y},[P.port2])}).finally(()=>{pe&&A.removeMessageHandler(pe)})})()}}function Yn(){return window}function Si(){return typeof Yn().WorkerGlobalScope<"u"&&"function"==typeof Yn().importScripts}function Bo(){return(Bo=(0,c.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Dl="firebaseLocalStorageDb",Al="firebaseLocalStorage",Bu="fbase_key";class jo{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function ju(w,m){return w.transaction([Al],m?"readwrite":"readonly").objectStore(Al)}function vp(){const w=indexedDB.open(Dl,1);return new Promise((m,y)=>{w.addEventListener("error",()=>{y(w.error)}),w.addEventListener("upgradeneeded",()=>{const C=w.result;try{C.createObjectStore(Al,{keyPath:Bu})}catch(A){y(A)}}),w.addEventListener("success",(0,c.Z)(function*(){const C=w.result;C.objectStoreNames.contains(Al)?m(C):(C.close(),yield function yp(){const w=indexedDB.deleteDatabase(Dl);return new jo(w).toPromise()}(),m(yield vp()))}))})}function xl(w,m,y){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,c.Z)(function*(w,m,y){const C=ju(w,!0).put({[Bu]:m,value:y});return new jo(C).toPromise()})).apply(this,arguments)}function $u(){return($u=(0,c.Z)(function*(w,m){const y=ju(w,!1).get(m),C=yield new jo(y).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function wp(w,m){const y=ju(w,!0).delete(m);return new jo(y).toPromise()}const Hu=(()=>{class w{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,c.Z)(function*(){return y.db||(y.db=yield vp()),y.db})()}_withRetries(y){var C=this;return(0,c.Z)(function*(){let A=0;for(;;)try{const P=yield C._openDb();return yield y(P)}catch(P){if(A++>3)throw P;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,c.Z)(function*(){return Si()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,c.Z)(function*(){y.receiver=Uu._getInstance(function Vu(){return Si()?self:null}()),y.receiver._subscribe("keyChanged",function(){var C=(0,c.Z)(function*(A,P){return{keyProcessed:(yield y._poll()).includes(P.key)}});return function(A,P){return C.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var C=(0,c.Z)(function*(A,P){return["keyChanged"]});return function(A,P){return C.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,c.Z)(function*(){var C,A;if(y.activeServiceWorker=yield function Ty(){return Bo.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Iy(y.activeServiceWorker);const P=yield y.sender._send("ping",{},800);!P||(null===(C=P[0])||void 0===C?void 0:C.fulfilled)&&(null===(A=P[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var C=this;return(0,c.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function jd(){var w;return(null===(w=navigator?.serviceWorker)||void 0===w?void 0:w.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:y},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,c.Z)(function*(){try{if(!indexedDB)return!1;const y=yield vp();return yield xl(y,_s,"1"),yield wp(y,_s),!0}catch{}return!1})()}_withPendingWrite(y){var C=this;return(0,c.Z)(function*(){C.pendingWrites++;try{yield y()}finally{C.pendingWrites--}})()}_set(y,C){var A=this;return(0,c.Z)(function*(){return A._withPendingWrite((0,c.Z)(function*(){return yield A._withRetries(P=>xl(P,y,C)),A.localCache[y]=C,A.notifyServiceWorker(y)}))})()}_get(y){var C=this;return(0,c.Z)(function*(){const A=yield C._withRetries(P=>function Dy(w,m){return $u.apply(this,arguments)}(P,y));return C.localCache[y]=A,A})()}_remove(y){var C=this;return(0,c.Z)(function*(){return C._withPendingWrite((0,c.Z)(function*(){return yield C._withRetries(A=>wp(A,y)),delete C.localCache[y],C.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,c.Z)(function*(){const C=yield y._withRetries(X=>{const pe=ju(X,!1).getAll();return new jo(pe).toPromise()});if(!C)return[];if(0!==y.pendingWrites)return[];const A=[],P=new Set;for(const{fbase_key:X,value:pe}of C)P.add(X),JSON.stringify(y.localCache[X])!==JSON.stringify(pe)&&(y.notifyListeners(X,pe),A.push(X));for(const X of Object.keys(y.localCache))y.localCache[X]&&!P.has(X)&&(y.notifyListeners(X,null),A.push(X));return A})()}notifyListeners(y,C){this.localCache[y]=C;const A=this.listeners[y];if(A)for(const P of Array.from(A))P(C)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,c.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(C)}_removeListener(y,C){this.listeners[y]&&(this.listeners[y].delete(C),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return w.type="LOCAL",w})();function Sy(w,m){return xt(w,"POST","/v2/accounts/mfaSignIn:start",Vt(w,m))}function $o(){return($o=(0,c.Z)(function*(w){return(yield xt(w,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wa(w){return new Promise((m,y)=>{const C=document.createElement("script");C.setAttribute("src",w),C.onload=m,C.onerror=A=>{const P=Pe("internal-error");P.customData=A,y(P)},C.type="text/javascript",C.charset="UTF-8",function Rl(){var w,m;return null!==(m=null===(w=document.getElementsByTagName("head"))||void 0===w?void 0:w[0])&&void 0!==m?m:document}().appendChild(C)})}function $d(w){return`__${w}${Math.floor(1e6*Math.random())}`}const Cp=1e12;class hb{constructor(m){this.auth=m,this.counter=Cp,this._widgets=new Map}render(m,y){const C=this.counter;return this._widgets.set(C,new fn(m,this.auth.name,y||{})),this.counter++,C}reset(m){var y;const C=m||Cp;null===(y=this._widgets.get(C))||void 0===y||y.delete(),this._widgets.delete(C)}getResponse(m){var y;return(null===(y=this._widgets.get(m||Cp))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,c.Z)(function*(){var C;return null===(C=y._widgets.get(m||Cp))||void 0===C||C.execute(),""})()}}class fn{constructor(m,y,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof m?document.getElementById(m):m;ne(A,"argument-error",{appName:y}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fb(w){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<w;C++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ay=$d("rcb"),uA=new $e(3e4,6e4);class dA{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Yn().grecaptcha)||void 0===m||!m.render)}load(m,y=""){return ne(function hA(w){return w.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(w)}(y),m,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(Yn().grecaptcha):new Promise((C,A)=>{const P=Yn().setTimeout(()=>{A(Pe(m,"network-request-failed"))},uA.get());Yn()[Ay]=()=>{Yn().clearTimeout(P),delete Yn()[Ay];const pe=Yn().grecaptcha;if(!pe)return void A(Pe(m,"internal-error"));const Ze=pe.render;pe.render=(ft,Ft)=>{const tn=Ze(ft,Ft);return this.counter++,tn},this.hostLanguage=y,C(pe)},wa(`https://www.google.com/recaptcha/api.js??${(0,j.xO)({onload:Ay,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(P),A(Pe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var y;return!(null===(y=Yn().grecaptcha)||void 0===y||!y.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class fA{load(m){return(0,c.Z)(function*(){return new hb(m)})()}clearedOneInstance(){}}const Pl="recaptcha",pA={theme:"light",type:"image"};class pb{constructor(m,y=Object.assign({},pA),C){this.parameters=y,this.type=Pl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=ht(C),this.isInvisible="invisible"===this.parameters.size,ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof m?document.getElementById(m):m;ne(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new fA:new dA,this.validateStartingState()}verify(){var m=this;return(0,c.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),C=m.getAssertedRecaptcha();return C.getResponse(y)||new Promise(P=>{const X=pe=>{!pe||(m.tokenChangeListeners.delete(X),P(pe))};m.tokenChangeListeners.add(X),m.isInvisible&&C.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){ne(!this.parameters.sitekey,this.auth,"argument-error"),ne(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ne(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(C=>C(y)),"function"==typeof m)m(y);else if("string"==typeof m){const C=Yn()[m];"function"==typeof C&&C(y)}}}assertNotDestroyed(){ne(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,c.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const C=document.createElement("div");y.appendChild(C),y=C}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,c.Z)(function*(){ne(xe()&&!Si(),m.auth,"internal-error"),yield function sr(){let w=null;return new Promise(m=>{"complete"!==document.readyState?(w=()=>m(),window.addEventListener("load",w)):m()}).catch(m=>{throw w&&window.removeEventListener("load",w),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function Gu(w){return $o.apply(this,arguments)}(m.auth);ne(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return ne(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Kt{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=pa._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function Ai(w,m,y){return it.apply(this,arguments)}function it(){return(it=(0,c.Z)(function*(w,m,y){const C=ht(w),A=yield qn(C,m,(0,j.m9)(y));return new Kt(A,P=>yl(C,P))})).apply(this,arguments)}function ys(w,m,y){return mn.apply(this,arguments)}function mn(){return(mn=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w);yield Hs(!1,C,"phone");const A=yield qn(C.auth,m,(0,j.m9)(y));return new Kt(A,P=>Tt(C,P))})).apply(this,arguments)}function vs(w,m,y){return Ho.apply(this,arguments)}function Ho(){return(Ho=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w),A=yield qn(C.auth,m,(0,j.m9)(y));return new Kt(A,P=>lb(C,P))})).apply(this,arguments)}function qn(w,m,y){return qo.apply(this,arguments)}function qo(){return(qo=(0,c.Z)(function*(w,m,y){var C;const A=yield y.verify();try{let P;if(ne("string"==typeof A,w,"argument-error"),ne(y.type===Pl,w,"argument-error"),P="string"==typeof m?{phoneNumber:m}:m,"session"in P){const X=P.session;if("phoneNumber"in P)return ne("enroll"===X.type,w,"internal-error"),(yield Il(w,{idToken:X.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ne("signin"===X.type,w,"internal-error");const pe=(null===(C=P.multiFactorHint)||void 0===C?void 0:C.uid)||P.multiFactorUid;return ne(pe,w,"missing-multi-factor-info"),(yield Sy(w,{mfaPendingCredential:X.credential,mfaEnrollmentId:pe,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:X}=yield rb(w,{phoneNumber:P.phoneNumber,recaptchaToken:A});return X}}finally{y._reset()}})).apply(this,arguments)}function Ip(w,m){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,c.Z)(function*(w,m){yield dp((0,j.m9)(w),m)})).apply(this,arguments)}let xy=(()=>{class w{constructor(y){this.providerId=w.PROVIDER_ID,this.auth=ht(y)}verifyPhoneNumber(y,C){return qn(this.auth,y,(0,j.m9)(C))}static credential(y,C){return pa._fromVerification(y,C)}static credentialFromResult(y){return w.credentialFromTaggedObject(y)}static credentialFromError(y){return w.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:C,temporaryProof:A}=y;return C&&A?pa._fromTokenResponse(C,A):null}}return w.PROVIDER_ID="phone",w.PHONE_SIGN_IN_METHOD="phone",w})();function Go(w,m){return m?Y(m):(ne(w._popupRedirectResolver,w,"argument-error"),w._popupRedirectResolver)}class Tp extends ci{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return ko(m,this._buildIdpRequest())}_linkToIdToken(m,y){return ko(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return ko(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function Ks(w){return ly(w.auth,new Tp(w),w.bypassAuthState)}function Je(w){const{auth:m,user:y}=w;return ne(y,m,"internal-error"),ay(y,new Tp(w),w.bypassAuthState)}function qd(w){return Ys.apply(this,arguments)}function Ys(){return(Ys=(0,c.Z)(function*(w){const{auth:m,user:y}=w;return ne(y,m,"internal-error"),dp(y,new Tp(w),w.bypassAuthState)})).apply(this,arguments)}class Dp{constructor(m,y,C,A,P=!1){this.auth=m,this.resolver=C,this.user=A,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,c.Z)(function*(C,A){m.pendingPromise={resolve:C,reject:A};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(P){m.reject(P)}});return function(C,A){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,c.Z)(function*(){const{urlResponse:C,sessionId:A,postBody:P,tenantId:X,error:pe,type:Ze}=m;if(pe)return void y.reject(pe);const ft={auth:y.auth,requestUri:C,sessionId:A,tenantId:X||void 0,postBody:P||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(Ze)(ft))}catch(Ft){y.reject(Ft)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return Ks;case"linkViaPopup":case"linkViaRedirect":return qd;case"reauthViaPopup":case"reauthViaRedirect":return Je;default:tt(this.auth,"internal-error")}}resolve(m){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){he(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gd=new $e(2e3,1e4);function Ln(w,m,y){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,c.Z)(function*(w,m,y){const C=ht(w);fe(w,m,wr);const A=Go(C,y);return new kl(C,"signInViaPopup",m,A).executeNotNull()})).apply(this,arguments)}function Sp(w,m,y){return Zd.apply(this,arguments)}function Zd(){return(Zd=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w);fe(C.auth,m,wr);const A=Go(C.auth,y);return new kl(C.auth,"reauthViaPopup",m,A,C).executeNotNull()})).apply(this,arguments)}function Ap(w,m,y){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w);fe(C.auth,m,wr);const A=Go(C.auth,y);return new kl(C.auth,"linkViaPopup",m,A,C).executeNotNull()})).apply(this,arguments)}let kl=(()=>{class w extends Dp{constructor(y,C,A,P,X){super(y,C,P,X),this.provider=A,this.authWindow=null,this.pollId=null,w.currentPopupAction&&w.currentPopupAction.cancel(),w.currentPopupAction=this}executeNotNull(){var y=this;return(0,c.Z)(function*(){const C=yield y.execute();return ne(C,y.auth,"internal-error"),C})()}onExecution(){var y=this;return(0,c.Z)(function*(){he(1===y.filter.length,"Popup operations only handle one event");const C=va();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],C),y.authWindow.associatedEvent=C,y.resolver._originValidation(y.auth).catch(A=>{y.reject(A)}),y.resolver._isIframeWebStorageSupported(y.auth,A=>{A||y.reject(Pe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,w.currentPopupAction=null}pollUserCancellation(){const y=()=>{var C,A;this.pollId=null!==(A=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Pe(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Gd.get())};y()}}return w.currentPopupAction=null,w})();const Qs=new Map;class ba extends Dp{constructor(m,y,C=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,C),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,c.Z)(function*(){let C=Qs.get(y.auth._key());if(!C){try{const P=(yield function zd(w,m){return ws.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;C=()=>Promise.resolve(P)}catch(A){C=()=>Promise.reject(A)}Qs.set(y.auth._key(),C)}return y.bypassAuthState||Qs.set(y.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,C=this;return(0,c.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(C,m);if("unknown"!==m.type){if(m.eventId){const A=yield C.auth._redirectUserForId(m.eventId);if(A)return C.user=A,y().call(C,m);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,c.Z)(function*(){})()}cleanUp(){}}function ws(){return(ws=(0,c.Z)(function*(w,m){const y=Xs(m),C=Js(w);if(!(yield C._isAvailable()))return!1;const A="true"===(yield C._get(y));return yield C._remove(y),A})).apply(this,arguments)}function Zo(w,m){return Es.apply(this,arguments)}function Es(){return(Es=(0,c.Z)(function*(w,m){return Js(w)._set(Xs(m),"true")})).apply(this,arguments)}function Kd(){Qs.clear()}function Un(w,m){Qs.set(w._key(),m)}function Js(w){return Y(w._redirectPersistence)}function Xs(w){return B("pendingRedirect",w.config.apiKey,w.name)}function Vn(w,m,y){return function vn(w,m,y){return zo.apply(this,arguments)}(w,m,y)}function zo(){return(zo=(0,c.Z)(function*(w,m,y){const C=ht(w);fe(w,m,wr);const A=Go(C,y);return yield Zo(A,C),A._openRedirect(C,m,"signInViaRedirect")})).apply(this,arguments)}function gi(w,m,y){return function fr(w,m,y){return Yi.apply(this,arguments)}(w,m,y)}function Yi(){return(Yi=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w);fe(C.auth,m,wr);const A=Go(C.auth,y);yield Zo(A,C.auth);const P=yield eo(C);return A._openRedirect(C.auth,m,"reauthViaRedirect",P)})).apply(this,arguments)}function xp(w,m,y){return function My(w,m,y){return xi.apply(this,arguments)}(w,m,y)}function xi(){return(xi=(0,c.Z)(function*(w,m,y){const C=(0,j.m9)(w);fe(C.auth,m,wr);const A=Go(C.auth,y);yield Hs(!1,C,m.providerId),yield Zo(A,C.auth);const P=yield eo(C);return A._openRedirect(C.auth,m,"linkViaRedirect",P)})).apply(this,arguments)}function bs(w,m){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,c.Z)(function*(w,m){return yield ht(w)._initializationPromise,Mi(w,m,!1)})).apply(this,arguments)}function Mi(w,m){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,c.Z)(function*(w,m,y=!1){const C=ht(w),A=Go(C,m),X=yield new ba(C,A,y).execute();return X&&!y&&(delete X.user._redirectEventId,yield C._persistUserIfCurrent(X.user),yield C._setRedirectUser(null,m)),X})).apply(this,arguments)}function eo(w){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,c.Z)(function*(w){const m=va(`${w.uid}:::`);return w._redirectEventId=m,yield w.auth._setRedirectUser(w),yield w.auth._persistUserIfCurrent(w),m})).apply(this,arguments)}class Ol{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(m,C)&&(y=!0,this.sendToConsumer(m,C),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function Ot(w){switch(w.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wu(w);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var C;if(m.error&&!Wu(m)){const A=(null===(C=m.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";y.onError(Pe(this.auth,A))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const C=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&C}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yd(m))}saveEventToCache(m){this.cachedEventUids.add(Yd(m)),this.lastProcessedEventTime=Date.now()}}function Yd(w){return[w.type,w.eventId,w.sessionId,w.tenantId].filter(m=>m).join("-")}function Wu({type:w,error:m}){return"unknown"===w&&"auth/no-auth-event"===m?.code}function Ri(w){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,c.Z)(function*(w,m={}){return xt(w,"GET","/v1/projects",m)})).apply(this,arguments)}const Ta=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,gb=/^https?/;function mi(){return(mi=(0,c.Z)(function*(w){if(w.config.emulator)return;const{authorizedDomains:m}=yield Ri(w);for(const y of m)try{if(Ry(y))return}catch{}tt(w,"unauthorized-domain")})).apply(this,arguments)}function Ry(w){const m=Re(),{protocol:y,hostname:C}=new URL(m);if(w.startsWith("chrome-extension://")){const X=new URL(w);return""===X.hostname&&""===C?"chrome-extension:"===y&&w.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&X.hostname===C}if(!gb.test(y))return!1;if(Ta.test(w))return C===w;const A=w.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(C)}const Rp=new $e(3e4,6e4);function Qd(){const w=Yn().___jsl;if(w?.H)for(const m of Object.keys(w.H))if(w.H[m].r=w.H[m].r||[],w.H[m].L=w.H[m].L||[],w.H[m].r=[...w.H[m].L],w.CP)for(let y=0;y<w.CP.length;y++)w.CP[y]=null}let Sn=null;function Cs(w){return Sn=Sn||function mb(w){return new Promise((m,y)=>{var C,A,P;function X(){Qd(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{Qd(),y(Pe(w,"network-request-failed"))},timeout:Rp.get()})}if(null!==(A=null===(C=Yn().gapi)||void 0===C?void 0:C.iframes)&&void 0!==A&&A.Iframe)m(gapi.iframes.getContext());else{if(null===(P=Yn().gapi)||void 0===P||!P.load){const pe=$d("iframefcb");return Yn()[pe]=()=>{gapi.load?X():y(Pe(w,"network-request-failed"))},wa(`https://apis.google.com/js/api.js?onload=${pe}`).catch(Ze=>y(Ze))}X()}}).catch(m=>{throw Sn=null,m})}(w),Sn}const Jd=new $e(5e3,15e3),Xd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Ny=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function eh(w){const m=w.config;ne(m.authDomain,w,"auth-domain-config-required");const y=m.emulator?ln(m,"emulator/auth/iframe"):`https://${w.config.authDomain}/__/auth/iframe`,C={apiKey:m.apiKey,appName:w.name,v:L.SDK_VERSION},A=Ny.get(w.config.apiHost);A&&(C.eid=A);const P=w._getFrameworks();return P.length&&(C.fw=P.join(",")),`${y}?${(0,j.xO)(C).slice(1)}`}function Zu(){return Zu=(0,c.Z)(function*(w){const m=yield Cs(w),y=Yn().gapi;return ne(y,w,"internal-error"),m.open({where:document.body,url:eh(w),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Xd,dontclear:!0},C=>new Promise(function(){var A=(0,c.Z)(function*(P,X){yield C.restyle({setHideOnLeave:!1});const pe=Pe(w,"network-request-failed"),Ze=Yn().setTimeout(()=>{X(pe)},Jd.get());function ft(){Yn().clearTimeout(Ze),P(C)}C.ping(ft).then(ft,()=>{X(pe)})});return function(P,X){return A.apply(this,arguments)}}()))}),Zu.apply(this,arguments)}const Fl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Ll{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Da(w,m,y,C,A,P){ne(w.config.authDomain,w,"auth-domain-config-required"),ne(w.config.apiKey,w,"invalid-api-key");const X={apiKey:w.config.apiKey,appName:w.name,authType:y,redirectUrl:C,v:L.SDK_VERSION,eventId:A};if(m instanceof wr){m.setDefaultLanguage(w.languageCode),X.providerId=m.providerId||"",(0,j.xb)(m.getCustomParameters())||(X.customParameters=JSON.stringify(m.getCustomParameters()));for(const[Ze,ft]of Object.entries(P||{}))X[Ze]=ft}if(m instanceof ga){const Ze=m.getScopes().filter(ft=>""!==ft);Ze.length>0&&(X.scopes=Ze.join(","))}w.tenantId&&(X.tid=w.tenantId);const pe=X;for(const Ze of Object.keys(pe))void 0===pe[Ze]&&delete pe[Ze];return`${function Op({config:w}){return w.emulator?ln(w,"emulator/auth/handler"):`https://${w.authDomain}/__/auth/handler`}(w)}?${(0,j.xO)(pe).slice(1)}`}const Sa="webStorageSupport",nh=class Ul{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ws,this._completeRedirectFn=Mi,this._overrideRedirectResult=Un}_openPopup(m,y,C,A){var P=this;return(0,c.Z)(function*(){var X;he(null===(X=P.eventManagers[m._key()])||void 0===X?void 0:X.manager,"_initialize() not called before _openPopup()");const pe=Da(m,y,C,Re(),A);return function Ku(w,m,y,C=500,A=600){const P=Math.max((window.screen.availHeight-A)/2,0).toString(),X=Math.max((window.screen.availWidth-C)/2,0).toString();let pe="";const Ze=Object.assign(Object.assign({},Fl),{width:C.toString(),height:A.toString(),top:P,left:X}),ft=(0,j.z$)().toLowerCase();y&&(pe=te(ft)?"_blank":y),M(ft)&&(m=m||"http://localhost",Ze.scrollbars="yes");const Ft=Object.entries(Ze).reduce((Er,[_i,Qu])=>`${Er}${_i}=${Qu},`,"");if(function sn(w=(0,j.z$)()){var m;return Ae(w)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(ft)&&"_self"!==pe)return function Ts(w,m){const y=document.createElement("a");y.href=w,y.target=m;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(C)}(m||"",pe),new Ll(null);const tn=window.open(m||"",pe,Ft);ne(tn,w,"popup-blocked");try{tn.focus()}catch{}return new Ll(tn)}(m,pe,va())})()}_openRedirect(m,y,C,A){var P=this;return(0,c.Z)(function*(){return yield P._originValidation(m),function _p(w){Yn().location.href=w}(Da(m,y,C,Re(),A)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:A,promise:P}=this.eventManagers[y];return A?Promise.resolve(A):(he(P,"If manager is not set, promise should be"),P)}const C=this.initAndGetManager(m);return this.eventManagers[y]={promise:C},C.catch(()=>{delete this.eventManagers[y]}),C}initAndGetManager(m){var y=this;return(0,c.Z)(function*(){const C=yield function Pp(w){return Zu.apply(this,arguments)}(m),A=new Ol(m);return C.register("authEvent",P=>(ne(P?.authEvent,m,"invalid-auth-event"),{status:A.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:A},y.iframes[m._key()]=C,A})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(Sa,{type:Sa},A=>{var P;const X=null===(P=A?.[0])||void 0===P?void 0:P[Sa];void 0!==X&&y(!!X),tt(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Mp(w){return mi.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return on()||F()||Ae()}};class rh extends class Yu{constructor(m){this.factorId=m}_process(m,y,C){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,C);case"signin":return this._finalizeSignIn(m,y.credential);default:return ie("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new rh(m)}_finalizeEnroll(m,y,C){return function Fd(w,m){return xt(w,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(w,m))}(m,{idToken:y,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function qu(w,m){return xt(w,"POST","/v2/accounts/mfaSignIn:finalize",Vt(w,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qi=(()=>{class w{constructor(){}static assertion(y){return rh._fromCredential(y)}}return w.FACTOR_ID="phone",w})();var Ds="@firebase/auth",ih="0.20.11";class Py{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,c.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(C=>{var A;m((null===(A=C)||void 0===A?void 0:A.stsTokenManager.accessToken)||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){ne(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}(0,j.Pz)("authIdTokenMaxAge"),function vb(w){(0,L._registerComponent)(new ye.wA("auth",(m,{options:y})=>{const C=m.getProvider("app").getImmediate(),A=m.getProvider("heartbeat"),{apiKey:P,authDomain:X}=C.options;return((pe,Ze)=>{ne(P&&!P.includes(":"),"invalid-api-key",{appName:pe.name}),ne(!X?.includes(":"),"argument-error",{appName:pe.name});const ft={apiKey:P,authDomain:X,clientPlatform:w,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gn(w)},Ft=new cl(pe,Ze,ft);return function re(w,m){const y=m?.persistence||[],C=(Array.isArray(y)?y:[y]).map(Y);m?.errorMap&&w._updateErrorMap(m.errorMap),w._initializeWithPersistence(C,m?.popupRedirectResolver)}(Ft,y),Ft})(C,A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,C)=>{m.getProvider("auth-internal").initialize()})),(0,L._registerComponent)(new ye.wA("auth-internal",m=>{const y=ht(m.getProvider("auth").getImmediate());return new Py(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,L.registerVersion)(Ds,ih,function yb(w){switch(w){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(w)),(0,L.registerVersion)(Ds,ih,"esm2017")}("Browser")},3854:(gt,Se,U)=>{U.d(Se,{$s:()=>Ye,BH:()=>Ut,DV:()=>Mr,Dv:()=>Lr,G6:()=>fe,GJ:()=>Gi,L:()=>me,LL:()=>un,P0:()=>xe,Pz:()=>Yt,Sg:()=>$e,UG:()=>be,UI:()=>$s,US:()=>ye,Wj:()=>Et,Wl:()=>xr,Yr:()=>ve,ZB:()=>G,ZR:()=>Hn,aH:()=>lt,b$:()=>ce,cI:()=>xt,dS:()=>At,eu:()=>ne,g5:()=>L,gK:()=>rr,gQ:()=>yn,h$:()=>Ie,hl:()=>je,hu:()=>j,jU:()=>ze,lb:()=>Rr,m9:()=>Zt,ne:()=>Cn,p$:()=>q,pd:()=>ll,r3:()=>Fr,ru:()=>oe,tV:()=>Ne,uI:()=>Oe,ug:()=>Ci,vZ:()=>Ke,w1:()=>tt,w9:()=>fs,xO:()=>_n,xb:()=>ps,z$:()=>Le,zI:()=>ie,zd:()=>ei});const j=function($,B){if(!$)throw L(B)},L=function($){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+$)},le=function($){const B=[];let Z=0;for(let V=0;V<$.length;V++){let M=$.charCodeAt(V);M<128?B[Z++]=M:M<2048?(B[Z++]=M>>6|192,B[Z++]=63&M|128):55296==(64512&M)&&V+1<$.length&&56320==(64512&$.charCodeAt(V+1))?(M=65536+((1023&M)<<10)+(1023&$.charCodeAt(++V)),B[Z++]=M>>18|240,B[Z++]=M>>12&63|128,B[Z++]=M>>6&63|128,B[Z++]=63&M|128):(B[Z++]=M>>12|224,B[Z++]=M>>6&63|128,B[Z++]=63&M|128)}return B},ye={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray($,B){if(!Array.isArray($))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Z=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,V=[];for(let M=0;M<$.length;M+=3){const F=$[M],te=M+1<$.length,Te=te?$[M+1]:0,Qe=M+2<$.length,nt=Qe?$[M+2]:0;let bt=(15&Te)<<2|nt>>6,sn=63&nt;Qe||(sn=64,te||(bt=64)),V.push(Z[F>>2],Z[(3&F)<<4|Te>>4],Z[bt],Z[sn])}return V.join("")},encodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa($):this.encodeByteArray(le($),B)},decodeString($,B){return this.HAS_NATIVE_SUPPORT&&!B?atob($):function($){const B=[];let Z=0,V=0;for(;Z<$.length;){const M=$[Z++];if(M<128)B[V++]=String.fromCharCode(M);else if(M>191&&M<224){const F=$[Z++];B[V++]=String.fromCharCode((31&M)<<6|63&F)}else if(M>239&&M<365){const Qe=((7&M)<<18|(63&$[Z++])<<12|(63&$[Z++])<<6|63&$[Z++])-65536;B[V++]=String.fromCharCode(55296+(Qe>>10)),B[V++]=String.fromCharCode(56320+(1023&Qe))}else{const F=$[Z++],te=$[Z++];B[V++]=String.fromCharCode((15&M)<<12|(63&F)<<6|63&te)}}return B.join("")}(this.decodeStringToByteArray($,B))},decodeStringToByteArray($,B){this.init_();const Z=B?this.charToByteMapWebSafe_:this.charToByteMap_,V=[];for(let M=0;M<$.length;){const F=Z[$.charAt(M++)],Te=M<$.length?Z[$.charAt(M)]:0;++M;const nt=M<$.length?Z[$.charAt(M)]:64;++M;const Ae=M<$.length?Z[$.charAt(M)]:64;if(++M,null==F||null==Te||null==nt||null==Ae)throw Error();V.push(F<<2|Te>>4),64!==nt&&(V.push(Te<<4&240|nt>>2),64!==Ae&&V.push(nt<<6&192|Ae))}return V},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let $=0;$<this.ENCODED_VALS.length;$++)this.byteToCharMap_[$]=this.ENCODED_VALS.charAt($),this.charToByteMap_[this.byteToCharMap_[$]]=$,this.byteToCharMapWebSafe_[$]=this.ENCODED_VALS_WEBSAFE.charAt($),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[$]]=$,$>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt($)]=$,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt($)]=$)}}},Ie=function($){const B=le($);return ye.encodeByteArray(B,!0)},me=function($){return Ie($).replace(/\./g,"")},Ne=function($){try{return ye.decodeString($,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function q($){return G(void 0,$)}function G($,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===$&&($={});break;case Array:$=[];break;default:return B}for(const Z in B)!B.hasOwnProperty(Z)||!Q(Z)||($[Z]=G($[Z],B[Z]));return $}function Q($){return"__proto__"!==$}function Le(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function be(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function ze(){return"object"==typeof self&&self.self===self}function oe(){const $="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof $&&void 0!==$.id}function ce(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function tt(){const $=Le();return $.indexOf("MSIE ")>=0||$.indexOf("Trident/")>=0}function ve(){return!1}function fe(){return!be()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function je(){return"object"==typeof indexedDB}function ne(){return new Promise(($,B)=>{try{let Z=!0;const V="validate-browser-context-for-indexeddb-analytics-module",M=self.indexedDB.open(V);M.onsuccess=()=>{M.result.close(),Z||self.indexedDB.deleteDatabase(V),$(!0)},M.onupgradeneeded=()=>{Z=!1},M.onerror=()=>{var F;B((null===(F=M.error)||void 0===F?void 0:F.message)||"")}}catch(Z){B(Z)}})}function ie(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const re=()=>{try{return function he(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const $=process.env.__FIREBASE_DEFAULTS__;return $?JSON.parse($):void 0})()||(()=>{if(typeof document>"u")return;let $;try{$=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=$&&Ne($[1]);return B&&JSON.parse(B)})()}catch($){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${$}`)}},xe=$=>{const B=($=>{var B,Z;return null===(Z=null===(B=re())||void 0===B?void 0:B.emulatorHosts)||void 0===Z?void 0:Z[$]})($);if(!B)return;const Z=B.lastIndexOf(":");if(Z<=0||Z+1===B.length)throw new Error(`Invalid host ${B} with no separate hostname and port!`);const V=parseInt(B.substring(Z+1),10);return"["===B[0]?[B.substring(1,Z-1),V]:[B.substring(0,Z),V]},lt=()=>{var $;return null===($=re())||void 0===$?void 0:$.config},Yt=$=>{var B;return null===(B=re())||void 0===B?void 0:B[`_${$}`]};class Ut{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,Z)=>{this.resolve=B,this.reject=Z})}wrapCallback(B){return(Z,V)=>{Z?this.reject(Z):this.resolve(V),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(Z):B(Z,V))}}}function $e($,B){if($.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const V=B||"demo-project",M=$.iat||0,F=$.sub||$.user_id;if(!F)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const te=Object.assign({iss:`https://securetoken.google.com/${V}`,aud:V,iat:M,exp:M+3600,auth_time:M,sub:F,user_id:F,firebase:{sign_in_provider:"custom",identities:{}}},$);return[me(JSON.stringify({alg:"none",type:"JWT"})),me(JSON.stringify(te)),""].join(".")}class Hn extends Error{constructor(B,Z,V){super(Z),this.code=B,this.customData=V,this.name="FirebaseError",Object.setPrototypeOf(this,Hn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}}class un{constructor(B,Z,V){this.service=B,this.serviceName=Z,this.errors=V}create(B,...Z){const V=Z[0]||{},M=`${this.service}/${B}`,F=this.errors[B],te=F?function Qt($,B){return $.replace(Vt,(Z,V)=>{const M=B[V];return null!=M?String(M):`<${V}?>`})}(F,V):"Error";return new Hn(M,`${this.serviceName}: ${te} (${M}).`,V)}}const Vt=/\{\$([^}]+)}/g;function xt($){return JSON.parse($)}function xr($){return JSON.stringify($)}const qi=function($){let B={},Z={},V={},M="";try{const F=$.split(".");B=xt(Ne(F[0])||""),Z=xt(Ne(F[1])||""),M=F[2],V=Z.d||{},delete Z.d}catch{}return{header:B,claims:Z,data:V,signature:M}},fs=function($){const Z=qi($).claims;return!!Z&&"object"==typeof Z&&Z.hasOwnProperty("iat")},Gi=function($){const B=qi($).claims;return"object"==typeof B&&!0===B.admin};function Fr($,B){return Object.prototype.hasOwnProperty.call($,B)}function Mr($,B){if(Object.prototype.hasOwnProperty.call($,B))return $[B]}function ps($){for(const B in $)if(Object.prototype.hasOwnProperty.call($,B))return!1;return!0}function $s($,B,Z){const V={};for(const M in $)Object.prototype.hasOwnProperty.call($,M)&&(V[M]=B.call(Z,$[M],M,$));return V}function Ke($,B){if($===B)return!0;const Z=Object.keys($),V=Object.keys(B);for(const M of Z){if(!V.includes(M))return!1;const F=$[M],te=B[M];if(dr(F)&&dr(te)){if(!Ke(F,te))return!1}else if(F!==te)return!1}for(const M of V)if(!Z.includes(M))return!1;return!0}function dr($){return null!==$&&"object"==typeof $}function _n($){const B=[];for(const[Z,V]of Object.entries($))Array.isArray(V)?V.forEach(M=>{B.push(encodeURIComponent(Z)+"="+encodeURIComponent(M))}):B.push(encodeURIComponent(Z)+"="+encodeURIComponent(V));return B.length?"&"+B.join("&"):""}function ei($){const B={};return $.replace(/^\?/,"").split("&").forEach(V=>{if(V){const[M,F]=V.split("=");B[decodeURIComponent(M)]=decodeURIComponent(F)}}),B}function ll($){const B=$.indexOf("?");if(!B)return"";const Z=$.indexOf("#",B);return $.substring(B,Z>0?Z:void 0)}class yn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,Z){Z||(Z=0);const V=this.W_;if("string"==typeof B)for(let Ae=0;Ae<16;Ae++)V[Ae]=B.charCodeAt(Z)<<24|B.charCodeAt(Z+1)<<16|B.charCodeAt(Z+2)<<8|B.charCodeAt(Z+3),Z+=4;else for(let Ae=0;Ae<16;Ae++)V[Ae]=B[Z]<<24|B[Z+1]<<16|B[Z+2]<<8|B[Z+3],Z+=4;for(let Ae=16;Ae<80;Ae++){const bt=V[Ae-3]^V[Ae-8]^V[Ae-14]^V[Ae-16];V[Ae]=4294967295&(bt<<1|bt>>>31)}let nt,ge,M=this.chain_[0],F=this.chain_[1],te=this.chain_[2],Te=this.chain_[3],Qe=this.chain_[4];for(let Ae=0;Ae<80;Ae++){Ae<40?Ae<20?(nt=Te^F&(te^Te),ge=1518500249):(nt=F^te^Te,ge=1859775393):Ae<60?(nt=F&te|Te&(F|te),ge=2400959708):(nt=F^te^Te,ge=3395469782);const bt=(M<<5|M>>>27)+nt+Qe+ge+V[Ae]&4294967295;Qe=Te,Te=te,te=4294967295&(F<<30|F>>>2),F=M,M=bt}this.chain_[0]=this.chain_[0]+M&4294967295,this.chain_[1]=this.chain_[1]+F&4294967295,this.chain_[2]=this.chain_[2]+te&4294967295,this.chain_[3]=this.chain_[3]+Te&4294967295,this.chain_[4]=this.chain_[4]+Qe&4294967295}update(B,Z){if(null==B)return;void 0===Z&&(Z=B.length);const V=Z-this.blockSize;let M=0;const F=this.buf_;let te=this.inbuf_;for(;M<Z;){if(0===te)for(;M<=V;)this.compress_(B,M),M+=this.blockSize;if("string"==typeof B){for(;M<Z;)if(F[te]=B.charCodeAt(M),++te,++M,te===this.blockSize){this.compress_(F),te=0;break}}else for(;M<Z;)if(F[te]=B[M],++te,++M,te===this.blockSize){this.compress_(F),te=0;break}}this.inbuf_=te,this.total_+=Z}digest(){const B=[];let Z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let M=this.blockSize-1;M>=56;M--)this.buf_[M]=255&Z,Z/=256;this.compress_(this.buf_);let V=0;for(let M=0;M<5;M++)for(let F=24;F>=0;F-=8)B[V]=this.chain_[M]>>F&255,++V;return B}}function Cn($,B){const Z=new hn($,B);return Z.subscribe.bind(Z)}class hn{constructor(B,Z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Z,this.task.then(()=>{B(this)}).catch(V=>{this.error(V)})}next(B){this.forEachObserver(Z=>{Z.next(B)})}error(B){this.forEachObserver(Z=>{Z.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,Z,V){let M;if(void 0===B&&void 0===Z&&void 0===V)throw new Error("Missing Observer.");M=function ct($,B){if("object"!=typeof $||null===$)return!1;for(const Z of B)if(Z in $&&"function"==typeof $[Z])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:Z,complete:V},void 0===M.next&&(M.next=St),void 0===M.error&&(M.error=St),void 0===M.complete&&(M.complete=St);const F=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?M.error(this.finalError):M.complete()}catch{}}),this.observers.push(M),F}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let Z=0;Z<this.observers.length;Z++)this.sendOne(Z,B)}sendOne(B,Z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{Z(this.observers[B])}catch(V){typeof console<"u"&&console.error&&console.error(V)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function St(){}const Lr=function($,B,Z,V){let M;if(V<B?M="at least "+B:V>Z&&(M=0===Z?"none":"no more than "+Z),M)throw new Error($+" failed: Was called with "+V+(1===V?" argument.":" arguments.")+" Expects "+M+".")};function rr($,B){return`${$} failed: ${B} argument `}function Et($,B,Z,V){if((!V||Z)&&"function"!=typeof Z)throw new Error(rr($,B)+"must be a valid function.")}function Rr($,B,Z,V){if((!V||Z)&&("object"!=typeof Z||null===Z))throw new Error(rr($,B)+"must be a valid context object.")}const At=function($){const B=[];let Z=0;for(let V=0;V<$.length;V++){let M=$.charCodeAt(V);if(M>=55296&&M<=56319){const F=M-55296;V++,j(V<$.length,"Surrogate pair missing trail surrogate."),M=65536+(F<<10)+($.charCodeAt(V)-56320)}M<128?B[Z++]=M:M<2048?(B[Z++]=M>>6|192,B[Z++]=63&M|128):M<65536?(B[Z++]=M>>12|224,B[Z++]=M>>6&63|128,B[Z++]=63&M|128):(B[Z++]=M>>18|240,B[Z++]=M>>12&63|128,B[Z++]=M>>6&63|128,B[Z++]=63&M|128)}return B},Ci=function($){let B=0;for(let Z=0;Z<$.length;Z++){const V=$.charCodeAt(Z);V<128?B++:V<2048?B+=2:V>=55296&&V<=56319?(B+=4,Z++):B+=3}return B};function Ye($,B=1e3,Z=2){const V=B*Math.pow(Z,$),M=Math.round(.5*V*(Math.random()-.5)*2);return Math.min(144e5,V+M)}function Zt($){return $&&$._delegate?$._delegate:$}},7841:(gt,Se,U)=>{U.d(Se,{Z:()=>c.Z});var c=U(3394);c.Z.registerVersion("firebase","9.14.0","app-compat")},4094:(gt,Se,U)=>{U.r(Se);var c=U(8239),j=U(3394),L=U(2367),le=U(3854),Ie=(U(8026),U(5422),U(3910));function me(){return window}function G(){return(G=(0,c.Z)(function*(V,M,F){var te;const{BuildInfo:Te}=me();(0,L.ap)(M.sessionId,"AuthEvent did not contain a session ID");const Qe=yield ce(M.sessionId),nt={};return(0,L.aq)()?nt.ibi=Te.packageName:(0,L.ar)()?nt.apn=Te.packageName:(0,L.as)(V,"operation-not-supported-in-this-environment"),Te.displayName&&(nt.appDisplayName=Te.displayName),nt.sessionId=Qe,(0,L.at)(V,F,M.type,void 0,null!==(te=M.eventId)&&void 0!==te?te:void 0,nt)})).apply(this,arguments)}function Le(){return(Le=(0,c.Z)(function*(V){const{BuildInfo:M}=me(),F={};(0,L.aq)()?F.iosBundleId=M.packageName:(0,L.ar)()?F.androidPackageName=M.packageName:(0,L.as)(V,"operation-not-supported-in-this-environment"),yield(0,L.au)(V,F)})).apply(this,arguments)}function ze(){return(ze=(0,c.Z)(function*(V,M,F){const{cordova:te}=me();let Te=()=>{};try{yield new Promise((Qe,nt)=>{let ge=null;function Ae(){var Rt;Qe();const on=null===(Rt=te.plugins.browsertab)||void 0===Rt?void 0:Rt.close;"function"==typeof on&&on(),"function"==typeof F?.close&&F.close()}function bt(){ge||(ge=window.setTimeout(()=>{nt((0,L.aw)(V,"redirect-cancelled-by-user"))},2e3))}function sn(){"visible"===document?.visibilityState&&bt()}M.addPassiveListener(Ae),document.addEventListener("resume",bt,!1),(0,L.ar)()&&document.addEventListener("visibilitychange",sn,!1),Te=()=>{M.removePassiveListener(Ae),document.removeEventListener("resume",bt,!1),document.removeEventListener("visibilitychange",sn,!1),ge&&window.clearTimeout(ge)}})}finally{Te()}})).apply(this,arguments)}function ce(V){return et.apply(this,arguments)}function et(){return(et=(0,c.Z)(function*(V){const M=tt(V),F=yield crypto.subtle.digest("SHA-256",M);return Array.from(new Uint8Array(F)).map(Te=>Te.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function tt(V){if((0,L.ap)(/[0-9a-zA-Z]+/.test(V),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(V);const M=new ArrayBuffer(V.length),F=new Uint8Array(M);for(let te=0;te<V.length;te++)F[te]=V.charCodeAt(te);return F}class ve extends L.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(M=>{this.resolveInialized=M})}addPassiveListener(M){this.passiveListeners.add(M)}removePassiveListener(M){this.passiveListeners.delete(M)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(M){return this.resolveInialized(),this.passiveListeners.forEach(F=>F(M)),super.onEvent(M)}initialized(){var M=this;return(0,c.Z)(function*(){yield M.initPromise})()}}function ne(V){return ie.apply(this,arguments)}function ie(){return(ie=(0,c.Z)(function*(V){const M=yield Y()._get(ae(V));return M&&(yield Y()._remove(ae(V))),M})).apply(this,arguments)}function K(){const V=[],M="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let F=0;F<20;F++){const te=Math.floor(Math.random()*M.length);V.push(M.charAt(te))}return V.join("")}function Y(){return(0,L.az)(L.b)}function ae(V){return(0,L.aA)("authEvent",V.config.apiKey,V.name)}function xe(V){if(!V?.includes("?"))return{};const[M,...F]=V.split("?");return(0,le.zd)(F.join("?"))}function $e(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,L.aw)("no-auth-event")}}function Vt(){var V;return(null===(V=self?.location)||void 0===V?void 0:V.protocol)||null}function xr(V=(0,le.z$)()){return!("file:"!==Vt()&&"ionic:"!==Vt()&&"capacitor:"!==Vt()||!V.toLowerCase().match(/iphone|ipad|ipod|android/))}function Gi(){try{const V=self.localStorage,M=L.aI();if(V)return V.setItem(M,"1"),V.removeItem(M),!function fs(V=(0,le.z$)()){return function js(){return(0,le.w1)()&&11===document?.documentMode}()||function Fn(V=(0,le.z$)()){return/Edge\/\d+/.test(V)}(V)}()||(0,le.hl)()}catch{return Fr()&&(0,le.hl)()}return!1}function Fr(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Mr(){return(function xt(){return"http:"===Vt()||"https:"===Vt()}()||(0,le.ru)()||xr())&&!function qi(){return(0,le.b$)()||(0,le.UG)()}()&&Gi()&&!Fr()}function ps(){return xr()&&typeof document<"u"}function Ke(){return(Ke=(0,c.Z)(function*(){return!!ps()&&new Promise(V=>{const M=setTimeout(()=>{V(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(M),V(!0)})})})).apply(this,arguments)}const nr={LOCAL:"local",NONE:"none",SESSION:"session"},_n=L.ax,ei="persistence";function yn(V){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,c.Z)(function*(V){yield V._initializationPromise;const M=ut(),F=L.aA(ei,V.config.apiKey,V.name);M&&M.setItem(F,V._getPersistence())})).apply(this,arguments)}function ut(){var V;try{return(null===(V=function dr(){return typeof window<"u"?window:null}())||void 0===V?void 0:V.sessionStorage)||null}catch{return null}}const ct=L.ax;class St{constructor(){this.browserResolver=L.az(L.k),this.cordovaResolver=L.az(class Yt{constructor(){this._redirectPersistence=L.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=L.aB,this._overrideRedirectResult=L.aC}_initialize(M){var F=this;return(0,c.Z)(function*(){const te=M._key();let Te=F.eventManagers.get(te);return Te||(Te=new ve(M),F.eventManagers.set(te,Te),F.attachCallbackListeners(M,Te)),Te})()}_openPopup(M){(0,L.as)(M,"operation-not-supported-in-this-environment")}_openRedirect(M,F,te,Te){var Qe=this;return(0,c.Z)(function*(){!function oe(V){var M,F,te,Te,Qe,nt,ge,Ae,bt,sn;const Rt=me();(0,L.ax)("function"==typeof(null===(M=Rt?.universalLinks)||void 0===M?void 0:M.subscribe),V,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,L.ax)(typeof(null===(F=Rt?.BuildInfo)||void 0===F?void 0:F.packageName)<"u",V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,L.ax)("function"==typeof(null===(Qe=null===(Te=null===(te=Rt?.cordova)||void 0===te?void 0:te.plugins)||void 0===Te?void 0:Te.browsertab)||void 0===Qe?void 0:Qe.openUrl),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.ax)("function"==typeof(null===(Ae=null===(ge=null===(nt=Rt?.cordova)||void 0===nt?void 0:nt.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Ae?void 0:Ae.isAvailable),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,L.ax)("function"==typeof(null===(sn=null===(bt=Rt?.cordova)||void 0===bt?void 0:bt.InAppBrowser)||void 0===sn?void 0:sn.open),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(M);const nt=yield Qe._initialize(M);yield nt.initialized(),nt.resetRedirect(),(0,L.aD)(),yield Qe._originValidation(M);const ge=function fe(V,M,F=null){return{type:M,eventId:F,urlResponse:null,sessionId:K(),postBody:null,tenantId:V.tenantId,error:(0,L.aw)(V,"no-auth-event")}}(M,te,Te);yield function je(V,M){return Y()._set(ae(V),M)}(M,ge);const Ae=yield function q(V,M,F){return G.apply(this,arguments)}(M,ge,F),bt=yield function Oe(V){const{cordova:M}=me();return new Promise(F=>{M.plugins.browsertab.isAvailable(te=>{let Te=null;te?M.plugins.browsertab.openUrl(V):Te=M.InAppBrowser.open(V,(0,L.av)()?"_blank":"_system","location=yes"),F(Te)})})}(Ae);return function be(V,M,F){return ze.apply(this,arguments)}(M,nt,bt)})()}_isIframeWebStorageSupported(M,F){throw new Error("Method not implemented.")}_originValidation(M){const F=M._key();return this.originValidationPromises[F]||(this.originValidationPromises[F]=function Q(V){return Le.apply(this,arguments)}(M)),this.originValidationPromises[F]}attachCallbackListeners(M,F){const{universalLinks:te,handleOpenURL:Te,BuildInfo:Qe}=me(),nt=setTimeout((0,c.Z)(function*(){yield ne(M),F.onEvent($e())}),500),ge=function(){var sn=(0,c.Z)(function*(Rt){clearTimeout(nt);const on=yield ne(M);let Wi=null;on&&Rt?.url&&(Wi=function he(V,M){var F,te;const Te=function Re(V){const M=xe(V),F=M.link?decodeURIComponent(M.link):void 0,te=xe(F).link,Te=M.deep_link_id?decodeURIComponent(M.deep_link_id):void 0;return xe(Te).link||Te||te||F||V}(M);if(Te.includes("/__/auth/callback")){const Qe=xe(Te),nt=Qe.firebaseError?function re(V){try{return JSON.parse(V)}catch{return null}}(decodeURIComponent(Qe.firebaseError)):null,ge=null===(te=null===(F=nt?.code)||void 0===F?void 0:F.split("auth/"))||void 0===te?void 0:te[1],Ae=ge?(0,L.aw)(ge):null;return Ae?{type:V.type,eventId:V.eventId,tenantId:V.tenantId,error:Ae,urlResponse:null,sessionId:null,postBody:null}:{type:V.type,eventId:V.eventId,tenantId:V.tenantId,sessionId:V.sessionId,urlResponse:Te,postBody:null}}return null}(on,Rt.url)),F.onEvent(Wi||$e())});return function(on){return sn.apply(this,arguments)}}();typeof te<"u"&&"function"==typeof te.subscribe&&te.subscribe(null,ge);const Ae=Te,bt=`${Qe.packageName.toLowerCase()}://`;me().handleOpenURL=function(){var sn=(0,c.Z)(function*(Rt){if(Rt.toLowerCase().startsWith(bt)&&ge({url:Rt}),"function"==typeof Ae)try{Ae(Rt)}catch(on){console.error(on)}});return function(Rt){return sn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=L.a,this._completeRedirectFn=L.aB,this._overrideRedirectResult=L.aC}_initialize(M){var F=this;return(0,c.Z)(function*(){return yield F.selectUnderlyingResolver(),F.assertedUnderlyingResolver._initialize(M)})()}_openPopup(M,F,te,Te){var Qe=this;return(0,c.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openPopup(M,F,te,Te)})()}_openRedirect(M,F,te,Te){var Qe=this;return(0,c.Z)(function*(){return yield Qe.selectUnderlyingResolver(),Qe.assertedUnderlyingResolver._openRedirect(M,F,te,Te)})()}_isIframeWebStorageSupported(M,F){this.assertedUnderlyingResolver._isIframeWebStorageSupported(M,F)}_originValidation(M){return this.assertedUnderlyingResolver._originValidation(M)}get _shouldInitProactively(){return ps()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ct(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var M=this;return(0,c.Z)(function*(){if(M.underlyingResolver)return;const F=yield function $s(){return Ke.apply(this,arguments)}();M.underlyingResolver=F?M.cordovaResolver:M.browserResolver})()}}function Lr(V){return V.unwrap()}function Ur(V){return Rr(V)}function Rr(V){const{_tokenResponse:M}=V instanceof le.ZR?V.customData:V;if(!M)return null;if(!(V instanceof le.ZR)&&"temporaryProof"in M&&"phoneNumber"in M)return L.P.credentialFromResult(V);const F=M.providerId;if(!F||F===L.o.PASSWORD)return null;let te;switch(F){case L.o.GOOGLE:te=L.Q;break;case L.o.FACEBOOK:te=L.N;break;case L.o.GITHUB:te=L.T;break;case L.o.TWITTER:te=L.W;break;default:const{oauthIdToken:Te,oauthAccessToken:Qe,oauthTokenSecret:nt,pendingToken:ge,nonce:Ae}=M;return Qe||nt||Te||ge?ge?F.startsWith("saml.")?L.aL._create(F,ge):L.J._fromParams({providerId:F,signInMethod:F,pendingToken:ge,idToken:Te,accessToken:Qe}):new L.U(F).credential({idToken:Te,accessToken:Qe,rawNonce:Ae}):null}return V instanceof le.ZR?te.credentialFromError(V):te.credentialFromResult(V)}function At(V,M){return M.catch(F=>{throw F instanceof le.ZR&&function Et(V,M){var F,te;const Te=null===(F=M.customData)||void 0===F?void 0:F._tokenResponse;if("auth/multi-factor-auth-required"===(null===(te=M)||void 0===te?void 0:te.code))M.resolver=new vr(V,L.an(V,M));else if(Te){const Qe=Rr(M),nt=M;Qe&&(nt.credential=Qe,nt.tenantId=Te.tenantId||void 0,nt.email=Te.email||void 0,nt.phoneNumber=Te.phoneNumber||void 0)}}(V,F),F}).then(F=>{const Te=F.user;return{operationType:F.operationType,credential:Ur(F),additionalUserInfo:L.al(F),user:Mn.getOrCreate(Te)}})}function Ci(V,M){return Ht.apply(this,arguments)}function Ht(){return(Ht=(0,c.Z)(function*(V,M){const F=yield M;return{verificationId:F.verificationId,confirm:te=>At(V,F.confirm(te))}})).apply(this,arguments)}class vr{constructor(M,F){this.resolver=F,this.auth=function rr(V){return V.wrapped()}(M)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(M){return At(Lr(this.auth),this.resolver.resolveSignIn(M))}}class Mn{constructor(M){this._delegate=M,this.multiFactor=L.ao(M)}static getOrCreate(M){return Mn.USER_MAP.has(M)||Mn.USER_MAP.set(M,new Mn(M)),Mn.USER_MAP.get(M)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(M){return this._delegate.getIdTokenResult(M)}getIdToken(M){return this._delegate.getIdToken(M)}linkAndRetrieveDataWithCredential(M){return this.linkWithCredential(M)}linkWithCredential(M){var F=this;return(0,c.Z)(function*(){return At(F.auth,L.Z(F._delegate,M))})()}linkWithPhoneNumber(M,F){var te=this;return(0,c.Z)(function*(){return Ci(te.auth,L.l(te._delegate,M,F))})()}linkWithPopup(M){var F=this;return(0,c.Z)(function*(){return At(F.auth,L.d(F._delegate,M,St))})()}linkWithRedirect(M){var F=this;return(0,c.Z)(function*(){return yield yn(L.aE(F.auth)),L.g(F._delegate,M,St)})()}reauthenticateAndRetrieveDataWithCredential(M){return this.reauthenticateWithCredential(M)}reauthenticateWithCredential(M){var F=this;return(0,c.Z)(function*(){return At(F.auth,L._(F._delegate,M))})()}reauthenticateWithPhoneNumber(M,F){return Ci(this.auth,L.r(this._delegate,M,F))}reauthenticateWithPopup(M){return At(this.auth,L.e(this._delegate,M,St))}reauthenticateWithRedirect(M){var F=this;return(0,c.Z)(function*(){return yield yn(L.aE(F.auth)),L.h(F._delegate,M,St)})()}sendEmailVerification(M){return L.ab(this._delegate,M)}unlink(M){var F=this;return(0,c.Z)(function*(){return yield L.ak(F._delegate,M),F})()}updateEmail(M){return L.ag(this._delegate,M)}updatePassword(M){return L.ah(this._delegate,M)}updatePhoneNumber(M){return L.u(this._delegate,M)}updateProfile(M){return L.af(this._delegate,M)}verifyBeforeUpdateEmail(M,F){return L.ac(this._delegate,M,F)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Mn.USER_MAP=new WeakMap;const We=L.ax;let _e=(()=>{class V{constructor(F,te){if(this.app=F,te.isInitialized())return this._delegate=te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Te}=F.options;We(Te,"invalid-api-key",{appName:F.name}),We(Te,"invalid-api-key",{appName:F.name});const Qe=typeof window<"u"?St:void 0;this._delegate=te.initialize({options:{persistence:mt(Te,F.name),popupRedirectResolver:Qe}}),this._delegate._updateErrorMap(L.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Mn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(F){this._delegate.languageCode=F}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(F){this._delegate.tenantId=F}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(F,te){L.G(this._delegate,F,te)}applyActionCode(F){return L.a2(this._delegate,F)}checkActionCode(F){return L.a3(this._delegate,F)}confirmPasswordReset(F,te){return L.a1(this._delegate,F,te)}createUserWithEmailAndPassword(F,te){var Te=this;return(0,c.Z)(function*(){return At(Te._delegate,L.a5(Te._delegate,F,te))})()}fetchProvidersForEmail(F){return this.fetchSignInMethodsForEmail(F)}fetchSignInMethodsForEmail(F){return L.aa(this._delegate,F)}isSignInWithEmailLink(F){return L.a8(this._delegate,F)}getRedirectResult(){var F=this;return(0,c.Z)(function*(){We(Mr(),F._delegate,"operation-not-supported-in-this-environment");const te=yield L.j(F._delegate,St);return te?At(F._delegate,Promise.resolve(te)):{credential:null,user:null}})()}addFrameworkForLogging(F){!function ln(V,M){(0,L.aE)(V)._logFramework(M)}(this._delegate,F)}onAuthStateChanged(F,te,Te){const{next:Qe,error:nt,complete:ge}=Ye(F,te,Te);return this._delegate.onAuthStateChanged(Qe,nt,ge)}onIdTokenChanged(F,te,Te){const{next:Qe,error:nt,complete:ge}=Ye(F,te,Te);return this._delegate.onIdTokenChanged(Qe,nt,ge)}sendSignInLinkToEmail(F,te){return L.a7(this._delegate,F,te)}sendPasswordResetEmail(F,te){return L.a0(this._delegate,F,te||void 0)}setPersistence(F){var te=this;return(0,c.Z)(function*(){let Te;switch(function ll(V,M){_n(Object.values(nr).includes(M),V,"invalid-persistence-type"),(0,le.b$)()?_n(M!==nr.SESSION,V,"unsupported-persistence-type"):(0,le.UG)()?_n(M===nr.NONE,V,"unsupported-persistence-type"):Fr()?_n(M===nr.NONE||M===nr.LOCAL&&(0,le.hl)(),V,"unsupported-persistence-type"):_n(M===nr.NONE||Gi(),V,"unsupported-persistence-type")}(te._delegate,F),F){case nr.SESSION:Te=L.a;break;case nr.LOCAL:Te=(yield L.az(L.i)._isAvailable())?L.i:L.b;break;case nr.NONE:Te=L.L;break;default:return L.as("argument-error",{appName:te._delegate.name})}return te._delegate.setPersistence(Te)})()}signInAndRetrieveDataWithCredential(F){return this.signInWithCredential(F)}signInAnonymously(){return At(this._delegate,L.X(this._delegate))}signInWithCredential(F){return At(this._delegate,L.Y(this._delegate,F))}signInWithCustomToken(F){return At(this._delegate,L.$(this._delegate,F))}signInWithEmailAndPassword(F,te){return At(this._delegate,L.a6(this._delegate,F,te))}signInWithEmailLink(F,te){return At(this._delegate,L.a9(this._delegate,F,te))}signInWithPhoneNumber(F,te){return Ci(this._delegate,L.s(this._delegate,F,te))}signInWithPopup(F){var te=this;return(0,c.Z)(function*(){return We(Mr(),te._delegate,"operation-not-supported-in-this-environment"),At(te._delegate,L.c(te._delegate,F,St))})()}signInWithRedirect(F){var te=this;return(0,c.Z)(function*(){return We(Mr(),te._delegate,"operation-not-supported-in-this-environment"),yield yn(te._delegate),L.f(te._delegate,F,St)})()}updateCurrentUser(F){return this._delegate.updateCurrentUser(F)}verifyPasswordResetCode(F){return L.a4(this._delegate,F)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return V.Persistence=nr,V})();function Ye(V,M,F){let te=V;"function"!=typeof V&&({next:te,error:M,complete:F}=V);const Te=te;return{next:nt=>Te(nt&&Mn.getOrCreate(nt)),error:M,complete:F}}function mt(V,M){const F=function hn(V,M){const F=ut();if(!F)return[];const te=L.aA(ei,V,M);switch(F.getItem(te)){case nr.NONE:return[L.L];case nr.LOCAL:return[L.i,L.a];case nr.SESSION:return[L.a];default:return[]}}(V,M);if(typeof self<"u"&&!F.includes(L.i)&&F.push(L.i),typeof window<"u")for(const te of[L.b,L.a])F.includes(te)||F.push(te);return F.includes(L.L)||F.push(L.L),F}class yt{constructor(){this.providerId="phone",this._delegate=new L.P(Lr(j.Z.auth()))}static credential(M,F){return L.P.credential(M,F)}verifyPhoneNumber(M,F){return this._delegate.verifyPhoneNumber(M,F)}unwrap(){return this._delegate}}yt.PHONE_SIGN_IN_METHOD=L.P.PHONE_SIGN_IN_METHOD,yt.PROVIDER_ID=L.P.PROVIDER_ID;const Zt=L.ax;class ${constructor(M,F,te=j.Z.app()){var Te;Zt(null===(Te=te.options)||void 0===Te?void 0:Te.apiKey,"invalid-api-key",{appName:te.name}),this._delegate=new L.R(M,F,te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Z(V){V.INTERNAL.registerComponent(new Ie.wA("auth-compat",M=>{const F=M.getProvider("app-compat").getImmediate(),te=M.getProvider("auth");return new _e(F,te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:L.A.EMAIL_SIGNIN,PASSWORD_RESET:L.A.PASSWORD_RESET,RECOVER_EMAIL:L.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:L.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:L.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:L.A.VERIFY_EMAIL}},EmailAuthProvider:L.M,FacebookAuthProvider:L.N,GithubAuthProvider:L.T,GoogleAuthProvider:L.Q,OAuthProvider:L.U,SAMLAuthProvider:L.V,PhoneAuthProvider:yt,PhoneMultiFactorGenerator:L.m,RecaptchaVerifier:$,TwitterAuthProvider:L.W,Auth:_e,AuthCredential:L.H,Error:le.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),V.registerVersion("@firebase/auth-compat","0.2.24")}(j.Z)},7241:(gt,Se,U)=>{U.d(Se,{y:()=>me});var c=U(4021),j=U(4813),L=U(3122),le=U(7824),we=U(2046),ye=U(5975),Ie=U(1519);let me=(()=>{class Q{constructor(Oe){Oe&&(this._subscribe=Oe)}lift(Oe){const be=new Q;return be.source=this,be.operator=Oe,be}subscribe(Oe,be,ze){const oe=function G(Q){return Q&&Q instanceof c.Lv||function q(Q){return Q&&(0,ye.m)(Q.next)&&(0,ye.m)(Q.error)&&(0,ye.m)(Q.complete)}(Q)&&(0,j.Nn)(Q)}(Oe)?Oe:new c.Hp(Oe,be,ze);return(0,Ie.x)(()=>{const{operator:ce,source:et}=this;oe.add(ce?ce.call(oe,et):et?this._subscribe(oe):this._trySubscribe(oe))}),oe}_trySubscribe(Oe){try{return this._subscribe(Oe)}catch(be){Oe.error(be)}}forEach(Oe,be){return new(be=Ne(be))((ze,oe)=>{const ce=new c.Hp({next:et=>{try{Oe(et)}catch(tt){oe(tt),ce.unsubscribe()}},error:oe,complete:ze});this.subscribe(ce)})}_subscribe(Oe){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(Oe)}[L.L](){return this}pipe(...Oe){return(0,le.U)(Oe)(this)}toPromise(Oe){return new(Oe=Ne(Oe))((be,ze)=>{let oe;this.subscribe(ce=>oe=ce,ce=>ze(ce),()=>be(oe))})}}return Q.create=Le=>new Q(Le),Q})();function Ne(Q){var Le;return null!==(Le=Q??we.v.Promise)&&void 0!==Le?Le:Promise}},8023:(gt,Se,U)=>{U.d(Se,{x:()=>Ie});var c=U(7241),j=U(4813);const le=(0,U(5776).d)(Ne=>function(){Ne(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=U(8308),ye=U(1519);let Ie=(()=>{class Ne extends c.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(G){const Q=new me(this,this);return Q.operator=G,Q}_throwIfClosed(){if(this.closed)throw new le}next(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Q of this.currentObservers)Q.next(G)}})}error(G){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=G;const{observers:Q}=this;for(;Q.length;)Q.shift().error(G)}})}complete(){(0,ye.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:G}=this;for(;G.length;)G.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var G;return(null===(G=this.observers)||void 0===G?void 0:G.length)>0}_trySubscribe(G){return this._throwIfClosed(),super._trySubscribe(G)}_subscribe(G){return this._throwIfClosed(),this._checkFinalizedStatuses(G),this._innerSubscribe(G)}_innerSubscribe(G){const{hasError:Q,isStopped:Le,observers:Oe}=this;return Q||Le?j.Lc:(this.currentObservers=null,Oe.push(G),new j.w0(()=>{this.currentObservers=null,(0,we.P)(Oe,G)}))}_checkFinalizedStatuses(G){const{hasError:Q,thrownError:Le,isStopped:Oe}=this;Q?G.error(Le):Oe&&G.complete()}asObservable(){const G=new c.y;return G.source=this,G}}return Ne.create=(q,G)=>new me(q,G),Ne})();class me extends Ie{constructor(q,G){super(),this.destination=q,this.source=G}next(q){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.next)||void 0===Q||Q.call(G,q)}error(q){var G,Q;null===(Q=null===(G=this.destination)||void 0===G?void 0:G.error)||void 0===Q||Q.call(G,q)}complete(){var q,G;null===(G=null===(q=this.destination)||void 0===q?void 0:q.complete)||void 0===G||G.call(q)}_subscribe(q){var G,Q;return null!==(Q=null===(G=this.source)||void 0===G?void 0:G.subscribe(q))&&void 0!==Q?Q:j.Lc}}},4021:(gt,Se,U)=>{U.d(Se,{Hp:()=>ze,Lv:()=>Q});var c=U(5975),j=U(4813),L=U(2046),le=U(4922),we=U(408);const ye=Ne("C",void 0,void 0);function Ne(Pe,ve,fe){return{kind:Pe,value:ve,error:fe}}var q=U(4146),G=U(1519);class Q extends j.w0{constructor(ve){super(),this.isStopped=!1,ve?(this.destination=ve,(0,j.Nn)(ve)&&ve.add(this)):this.destination=tt}static create(ve,fe,je){return new ze(ve,fe,je)}next(ve){this.isStopped?et(function me(Pe){return Ne("N",Pe,void 0)}(ve),this):this._next(ve)}error(ve){this.isStopped?et(function Ie(Pe){return Ne("E",void 0,Pe)}(ve),this):(this.isStopped=!0,this._error(ve))}complete(){this.isStopped?et(ye,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(ve){this.destination.next(ve)}_error(ve){try{this.destination.error(ve)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Le=Function.prototype.bind;function Oe(Pe,ve){return Le.call(Pe,ve)}class be{constructor(ve){this.partialObserver=ve}next(ve){const{partialObserver:fe}=this;if(fe.next)try{fe.next(ve)}catch(je){oe(je)}}error(ve){const{partialObserver:fe}=this;if(fe.error)try{fe.error(ve)}catch(je){oe(je)}else oe(ve)}complete(){const{partialObserver:ve}=this;if(ve.complete)try{ve.complete()}catch(fe){oe(fe)}}}class ze extends Q{constructor(ve,fe,je){let ne;if(super(),(0,c.m)(ve)||!ve)ne={next:ve??void 0,error:fe??void 0,complete:je??void 0};else{let ie;this&&L.v.useDeprecatedNextContext?(ie=Object.create(ve),ie.unsubscribe=()=>this.unsubscribe(),ne={next:ve.next&&Oe(ve.next,ie),error:ve.error&&Oe(ve.error,ie),complete:ve.complete&&Oe(ve.complete,ie)}):ne=ve}this.destination=new be(ne)}}function oe(Pe){L.v.useDeprecatedSynchronousErrorHandling?(0,G.O)(Pe):(0,le.h)(Pe)}function et(Pe,ve){const{onStoppedNotification:fe}=L.v;fe&&q.z.setTimeout(()=>fe(Pe,ve))}const tt={closed:!0,next:we.Z,error:function ce(Pe){throw Pe},complete:we.Z}},4813:(gt,Se,U)=>{U.d(Se,{Lc:()=>ye,w0:()=>we,Nn:()=>Ie});var c=U(5975);const L=(0,U(5776).d)(Ne=>function(G){Ne(this),this.message=G?`${G.length} errors occurred during unsubscription:\n${G.map((Q,Le)=>`${Le+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=G});var le=U(8308);class we{constructor(q){this.initialTeardown=q,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let q;if(!this.closed){this.closed=!0;const{_parentage:G}=this;if(G)if(this._parentage=null,Array.isArray(G))for(const Oe of G)Oe.remove(this);else G.remove(this);const{initialTeardown:Q}=this;if((0,c.m)(Q))try{Q()}catch(Oe){q=Oe instanceof L?Oe.errors:[Oe]}const{_finalizers:Le}=this;if(Le){this._finalizers=null;for(const Oe of Le)try{me(Oe)}catch(be){q=q??[],be instanceof L?q=[...q,...be.errors]:q.push(be)}}if(q)throw new L(q)}}add(q){var G;if(q&&q!==this)if(this.closed)me(q);else{if(q instanceof we){if(q.closed||q._hasParent(this))return;q._addParent(this)}(this._finalizers=null!==(G=this._finalizers)&&void 0!==G?G:[]).push(q)}}_hasParent(q){const{_parentage:G}=this;return G===q||Array.isArray(G)&&G.includes(q)}_addParent(q){const{_parentage:G}=this;this._parentage=Array.isArray(G)?(G.push(q),G):G?[G,q]:q}_removeParent(q){const{_parentage:G}=this;G===q?this._parentage=null:Array.isArray(G)&&(0,le.P)(G,q)}remove(q){const{_finalizers:G}=this;G&&(0,le.P)(G,q),q instanceof we&&q._removeParent(this)}}we.EMPTY=(()=>{const Ne=new we;return Ne.closed=!0,Ne})();const ye=we.EMPTY;function Ie(Ne){return Ne instanceof we||Ne&&"closed"in Ne&&(0,c.m)(Ne.remove)&&(0,c.m)(Ne.add)&&(0,c.m)(Ne.unsubscribe)}function me(Ne){(0,c.m)(Ne)?Ne():Ne.unsubscribe()}},2046:(gt,Se,U)=>{U.d(Se,{v:()=>c});const c={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},9018:(gt,Se,U)=>{U.d(Se,{E:()=>j});const j=new(U(7241).y)(we=>we.complete())},237:(gt,Se,U)=>{U.d(Se,{D:()=>ve});var c=U(5955),j=U(7513),L=U(4119),ye=U(7241),me=U(4565),Ne=U(5975),q=U(6903);function Q(fe,je){if(!fe)throw new Error("Iterable cannot be null");return new ye.y(ne=>{(0,q.f)(ne,je,()=>{const ie=fe[Symbol.asyncIterator]();(0,q.f)(ne,je,()=>{ie.next().then(he=>{he.done?ne.complete():ne.next(he.value)})},0,!0)})})}var Le=U(2021),Oe=U(9450),be=U(6602),ze=U(6920),oe=U(2604),ce=U(5626),et=U(1559);function ve(fe,je){return je?function Pe(fe,je){if(null!=fe){if((0,Le.c)(fe))return function le(fe,je){return(0,c.Xf)(fe).pipe((0,L.R)(je),(0,j.Q)(je))}(fe,je);if((0,be.z)(fe))return function Ie(fe,je){return new ye.y(ne=>{let ie=0;return je.schedule(function(){ie===fe.length?ne.complete():(ne.next(fe[ie++]),ne.closed||this.schedule())})})}(fe,je);if((0,Oe.t)(fe))return function we(fe,je){return(0,c.Xf)(fe).pipe((0,L.R)(je),(0,j.Q)(je))}(fe,je);if((0,oe.D)(fe))return Q(fe,je);if((0,ze.T)(fe))return function G(fe,je){return new ye.y(ne=>{let ie;return(0,q.f)(ne,je,()=>{ie=fe[me.h](),(0,q.f)(ne,je,()=>{let he,K;try{({value:he,done:K}=ie.next())}catch(Y){return void ne.error(Y)}K?ne.complete():ne.next(he)},0,!0)}),()=>(0,Ne.m)(ie?.return)&&ie.return()})}(fe,je);if((0,et.L)(fe))return function tt(fe,je){return Q((0,et.Q)(fe),je)}(fe,je)}throw(0,ce.z)(fe)}(fe,je):(0,c.Xf)(fe)}},5955:(gt,Se,U)=>{U.d(Se,{Xf:()=>Le});var c=U(4762),j=U(6602),L=U(9450),le=U(7241),we=U(2021),ye=U(2604),Ie=U(5626),me=U(6920),Ne=U(1559),q=U(5975),G=U(4922),Q=U(3122);function Le(Pe){if(Pe instanceof le.y)return Pe;if(null!=Pe){if((0,we.c)(Pe))return function Oe(Pe){return new le.y(ve=>{const fe=Pe[Q.L]();if((0,q.m)(fe.subscribe))return fe.subscribe(ve);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Pe);if((0,j.z)(Pe))return function be(Pe){return new le.y(ve=>{for(let fe=0;fe<Pe.length&&!ve.closed;fe++)ve.next(Pe[fe]);ve.complete()})}(Pe);if((0,L.t)(Pe))return function ze(Pe){return new le.y(ve=>{Pe.then(fe=>{ve.closed||(ve.next(fe),ve.complete())},fe=>ve.error(fe)).then(null,G.h)})}(Pe);if((0,ye.D)(Pe))return ce(Pe);if((0,me.T)(Pe))return function oe(Pe){return new le.y(ve=>{for(const fe of Pe)if(ve.next(fe),ve.closed)return;ve.complete()})}(Pe);if((0,Ne.L)(Pe))return function et(Pe){return ce((0,Ne.Q)(Pe))}(Pe)}throw(0,Ie.z)(Pe)}function ce(Pe){return new le.y(ve=>{(function tt(Pe,ve){var fe,je,ne,ie;return(0,c.mG)(this,void 0,void 0,function*(){try{for(fe=(0,c.KL)(Pe);!(je=yield fe.next()).done;)if(ve.next(je.value),ve.closed)return}catch(he){ne={error:he}}finally{try{je&&!je.done&&(ie=fe.return)&&(yield ie.call(fe))}finally{if(ne)throw ne.error}}ve.complete()})})(Pe,ve).catch(fe=>ve.error(fe))})}},1860:(gt,Se,U)=>{U.d(Se,{T:()=>ye});var c=U(549),j=U(5955),L=U(9018),le=U(1635),we=U(237);function ye(...Ie){const me=(0,le.yG)(Ie),Ne=(0,le._6)(Ie,1/0),q=Ie;return q.length?1===q.length?(0,j.Xf)(q[0]):(0,c.J)(Ne)((0,we.D)(q,me)):L.E}},8499:(gt,Se,U)=>{U.d(Se,{x:()=>j});var c=U(4021);function j(le,we,ye,Ie,me){return new L(le,we,ye,Ie,me)}class L extends c.Lv{constructor(we,ye,Ie,me,Ne,q){super(we),this.onFinalize=Ne,this.shouldUnsubscribe=q,this._next=ye?function(G){try{ye(G)}catch(Q){we.error(Q)}}:super._next,this._error=me?function(G){try{me(G)}catch(Q){we.error(Q)}finally{this.unsubscribe()}}:super._error,this._complete=Ie?function(){try{Ie()}catch(G){we.error(G)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ye}=this;super.unsubscribe(),!ye&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},7969:(gt,Se,U)=>{U.d(Se,{U:()=>L});var c=U(2085),j=U(8499);function L(le,we){return(0,c.e)((ye,Ie)=>{let me=0;ye.subscribe((0,j.x)(Ie,Ne=>{Ie.next(le.call(we,Ne,me++))}))})}},549:(gt,Se,U)=>{U.d(Se,{J:()=>L});var c=U(4882),j=U(8330);function L(le=1/0){return(0,c.z)(j.y,le)}},4882:(gt,Se,U)=>{U.d(Se,{z:()=>me});var c=U(7969),j=U(5955),L=U(2085),le=U(6903),we=U(8499),Ie=U(5975);function me(Ne,q,G=1/0){return(0,Ie.m)(q)?me((Q,Le)=>(0,c.U)((Oe,be)=>q(Q,Oe,Le,be))((0,j.Xf)(Ne(Q,Le))),G):("number"==typeof q&&(G=q),(0,L.e)((Q,Le)=>function ye(Ne,q,G,Q,Le,Oe,be,ze){const oe=[];let ce=0,et=0,tt=!1;const Pe=()=>{tt&&!oe.length&&!ce&&q.complete()},ve=je=>ce<Q?fe(je):oe.push(je),fe=je=>{Oe&&q.next(je),ce++;let ne=!1;(0,j.Xf)(G(je,et++)).subscribe((0,we.x)(q,ie=>{Le?.(ie),Oe?ve(ie):q.next(ie)},()=>{ne=!0},void 0,()=>{if(ne)try{for(ce--;oe.length&&ce<Q;){const ie=oe.shift();be?(0,le.f)(q,be,()=>fe(ie)):fe(ie)}Pe()}catch(ie){q.error(ie)}}))};return Ne.subscribe((0,we.x)(q,ve,()=>{tt=!0,Pe()})),()=>{ze?.()}}(Q,Le,Ne,G)))}},7513:(gt,Se,U)=>{U.d(Se,{Q:()=>le});var c=U(6903),j=U(2085),L=U(8499);function le(we,ye=0){return(0,j.e)((Ie,me)=>{Ie.subscribe((0,L.x)(me,Ne=>(0,c.f)(me,we,()=>me.next(Ne),ye),()=>(0,c.f)(me,we,()=>me.complete(),ye),Ne=>(0,c.f)(me,we,()=>me.error(Ne),ye)))})}},815:(gt,Se,U)=>{U.d(Se,{B:()=>we});var c=U(5955),j=U(8023),L=U(4021),le=U(2085);function we(Ie={}){const{connector:me=(()=>new j.x),resetOnError:Ne=!0,resetOnComplete:q=!0,resetOnRefCountZero:G=!0}=Ie;return Q=>{let Le,Oe,be,ze=0,oe=!1,ce=!1;const et=()=>{Oe?.unsubscribe(),Oe=void 0},tt=()=>{et(),Le=be=void 0,oe=ce=!1},Pe=()=>{const ve=Le;tt(),ve?.unsubscribe()};return(0,le.e)((ve,fe)=>{ze++,!ce&&!oe&&et();const je=be=be??me();fe.add(()=>{ze--,0===ze&&!ce&&!oe&&(Oe=ye(Pe,G))}),je.subscribe(fe),!Le&&ze>0&&(Le=new L.Hp({next:ne=>je.next(ne),error:ne=>{ce=!0,et(),Oe=ye(tt,Ne,ne),je.error(ne)},complete:()=>{oe=!0,et(),Oe=ye(tt,q),je.complete()}}),(0,c.Xf)(ve).subscribe(Le))})(Q)}}function ye(Ie,me,...Ne){if(!0===me)return void Ie();if(!1===me)return;const q=new L.Hp({next:()=>{q.unsubscribe(),Ie()}});return me(...Ne).subscribe(q)}},4119:(gt,Se,U)=>{U.d(Se,{R:()=>j});var c=U(2085);function j(L,le=0){return(0,c.e)((we,ye)=>{ye.add(L.schedule(()=>we.subscribe(ye),le))})}},4146:(gt,Se,U)=>{U.d(Se,{z:()=>c});const c={setTimeout(j,L,...le){const{delegate:we}=c;return we?.setTimeout?we.setTimeout(j,L,...le):setTimeout(j,L,...le)},clearTimeout(j){const{delegate:L}=c;return(L?.clearTimeout||clearTimeout)(j)},delegate:void 0}},4565:(gt,Se,U)=>{U.d(Se,{h:()=>j});const j=function c(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3122:(gt,Se,U)=>{U.d(Se,{L:()=>c});const c="function"==typeof Symbol&&Symbol.observable||"@@observable"},1635:(gt,Se,U)=>{U.d(Se,{_6:()=>ye,jO:()=>le,yG:()=>we});var c=U(5975);function L(Ie){return Ie[Ie.length-1]}function le(Ie){return(0,c.m)(L(Ie))?Ie.pop():void 0}function we(Ie){return function j(Ie){return Ie&&(0,c.m)(Ie.schedule)}(L(Ie))?Ie.pop():void 0}function ye(Ie,me){return"number"==typeof L(Ie)?Ie.pop():me}},8308:(gt,Se,U)=>{function c(j,L){if(j){const le=j.indexOf(L);0<=le&&j.splice(le,1)}}U.d(Se,{P:()=>c})},5776:(gt,Se,U)=>{function c(j){const le=j(we=>{Error.call(we),we.stack=(new Error).stack});return le.prototype=Object.create(Error.prototype),le.prototype.constructor=le,le}U.d(Se,{d:()=>c})},1519:(gt,Se,U)=>{U.d(Se,{O:()=>le,x:()=>L});var c=U(2046);let j=null;function L(we){if(c.v.useDeprecatedSynchronousErrorHandling){const ye=!j;if(ye&&(j={errorThrown:!1,error:null}),we(),ye){const{errorThrown:Ie,error:me}=j;if(j=null,Ie)throw me}}else we()}function le(we){c.v.useDeprecatedSynchronousErrorHandling&&j&&(j.errorThrown=!0,j.error=we)}},6903:(gt,Se,U)=>{function c(j,L,le,we=0,ye=!1){const Ie=L.schedule(function(){le(),ye?j.add(this.schedule(null,we)):this.unsubscribe()},we);if(j.add(Ie),!ye)return Ie}U.d(Se,{f:()=>c})},8330:(gt,Se,U)=>{function c(j){return j}U.d(Se,{y:()=>c})},6602:(gt,Se,U)=>{U.d(Se,{z:()=>c});const c=j=>j&&"number"==typeof j.length&&"function"!=typeof j},2604:(gt,Se,U)=>{U.d(Se,{D:()=>j});var c=U(5975);function j(L){return Symbol.asyncIterator&&(0,c.m)(L?.[Symbol.asyncIterator])}},5975:(gt,Se,U)=>{function c(j){return"function"==typeof j}U.d(Se,{m:()=>c})},2021:(gt,Se,U)=>{U.d(Se,{c:()=>L});var c=U(3122),j=U(5975);function L(le){return(0,j.m)(le[c.L])}},6920:(gt,Se,U)=>{U.d(Se,{T:()=>L});var c=U(4565),j=U(5975);function L(le){return(0,j.m)(le?.[c.h])}},9450:(gt,Se,U)=>{U.d(Se,{t:()=>j});var c=U(5975);function j(L){return(0,c.m)(L?.then)}},1559:(gt,Se,U)=>{U.d(Se,{L:()=>le,Q:()=>L});var c=U(4762),j=U(5975);function L(we){return(0,c.FC)(this,arguments,function*(){const Ie=we.getReader();try{for(;;){const{value:me,done:Ne}=yield(0,c.qq)(Ie.read());if(Ne)return yield(0,c.qq)(void 0);yield yield(0,c.qq)(me)}}finally{Ie.releaseLock()}})}function le(we){return(0,j.m)(we?.getReader)}},2085:(gt,Se,U)=>{U.d(Se,{A:()=>j,e:()=>L});var c=U(5975);function j(le){return(0,c.m)(le?.lift)}function L(le){return we=>{if(j(we))return we.lift(function(ye){try{return le(ye,this)}catch(Ie){this.error(Ie)}});throw new TypeError("Unable to lift unknown Observable type")}}},408:(gt,Se,U)=>{function c(){}U.d(Se,{Z:()=>c})},7824:(gt,Se,U)=>{U.d(Se,{U:()=>L,z:()=>j});var c=U(8330);function j(...le){return L(le)}function L(le){return 0===le.length?c.y:1===le.length?le[0]:function(ye){return le.reduce((Ie,me)=>me(Ie),ye)}}},4922:(gt,Se,U)=>{U.d(Se,{h:()=>L});var c=U(2046),j=U(4146);function L(le){j.z.setTimeout(()=>{const{onUnhandledError:we}=c.v;if(!we)throw le;we(le)})}},5626:(gt,Se,U)=>{function c(j){return new TypeError(`You provided ${null!==j&&"object"==typeof j?"an invalid object":`'${j}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}U.d(Se,{z:()=>c})},4275:(gt,Se,U)=>{var c=U(4537);let j=null;function L(){return j}const Ie=new c.OlP("DocumentToken");let me=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Ne(){return(0,c.LFG)(G)}()},providedIn:"platform"}),n})();const q=new c.OlP("Location Initialized");let G=(()=>{class n extends me{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return L().getBaseHref(this._doc)}onPopState(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=L().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Q()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Q()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ie))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function Le(){return new G((0,c.LFG)(Ie))}()},providedIn:"platform"}),n})();function Q(){return!!window.history.pushState}function Oe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function be(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function ze(n){return n&&"?"!==n[0]?"?"+n:n}let oe=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(et)},providedIn:"root"}),n})();const ce=new c.OlP("appBaseHref");let et=(()=>{class n extends oe{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,c.f3M)(Ie).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Oe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+ze(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const u=this.prepareExternalUrl(i+ze(s));this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){const u=this.prepareExternalUrl(i+ze(s));this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(ce,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tt=(()=>{class n extends oe{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Oe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let u=this.prepareExternalUrl(i+ze(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.pushState(t,r,u)}replaceState(t,r,i,s){let u=this.prepareExternalUrl(i+ze(s));0==u.length&&(u=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,u)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(me),c.LFG(ce,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Pe=(()=>{class n{constructor(t){this._subject=new c.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=be(je(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+ze(r))}normalize(t){return n.stripTrailingSlash(function fe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+ze(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=ze,n.joinWithSlash=Oe,n.stripTrailingSlash=be,n.\u0275fac=function(t){return new(t||n)(c.LFG(oe))},n.\u0275prov=c.Yz7({token:n,factory:function(){return function ve(){return new Pe((0,c.LFG)(oe))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}var K=(()=>((K=K||{})[K.Format=0]="Format",K[K.Standalone=1]="Standalone",K))(),Y=(()=>((Y=Y||{})[Y.Narrow=0]="Narrow",Y[Y.Abbreviated=1]="Abbreviated",Y[Y.Wide=2]="Wide",Y[Y.Short=3]="Short",Y))(),ae=(()=>((ae=ae||{})[ae.Short=0]="Short",ae[ae.Medium=1]="Medium",ae[ae.Long=2]="Long",ae[ae.Full=3]="Full",ae))(),re=(()=>((re=re||{})[re.Decimal=0]="Decimal",re[re.Group=1]="Group",re[re.List=2]="List",re[re.PercentSign=3]="PercentSign",re[re.PlusSign=4]="PlusSign",re[re.MinusSign=5]="MinusSign",re[re.Exponential=6]="Exponential",re[re.SuperscriptingExponent=7]="SuperscriptingExponent",re[re.PerMille=8]="PerMille",re[re.Infinity=9]="Infinity",re[re.NaN=10]="NaN",re[re.TimeSeparator=11]="TimeSeparator",re[re.CurrencyDecimal=12]="CurrencyDecimal",re[re.CurrencyGroup=13]="CurrencyGroup",re))();function un(n,e){return Ke((0,c.cg1)(n)[c.wAp.DateFormat],e)}function Qt(n,e){return Ke((0,c.cg1)(n)[c.wAp.TimeFormat],e)}function Vt(n,e){return Ke((0,c.cg1)(n)[c.wAp.DateTimeFormat],e)}function xt(n,e){const t=(0,c.cg1)(n),r=t[c.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===re.CurrencyDecimal)return t[c.wAp.NumberSymbols][re.Decimal];if(e===re.CurrencyGroup)return t[c.wAp.NumberSymbols][re.Group]}return r}function Fr(n){if(!n[c.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[c.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ke(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function dr(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const ll=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,yn={},Cn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var hn=(()=>((hn=hn||{})[hn.Short=0]="Short",hn[hn.ShortGMT=1]="ShortGMT",hn[hn.Long=2]="Long",hn[hn.Extended=3]="Extended",hn))(),ut=(()=>((ut=ut||{})[ut.FullYear=0]="FullYear",ut[ut.Month=1]="Month",ut[ut.Date=2]="Date",ut[ut.Hours=3]="Hours",ut[ut.Minutes=4]="Minutes",ut[ut.Seconds=5]="Seconds",ut[ut.FractionalSeconds=6]="FractionalSeconds",ut[ut.Day=7]="Day",ut))(),ct=(()=>((ct=ct||{})[ct.DayPeriods=0]="DayPeriods",ct[ct.Days=1]="Days",ct[ct.Months=2]="Months",ct[ct.Eras=3]="Eras",ct))();function St(n,e,t,r){let i=function F(n){if(Te(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,u=1]=n.split("-").map(h=>+h);return Lr(i,s-1,u)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(ll))return function te(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const u=Number(n[4]||0)-t,h=Number(n[5]||0)-r,p=Number(n[6]||0),_=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,u,h,p,_),e}(r)}const e=new Date(n);if(!Te(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=rr(t,e)||e;let h,u=[];for(;e;){if(h=Cn.exec(e),!h){u.push(e);break}{u=u.concat(h.slice(1));const b=u.pop();if(!b)break;e=b}}let p=i.getTimezoneOffset();r&&(p=Z(r,p),i=function M(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function V(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(Z(e,i)-i))}(i,r,!0));let _="";return u.forEach(b=>{const T=function B(n){if($[n])return $[n];let e;switch(n){case"G":case"GG":case"GGG":e=Ht(ct.Eras,Y.Abbreviated);break;case"GGGG":e=Ht(ct.Eras,Y.Wide);break;case"GGGGG":e=Ht(ct.Eras,Y.Narrow);break;case"y":e=At(ut.FullYear,1,0,!1,!0);break;case"yy":e=At(ut.FullYear,2,0,!0,!0);break;case"yyy":e=At(ut.FullYear,3,0,!1,!0);break;case"yyyy":e=At(ut.FullYear,4,0,!1,!0);break;case"Y":e=Zt(1);break;case"YY":e=Zt(2,!0);break;case"YYY":e=Zt(3);break;case"YYYY":e=Zt(4);break;case"M":case"L":e=At(ut.Month,1,1);break;case"MM":case"LL":e=At(ut.Month,2,1);break;case"MMM":e=Ht(ct.Months,Y.Abbreviated);break;case"MMMM":e=Ht(ct.Months,Y.Wide);break;case"MMMMM":e=Ht(ct.Months,Y.Narrow);break;case"LLL":e=Ht(ct.Months,Y.Abbreviated,K.Standalone);break;case"LLLL":e=Ht(ct.Months,Y.Wide,K.Standalone);break;case"LLLLL":e=Ht(ct.Months,Y.Narrow,K.Standalone);break;case"w":e=yt(1);break;case"ww":e=yt(2);break;case"W":e=yt(1,!0);break;case"d":e=At(ut.Date,1);break;case"dd":e=At(ut.Date,2);break;case"c":case"cc":e=At(ut.Day,1);break;case"ccc":e=Ht(ct.Days,Y.Abbreviated,K.Standalone);break;case"cccc":e=Ht(ct.Days,Y.Wide,K.Standalone);break;case"ccccc":e=Ht(ct.Days,Y.Narrow,K.Standalone);break;case"cccccc":e=Ht(ct.Days,Y.Short,K.Standalone);break;case"E":case"EE":case"EEE":e=Ht(ct.Days,Y.Abbreviated);break;case"EEEE":e=Ht(ct.Days,Y.Wide);break;case"EEEEE":e=Ht(ct.Days,Y.Narrow);break;case"EEEEEE":e=Ht(ct.Days,Y.Short);break;case"a":case"aa":case"aaa":e=Ht(ct.DayPeriods,Y.Abbreviated);break;case"aaaa":e=Ht(ct.DayPeriods,Y.Wide);break;case"aaaaa":e=Ht(ct.DayPeriods,Y.Narrow);break;case"b":case"bb":case"bbb":e=Ht(ct.DayPeriods,Y.Abbreviated,K.Standalone,!0);break;case"bbbb":e=Ht(ct.DayPeriods,Y.Wide,K.Standalone,!0);break;case"bbbbb":e=Ht(ct.DayPeriods,Y.Narrow,K.Standalone,!0);break;case"B":case"BB":case"BBB":e=Ht(ct.DayPeriods,Y.Abbreviated,K.Format,!0);break;case"BBBB":e=Ht(ct.DayPeriods,Y.Wide,K.Format,!0);break;case"BBBBB":e=Ht(ct.DayPeriods,Y.Narrow,K.Format,!0);break;case"h":e=At(ut.Hours,1,-12);break;case"hh":e=At(ut.Hours,2,-12);break;case"H":e=At(ut.Hours,1);break;case"HH":e=At(ut.Hours,2);break;case"m":e=At(ut.Minutes,1);break;case"mm":e=At(ut.Minutes,2);break;case"s":e=At(ut.Seconds,1);break;case"ss":e=At(ut.Seconds,2);break;case"S":e=At(ut.FractionalSeconds,1);break;case"SS":e=At(ut.FractionalSeconds,2);break;case"SSS":e=At(ut.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Mn(hn.Short);break;case"ZZZZZ":e=Mn(hn.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Mn(hn.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Mn(hn.Long);break;default:return null}return $[n]=e,e}(b);_+=T?T(i,t,p):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),_}function Lr(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function rr(n,e){const t=function xe(n){return(0,c.cg1)(n)[c.wAp.LocaleId]}(n);if(yn[t]=yn[t]||{},yn[t][e])return yn[t][e];let r="";switch(e){case"shortDate":r=un(n,ae.Short);break;case"mediumDate":r=un(n,ae.Medium);break;case"longDate":r=un(n,ae.Long);break;case"fullDate":r=un(n,ae.Full);break;case"shortTime":r=Qt(n,ae.Short);break;case"mediumTime":r=Qt(n,ae.Medium);break;case"longTime":r=Qt(n,ae.Long);break;case"fullTime":r=Qt(n,ae.Full);break;case"short":const i=rr(n,"shortTime"),s=rr(n,"shortDate");r=Ur(Vt(n,ae.Short),[i,s]);break;case"medium":const u=rr(n,"mediumTime"),h=rr(n,"mediumDate");r=Ur(Vt(n,ae.Medium),[u,h]);break;case"long":const p=rr(n,"longTime"),_=rr(n,"longDate");r=Ur(Vt(n,ae.Long),[p,_]);break;case"full":const b=rr(n,"fullTime"),T=rr(n,"fullDate");r=Ur(Vt(n,ae.Full),[b,T])}return r&&(yn[t][e]=r),r}function Ur(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Et(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let u=String(n);for(;u.length<e;)u="0"+u;return r&&(u=u.slice(u.length-e)),s+u}function At(n,e,t=0,r=!1,i=!1){return function(s,u){let h=function Ci(n,e){switch(n){case ut.FullYear:return e.getFullYear();case ut.Month:return e.getMonth();case ut.Date:return e.getDate();case ut.Hours:return e.getHours();case ut.Minutes:return e.getMinutes();case ut.Seconds:return e.getSeconds();case ut.FractionalSeconds:return e.getMilliseconds();case ut.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||h>-t)&&(h+=t),n===ut.Hours)0===h&&-12===t&&(h=12);else if(n===ut.FractionalSeconds)return function Rr(n,e){return Et(n,3).substring(0,e)}(h,e);const p=xt(u,re.MinusSign);return Et(h,e,p,r,i)}}function Ht(n,e,t=K.Format,r=!1){return function(i,s){return function vr(n,e,t,r,i,s){switch(t){case ct.Months:return function Ut(n,e,t){const r=(0,c.cg1)(n),s=Ke([r[c.wAp.MonthsFormat],r[c.wAp.MonthsStandalone]],e);return Ke(s,t)}(e,i,r)[n.getMonth()];case ct.Days:return function Yt(n,e,t){const r=(0,c.cg1)(n),s=Ke([r[c.wAp.DaysFormat],r[c.wAp.DaysStandalone]],e);return Ke(s,t)}(e,i,r)[n.getDay()];case ct.DayPeriods:const u=n.getHours(),h=n.getMinutes();if(s){const _=function Mr(n){const e=(0,c.cg1)(n);return Fr(e),(e[c.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?dr(r):[dr(r[0]),dr(r[1])])}(e),b=function ps(n,e,t){const r=(0,c.cg1)(n);Fr(r);const s=Ke([r[c.wAp.ExtraData][0],r[c.wAp.ExtraData][1]],e)||[];return Ke(s,t)||[]}(e,i,r),T=_.findIndex(S=>{if(Array.isArray(S)){const[N,O]=S,W=u>=N.hours&&h>=N.minutes,J=u<O.hours||u===O.hours&&h<O.minutes;if(N.hours<O.hours){if(W&&J)return!0}else if(W||J)return!0}else if(S.hours===u&&S.minutes===h)return!0;return!1});if(-1!==T)return b[T]}return function lt(n,e,t){const r=(0,c.cg1)(n),s=Ke([r[c.wAp.DayPeriodsFormat],r[c.wAp.DayPeriodsStandalone]],e);return Ke(s,t)}(e,i,r)[u<12?0:1];case ct.Eras:return function $e(n,e){return Ke((0,c.cg1)(n)[c.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Mn(n){return function(e,t,r){const i=-1*r,s=xt(t,re.MinusSign),u=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case hn.Short:return(i>=0?"+":"")+Et(u,2,s)+Et(Math.abs(i%60),2,s);case hn.ShortGMT:return"GMT"+(i>=0?"+":"")+Et(u,1,s);case hn.Long:return"GMT"+(i>=0?"+":"")+Et(u,2,s)+":"+Et(Math.abs(i%60),2,s);case hn.Extended:return 0===r?"Z":(i>=0?"+":"")+Et(u,2,s)+":"+Et(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}function mt(n){return Lr(n.getFullYear(),n.getMonth(),n.getDate()+(4-n.getDay()))}function yt(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,u=t.getDate();i=1+Math.floor((u+s)/7)}else{const s=mt(t),u=function Ye(n){const e=Lr(n,0,1).getDay();return Lr(n,0,1+(e<=4?4:11)-e)}(s.getFullYear()),h=s.getTime()-u.getTime();i=1+Math.round(h/6048e5)}return Et(i,n,xt(r,re.MinusSign))}}function Zt(n,e=!1){return function(t,r){return Et(mt(t).getFullYear(),n,xt(r,re.MinusSign),e)}}const $={};function Z(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Te(n){return n instanceof Date&&!isNaN(n.valueOf())}class hl{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Ii=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,u)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new hl(i.item,this._ngForOf,-1,-1),null===u?void 0:u);else if(null==u)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,u),Ro(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{Ro(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc),c.Y36(c.ZZ4))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function Ro(n,e){n.context.$implicit=e.item}let Rn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ry,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){hr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){hr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.s_b),c.Y36(c.Rgc))},n.\u0275dir=c.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ry{constructor(){this.$implicit=null,this.ngIf=null}}function hr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,c.AaK)(e)}'.`)}function hi(n,e){return new c.vHH(2100,!1)}class nb{createSubscription(e,t){return e.subscribe({next:t,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class gs{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}}const rb=new gs,np=new nb;let gd=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if((0,c.QGY)(t))return rb;if((0,c.F4k)(t))return np;throw hi()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.sBO,16))},n.\u0275pipe=c.Yjl({name:"async",type:n,pure:!1,standalone:!0}),n})();const ob=new c.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let md=(()=>{class n{constructor(t,r){this.locale=t,this.defaultTimezone=r}transform(t,r="mediumDate",i,s){if(null==t||""===t||t!=t)return null;try{return St(t,r,s||this.locale,i??this.defaultTimezone??void 0)}catch(u){throw hi()}}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.soG,16),c.Y36(ob,24))},n.\u0275pipe=c.Yjl({name:"date",type:n,pure:!0,standalone:!0}),n})(),up=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();function gl(n){return"server"===n}let cp=(()=>{class n{}return n.\u0275prov=(0,c.Yz7)({token:n,providedIn:"root",factory:()=>new oy((0,c.LFG)(Ie),window)}),n})();class oy{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Vr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const u=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(u)return u}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=ml(this.window.history)||ml(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function ml(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ya extends class pp extends class ye{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function we(n){j||(j=n)}(new ya)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function gy(){return Lo=Lo||document.querySelector("base"),Lo?Lo.getAttribute("href"):null}();return null==t?null:function ms(n){In=In||document.createElement("a"),In.setAttribute("href",n);const e=In.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Lo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function fd(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let In,Lo=null;const Tn=new c.OlP("TRANSITION_ID"),_y=[{provide:c.ip1,useFactory:function my(n,e,t){return()=>{t.get(c.CZH).donePromise.then(()=>{const r=L(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Tn,Ie,c.zs3],multi:!0}];let vy=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Nd=new c.OlP("EventManagerPlugins");let ku=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const u=i[s];if(u.supports(t))return this._eventNameToPlugin.set(t,u),u}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Nd),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Cl{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=L().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Ou=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),Uo=(()=>{class n extends Ou{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(s=>{const u=this._doc.createElement("style");u.textContent=s,i.push(r.appendChild(u))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(Pd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Pd))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Pd(n){L().remove(n)}const kd={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},gp=/%COMP%/g;function Fu(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Fu(n,i,t):(i=i.replace(gp,n),t.push(i))}return t}function Lu(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Ld=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new _s(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case c.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new mp(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case c.ifc.ShadowDom:return new by(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Fu(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(ku),c.LFG(Uo),c.LFG(c.AFp))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class _s{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(kd[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(Tl(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(Tl(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=kd[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=kd[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(c.JOm.DashCase|c.JOm.Important)?e.style.setProperty(t,r,i&c.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&c.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Lu(r)):this.eventManager.addEventListener(e,t,Lu(r))}}function Tl(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class mp extends _s{constructor(e,t,r,i){super(e),this.component=r;const s=Fu(i+"-"+r.id,r.styles,[]);t.addStyles(s),this.contentAttr=function Il(n){return"_ngcontent-%COMP%".replace(gp,n)}(i+"-"+r.id),this.hostAttr=function Fd(n){return"_nghost-%COMP%".replace(gp,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class by extends _s{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Fu(i.id,i.styles,[]);for(let u=0;u<s.length;u++){const h=document.createElement("style");h.textContent=s[u],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Vo=(()=>{class n extends Cl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Cy=["alt","control","meta","shift"],Ws={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Bd={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Uu=(()=>{class n extends Cl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),u=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>L().onAndCancel(t,s.domEventName,u))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let u="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),u="code."),Cy.forEach(_=>{const b=r.indexOf(_);b>-1&&(r.splice(b,1),u+=_+".")}),u+=s,0!=r.length||0===s.length)return null;const p={};return p.domEventName=i,p.fullKey=u,p}static matchEventFullKeyCode(t,r){let i=Ws[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),Cy.forEach(u=>{u!==i&&(0,Bd[u])(t)&&(s+=u+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Dl=(0,c.eFA)(c._c5,"browser",[{provide:c.Lbi,useValue:"browser"},{provide:c.g9A,useValue:function Ty(){ya.makeCurrent()},multi:!0},{provide:Ie,useFactory:function jd(){return(0,c.RDi)(document),document},deps:[]}]),Sl=new c.OlP(""),Al=[{provide:c.rWj,useClass:class yy{addToWindow(e){c.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},c.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),c.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),c.dqk.frameworkStabilizers||(c.dqk.frameworkStabilizers=[]),c.dqk.frameworkStabilizers.push(r=>{const i=c.dqk.getAllAngularTestabilities();let s=i.length,u=!1;const h=function(p){u=u||p,s--,0==s&&r(u)};i.forEach(function(p){p.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?L().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:c.lri,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]},{provide:c.dDg,useClass:c.dDg,deps:[c.R0b,c.eoX,c.rWj]}],Bu=[{provide:c.zSh,useValue:"root"},{provide:c.qLn,useFactory:function Bo(){return new c.qLn},deps:[]},{provide:Nd,useClass:Vo,multi:!0,deps:[Ie,c.R0b,c.Lbi]},{provide:Nd,useClass:Uu,multi:!0,deps:[Ie]},{provide:Ld,useClass:Ld,deps:[ku,Uo,c.AFp]},{provide:c.FYo,useExisting:Ld},{provide:Ou,useExisting:Uo},{provide:Uo,useClass:Uo,deps:[Ie]},{provide:ku,useClass:ku,deps:[Nd,c.R0b]},{provide:class _l{},useClass:vy,deps:[]},[]];let jo=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:c.AFp,useValue:t.appId},{provide:Tn,useExisting:c.AFp},_y]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Sl,12))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[...Bu,...Al],imports:[up,c.hGG]}),n})(),Zs=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ie))},n.\u0275prov=c.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function xl(){return new Zs((0,c.LFG)(Ie))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Kt=U(237),Ai=U(1635);function it(...n){const e=(0,Ai.yG)(n);return(0,Kt.D)(n,e)}var ys=U(8023);class mn extends ys.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ho=(0,U(5776).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var qn=U(7241);const{isArray:qo}=Array,{getPrototypeOf:Ip,prototype:Hd,keys:xy}=Object;function Go(n){if(1===n.length){const e=n[0];if(qo(e))return{args:e,keys:null};if(function Tp(n){return n&&"object"==typeof n&&Ip(n)===Hd}(e)){const t=xy(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Ks=U(8330),Je=U(7969);const{isArray:qd}=Array;function Dp(n){return(0,Je.U)(e=>function Ys(n,e){return qd(e)?n(...e):n(e)}(n,e))}function Gd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Ln=U(8499),Wd=U(6903);function Sp(...n){const e=(0,Ai.yG)(n),t=(0,Ai.jO)(n),{args:r,keys:i}=Go(n);if(0===r.length)return(0,Kt.D)([],e);const s=new qn.y(function Zd(n,e,t=Ks.y){return r=>{Ap(e,()=>{const{length:i}=n,s=new Array(i);let u=i,h=i;for(let p=0;p<i;p++)Ap(e,()=>{const _=(0,Kt.D)(n[p],e);let b=!1;_.subscribe((0,Ln.x)(r,T=>{s[p]=T,b||(b=!0,h--),h||r.next(t(s.slice()))},()=>{--u||r.complete()}))},r)},r)}}(r,e,i?u=>Gd(i,u):Ks.y));return t?s.pipe(Dp(t)):s}function Ap(n,e,t){n?(0,Wd.f)(t,n,e):e()}var Wo=U(549);function Ea(...n){return function kl(){return(0,Wo.J)(1)}()((0,Kt.D)(n,(0,Ai.yG)(n)))}var Qs=U(5955);function ba(n){return new qn.y(e=>{(0,Qs.Xf)(n()).subscribe(e)})}var zd=U(7824),ws=U(5975);function Zo(n,e){const t=(0,ws.m)(n)?n:()=>n,r=i=>i.error(t());return new qn.y(e?i=>e.schedule(r,0,i):r)}var Es=U(9018),Kd=U(4813),Un=U(2085);function Js(){return(0,Un.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Ln.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Xs extends qn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Un.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Kd.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Ln.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Kd.w0.EMPTY)}return e}refCount(){return Js()(this)}}function Vn(n,e){return(0,Un.e)((t,r)=>{let i=null,s=0,u=!1;const h=()=>u&&!i&&r.complete();t.subscribe((0,Ln.x)(r,p=>{i?.unsubscribe();let _=0;const b=s++;(0,Qs.Xf)(n(p,b)).subscribe(i=(0,Ln.x)(r,T=>r.next(e?e(p,T,b,_++):T),()=>{i=null,h()}))},()=>{u=!0,h()}))})}function vn(n){return n<=0?()=>Es.E:(0,Un.e)((e,t)=>{let r=0;e.subscribe((0,Ln.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function zo(...n){const e=(0,Ai.yG)(n);return(0,Un.e)((t,r)=>{(e?Ea(n,t,e):Ea(n,t)).subscribe(r)})}function gi(n,e){return(0,Un.e)((t,r)=>{let i=0;t.subscribe((0,Ln.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var fr=U(4882);function Yi(n){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,Ln.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function xp(n=My){return(0,Un.e)((e,t)=>{let r=!1;e.subscribe((0,Ln.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function My(){return new Ho}function xi(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gi((i,s)=>n(i,s,r)):Ks.y,vn(1),t?Yi(e):xp(()=>new Ho))}function bs(n,e){return(0,ws.m)(e)?(0,fr.z)(n,e,1):(0,fr.z)(n,1)}function Dn(n,e,t){const r=(0,ws.m)(n)||e||t?{next:n,error:e,complete:t}:n;return r?(0,Un.e)((i,s)=>{var u;null===(u=r.subscribe)||void 0===u||u.call(r);let h=!0;i.subscribe((0,Ln.x)(s,p=>{var _;null===(_=r.next)||void 0===_||_.call(r,p),s.next(p)},()=>{var p;h=!1,null===(p=r.complete)||void 0===p||p.call(r),s.complete()},p=>{var _;h=!1,null===(_=r.error)||void 0===_||_.call(r,p),s.error(p)},()=>{var p,_;h&&(null===(p=r.unsubscribe)||void 0===p||p.call(r)),null===(_=r.finalize)||void 0===_||_.call(r)}))}):Ks.y}function Mi(n){return(0,Un.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,Ln.x)(t,void 0,void 0,u=>{s=(0,Qs.Xf)(n(u,Mi(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function Ko(n,e,t,r,i){return(s,u)=>{let h=t,p=e,_=0;s.subscribe((0,Ln.x)(u,b=>{const T=_++;p=h?n(p,b,T):(h=!0,b),r&&u.next(p)},i&&(()=>{h&&u.next(p),u.complete()})))}}function eo(n,e){return(0,Un.e)(Ko(n,e,arguments.length>=2,!0))}function Ca(n){return n<=0?()=>Es.E:(0,Un.e)((e,t)=>{let r=[];e.subscribe((0,Ln.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Ia(n,e){const t=arguments.length>=2;return r=>r.pipe(n?gi((i,s)=>n(i,s,r)):Ks.y,Ca(1),t?Yi(e):xp(()=>new Ho))}function Wu(n){return(0,Un.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ot="primary",Ri=Symbol("RouteTitle");class Yo{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ta(n){return new Yo(n)}function gb(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const u=r[s],h=n[s];if(u.startsWith(":"))i[u.substring(1)]=h;else if(u!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function mi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!Ry(n[i],e[i]))return!1;return!0}function Ry(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function Rp(n){return Array.prototype.concat.apply([],n)}function Qd(n){return n.length>0?n[n.length-1]:null}function Sn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Cs(n){return(0,c.CqO)(n)?n:(0,c.QGY)(n)?(0,Kt.D)(Promise.resolve(n)):it(n)}const _b={exact:function Pp(n,e,t){if(!Ts(n.segments,e.segments)||!Is(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!Pp(n.children[r],e.children[r],t))return!1;return!0},subset:Fl},Xd={exact:function eh(n,e){return mi(n,e)},subset:function Zu(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ry(n[t],e[t]))},ignored:()=>!0};function Ny(n,e,t){return _b[t.paths](n.root,e.root,t.matrixParams)&&Xd[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Fl(n,e,t){return zu(n,e,e.segments,t)}function zu(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ts(i,t)||e.hasChildren()||!Is(i,t,r))}if(n.segments.length===t.length){if(!Ts(n.segments,t)||!Is(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!Fl(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Ts(n.segments,i)&&Is(n.segments,i,r)&&n.children[Ot])&&zu(n.children[Ot],e,s,r)}}function Is(n,e,t){return e.every((r,i)=>Xd[t](n[i].parameters,r.parameters))}class Qo{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ta(this.queryParams)),this._queryParamMap}toString(){return Op.serialize(this)}}class Bt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Sn(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Sa(this)}}class Ll{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ta(this.parameters)),this._parameterMap}toString(){return Py(this)}}function Ts(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let th=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return new Da},providedIn:"root"}),n})();class Da{parse(e){const t=new m(e);return new Qo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Ul(e.root,!0)}`,r=function vb(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Yu(t)}=${Yu(i)}`).join("&"):`${Yu(t)}=${Yu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function rh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Op=new Da;function Sa(n){return n.segments.map(e=>Py(e)).join("/")}function Ul(n,e){if(!n.hasChildren())return Sa(n);if(e){const t=n.children[Ot]?Ul(n.children[Ot],!1):"",r=[];return Sn(n.children,(i,s)=>{s!==Ot&&r.push(`${s}:${Ul(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function kp(n,e){let t=[];return Sn(n.children,(r,i)=>{i===Ot&&(t=t.concat(e(r,i)))}),Sn(n.children,(r,i)=>{i!==Ot&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===Ot?[Ul(n.children[Ot],!1)]:[`${i}:${Ul(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ot]?`${Sa(n)}/${t[0]}`:`${Sa(n)}/(${t.join("//")})`}}function nh(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Yu(n){return nh(n).replace(/%3B/gi,";")}function Qi(n){return nh(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ds(n){return decodeURIComponent(n)}function ih(n){return Ds(n.replace(/\+/g,"%20"))}function Py(n){return`${Qi(n.path)}${function yb(n){return Object.keys(n).map(e=>`;${Qi(e)}=${Qi(n[e])}`).join("")}(n.parameters)}`}const wb=/^[^\/()?;=#]+/;function sh(n){const e=n.match(wb);return e?e[0]:""}const oh=/^[^=?&#]+/,Eb=/^[^&#]+/;class m{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Bt([],{}):new Bt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ot]=new Bt(e,t)),r}parseSegment(){const e=sh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new c.vHH(4009,!1);return this.capture(e),new Ll(Ds(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=sh(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=sh(this.remaining);i&&(r=i,this.capture(r))}e[Ds(t)]=Ds(r)}parseQueryParam(e){const t=function ky(n){const e=n.match(oh);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const u=function w(n){const e=n.match(Eb);return e?e[0]:""}(this.remaining);u&&(r=u,this.capture(r))}const i=ih(t),s=ih(r);if(e.hasOwnProperty(i)){let u=e[i];Array.isArray(u)||(u=[u],e[i]=u),u.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=sh(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new c.vHH(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=Ot);const u=this.parseChildren();t[s]=1===Object.keys(u).length?u[Ot]:new Bt([],u),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new c.vHH(4011,!1)}}function y(n){return n.segments.length>0?new Bt([],{[Ot]:n}):n}function C(n){const e={};for(const r of Object.keys(n.children)){const s=C(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function A(n){if(1===n.numberOfChildren&&n.children[Ot]){const e=n.children[Ot];return new Bt(n.segments.concat(e.segments),e.children)}return n}(new Bt(n.segments,e))}function P(n){return n instanceof Qo}const X=!1;function Ft(n,e,t,r,i){if(0===t.length)return _i(e.root,e.root,e.root,r,i);const s=function Xu(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new Ju(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,u)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return Sn(s.outlets,(p,_)=>{h[_]="string"==typeof p?p.split("/"):p}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===u?(s.split("/").forEach((h,p)=>{0==p&&"."===h||(0==p&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new Ju(t,e,r)}(t);return s.toRoot()?_i(e.root,e.root,new Bt([],{}),r,i):function u(p){const _=function ah(n,e,t,r){if(n.isAbsolute)return new Jo(e.root,!0,0);if(-1===r)return new Jo(t,t===e.root,0);return function ec(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new c.vHH(4005,X);i=r.segments.length}return new Jo(r,!1,i-s)}(t,r+(tn(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,p),b=_.processChildren?to(_.segmentGroup,_.index,s.commands):Bl(_.segmentGroup,_.index,s.commands);return _i(e.root,_.segmentGroup,b,r,i)}(n.snapshot?._lastPathIndex)}function tn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Er(n){return"object"==typeof n&&null!=n&&n.outlets}function _i(n,e,t,r,i){let u,s={};r&&Sn(r,(p,_)=>{s[_]=Array.isArray(p)?p.map(b=>`${b}`):`${p}`}),u=n===e?t:Qu(n,e,t);const h=y(C(u));return new Qo(h,s,i)}function Qu(n,e,t){const r={};return Sn(n.children,(i,s)=>{r[s]=i===e?t:Qu(i,e,t)}),new Bt(n.segments,r)}class Ju{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&tn(r[0]))throw new c.vHH(4003,X);const i=r.find(Er);if(i&&i!==Qd(r))throw new c.vHH(4004,X)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Jo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Bl(n,e,t){if(n||(n=new Bt([],{})),0===n.segments.length&&n.hasChildren())return to(n,e,t);const r=function Oy(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const u=n.segments[i],h=t[r];if(Er(h))break;const p=`${h}`,_=r<t.length-1?t[r+1]:null;if(i>0&&void 0===p)break;if(p&&_&&"object"==typeof _&&void 0===_.outlets){if(!Lp(p,_,u))return s;r+=2}else{if(!Lp(p,{},u))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new Bt(n.segments.slice(0,r.pathIndex),{});return s.children[Ot]=new Bt(n.segments.slice(r.pathIndex),n.children),to(s,0,i)}return r.match&&0===i.length?new Bt(n.segments,{}):r.match&&!n.hasChildren()?wn(n,e,t):r.match?to(n,0,i):wn(n,e,t)}function to(n,e,t){if(0===t.length)return new Bt(n.segments,{});{const r=function Vl(n){return Er(n[0])?n[0].outlets:{[Ot]:n}}(t),i={};return Sn(r,(s,u)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[u]=Bl(n.children[u],e,s))}),Sn(n.children,(s,u)=>{void 0===r[u]&&(i[u]=s)}),new Bt(n.segments,i)}}function wn(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Er(s)){const p=Fy(s.outlets);return new Bt(r,p)}if(0===i&&tn(t[0])){r.push(new Ll(n.segments[e].path,bb(t[0]))),i++;continue}const u=Er(s)?s.outlets[Ot]:`${s}`,h=i<t.length-1?t[i+1]:null;u&&h&&tn(h)?(r.push(new Ll(u,bb(h))),i+=2):(r.push(new Ll(u,{})),i++)}return new Bt(r,{})}function Fy(n){const e={};return Sn(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=wn(new Bt([],{}),0,t))}),e}function bb(n){const e={};return Sn(n,(t,r)=>e[r]=`${t}`),e}function Lp(n,e,t){return n==t.path&&mi(e,t.parameters)}class no{constructor(e,t){this.id=e,this.url=t}}class Ly extends no{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class jl extends no{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Up extends no{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Cb extends no{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class gA extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bO extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class CO extends no{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class lh extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Uy extends no{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ib{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Tb{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Db{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mA{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sb{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ab{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vp{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class xb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=uh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=uh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Bp(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Bp(e,this._root).map(t=>t.value)}}function uh(n,e){if(n===e.value)return e;for(const t of e.children){const r=uh(n,t);if(r)return r}return null}function Bp(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Bp(n,t);if(r.length)return r.unshift(e),r}return[]}class ro{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Ji(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Mb extends xb{constructor(e,t){super(e),this.snapshot=t,ch(this,e)}toString(){return this.snapshot.toString()}}function jp(n,e){const t=function $p(n,e){const u=new io([],{},{},"",{},Ot,e,null,n.root,-1,{});return new Vy("",new ro(u,[]))}(n,e),r=new mn([new Ll("",{})]),i=new mn({}),s=new mn({}),u=new mn({}),h=new mn(""),p=new $l(r,i,u,h,s,Ot,e,t.root);return p.snapshot=t.root,new Mb(new ro(p,[]),t)}class $l{constructor(e,t,r,i,s,u,h,p){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this.title=this.data?.pipe((0,Je.U)(_=>_[Ri]))??it(void 0),this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Je.U)(e=>Ta(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Je.U)(e=>Ta(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Hp(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function qp(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class io{constructor(e,t,r,i,s,u,h,p,_,b,T,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=u,this.component=h,this.title=this.data?.[Ri],this.routeConfig=p,this._urlSegment=_,this._lastPathIndex=b,this._correctedLastPathIndex=S??b,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ta(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ta(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vy extends xb{constructor(e,t){super(t),this.url=e,ch(this,t)}toString(){return Rb(this._root)}}function ch(n,e){e.value._routerState=n,e.children.forEach(t=>ch(n,t))}function Rb(n){const e=n.children.length>0?` { ${n.children.map(Rb).join(", ")} } `:"";return`${n.value}${e}`}function By(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,mi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),mi(e.params,t.params)||n.params.next(t.params),function Mp(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!mi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),mi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Gp(n,e){const t=mi(n.params,e.params)&&function Ku(n,e){return Ts(n,e)&&n.every((t,r)=>mi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Gp(n.parent,e.parent))}function dh(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function _A(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return dh(n,r,i);return dh(n,r)})}(n,e,t);return new ro(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const u=s.route;return u.value._futureSnapshot=e.value,u.children=e.children.map(h=>dh(n,h)),u}}const r=function yA(n){return new $l(new mn(n.url),new mn(n.params),new mn(n.queryParams),new mn(n.fragment),new mn(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>dh(n,s));return new ro(r,i)}}const jy="ngNavigationCancelingError";function Wp(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=P(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Nb(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function Nb(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[jy]=!0,r.cancellationCode=e,t&&(r.url=t),r}function $y(n){return Pb(n)&&P(n.url)}function Pb(n){return n&&n[jy]}class kb{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Zp,this.attachRef=null}}let Zp=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new kb,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const zp=!1;let Aa=(()=>{class n{constructor(t,r,i,s,u){this.parentContexts=t,this.location=r,this.changeDetector=s,this.environmentInjector=u,this.activated=null,this._activatedRoute=null,this.activateEvents=new c.vpe,this.deactivateEvents=new c.vpe,this.attachEvents=new c.vpe,this.detachEvents=new c.vpe,this.name=i||Ot,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new c.vHH(4012,zp);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new c.vHH(4012,zp);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new c.vHH(4012,zp);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new c.vHH(4013,zp);this._activatedRoute=t;const i=this.location,u=t._futureSnapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,p=new vA(t,h,i.injector);if(r&&function nc(n){return!!n.resolveComponentFactory}(r)){const _=r.resolveComponentFactory(u);this.activated=i.createComponent(_,i.length,p)}else this.activated=i.createComponent(u,{index:i.length,injector:p,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Zp),c.Y36(c.s_b),c.$8M("name"),c.Y36(c.sBO),c.Y36(c.lqb))},n.\u0275dir=c.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class vA{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===$l?this.route:e===Zp?this.childContexts:this.parent.get(e,t)}}let Hl=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[c.jDz],decls:1,vars:0,template:function(t,r){1&t&&c._UZ(0,"router-outlet")},dependencies:[Aa],encapsulation:2}),n})();function Ob(n,e){return n.providers&&!n._injector&&(n._injector=(0,c.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Gy(n){const e=n.children&&n.children.map(Gy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ot&&(t.component=Hl),t}function Xi(n){return n.outlet||Ot}function Kp(n,e){const t=n.filter(r=>Xi(r)===e);return t.push(...n.filter(r=>Xi(r)!==e)),t}function Yp(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Wy{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),By(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=Ji(t);e.children.forEach(s=>{const u=s.value.outlet;this.deactivateRoutes(s,i[u],r),delete i[u]}),Sn(i,(s,u)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const u=r.getContext(i.outlet);u&&this.deactivateChildRoutes(e,t,u.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ji(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);if(r&&r.outlet){const u=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:u,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=Ji(e);for(const u of Object.keys(s))this.deactivateRouteAndItsChildren(s[u],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=Ji(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ab(s.value.snapshot))}),e.children.length&&this.forwardEvent(new mA(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(By(i),i===s)if(i.component){const u=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,u.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const u=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),u.children.onOutletReAttached(h.contexts),u.attachRef=h.componentRef,u.route=h.route.value,u.outlet&&u.outlet.attach(h.componentRef,h.route.value),By(h.route.value),this.activateChildRoutes(e,null,u.children)}else{const h=Yp(i.snapshot),p=h?.get(c._Vd)??null;u.attachRef=null,u.route=i,u.resolver=p,u.injector=h,u.outlet&&u.outlet.activateWith(i,u.injector),this.activateChildRoutes(e,null,u.children)}}else this.activateChildRoutes(e,null,r)}}class EA{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Zy{constructor(e,t){this.component=e,this.route=t}}function AO(n,e,t){const r=n._root;return fh(r,e?e._root:null,t,[r.value])}function hh(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,c.Z0I)(n)?e.get(n):n:r}function fh(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Ji(e);return n.children.forEach(u=>{(function Ub(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,u=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(u&&s.routeConfig===u.routeConfig){const p=function zy(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ts(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ts(n.url,e.url)||!mi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Gp(n,e)||!mi(n.queryParams,e.queryParams);default:return!Gp(n,e)}}(u,s,s.routeConfig.runGuardsAndResolvers);p?i.canActivateChecks.push(new EA(r)):(s.data=u.data,s._resolvedData=u._resolvedData),fh(n,e,s.component?h?h.children:null:t,r,i),p&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Zy(h.outlet.component,u))}else u&&rc(e,h,i),i.canActivateChecks.push(new EA(r)),fh(n,null,s.component?h?h.children:null:t,r,i)})(u,s[u.value.outlet],t,r.concat([u.value]),i),delete s[u.value.outlet]}),Sn(s,(u,h)=>rc(u,t.getContext(h),i)),i}function rc(n,e,t){const r=Ji(n),i=n.value;Sn(r,(s,u)=>{rc(s,i.component?e?e.children.getContext(u):null:e,t)}),t.canDeactivateChecks.push(new Zy(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function ic(n){return"function"==typeof n}function Qp(n){return n instanceof Ho||"EmptyError"===n?.name}const Jp=Symbol("INITIAL_VALUE");function sc(){return Vn(n=>Sp(n.map(e=>e.pipe(vn(1),zo(Jp)))).pipe((0,Je.U)(e=>{for(const t of e)if(!0!==t){if(t===Jp)return Jp;if(!1===t||t instanceof Qo)return t}return!0}),gi(e=>e!==Jp),vn(1)))}function Br(n){return(0,zd.z)(Dn(e=>{if(P(e))throw Wp(0,e)}),(0,Je.U)(e=>!0===e))}const Xp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function eg(n,e,t,r,i){const s=br(n,e,t);return s.matched?function Jy(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?it(i.map(u=>{const h=hh(u,n);return Cs(function CA(n){return n&&ic(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(sc(),Br()):it(!0)}(r=Ob(e,r),e,t).pipe((0,Je.U)(u=>!0===u?s:{...Xp})):it(s)}function br(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Xp}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||gb)(t,n,e);if(!i)return{...Xp};const s={};Sn(i.posParams,(h,p)=>{s[p]=h.path});const u=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:u,positionalParamSegments:i.posParams??{}}}function xa(n,e,t,r,i="corrected"){if(t.length>0&&function PA(n,e,t){return t.some(r=>tg(n,e,r)&&Xi(r)!==Ot)}(n,t,r)){const u=new Bt(e,function NA(n,e,t,r){const i={};i[Ot]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Xi(s)!==Ot){const u=new Bt([],{});u._sourceSegment=n,u._segmentIndexShift=e.length,i[Xi(s)]=u}return i}(n,e,r,new Bt(t,n.children)));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:[]}}if(0===t.length&&function $b(n,e,t){return t.some(r=>tg(n,e,r))}(n,t,r)){const u=new Bt(n.segments,function jb(n,e,t,r,i,s){const u={};for(const h of r)if(tg(n,t,h)&&!i[Xi(h)]){const p=new Bt([],{});p._sourceSegment=n,p._segmentIndexShift="legacy"===s?n.segments.length:e.length,u[Xi(h)]=p}return{...i,...u}}(n,e,t,r,n.children,i));return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}const s=new Bt(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function tg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Xy(n,e,t,r){return!!(Xi(n)===r||r!==Ot&&tg(e,t,n))&&("**"===n.path||br(e,n,t).matched)}function Hb(n,e,t){return 0===e.length&&!n.children[t]}const gh=!1;class ng{constructor(e){this.segmentGroup=e||null}}class qb{constructor(e){this.urlTree=e}}function mh(n){return Zo(new ng(n))}function Gb(n){return Zo(new qb(n))}class OA{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=xa(this.urlTree.root,[],[],this.config).segmentGroup,t=new Bt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ot).pipe((0,Je.U)(s=>this.createUrlTree(C(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Mi(s=>{if(s instanceof qb)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof ng?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ot).pipe((0,Je.U)(i=>this.createUrlTree(C(i),e.queryParams,e.fragment))).pipe(Mi(i=>{throw i instanceof ng?this.noMatchError(i):i}))}noMatchError(e){return new c.vHH(4002,gh)}createUrlTree(e,t,r){const i=y(e);return new Qo(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,Je.U)(s=>new Bt([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,Kt.D)(i).pipe(bs(s=>{const u=r.children[s],h=Kp(t,s);return this.expandSegmentGroup(e,h,u,s).pipe((0,Je.U)(p=>({segment:p,outlet:s})))}),eo((s,u)=>(s[u.outlet]=u.segment,s),{}),Ia())}expandSegment(e,t,r,i,s,u){return(0,Kt.D)(r).pipe(bs(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,u).pipe(Mi(_=>{if(_ instanceof ng)return it(null);throw _}))),xi(h=>!!h),Mi((h,p)=>{if(Qp(h))return Hb(t,i,s)?it(new Bt([],{})):mh(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,u,h){return Xy(i,t,s,u)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,u):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u):mh(t):mh(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,u):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Gb(s):this.lineralizeSegments(r,s).pipe((0,fr.z)(u=>{const h=new Bt(u,{});return this.expandSegment(e,h,t,u,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,u){const{matched:h,consumedSegments:p,remainingSegments:_,positionalParamSegments:b}=br(t,i,s);if(!h)return mh(t);const T=this.applyRedirectCommands(p,i.redirectTo,b);return i.redirectTo.startsWith("/")?Gb(T):this.lineralizeSegments(i,T).pipe((0,fr.z)(S=>this.expandSegment(e,t,r,S.concat(_),u,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=Ob(r,e),r.loadChildren?(r._loadedRoutes?it({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,Je.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new Bt(i,{})))):it(new Bt(i,{}))):eg(t,r,i,e).pipe(Vn(({matched:u,consumedSegments:h,remainingSegments:p})=>u?this.getChildConfig(e=r._injector??e,r,i).pipe((0,fr.z)(b=>{const T=b.injector??e,S=b.routes,{segmentGroup:N,slicedSegments:O}=xa(t,h,p,S),W=new Bt(N.segments,N.children);if(0===O.length&&W.hasChildren())return this.expandChildren(T,S,W).pipe((0,Je.U)(Ue=>new Bt(h,Ue)));if(0===S.length&&0===O.length)return it(new Bt(h,{}));const J=Xi(r)===s;return this.expandSegment(T,W,S,O,J?Ot:s,!0).pipe((0,Je.U)(Be=>new Bt(h.concat(Be.segments),Be.children)))})):mh(t)))}getChildConfig(e,t,r){return t.children?it({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?it({routes:t._loadedRoutes,injector:t._loadedInjector}):function RA(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?it(!0):it(i.map(u=>{const h=hh(u,n);return Cs(function Ky(n){return n&&ic(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(sc(),Br())}(e,t,r).pipe((0,fr.z)(i=>i?this.configLoader.loadChildren(e,t).pipe(Dn(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function oc(n){return Zo(Nb(gh,3))}())):it({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return it(r);if(i.numberOfChildren>1||!i.children[Ot])return Zo(new c.vHH(4e3,gh));i=i.children[Ot]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new Qo(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return Sn(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let u={};return Sn(t.children,(h,p)=>{u[p]=this.createSegmentGroup(e,h,r,i)}),new Bt(s,u)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new c.vHH(4001,gh);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class RO{}class so{constructor(e,t,r,i,s,u,h,p){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=u,this.relativeLinkResolution=h,this.urlSerializer=p}recognize(){const e=xa(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ot).pipe((0,Je.U)(t=>{if(null===t)return null;const r=new io([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ro(r,t),s=new Vy(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=Hp(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Kt.D)(Object.keys(r.children)).pipe(bs(i=>{const s=r.children[i],u=Kp(t,i);return this.processSegmentGroup(e,u,s,i)}),eo((i,s)=>i&&s?(i.push(...s),i):null),function Ol(n,e=!1){return(0,Un.e)((t,r)=>{let i=0;t.subscribe((0,Ln.x)(r,s=>{const u=n(s,i++);(u||e)&&r.next(s),!u&&r.complete()}))})}(i=>null!==i),Yi(null),Ia(),(0,Je.U)(i=>{if(null===i)return null;const s=rv(i);return function tv(n){n.sort((e,t)=>e.value.outlet===Ot?-1:t.value.outlet===Ot?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,Kt.D)(t).pipe(bs(u=>this.processSegmentAgainstRoute(u._injector??e,u,r,i,s)),xi(u=>!!u),Mi(u=>{if(Qp(u))return Hb(r,i,s)?it([]):it(null);throw u}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!Xy(t,r,i,s))return it(null);let u;if("**"===t.path){const h=i.length>0?Qd(i).parameters:{},p=Zb(r)+i.length;u=it({snapshot:new io(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rg(t),Xi(t),t.component??t._loadedComponent??null,t,ac(r),p,ig(t),p),consumedSegments:[],remainingSegments:[]})}else u=eg(r,t,i,e).pipe((0,Je.U)(({matched:h,consumedSegments:p,remainingSegments:_,parameters:b})=>{if(!h)return null;const T=Zb(r)+p.length;return{snapshot:new io(p,b,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,rg(t),Xi(t),t.component??t._loadedComponent??null,t,ac(r),T,ig(t),T),consumedSegments:p,remainingSegments:_}}));return u.pipe(Vn(h=>{if(null===h)return it(null);const{snapshot:p,consumedSegments:_,remainingSegments:b}=h;e=t._injector??e;const T=t._loadedInjector??e,S=function nv(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:N,slicedSegments:O}=xa(r,_,b,S.filter(J=>void 0===J.redirectTo),this.relativeLinkResolution);if(0===O.length&&N.hasChildren())return this.processChildren(T,S,N).pipe((0,Je.U)(J=>null===J?null:[new ro(p,J)]));if(0===S.length&&0===O.length)return it([new ro(p,[])]);const W=Xi(t)===s;return this.processSegment(T,S,N,O,W?Ot:s).pipe((0,Je.U)(J=>null===J?null:[new ro(p,J)]))}))}}function LA(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function rv(n){const e=[],t=new Set;for(const r of n){if(!LA(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=rv(r.children);e.push(new ro(r.value,i))}return e.filter(r=>!t.has(r))}function ac(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Zb(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function rg(n){return n.data||{}}function ig(n){return n.resolve||{}}function sg(n){return"string"==typeof n.title||null===n.title}function sv(n){return Vn(e=>{const t=n(e);return t?(0,Kt.D)(t).pipe((0,Je.U)(()=>e)):it(e)})}let Qb=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===Ot);return r}getResolvedTitleForRoute(t){return t.data[Ri]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:function(){return(0,c.f3M)(Jb)},providedIn:"root"}),n})(),Jb=(()=>{class n extends Qb{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Zs))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class BA{}class Xb extends class jA{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const _h=new c.OlP("",{providedIn:"root",factory:()=>({})}),av=new c.OlP("ROUTES");let lv=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return it(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Cs(t.loadComponent()).pipe(Dn(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Wu(()=>{this.componentLoaders.delete(t)})),i=new Xs(r,()=>new ys.x).pipe(Js());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return it({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,Je.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let p,_,b=!1;Array.isArray(h)?_=h:(p=h.create(t).injector,_=Rp(p.get(av,[],c.XFs.Self|c.XFs.Optional)));return{routes:_.map(Gy),injector:p}}),Wu(()=>{this.childrenLoaders.delete(r)})),u=new Xs(s,()=>new ys.x).pipe(Js());return this.childrenLoaders.set(r,u),u}loadModuleFactoryOrRoutes(t){return Cs(t()).pipe((0,fr.z)(r=>r instanceof c.YKP||Array.isArray(r)?it(r):(0,Kt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.zs3),c.LFG(c.Sil))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class eC{}class tC{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function nC(n){throw n}function rC(n,e,t){return e.parse("/")}const $A={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},OO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function iC(){const n=(0,c.f3M)(th),e=(0,c.f3M)(Zp),t=(0,c.f3M)(Pe),r=(0,c.f3M)(c.zs3),i=(0,c.f3M)(c.Sil),s=(0,c.f3M)(av,{optional:!0})??[],u=(0,c.f3M)(_h,{optional:!0})??{},h=(0,c.f3M)(Jb),p=(0,c.f3M)(Qb,{optional:!0}),_=(0,c.f3M)(eC,{optional:!0}),b=(0,c.f3M)(BA,{optional:!0}),T=new Cr(null,n,e,t,r,i,Rp(s));return _&&(T.urlHandlingStrategy=_),b&&(T.routeReuseStrategy=b),T.titleStrategy=p??h,function ag(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(u,T),T}let Cr=(()=>{class n{constructor(t,r,i,s,u,h,p){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=s,this.config=p,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ys.x,this.errorHandler=nC,this.malformedUriErrorHandler=rC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>it(void 0),this.urlHandlingStrategy=new tC,this.routeReuseStrategy=new Xb,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=u.get(lv),this.configLoader.onLoadEndListener=S=>this.triggerEvent(new Tb(S)),this.configLoader.onLoadStartListener=S=>this.triggerEvent(new Ib(S)),this.ngModule=u.get(c.h0i),this.console=u.get(c.c2e);const T=u.get(c.R0b);this.isNgZoneEnabled=T instanceof c.R0b&&c.R0b.isInAngularZone(),this.resetConfig(p),this.currentUrlTree=function Np(){return new Qo(new Bt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=jp(this.currentUrlTree,this.rootComponentType),this.transitions=new mn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(gi(i=>0!==i.id),(0,Je.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Vn(i=>{let s=!1,u=!1;return it(i).pipe(Dn(h=>{this.currentNavigation={id:h.id,initialUrl:h.rawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Vn(h=>{const p=this.browserUrlTree.toString(),_=!this.navigated||h.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||_)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return uv(h.source)&&(this.browserUrlTree=h.extractedUrl),it(h).pipe(Vn(T=>{const S=this.transitions.getValue();return r.next(new Ly(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),S!==this.transitions.getValue()?Es.E:Promise.resolve(T)}),function FA(n,e,t,r){return Vn(i=>function Xo(n,e,t,r,i){return new OA(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,Je.U)(s=>({...i,urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),Dn(T=>{this.currentNavigation={...this.currentNavigation,finalUrl:T.urlAfterRedirects},i.urlAfterRedirects=T.urlAfterRedirects}),function Kb(n,e,t,r,i,s){return(0,fr.z)(u=>function NO(n,e,t,r,i,s,u="emptyOnly",h="legacy"){return new so(n,e,t,r,i,u,h,s).recognize().pipe(Vn(p=>null===p?function Wb(n){return new qn.y(e=>e.error(n))}(new RO):it(p)))}(n,e,t,u.urlAfterRedirects,r.serialize(u.urlAfterRedirects),r,i,s).pipe((0,Je.U)(h=>({...u,targetSnapshot:h}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),Dn(T=>{if(i.targetSnapshot=T.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const N=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(N,T)}this.browserUrlTree=T.urlAfterRedirects}const S=new gA(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);r.next(S)}));if(_&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:S,extractedUrl:N,source:O,restoredState:W,extras:J}=h,Me=new Ly(S,this.serializeUrl(N),O,W);r.next(Me);const Be=jp(N,this.rootComponentType).snapshot;return it(i={...h,targetSnapshot:Be,urlAfterRedirects:N,extras:{...J,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=h.rawUrl,h.resolve(null),Es.E}),Dn(h=>{const p=new bO(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(p)}),(0,Je.U)(h=>i={...h,guards:AO(h.targetSnapshot,h.currentSnapshot,this.rootContexts)}),function TA(n,e){return(0,fr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:u}}=t;return 0===u.length&&0===s.length?it({...t,guardsResult:!0}):function DA(n,e,t,r){return(0,Kt.D)(n).pipe((0,fr.z)(i=>function MA(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?it(s.map(h=>{const p=Yp(e)??i,_=hh(h,p);return Cs(function ph(n){return n&&ic(n.canDeactivate)}(_)?_.canDeactivate(n,e,t,r):p.runInContext(()=>_(n,e,t,r))).pipe(xi())})).pipe(sc()):it(!0)}(i.component,i.route,t,e,r)),xi(i=>!0!==i,!0))}(u,r,i,n).pipe((0,fr.z)(h=>h&&function Vb(n){return"boolean"==typeof n}(h)?function Qy(n,e,t,r){return(0,Kt.D)(e).pipe(bs(i=>Ea(function AA(n,e){return null!==n&&e&&e(new Db(n)),it(!0)}(i.route.parent,r),function SA(n,e){return null!==n&&e&&e(new Sb(n)),it(!0)}(i.route,r),function Bb(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(u=>function xO(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(u)).filter(u=>null!==u).map(u=>ba(()=>it(u.guards.map(p=>{const _=Yp(u.node)??t,b=hh(p,_);return Cs(function Yy(n){return n&&ic(n.canActivateChild)}(b)?b.canActivateChild(r,n):_.runInContext(()=>b(r,n))).pipe(xi())})).pipe(sc())));return it(s).pipe(sc())}(n,i.path,t),function xA(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return it(!0);const i=r.map(s=>ba(()=>{const u=Yp(e)??t,h=hh(s,u);return Cs(function bA(n){return n&&ic(n.canActivate)}(h)?h.canActivate(e,n):u.runInContext(()=>h(e,n))).pipe(xi())}));return it(i).pipe(sc())}(n,i.route,t))),xi(i=>!0!==i,!0))}(r,s,n,e):it(h)),(0,Je.U)(h=>({...t,guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),Dn(h=>{if(i.guardsResult=h.guardsResult,P(h.guardsResult))throw Wp(0,h.guardsResult);const p=new CO(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(p)}),gi(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,"",3),!1)),sv(h=>{if(h.guards.canActivateChecks.length)return it(h).pipe(Dn(p=>{const _=new lh(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}),Vn(p=>{let _=!1;return it(p).pipe(function PO(n,e){return(0,fr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return it(t);let s=0;return(0,Kt.D)(i).pipe(bs(u=>function lc(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!sg(i)&&(s[Ri]=i.title),function iv(n,e,t,r){const i=function Yb(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return it({});const s={};return(0,Kt.D)(i).pipe((0,fr.z)(u=>function VA(n,e,t,r){const i=Yp(e)??r,s=hh(n,i);return Cs(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[u],e,t,r).pipe(xi(),Dn(h=>{s[u]=h}))),Ca(1),function Yd(n){return(0,Je.U)(()=>n)}(s),Mi(u=>Qp(u)?Es.E:Zo(u)))}(s,n,e,r).pipe((0,Je.U)(u=>(n._resolvedData=u,n.data=Hp(n,t).resolve,i&&sg(i)&&(n.data[Ri]=i.title),null)))}(u.route,r,n,e)),Dn(()=>s++),Ca(1),(0,fr.z)(u=>s===i.length?it(t):Es.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),Dn({next:()=>_=!0,complete:()=>{_||(this.restoreHistory(p),this.cancelNavigationTransition(p,"",2))}}))}),Dn(p=>{const _=new Uy(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(_)}))}),sv(h=>{const p=_=>{const b=[];_.routeConfig?.loadComponent&&!_.routeConfig._loadedComponent&&b.push(this.configLoader.loadComponent(_.routeConfig).pipe(Dn(T=>{_.component=T}),(0,Je.U)(()=>{})));for(const T of _.children)b.push(...p(T));return b};return Sp(p(h.targetSnapshot.root)).pipe(Yi(),vn(1))}),sv(()=>this.afterPreactivation()),(0,Je.U)(h=>{const p=function tc(n,e,t){const r=dh(n,e._root,t?t._root:void 0);return new Mb(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return i={...h,targetRouterState:p}}),Dn(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,Je.U)(r=>(new Wy(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),Dn({next(){s=!0},complete(){s=!0}}),Wu(()=>{s||u||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Mi(h=>{if(u=!0,Pb(h)){$y(h)||(this.navigated=!0,this.restoreHistory(i,!0));const p=new Up(i.id,this.serializeUrl(i.extractedUrl),h.message,h.cancellationCode);if(r.next(p),$y(h)){const _=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),b={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||uv(i.source)};this.scheduleNavigation(_,"imperative",null,b,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const p=new Cb(i.id,this.serializeUrl(i.extractedUrl),h,i.targetSnapshot??void 0);r.next(p);try{i.resolve(this.errorHandler(h))}catch(_){i.reject(_)}}return Es.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},s=t.state?.navigationId?t.state:null;if(s){const h={...s};delete h.navigationId,delete h.\u0275routerPageId,0!==Object.keys(h).length&&(i.state=h)}const u=this.parseUrl(t.url);this.scheduleNavigation(u,r,s,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(Gy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:u,queryParamsHandling:h,preserveFragment:p}=r,_=i||this.routerState.root,b=p?this.currentUrlTree.fragment:u;let T=null;switch(h){case"merge":T={...this.currentUrlTree.queryParams,...s};break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),Ft(_,this.currentUrlTree,t,T,b??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=P(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function sC(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new c.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...$A}:!1===r?{...OO}:r,P(t))return Ny(this.currentUrlTree,t,i);const s=this.parseUrl(t);return Ny(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new jl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,s,u){if(this.disposed)return Promise.resolve(!1);let h,p,_;u?(h=u.resolve,p=u.reject,_=u.promise):_=new Promise((S,N)=>{h=S,p=N});const b=++this.navigationId;let T;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),T=i&&i.\u0275routerPageId?i.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):T=0,this.setTransition({id:b,targetPageId:T,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:h,reject:p,promise:_,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),_.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",s):this.location.go(i,"",s)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const s=new Up(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(s),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:function(){return iC()},providedIn:"root"}),n})();function uv(n){return"imperative"!==n}let ql=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new ys.x,this.subscription=t.events.subscribe(s=>{s instanceof jl&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,c.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,c.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,c.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,s,u){return!!(0!==t||r||i||s||u||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Cr),c.Y36($l),c.Y36(oe))},n.\u0275dir=c.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&c.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&c.uIk("target",r.target)("href",r.href,c.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[c.TTD]}),n})();class cv{}let dv=(()=>{class n{constructor(t,r,i,s,u){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=u}setUpPreloading(){this.subscription=this.router.events.pipe(gi(t=>t instanceof jl),bs(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,c.MMx)(s.providers,t,`Route: ${s.path}`));const u=s._injector??t,h=s._loadedInjector??u;s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent?i.push(this.preloadConfig(u,s)):(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,Kt.D)(i).pipe((0,Wo.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):it(null);const s=i.pipe((0,fr.z)(u=>null===u?it(void 0):(r._loadedRoutes=u.routes,r._loadedInjector=u.injector,this.processRoutes(u.injector??t,u.routes))));if(r.loadComponent&&!r._loadedComponent){const u=this.loader.loadComponent(r);return(0,Kt.D)([s,u]).pipe((0,Wo.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Cr),c.LFG(c.Sil),c.LFG(c.lqb),c.LFG(cv),c.LFG(lv))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Gl=new c.OlP("");let aC=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ly?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof jl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Vp&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Vp(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){c.$Z()},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();function Wl(n,e){return{\u0275kind:n,\u0275providers:e}}function wh(n){return[{provide:av,multi:!0,useValue:n}]}function GA(){const n=(0,c.f3M)(c.zs3);return e=>{const t=n.get(c.z2F);if(e!==t.components[0])return;const r=n.get(Cr),i=n.get(hv);1===n.get(fv)&&r.initialNavigation(),n.get(es,null,c.XFs.Optional)?.setUpPreloading(),n.get(Gl,null,c.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const hv=new c.OlP("",{factory:()=>new ys.x}),fv=new c.OlP("",{providedIn:"root",factory:()=>1});const es=new c.OlP("");function zA(n){return Wl(0,[{provide:es,useExisting:dv},{provide:cv,useExisting:n}])}const cC=new c.OlP("ROUTER_FORROOT_GUARD"),YA=[Pe,{provide:th,useClass:Da},{provide:Cr,useFactory:iC},Zp,{provide:$l,useFactory:function lC(n){return n.routerState.root},deps:[Cr]},lv];function dC(){return new c.PXZ("Router",Cr)}let pv=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[YA,[],wh(t),{provide:cC,useFactory:hC,deps:[[Cr,new c.FiY,new c.tp0]]},{provide:_h,useValue:r||{}},r?.useHash?{provide:oe,useClass:tt}:{provide:oe,useClass:et},{provide:Gl,useFactory:()=>{const n=(0,c.f3M)(Cr),e=(0,c.f3M)(cp),t=(0,c.f3M)(_h);return t.scrollOffset&&e.setOffset(t.scrollOffset),new aC(n,e,t)}},r?.preloadingStrategy?zA(r.preloadingStrategy).\u0275providers:[],{provide:c.PXZ,multi:!0,useFactory:dC},r?.initialNavigation?fC(r):[],[{provide:gv,useFactory:GA},{provide:c.tb,multi:!0,useExisting:gv}]]}}static forChild(t){return{ngModule:n,providers:[wh(t)]}}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(cC,8))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[Hl]}),n})();function hC(n){return"guarded"}function fC(n){return["disabled"===n.initialNavigation?Wl(3,[{provide:c.ip1,multi:!0,useFactory:()=>{const e=(0,c.f3M)(Cr);return()=>{e.setUpLocationChangeListener()}}},{provide:fv,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Wl(2,[{provide:fv,useValue:0},{provide:c.ip1,multi:!0,deps:[c.zs3],useFactory:e=>{const t=e.get(q,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(s=>{const u=e.get(Cr),h=e.get(hv);(function i(s){e.get(Cr).events.pipe(gi(h=>h instanceof jl||h instanceof Up||h instanceof Cb),(0,Je.U)(h=>h instanceof jl||h instanceof Up&&(0===h.code||1===h.code)&&null),gi(h=>null!==h),vn(1)).subscribe(()=>{s()})})(()=>{s(!0),r=!0}),u.afterPreactivation=()=>(s(!0),r||h.closed?it(void 0):h),u.initialNavigation()}))}}]).\u0275providers:[]]}const gv=new c.OlP("");let pC=(()=>{class n{constructor(){this.isOpen=!1}ngOnInit(){}openMobileMenu(){this.isOpen=!this.isOpen}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-header"]],decls:19,vars:1,consts:[["id","nav-bar",1,"bg-glass-blur","h-24","py-5","z-50"],[1,"flex","px-12","items-center","justify-between"],[1,"bg-primary-color","pt-2","w-16","h-16","rounded-full"],["routerLink","/home"],["src","https://firebasestorage.googleapis.com/v0/b/mayaramein-portfolio.appspot.com/o/main%2FlogoIconwhite.png?alt=media&token=580e7a12-507a-4c6e-844f-053e4742a35f","alt","logo",1,"p-3","pt-2.5"],[1,"primary-color","md:pl-40","text-lg","space-x-2","md:space-x-9","md:flex",3,"hidden"],["routerLink","/home",1,"hover:underline","hover:underline-offset-[10px]"],["routerLink","/portfolio",1,"hover:underline","hover:underline-offset-[10px]"],["routerLink","/about",1,"hover:underline","hover:underline-offset-[10px]"],[1,"primary-color","hidden","md:block"],["routerLink","/resume","target","_blank",1,"primary-color","border-primary-color","font-bold","px-8","py-3","mr-4","text-md","bg-white","rounded-md","hover:underline","hover:underline-offset-[8px]"],["routerLink","/contact","target","_blank",1,"primary-color","border-primary-color","font-bold","px-7","py-3","text-md","rounded-md","hover:underline","bg-white","hover:underline-offset-[8px]"],[1,"z-20","flex","flex-col","space-y-1","md:hidden","cursor-pointer",3,"click"],[1,"fa-solid","fa-bars","text-2xl","primary-color"]],template:function(t,r){1&t&&(c.TgZ(0,"nav",0)(1,"div",1)(2,"div",2)(3,"a",3),c._UZ(4,"img",4),c.qZA()(),c.TgZ(5,"div",5)(6,"a",6),c._uU(7,"Home"),c.qZA(),c.TgZ(8,"a",7),c._uU(9,"Portfolio"),c.qZA(),c.TgZ(10,"a",8),c._uU(11,"About"),c.qZA()(),c.TgZ(12,"div",9)(13,"a",10),c._uU(14," Resume"),c.qZA(),c.TgZ(15,"a",11),c._uU(16,"Contact"),c.qZA()(),c.TgZ(17,"a",12),c.NdJ("click",function(){return r.openMobileMenu()}),c._UZ(18,"i",13),c.qZA()()()),2&t&&(c.xp6(5),c.Q6J("hidden",!r.isOpen))},dependencies:[ql],styles:["nav[_ngcontent-%COMP%]{overflow:hidden}"]}),n})(),ex=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-social-media"]],decls:15,vars:0,consts:[[1,"flex","justify-center","light-color"],["href","https://linkedin.com/in/mayaramein","target","_blank"],[1,"fa-brands","fa-linkedin-in","px-3"],["href","https://github.com/mayaramein","target","_blank"],[1,"fa-brands","fa-github","px-3"],["href","https://kaggle.com/mayaramein","target","_blank"],[1,"fa-brands","fa-kaggle","px-3"],["href","https://www.behance.net/mayaramein","target","_blank"],[1,"fa-brands","fa-behance","px-3"],["href","https://instagram.com/mayaramein","target","_blank"],[1,"fa-brands","fa-instagram","px-3"],["href","https://twitter.com/mayaramein"],[1,"fa-brands","fa-twitter","px-3"],["href","https://www.facebook.com/mayaramein"],[1,"fa-brands","fa-facebook","px-3"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"a",1),c._UZ(2,"i",2),c.qZA(),c.TgZ(3,"a",3),c._UZ(4,"i",4),c.qZA(),c.TgZ(5,"a",5),c._UZ(6,"i",6),c.qZA(),c.TgZ(7,"a",7),c._UZ(8,"i",8),c.qZA(),c.TgZ(9,"a",9),c._UZ(10,"i",10),c.qZA(),c.TgZ(11,"a",11),c._UZ(12,"i",12),c.qZA(),c.TgZ(13,"a",13),c._UZ(14,"i",14),c.qZA()())}}),n})(),mv=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-footer"]],decls:10,vars:0,consts:[[1,"bg-primary-color","w-screen","py-2","overflow-hidden"],[1,"flex","flex-row","text-center","justify-between","px-12"],[1,"text-white"],[1,"hidden","md:inline"],[1,"fa-solid","fa-laptop-code"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"div",1)(2,"div",2),c._uU(3," \xa9 2023 "),c.TgZ(4,"span",3),c._uU(5,"Coded by "),c._UZ(6,"i",4),c._uU(7," @mayaramein"),c.qZA()(),c.TgZ(8,"div"),c._UZ(9,"app-social-media"),c.qZA()()())},dependencies:[ex]}),n})(),tx=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-layout-design"]],decls:4,vars:0,consts:[[1,"overflow-hidden"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"app-header")(2,"router-outlet")(3,"app-footer"),c.qZA())},dependencies:[Aa,pC,mv]}),n})(),nx=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-not-found"]],decls:18,vars:0,consts:[[1,"bsod","container"],[1,"neg","title"],[1,"bg"],[1,"flex","justify-center","items-center"],["src","https://firebasestorage.googleapis.com/v0/b/mayaramein-portfolio.appspot.com/o/404%2F404.png?alt=media&token=681316f4-d2b5-4f02-bc71-cd581b8f9e7c","alt","404 - error",1,"img-fuild","md:w-2/3"],[1,"nav","space-x-8"],["routerLink","/home"],["routerLink","/portfolio"],["routerLink","/about"]],template:function(t,r){1&t&&(c.TgZ(0,"main",0)(1,"h1",1)(2,"span",2),c._uU(3,"Error - 404"),c.qZA()(),c.TgZ(4,"div",3),c._UZ(5,"img",4),c.qZA(),c.TgZ(6,"p"),c._uU(7,"An error has occured, to continue:"),c.qZA(),c.TgZ(8,"p"),c._uU(9,"* Return to homepage."),c._UZ(10,"br"),c.qZA(),c.TgZ(11,"nav",5)(12,"a",6),c._uU(13,"Home"),c.qZA(),c.TgZ(14,"a",7),c._uU(15,"Portfolio"),c.qZA(),c.TgZ(16,"a",8),c._uU(17,"About"),c.qZA()()())},dependencies:[ql],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap";@import"https://fonts.googleapis.com/css?family=VT323";body[_ngcontent-%COMP%], h1[_ngcontent-%COMP%], h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], p[_ngcontent-%COMP%], a[_ngcontent-%COMP%]{color:#5333ed;text-align:center}body[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{font: 2rem/1.25rem VT323,monospace}h1[_ngcontent-%COMP%]{font: 2.75rem/1.05em VT323,monospace}h2[_ngcontent-%COMP%]{font: 2.25rem/1.25em VT323,monospace}h3[_ngcontent-%COMP%]{font:lighter 1.5rem/1.25em VT323,monospace}h4[_ngcontent-%COMP%]{font:lighter 1.125rem/1.2222222em VT323,monospace}.container[_ngcontent-%COMP%]{width:90%;margin:auto;max-width:640px}.bsod[_ngcontent-%COMP%]{padding-top:5%}.bsod[_ngcontent-%COMP%]   .neg[_ngcontent-%COMP%]{text-align:center;color:#ffc53b}.bsod[_ngcontent-%COMP%]   .neg[_ngcontent-%COMP%]   .bg[_ngcontent-%COMP%]{background:#5333ed;padding:0 15px 2px 13px}.bsod[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{margin-bottom:50px}.bsod[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{margin-top:35px;text-align:center}.bsod[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{text-decoration:none;padding:0 9px 2px 8px}.bsod[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover, .bsod[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:focus{background:#5333ed;color:#ffc53b}']}),n})();var Pt=U(8026);(0,Pt.registerVersion)("firebase","9.14.0","app");var z=U(8239),R=U(3854),or=U(3910),jr=U(5422),uc=U(8479);const rx="@firebase/installations",_C="0.5.16",yC=`w:${_C}`,_v="FIS_v2",ts=new R.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function wC(n){return n instanceof R.ZR&&n.code.includes("request-failed")}function dg({projectId:n}){return`https://firebaseinstallations.googleapis.com/v1/projects/${n}/installations`}function EC(n){return{token:n.token,requestStatus:2,expiresIn:IC(n.expiresIn),creationTime:Date.now()}}function yv(n,e){return vv.apply(this,arguments)}function vv(){return(vv=(0,z.Z)(function*(n,e){const r=(yield e.json()).error;return ts.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})})).apply(this,arguments)}function bC({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function CC(n,{refreshToken:e}){const t=bC(n);return t.append("Authorization",function TC(n){return`${_v} ${n}`}(e)),t}function hg(n){return wv.apply(this,arguments)}function wv(){return(wv=(0,z.Z)(function*(n){const e=yield n();return e.status>=500&&e.status<600?n():e})).apply(this,arguments)}function IC(n){return Number(n.replace("s","000"))}function Ev(n,e){return DC.apply(this,arguments)}function DC(){return(DC=(0,z.Z)(function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=dg(n),i=bC(n),s=e.getImmediate({optional:!0});if(s){const _=yield s.getHeartbeatsHeader();_&&i.append("x-firebase-client",_)}const h={method:"POST",headers:i,body:JSON.stringify({fid:t,authVersion:_v,appId:n.appId,sdkVersion:yC})},p=yield hg(()=>fetch(r,h));if(p.ok){const _=yield p.json();return{fid:_.fid||t,registrationStatus:2,refreshToken:_.refreshToken,authToken:EC(_.authToken)}}throw yield yv("Create Installation",p)})).apply(this,arguments)}function fg(n){return new Promise(e=>{setTimeout(e,n)})}const BO=/^[cdef][\w-]{21}$/;function SC(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=function AC(n){return function ax(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}(n).substr(0,22)}(n);return BO.test(t)?t:""}catch{return""}}function ea(n){return`${n.appName}!${n.appId}`}const $r=new Map;function bv(n,e){const t=ea(n);ao(t,e),function Iv(n,e){const t=function pg(){return!Ra&&"BroadcastChannel"in self&&(Ra=new BroadcastChannel("[Firebase] FID Change"),Ra.onmessage=n=>{ao(n.data.key,n.data.fid)}),Ra}();t&&t.postMessage({key:n,fid:e}),function ux(){0===$r.size&&Ra&&(Ra.close(),Ra=null)}()}(t,e)}function ao(n,e){const t=$r.get(n);if(t)for(const r of t)r(e)}let Ra=null;const lo="firebase-installations-store";let dc=null;function Eh(){return dc||(dc=(0,uc.X3)("firebase-installations-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(lo)}})),dc}function hc(n,e){return bh.apply(this,arguments)}function bh(){return(bh=(0,z.Z)(function*(n,e){const t=ea(n),i=(yield Eh()).transaction(lo,"readwrite"),s=i.objectStore(lo),u=yield s.get(t);return yield s.put(e,t),yield i.done,(!u||u.fid!==e.fid)&&bv(n,e.fid),e})).apply(this,arguments)}function MC(n){return Tv.apply(this,arguments)}function Tv(){return(Tv=(0,z.Z)(function*(n){const e=ea(n),r=(yield Eh()).transaction(lo,"readwrite");yield r.objectStore(lo).delete(e),yield r.done})).apply(this,arguments)}function Ch(n,e){return Dv.apply(this,arguments)}function Dv(){return(Dv=(0,z.Z)(function*(n,e){const t=ea(n),i=(yield Eh()).transaction(lo,"readwrite"),s=i.objectStore(lo),u=yield s.get(t),h=e(u);return void 0===h?yield s.delete(t):yield s.put(h,t),yield i.done,h&&(!u||u.fid!==h.fid)&&bv(n,h.fid),h})).apply(this,arguments)}function Sv(n){return gg.apply(this,arguments)}function gg(){return(gg=(0,z.Z)(function*(n){let e;const t=yield Ch(n.appConfig,r=>{const i=$O(r),s=cx(n,i);return e=s.registrationPromise,s.installationEntry});return""===t.fid?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})).apply(this,arguments)}function $O(n){return dx(n||{fid:SC(),registrationStatus:0})}function cx(n,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(ts.create("app-offline"))};const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function HO(n,e){return mg.apply(this,arguments)}(n,t);return{installationEntry:t,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:RC(n)}:{installationEntry:e}}function mg(){return(mg=(0,z.Z)(function*(n,e){try{const t=yield Ev(n,e);return hc(n.appConfig,t)}catch(t){throw wC(t)&&409===t.customData.serverCode?yield MC(n.appConfig):yield hc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})).apply(this,arguments)}function RC(n){return Av.apply(this,arguments)}function Av(){return(Av=(0,z.Z)(function*(n){let e=yield _g(n.appConfig);for(;1===e.registrationStatus;)yield fg(100),e=yield _g(n.appConfig);if(0===e.registrationStatus){const{installationEntry:t,registrationPromise:r}=yield Sv(n);return r||t}return e})).apply(this,arguments)}function _g(n){return Ch(n,e=>{if(!e)throw ts.create("installation-not-found");return dx(e)})}function dx(n){return function qO(n){return 1===n.registrationStatus&&n.registrationTime+1e4<Date.now()}(n)?{fid:n.fid,registrationStatus:0}:n}function GO(n,e){return NC.apply(this,arguments)}function NC(){return(NC=(0,z.Z)(function*({appConfig:n,heartbeatServiceProvider:e},t){const r=WO(n,t),i=CC(n,t),s=e.getImmediate({optional:!0});if(s){const _=yield s.getHeartbeatsHeader();_&&i.append("x-firebase-client",_)}const h={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:yC,appId:n.appId}})},p=yield hg(()=>fetch(r,h));if(p.ok)return EC(yield p.json());throw yield yv("Generate Auth Token",p)})).apply(this,arguments)}function WO(n,{fid:e}){return`${dg(n)}/${e}/authTokens:generate`}function PC(n){return kC.apply(this,arguments)}function kC(){return(kC=(0,z.Z)(function*(n,e=!1){let t;const r=yield Ch(n.appConfig,s=>{if(!FC(s))throw ts.create("not-registered");const u=s.authToken;if(!e&&LC(u))return s;if(1===u.requestStatus)return t=ZO(n,e),s;{if(!navigator.onLine)throw ts.create("app-offline");const h=UC(s);return t=Na(n,h),h}});return t?yield t:r.authToken})).apply(this,arguments)}function ZO(n,e){return OC.apply(this,arguments)}function OC(){return(OC=(0,z.Z)(function*(n,e){let t=yield hx(n.appConfig);for(;1===t.authToken.requestStatus;)yield fg(100),t=yield hx(n.appConfig);const r=t.authToken;return 0===r.requestStatus?PC(n,e):r})).apply(this,arguments)}function hx(n){return Ch(n,e=>{if(!FC(e))throw ts.create("not-registered");return function Mv(n){return 1===n.requestStatus&&n.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function Na(n,e){return Ih.apply(this,arguments)}function Ih(){return(Ih=(0,z.Z)(function*(n,e){try{const t=yield GO(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return yield hc(n.appConfig,r),t}catch(t){if(!wC(t)||401!==t.customData.serverCode&&404!==t.customData.serverCode){const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield hc(n.appConfig,r)}else yield MC(n.appConfig);throw t}})).apply(this,arguments)}function FC(n){return void 0!==n&&2===n.registrationStatus}function LC(n){return 2===n.requestStatus&&!function xv(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+36e5}(n)}function UC(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function uo(){return(uo=(0,z.Z)(function*(n){const e=n,{installationEntry:t,registrationPromise:r}=yield Sv(e);return r?r.catch(console.error):PC(e).catch(console.error),t.fid})).apply(this,arguments)}function Rv(){return(Rv=(0,z.Z)(function*(n,e=!1){const t=n;return yield px(t),(yield PC(t,e)).token})).apply(this,arguments)}function px(n){return yg.apply(this,arguments)}function yg(){return(yg=(0,z.Z)(function*(n){const{registrationPromise:e}=yield Sv(n);e&&(yield e)})).apply(this,arguments)}function Eg(n){return ts.create("missing-app-config-values",{valueName:n})}const Pv="installations",Ov=n=>{const e=n.getProvider("app").getImmediate(),t=function wg(n){if(!n||!n.options)throw Eg("App Configuration");if(!n.name)throw Eg("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw Eg(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}(e);return{app:e,appConfig:t,heartbeatServiceProvider:(0,Pt._getProvider)(e,"heartbeat"),_delete:()=>Promise.resolve()}},jC=n=>{const e=n.getProvider("app").getImmediate(),t=(0,Pt._getProvider)(e,Pv).getImmediate();return{getId:()=>function fx(n){return uo.apply(this,arguments)}(t),getToken:i=>function VC(n){return Rv.apply(this,arguments)}(t,i)}};(function Fv(){(0,Pt._registerComponent)(new or.wA(Pv,Ov,"PUBLIC")),(0,Pt._registerComponent)(new or.wA("installations-internal",jC,"PRIVATE"))})(),(0,Pt.registerVersion)(rx,_C),(0,Pt.registerVersion)(rx,_C,"esm2017");const Lv="@firebase/remote-config",ri=new R.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Dx{constructor(e,t,r,i){this.client=e,this.storage=t,this.storageCache=r,this.logger=i}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const r=Date.now()-t,i=r<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${r}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${i}.`),i}fetch(e){var t=this;return(0,z.Z)(function*(){const[r,i]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(i&&t.isCachedDataFresh(e.cacheMaxAgeMillis,r))return i;e.eTag=i&&i.eTag;const s=yield t.client.fetch(e),u=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===s.status&&u.push(t.storage.setLastSuccessfulFetchResponse(s)),yield Promise.all(u),s})()}}function co(n=navigator){return n.languages&&n.languages[0]||n.language}class $v{constructor(e,t,r,i,s,u){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=r,this.projectId=i,this.apiKey=s,this.appId=u}fetch(e){var t=this;return(0,z.Z)(function*(){var r,i,s;const[u,h]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),_=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,b={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},T={sdk_version:t.sdkVersion,app_instance_id:u,app_instance_id_token:h,app_id:t.appId,language_code:co()},S={method:"POST",headers:b,body:JSON.stringify(T)},N=fetch(_,S),O=new Promise((Ve,rt)=>{e.signal.addEventListener(()=>{const dt=new Error("The operation was aborted.");dt.name="AbortError",rt(dt)})});let W;try{yield Promise.race([N,O]),W=yield N}catch(Ve){let rt="fetch-client-network";throw"AbortError"===(null===(r=Ve)||void 0===r?void 0:r.name)&&(rt="fetch-timeout"),ri.create(rt,{originalErrorMessage:null===(i=Ve)||void 0===i?void 0:i.message})}let J=W.status;const Me=W.headers.get("ETag")||void 0;let Be,Ue;if(200===W.status){let Ve;try{Ve=yield W.json()}catch(rt){throw ri.create("fetch-client-parse",{originalErrorMessage:null===(s=rt)||void 0===s?void 0:s.message})}Be=Ve.entries,Ue=Ve.state}if("INSTANCE_STATE_UNSPECIFIED"===Ue?J=500:"NO_CHANGE"===Ue?J=304:("NO_TEMPLATE"===Ue||"EMPTY_CONFIG"===Ue)&&(Be={}),304!==J&&200!==J)throw ri.create("fetch-status",{httpStatus:J});return{status:J,eTag:Me,config:Be}})()}}class QO{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,z.Z)(function*(){const r=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,r)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:r}){var i=this;return(0,z.Z)(function*(){yield function Sx(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(ri.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}(e.signal,t);try{const s=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),s}catch(s){if(!function Ax(n){if(!(n instanceof R.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}(s))throw s;const u={throttleEndTimeMillis:Date.now()+(0,R.$s)(r),backoffCount:r+1};return yield i.storage.setThrottleMetadata(u),i.attemptFetch(e,u)}})()}}class Mx{constructor(e,t,r,i,s){this.app=e,this._client=t,this._storageCache=r,this._storage=i,this._logger=s,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ig(n,e){var t;const r=n.target.error||void 0;return ri.create(e,{originalErrorMessage:r&&(null===(t=r)||void 0===t?void 0:t.message)})}const ta="app_namespace_store";class Hv{constructor(e,t,r,i=function Tg(){return new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase_remote_config",1);r.onerror=i=>{e(Ig(i,"storage-open"))},r.onsuccess=i=>{n(i.target.result)},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(ta,{keyPath:"compositeKey"})}}catch(r){e(ri.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}})}()){this.appId=e,this.appName=t,this.namespace=r,this.openDbPromise=i}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,z.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var u;const p=r.transaction([ta],"readonly").objectStore(ta),_=t.createCompositeKey(e);try{const b=p.get(_);b.onerror=T=>{s(Ig(T,"storage-get"))},b.onsuccess=T=>{const S=T.target.result;i(S?S.value:void 0)}}catch(b){s(ri.create("storage-get",{originalErrorMessage:null===(u=b)||void 0===u?void 0:u.message}))}})})()}set(e,t){var r=this;return(0,z.Z)(function*(){const i=yield r.openDbPromise;return new Promise((s,u)=>{var h;const _=i.transaction([ta],"readwrite").objectStore(ta),b=r.createCompositeKey(e);try{const T=_.put({compositeKey:b,value:t});T.onerror=S=>{u(Ig(S,"storage-set"))},T.onsuccess=()=>{s()}}catch(T){u(ri.create("storage-set",{originalErrorMessage:null===(h=T)||void 0===h?void 0:h.message}))}})})()}delete(e){var t=this;return(0,z.Z)(function*(){const r=yield t.openDbPromise;return new Promise((i,s)=>{var u;const p=r.transaction([ta],"readwrite").objectStore(ta),_=t.createCompositeKey(e);try{const b=p.delete(_);b.onerror=T=>{s(Ig(T,"storage-delete"))},b.onsuccess=()=>{i()}}catch(b){s(ri.create("storage-delete",{originalErrorMessage:null===(u=b)||void 0===u?void 0:u.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class Dg{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,z.Z)(function*(){const t=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),s=yield t;s&&(e.lastFetchStatus=s);const u=yield r;u&&(e.lastSuccessfulFetchTimestampMillis=u);const h=yield i;h&&(e.activeConfig=h)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function zC(){return Sg.apply(this,arguments)}function Sg(){return(Sg=(0,z.Z)(function*(){if(!(0,R.hl)())return!1;try{return yield(0,R.eu)()}catch{return!1}})).apply(this,arguments)}!function JO(){(0,Pt._registerComponent)(new or.wA("remote-config",function n(e,{instanceIdentifier:t}){const r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw ri.create("registration-window");if(!(0,R.hl)())throw ri.create("indexed-db-unavailable");const{projectId:s,apiKey:u,appId:h}=r.options;if(!s)throw ri.create("registration-project-id");if(!u)throw ri.create("registration-api-key");if(!h)throw ri.create("registration-app-id");const p=new Hv(h,r.name,t=t||"firebase"),_=new Dg(p),b=new jr.Yd(Lv);b.logLevel=jr.in.ERROR;const T=new $v(i,Pt.SDK_VERSION,t,s,u,h),S=new QO(T,p),N=new Dx(S,p,_,b),O=new Mx(r,N,_,p,b);return function Ex(n){const e=(0,R.m9)(n);e._initializePromise||(e._initializePromise=e._storageCache.loadFromStorage().then(()=>{e._isInitializationComplete=!0}))}(O),O},"PUBLIC").setMultipleInstances(!0)),(0,Pt.registerVersion)(Lv,"0.3.15"),(0,Pt.registerVersion)(Lv,"0.3.15","esm2017")}();const KC="/firebase-messaging-sw.js",YC="/firebase-cloud-messaging-push-scope",Ag="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ah="google.c.a.c_id",xg="google.c.a.c_l",xh="google.c.a.ts",Px="google.c.a.e";var Zl=(()=>{return(n=Zl||(Zl={})).PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked",Zl;var n})();function ra(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function kx(n){const t=(n+"=".repeat((4-n.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(t),i=new Uint8Array(r.length);for(let s=0;s<r.length;++s)i[s]=r.charCodeAt(s);return i}const zl="fcm_token_details_db",Fx="fcm_token_object_Store";function Lx(n){return JC.apply(this,arguments)}function JC(){return JC=(0,z.Z)(function*(n){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(s=>s.name).includes(zl))return null;let e=null;return(yield(0,uc.X3)(zl,5,{upgrade:(r=(0,z.Z)(function*(i,s,u,h){var p;if(s<2||!i.objectStoreNames.contains(Fx))return;const _=h.objectStore(Fx),b=yield _.index("fcmSenderId").get(n);if(yield _.clear(),b)if(2===s){const T=b;if(!T.auth||!T.p256dh||!T.endpoint)return;e={token:T.fcmToken,createTime:null!==(p=T.createTime)&&void 0!==p?p:Date.now(),subscriptionOptions:{auth:T.auth,p256dh:T.p256dh,endpoint:T.endpoint,swScope:T.swScope,vapidKey:"string"==typeof T.vapidKey?T.vapidKey:ra(T.vapidKey)}}}else if(3===s){const T=b;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:ra(T.auth),p256dh:ra(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:ra(T.vapidKey)}}}else if(4===s){const T=b;e={token:T.fcmToken,createTime:T.createTime,subscriptionOptions:{auth:ra(T.auth),p256dh:ra(T.p256dh),endpoint:T.endpoint,swScope:T.swScope,vapidKey:ra(T.vapidKey)}}}}),function(s,u,h,p){return r.apply(this,arguments)})})).close(),yield(0,uc.Lj)(zl),yield(0,uc.Lj)("fcm_vapid_details_db"),yield(0,uc.Lj)("undefined"),Ux(e)?e:null;var r}),JC.apply(this,arguments)}function Ux(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return"number"==typeof n.createTime&&n.createTime>0&&"string"==typeof n.token&&n.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}const Pa="firebase-messaging-store";let Mh=null;function qv(){return Mh||(Mh=(0,uc.X3)("firebase-messaging-database",1,{upgrade:(n,e)=>{0===e&&n.createObjectStore(Pa)}})),Mh}function Mg(n){return Gv.apply(this,arguments)}function Gv(){return(Gv=(0,z.Z)(function*(n){const e=Kv(n),r=yield(yield qv()).transaction(Pa).objectStore(Pa).get(e);if(r)return r;{const i=yield Lx(n.appConfig.senderId);if(i)return yield Wv(n,i),i}})).apply(this,arguments)}function Wv(n,e){return Zv.apply(this,arguments)}function Zv(){return(Zv=(0,z.Z)(function*(n,e){const t=Kv(n),i=(yield qv()).transaction(Pa,"readwrite");return yield i.objectStore(Pa).put(e,t),yield i.done,e})).apply(this,arguments)}function jx(n){return zv.apply(this,arguments)}function zv(){return(zv=(0,z.Z)(function*(n){const e=Kv(n),r=(yield qv()).transaction(Pa,"readwrite");yield r.objectStore(Pa).delete(e),yield r.done})).apply(this,arguments)}function Kv({appConfig:n}){return n.appId}const Bn=new R.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function XO(n,e){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,z.Z)(function*(n,e){var t;const r=yield Yl(n),i=ka(e),s={method:"POST",headers:r,body:JSON.stringify(i)};let u;try{u=yield(yield fetch(ns(n.appConfig),s)).json()}catch(h){throw Bn.create("token-subscribe-failed",{errorInfo:null===(t=h)||void 0===t?void 0:t.toString()})}if(u.error)throw Bn.create("token-subscribe-failed",{errorInfo:u.error.message});if(!u.token)throw Bn.create("token-subscribe-no-token");return u.token})).apply(this,arguments)}function $x(n,e){return Yv.apply(this,arguments)}function Yv(){return(Yv=(0,z.Z)(function*(n,e){var t;const r=yield Yl(n),i=ka(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(i)};let u;try{u=yield(yield fetch(`${ns(n.appConfig)}/${e.token}`,s)).json()}catch(h){throw Bn.create("token-update-failed",{errorInfo:null===(t=h)||void 0===t?void 0:t.toString()})}if(u.error)throw Bn.create("token-update-failed",{errorInfo:u.error.message});if(!u.token)throw Bn.create("token-update-no-token");return u.token})).apply(this,arguments)}function Ng(n,e){return Qv.apply(this,arguments)}function Qv(){return(Qv=(0,z.Z)(function*(n,e){var t;const i={method:"DELETE",headers:yield Yl(n)};try{const u=yield(yield fetch(`${ns(n.appConfig)}/${e}`,i)).json();if(u.error)throw Bn.create("token-unsubscribe-failed",{errorInfo:u.error.message})}catch(s){throw Bn.create("token-unsubscribe-failed",{errorInfo:null===(t=s)||void 0===t?void 0:t.toString()})}})).apply(this,arguments)}function ns({projectId:n}){return`https://fcmregistrations.googleapis.com/v1/projects/${n}/registrations`}function Yl(n){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,z.Z)(function*({appConfig:n,installations:e}){const t=yield e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${t}`})})).apply(this,arguments)}function ka({p256dh:n,auth:e,endpoint:t,vapidKey:r}){const i={web:{endpoint:t,auth:e,p256dh:n}};return r!==Ag&&(i.web.applicationPubKey=r),i}const Pg=6048e5;function rs(n){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,z.Z)(function*(n){const e=yield pc(n.swRegistration,n.vapidKey),t={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:ra(e.getKey("auth")),p256dh:ra(e.getKey("p256dh"))},r=yield Mg(n.firebaseDependencies);if(r){if(gc(r.subscriptionOptions,t))return Date.now()>=r.createTime+Pg?fc(n,{token:r.token,createTime:Date.now(),subscriptionOptions:t}):r.token;try{yield Ng(n.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Jl(n.firebaseDependencies,t)}return Jl(n.firebaseDependencies,t)})).apply(this,arguments)}function Ql(n){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,z.Z)(function*(n){const e=yield Mg(n.firebaseDependencies);e&&(yield Ng(n.firebaseDependencies,e.token),yield jx(n.firebaseDependencies));const t=yield n.swRegistration.pushManager.getSubscription();return!t||t.unsubscribe()})).apply(this,arguments)}function fc(n,e){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,z.Z)(function*(n,e){try{const t=yield $x(n.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:t,createTime:Date.now()});return yield Wv(n.firebaseDependencies,r),t}catch(t){throw yield Ql(n),t}})).apply(this,arguments)}function Jl(n,e){return La.apply(this,arguments)}function La(){return(La=(0,z.Z)(function*(n,e){const r={token:yield XO(n,e),createTime:Date.now(),subscriptionOptions:e};return yield Wv(n,r),r.token})).apply(this,arguments)}function pc(n,e){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,z.Z)(function*(n,e){return(yield n.pushManager.getSubscription())||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:kx(e)})})).apply(this,arguments)}function gc(n,e){return e.vapidKey===n.vapidKey&&e.endpoint===n.endpoint&&e.auth===n.auth&&e.p256dh===n.p256dh}function Jv(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return function XC(n,e){if(!e.notification)return;n.notification={};const t=e.notification.title;t&&(n.notification.title=t);const r=e.notification.body;r&&(n.notification.body=r);const i=e.notification.image;i&&(n.notification.image=i);const s=e.notification.icon;s&&(n.notification.icon=s)}(e,n),function eI(n,e){!e.data||(n.data=e.data)}(e,n),function tI(n,e){var t,r,i,s,u;if(!(e.fcmOptions||null!==(t=e.notification)&&void 0!==t&&t.click_action))return;n.fcmOptions={};const h=null!==(i=null===(r=e.fcmOptions)||void 0===r?void 0:r.link)&&void 0!==i?i:null===(s=e.notification)||void 0===s?void 0:s.click_action;h&&(n.fcmOptions.link=h);const p=null===(u=e.fcmOptions)||void 0===u?void 0:u.analytics_label;p&&(n.fcmOptions.analyticsLabel=p)}(e,n),e}function nI(n){return"object"==typeof n&&!!n&&Ah in n}function Xv(n,e){const t=[];for(let r=0;r<n.length;r++)t.push(n.charAt(r)),r<e.length&&t.push(e.charAt(r));return t.join("")}function kg(n){return Bn.create("missing-app-config-values",{valueName:n})}Xv("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xv("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class iI{constructor(e,t,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const i=function rI(n){if(!n||!n.options)throw kg("App Configuration Object");if(!n.name)throw kg("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:t}=n;for(const r of e)if(!t[r])throw kg(r);return{appName:n.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:i,installations:t,analyticsProvider:r}}_delete(){return Promise.resolve()}}function sI(n){return e0.apply(this,arguments)}function e0(){return(e0=(0,z.Z)(function*(n){var e;try{n.swRegistration=yield navigator.serviceWorker.register(KC,{scope:YC}),n.swRegistration.update().catch(()=>{})}catch(t){throw Bn.create("failed-service-worker-registration",{browserErrorMessage:null===(e=t)||void 0===e?void 0:e.message})}})).apply(this,arguments)}function oI(n,e){return t0.apply(this,arguments)}function t0(){return(t0=(0,z.Z)(function*(n,e){if(!e&&!n.swRegistration&&(yield sI(n)),e||!n.swRegistration){if(!(e instanceof ServiceWorkerRegistration))throw Bn.create("invalid-sw-registration");n.swRegistration=e}})).apply(this,arguments)}function aI(n,e){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,z.Z)(function*(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=Ag)})).apply(this,arguments)}function n0(){return(n0=(0,z.Z)(function*(n,e){if(!navigator)throw Bn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Bn.create("permission-blocked");return yield aI(n,e?.vapidKey),yield oI(n,e?.serviceWorkerRegistration),rs(n)})).apply(this,arguments)}function Fg(n,e,t){return mc.apply(this,arguments)}function mc(){return(mc=(0,z.Z)(function*(n,e,t){const r=r0(e);(yield n.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:t[Ah],message_name:t[xg],message_time:t[xh],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function r0(n){switch(n){case Zl.NOTIFICATION_CLICKED:return"notification_open";case Zl.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Ph(){return(Ph=(0,z.Z)(function*(n,e){const t=e.data;if(!t.isFirebaseMessaging)return;n.onMessageHandler&&t.messageType===Zl.PUSH_RECEIVED&&("function"==typeof n.onMessageHandler?n.onMessageHandler(Jv(t)):n.onMessageHandler.next(Jv(t)));const r=t.data;nI(r)&&"1"===r[Px]&&(yield Fg(n,t.messageType,r))})).apply(this,arguments)}const Lg="@firebase/messaging",qx=n=>{const e=new iI(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",t=>function Hx(n,e){return Ph.apply(this,arguments)}(e,t)),e},s0=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:r=>function Og(n,e){return n0.apply(this,arguments)}(e,r)}};function o0(){return kh.apply(this,arguments)}function kh(){return(kh=(0,z.Z)(function*(){try{yield(0,R.eu)()}catch{return!1}return typeof window<"u"&&(0,R.hl)()&&(0,R.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function lI(){(0,Pt._registerComponent)(new or.wA("messaging",qx,"PUBLIC")),(0,Pt._registerComponent)(new or.wA("messaging-internal",s0,"PRIVATE")),(0,Pt.registerVersion)(Lg,"0.11.0"),(0,Pt.registerVersion)(Lg,"0.11.0","esm2017")}();const Bg="analytics",l0="firebase_id",hI="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",c0="https://www.googletagmanager.com/gtag/js",Tr=new jr.Yd("@firebase/analytics");function d0(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function fI(n,e){const t=document.createElement("script");t.src=`${c0}?l=${n}&id=${e}`,t.async=!0,document.head.appendChild(t)}function gI(n,e,t,r,i,s){return mI.apply(this,arguments)}function mI(){return(mI=(0,z.Z)(function*(n,e,t,r,i,s){const u=r[i];try{if(u)yield e[u];else{const p=(yield d0(t)).find(_=>_.measurementId===i);p&&(yield e[p.appId])}}catch(h){Tr.error(h)}n("config",i,s)})).apply(this,arguments)}function Zx(n,e,t,r,i){return h0.apply(this,arguments)}function h0(){return(h0=(0,z.Z)(function*(n,e,t,r,i){try{let s=[];if(i&&i.send_to){let u=i.send_to;Array.isArray(u)||(u=[u]);const h=yield d0(t);for(const p of u){const _=h.find(T=>T.measurementId===p),b=_&&e[_.appId];if(!b){s=[];break}s.push(b)}}0===s.length&&(s=Object.values(e)),yield Promise.all(s),n("event",r,i||{})}catch(s){Tr.error(s)}})).apply(this,arguments)}function pr(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(c0)&&t.src.includes(n))return t;return null}const Pi=new R.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),f0=new class Yx{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function wI(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function _c(n){return p0.apply(this,arguments)}function p0(){return(p0=(0,z.Z)(function*(n){var e;const{appId:t,apiKey:r}=n,i={method:"GET",headers:wI(r)},s=hI.replace("{app-id}",t),u=yield fetch(s,i);if(200!==u.status&&304!==u.status){let h="";try{const p=yield u.json();null!==(e=p.error)&&void 0!==e&&e.message&&(h=p.error.message)}catch{}throw Pi.create("config-fetch-failed",{httpStatus:u.status,responseMessage:h})}return u.json()})).apply(this,arguments)}function Qx(n){return jg.apply(this,arguments)}function jg(){return(jg=(0,z.Z)(function*(n,e=f0,t){const{appId:r,apiKey:i,measurementId:s}=n.options;if(!r)throw Pi.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Pi.create("no-api-key")}const u=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},h=new m0;return setTimeout((0,z.Z)(function*(){h.abort()}),void 0!==t?t:6e4),EI({appId:r,apiKey:i,measurementId:s},u,h,e)})).apply(this,arguments)}function EI(n,e,t){return $g.apply(this,arguments)}function $g(){return($g=(0,z.Z)(function*(n,{throttleEndTimeMillis:e,backoffCount:t},r,i=f0){var s,u;const{appId:h,measurementId:p}=n;try{yield nF(r,e)}catch(_){if(p)return Tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${null===(s=_)||void 0===s?void 0:s.message}]`),{appId:h,measurementId:p};throw _}try{const _=yield _c(n);return i.deleteThrottleMetadata(h),_}catch(_){const b=_;if(!g0(b)){if(i.deleteThrottleMetadata(h),p)return Tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${p} provided in the "measurementId" field in the local Firebase config. [${b?.message}]`),{appId:h,measurementId:p};throw _}const T=503===Number(null===(u=b?.customData)||void 0===u?void 0:u.httpStatus)?(0,R.$s)(t,i.intervalMillis,30):(0,R.$s)(t,i.intervalMillis),S={throttleEndTimeMillis:Date.now()+T,backoffCount:t+1};return i.setThrottleMetadata(h,S),Tr.debug(`Calling attemptFetch again in ${T} millis`),EI(n,S,r,i)}})).apply(this,arguments)}function nF(n,e){return new Promise((t,r)=>{const i=Math.max(e-Date.now(),0),s=setTimeout(t,i);n.addEventListener(()=>{clearTimeout(s),r(Pi.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function g0(n){if(!(n instanceof R.ZR&&n.customData))return!1;const e=Number(n.customData.httpStatus);return 429===e||500===e||503===e||504===e}class m0{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let is,w0;function _0(){return(_0=(0,z.Z)(function*(n,e,t,r,i){if(i&&i.global)n("event",t,r);else{const s=yield e;n("event",t,Object.assign(Object.assign({},r),{send_to:s}))}})).apply(this,arguments)}function qg(n){w0=n}function yc(n){is=n}function e1(){return Gg.apply(this,arguments)}function Gg(){return(Gg=(0,z.Z)(function*(){var n;if(!(0,R.hl)())return Tr.warn(Pi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,R.eu)()}catch(e){return Tr.warn(Pi.create("indexeddb-unavailable",{errorInfo:null===(n=e)||void 0===n?void 0:n.toString()}).message),!1}return!0})).apply(this,arguments)}function Wg(){return(Wg=(0,z.Z)(function*(n,e,t,r,i,s,u){var h;const p=Qx(n);p.then(N=>{t[N.measurementId]=N.appId,n.options.measurementId&&N.measurementId!==n.options.measurementId&&Tr.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>Tr.error(N)),e.push(p);const _=e1().then(N=>{if(N)return r.getId()}),[b,T]=yield Promise.all([p,_]);pr(s)||fI(s,b.measurementId),w0&&(i("consent","default",w0),qg(void 0)),i("js",new Date);const S=null!==(h=u?.config)&&void 0!==h?h:{};return S.origin="firebase",S.update=!0,null!=T&&(S[l0]=T),i("config",b.measurementId,S),is&&(i("set",is),yc(void 0)),b.measurementId})).apply(this,arguments)}class CI{constructor(e){this.app=e}_delete(){return delete ss[this.app.options.appId],Promise.resolve()}}let ss={},II=[];const E0={};let Fh,As,Oh="dataLayer",zg=!1;function DI(n,e,t){!function TI(){const n=[];if((0,R.ru)()&&n.push("This is a browser extension environment."),(0,R.zI)()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,i)=>`(${i+1}) ${r}`).join(" "),t=Pi.create("invalid-analytics-context",{errorInfo:e});Tr.warn(t.message)}}();const r=n.options.appId;if(!r)throw Pi.create("no-app-id");if(!n.options.apiKey){if(!n.options.measurementId)throw Pi.create("no-api-key");Tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ss[r])throw Pi.create("already-exists",{id:r});if(!zg){!function pI(n){let e=[];Array.isArray(window[n])?e=window[n]:window[n]=e}(Oh);const{wrappedGtag:s,gtagCore:u}=function zx(n,e,t,r,i){let s=function(...u){window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(s=window[i]),window[i]=function _I(n,e,t,r){function s(){return(s=(0,z.Z)(function*(u,h,p){try{"event"===u?yield Zx(n,e,t,h,p):"config"===u?yield gI(n,e,t,r,h,p):"consent"===u?n("consent","update",p):n("set",h)}catch(_){Tr.error(_)}})).apply(this,arguments)}return function i(u,h,p){return s.apply(this,arguments)}}(s,n,e,t),{gtagCore:s,wrappedGtag:window[i]}}(ss,II,E0,Oh,"gtag");As=s,Fh=u,zg=!0}return ss[r]=function t1(n,e,t,r,i,s,u){return Wg.apply(this,arguments)}(n,II,E0,e,Fh,Oh,t),new CI(n)}function AI(){return b0.apply(this,arguments)}function b0(){return(b0=(0,z.Z)(function*(){if((0,R.ru)()||!(0,R.zI)()||!(0,R.hl)())return!1;try{return yield(0,R.eu)()}catch{return!1}})).apply(this,arguments)}const xI="@firebase/analytics";!function s1(){(0,Pt._registerComponent)(new or.wA(Bg,(e,{options:t})=>DI(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,Pt._registerComponent)(new or.wA("analytics-internal",function n(e){try{const t=e.getProvider(Bg).getImmediate();return{logEvent:(r,i,s)=>function i1(n,e,t,r){n=(0,R.m9)(n),function Jx(n,e,t,r,i){return _0.apply(this,arguments)}(As,ss[n.app.options.appId],e,t,r).catch(i=>Tr.error(i))}(t,r,i,s)}}catch(t){throw Pi.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,Pt.registerVersion)(xI,"0.8.4"),(0,Pt.registerVersion)(xI,"0.8.4","esm2017")}();class o1 extends Kd.w0{constructor(e,t){super()}schedule(e,t=0){return this}}const Kg={setInterval(n,e,...t){const{delegate:r}=Kg;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Kg;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var a1=U(8308);class RI extends o1{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;const i=this.id,s=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(s,i,t)),this.pending=!0,this.delay=t,this.id=null!==(r=this.id)&&void 0!==r?r:this.requestAsyncId(s,this.id,t),this}requestAsyncId(e,t,r=0){return Kg.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(null!=r&&this.delay===r&&!1===this.pending)return t;null!=t&&Kg.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let i,r=!1;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,a1.P)(r,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}}const C0={now:()=>(C0.delegate||Date).now(),delegate:void 0};class Lh{constructor(e,t=Lh.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}}Lh.now=C0.now;class I0 extends Lh{constructor(e,t=Lh.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let r;this._active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}}const PI=new class NI extends I0{}(class l1 extends RI{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,r=0){return null!=r&&r>0||null==r&&this.delay>0?super.requestAsyncId(e,t,r):(e.flush(this),0)}}),Uh=new I0(RI);var Va=U(7513),vc=U(4119);const Ba=new c.GfV("7.5.0"),Yg="__angularfire_symbol__analyticsIsSupportedValue",Qg="__angularfire_symbol__analyticsIsSupported",ia="__angularfire_symbol__remoteConfigIsSupportedValue",T0="__angularfire_symbol__remoteConfigIsSupported",D0="__angularfire_symbol__messagingIsSupportedValue",ja="__angularfire_symbol__messagingIsSupported";globalThis[Qg]||(globalThis[Qg]=AI().then(n=>globalThis[Yg]=n).catch(()=>globalThis[Yg]=!1)),globalThis[ja]||(globalThis[ja]=o0().then(n=>globalThis[D0]=n).catch(()=>globalThis[D0]=!1)),globalThis[T0]||(globalThis[T0]=zC().then(n=>globalThis[ia]=n).catch(()=>globalThis[ia]=!1));const FI=(n,e)=>{const t=e?[e]:(0,Pt.getApps)(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(u=>{r.includes(u)||r.push(u)})}),r};function pt(){}class LI{constructor(e,t=PI){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){const i=this.zone;return this.delegate.schedule(function(u){i.runGuarded(()=>{e.apply(this,[u])})},t,r)}}class h1{constructor(e){this.zone=e,this.task=null}call(e,t){const r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pt,{},pt,pt)),t.pipe(Dn({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wc=(()=>{class n{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new LI(Zone.current)),this.insideAngular=t.run(()=>new LI(Zone.current,Uh)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function os(){const n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return n}function f1(n){return os().ngZone.runOutsideAngular(()=>n())}function fo(n){return os().ngZone.run(()=>n())}function Vh(n){return n.pipe((0,Va.Q)(os().outsideAngular))}function ar(n){return os(),function UI(n){return function(t){return(t=t.lift(new h1(n.ngZone))).pipe((0,vc.R)(n.outsideAngular),(0,Va.Q)(n.insideAngular))}}(os())(n)}const VI=(n,e)=>function(){const r=arguments;return e&&setTimeout(()=>{"scheduled"===e.state&&e.invoke()},10),fo(()=>n.apply(void 0,r))},Xg=(n,e)=>function(){let t;const r=arguments;for(let s=0;s<arguments.length;s++)"function"==typeof r[s]&&(e&&(t||(t=fo(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pt,{},pt,pt)))),r[s]=VI(r[s],t));const i=f1(()=>n.apply(this,r));if(!e){if(i instanceof qn.y){const s=os();return i.pipe((0,vc.R)(s.outsideAngular),(0,Va.Q)(s.insideAngular))}return fo(()=>i)}return i instanceof qn.y?i.pipe(ar):i instanceof Promise?fo(()=>new Promise((s,u)=>i.then(h=>fo(()=>s(h)),h=>fo(()=>u(h))))):"function"==typeof i&&t?function(){return setTimeout(()=>{t&&"scheduled"===t.state&&t.invoke()},10),i.apply(this,arguments)}:fo(()=>i)};class Xl{constructor(e){return e}}class S0{constructor(){return(0,Pt.getApps)()}}const A0=new c.OlP("angularfire2._apps"),g1={provide:Xl,useFactory:function BI(n){return n&&1===n.length?n[0]:new Xl((0,Pt.getApp)())},deps:[[new c.FiY,A0]]},m1={provide:S0,deps:[[new c.FiY,A0]]};function Bh(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Xl(r)}}let _1=(()=>{class n{constructor(t){(0,Pt.registerVersion)("angularfire",Ba.full,"core"),(0,Pt.registerVersion)("angularfire",Ba.full,"app"),(0,Pt.registerVersion)("angular",c.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.Lbi))},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[g1,m1]}),n})();function y1(n,...e){return{ngModule:_1,providers:[{provide:A0,useFactory:Bh(n),multi:!0,deps:[c.R0b,c.zs3,wc,...e]}]}}const jI=Xg(Pt.initializeApp,!0);U(2367);class HI{constructor(){return FI("auth")}}const jh=new Map,KI={activated:!1,tokenObservers:[]},U1={initialized:!1,enabled:!1};function gr(n){return jh.get(n)||Object.assign({},KI)}function $h(){return U1}class j1{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,z.Z)(function*(){t.stop();try{t.pending=new R.BH,yield function k0(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new R.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Hr=new R.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function O0(n){if(!gr(n).activated)throw Hr.create("use-before-activation",{appName:n.name})}function om(n,e){return F0.apply(this,arguments)}function F0(){return(F0=(0,z.Z)(function*({url:n,body:e},t){var r,i;const s={"Content-Type":"application/json"},u=t.getImmediate({optional:!0});if(u){const N=yield u.getHeartbeatsHeader();N&&(s["X-Firebase-Client"]=N)}const h={method:"POST",body:JSON.stringify(e),headers:s};let p,_;try{p=yield fetch(n,h)}catch(N){throw Hr.create("fetch-network-error",{originalErrorMessage:null===(r=N)||void 0===r?void 0:r.message})}if(200!==p.status)throw Hr.create("fetch-status-error",{httpStatus:p.status});try{_=yield p.json()}catch(N){throw Hr.create("fetch-parse-error",{originalErrorMessage:null===(i=N)||void 0===i?void 0:i.message})}const b=_.ttl.match(/^([\d.]+)(s)$/);if(!b||!b[2]||isNaN(Number(b[1])))throw Hr.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${_.ttl}`});const T=1e3*Number(b[1]),S=Date.now();return{token:_.token,expireTimeMillis:S+T,issuedAtTimeMillis:S}})).apply(this,arguments)}function G1(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const bc="firebase-app-check-store";let am=null;function W1(){return am||(am=new Promise((n,e)=>{var t;try{const r=indexedDB.open("firebase-app-check-database",1);r.onsuccess=i=>{n(i.target.result)},r.onerror=i=>{var s;e(Hr.create("storage-open",{originalErrorMessage:null===(s=i.target.error)||void 0===s?void 0:s.message}))},r.onupgradeneeded=i=>{0===i.oldVersion&&i.target.result.createObjectStore(bc,{keyPath:"compositeKey"})}}catch(r){e(Hr.create("storage-open",{originalErrorMessage:null===(t=r)||void 0===t?void 0:t.message}))}}),am)}function L0(){return(L0=(0,z.Z)(function*(n,e){const r=(yield W1()).transaction(bc,"readwrite"),s=r.objectStore(bc).put({compositeKey:n,value:e});return new Promise((u,h)=>{s.onsuccess=p=>{u()},r.onerror=p=>{var _;h(Hr.create("storage-set",{originalErrorMessage:null===(_=p.target.error)||void 0===_?void 0:_.message}))}})})).apply(this,arguments)}const qh=new jr.Yd("@firebase/app-check");function B0(n,e){return(0,R.hl)()?function Z1(n,e){return function XI(n,e){return L0.apply(this,arguments)}(function tT(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{qh.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function j0(){return $h().enabled}function $0(){return um.apply(this,arguments)}function um(){return(um=(0,z.Z)(function*(){const n=$h();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const rT={error:"UNKNOWN_ERROR"};function Q1(n){return R.US.encodeString(JSON.stringify(n),!1)}function H0(n){return cm.apply(this,arguments)}function cm(){return(cm=(0,z.Z)(function*(n,e=!1){const t=n.app;O0(t);const r=gr(t);let s,i=r.token;if(i&&!Ic(i)&&(r.token=void 0,i=void 0),!i){const p=yield r.cachedTokenPromise;p&&(Ic(p)?i=p:yield B0(t,void 0))}if(!e&&i&&Ic(i))return{token:i.token};let h,u=!1;if(j0()){r.exchangeTokenPromise||(r.exchangeTokenPromise=om(G1(t,yield $0()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),u=!0);const p=yield r.exchangeTokenPromise;return yield B0(t,p),r.token=p,{token:p.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),u=!0),i=yield gr(t).exchangeTokenPromise}catch(p){"appCheck/throttled"===p.code?qh.warn(p.message):qh.error(p),s=p}return i?s?h=Ic(i)?{token:i.token,internalError:s}:hm(s):(h={token:i.token},r.token=i,yield B0(t,i)):h=hm(s),u&&Cc(t,h),h})).apply(this,arguments)}function q0(n,e){const t=gr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function iT(n){const{app:e}=n,t=gr(e);let r=t.tokenRefresher;r||(r=function J1(n){const{app:e}=n;return new j1((0,z.Z)(function*(){let r;if(r=gr(e).token?yield H0(n,!0):yield H0(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=gr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Cc(n,e){const t=gr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Ic(n){return n.expireTimeMillis-Date.now()>0}function hm(n){return{token:Q1(rT),error:n}}class po{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=gr(this.app);for(const t of e)q0(this.app,t.next);return Promise.resolve()}}const vm="app-check-internal";!function cT(){(0,Pt._registerComponent)(new or.wA("app-check",n=>function X1(n,e){return new po(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(vm).initialize()})),(0,Pt._registerComponent)(new or.wA(vm,n=>function G0(n){return{getToken:e=>H0(n,e),addTokenListener:e=>function dm(n,e,t,r){const{app:i}=n,s=gr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&Ic(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),iT(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>iT(n))}(n,"INTERNAL",e),removeTokenListener:e=>q0(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pt.registerVersion)("@firebase/app-check","0.5.17")}();class eu{constructor(){return FI("app-check")}}typeof window<"u"&&window;var ot,dM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xs={},Cm=Cm||{},Mt=dM||self;function Im(){}function Tm(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function tu(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Dm="closure_uid_"+(1e9*Math.random()>>>0),Sm=0;function Q0(n,e,t){return n.call.apply(n.bind,arguments)}function QF(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Nr(n,e,t){return(Nr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Q0:QF).apply(null,arguments)}function Am(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Dr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,i,s){for(var u=Array(arguments.length-2),h=2;h<arguments.length;h++)u[h-2]=arguments[h];return e.prototype[i].apply(r,u)}}function Oi(){this.s=this.s,this.o=this.o}Oi.prototype.s=!1,Oi.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function fT(n){Object.prototype.hasOwnProperty.call(n,Dm)&&n[Dm]||(n[Dm]=++Sm)}(this)},Oi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const J0=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function zh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function fM(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Tm(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let u=0;u<s;u++)n[i+u]=r[u]}else n.push(r)}}function qr(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}qr.prototype.h=function(){this.defaultPrevented=!0};var JF=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Mt.addEventListener("test",Im,e),Mt.removeEventListener("test",Im,e)}catch{}return n}();function xm(n){return/^[\s\xa0]*$/.test(n)}var pT=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function X0(n,e){return n<e?-1:n>e?1:0}function Kh(){var n=Mt.navigator;return n&&(n=n.userAgent)?n:""}function Ms(n){return-1!=Kh().indexOf(n)}function ew(n){return ew[" "](n),n}ew[" "]=Im;var Yh,n,mT=Ms("Opera"),Tc=Ms("Trident")||Ms("MSIE"),_T=Ms("Edge"),Mm=_T||Tc,yT=Ms("Gecko")&&!(-1!=Kh().toLowerCase().indexOf("webkit")&&!Ms("Edge"))&&!(Ms("Trident")||Ms("MSIE"))&&!Ms("Edge"),vT=-1!=Kh().toLowerCase().indexOf("webkit")&&!Ms("Edge");function tw(){var n=Mt.document;return n?n.documentMode:void 0}e:{var Rm="",nw=(n=Kh(),yT?/rv:([^\);]+)(\)|;)/.exec(n):_T?/Edge\/([\d\.]+)/.exec(n):Tc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):vT?/WebKit\/(\S+)/.exec(n):mT?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(nw&&(Rm=nw?nw[1]:""),Tc){var rw=tw();if(null!=rw&&rw>parseFloat(Rm)){Yh=String(rw);break e}}Yh=Rm}var XF={};var eL=Mt.document&&Tc&&(tw()||parseInt(Yh,10))||void 0;function Nm(n,e){if(qr.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(yT){e:{try{ew(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:tL[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Nm.X.h.call(this)}}Dr(Nm,qr);var tL={2:"touch",3:"pen",4:"mouse"};Nm.prototype.h=function(){Nm.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Pm="closure_listenable_"+(1e6*Math.random()|0),nL=0;function rL(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=i,this.key=++nL,this.ba=this.ea=!1}function nu(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function bT(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function iw(n){const e={};for(const t in n)e[t]=n[t];return e}const Qh="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function sw(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<Qh.length;s++)t=Qh[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Jh(n){this.src=n,this.g={},this.h=0}function CT(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=J0(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(nu(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Xh(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==r)return i}return-1}Jh.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var u=Xh(n,e,r,i);return-1<u?(e=n[u],t||(e.ea=!1)):((e=new rL(e,this.src,s,!!r,i)).ea=t,n.push(e)),e};var km="closure_lm_"+(1e6*Math.random()|0),ow={};function aw(n,e,t,r,i){if(r&&r.once)return IT(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)aw(n,e[s],t,r,i);return null}return t=lw(t),n&&n[Pm]?n.N(e,t,tu(r)?!!r.capture:!!r,i):gM(n,e,t,!1,r,i)}function gM(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var u=tu(i)?!!i.capture:!!i,h=ST(n);if(h||(n[km]=h=new Jh(n)),(t=h.add(e,t,r,u,s)).proxy)return t;if(r=function mM(){const e=iL;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)JF||(i=u),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(DT(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function IT(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)IT(n,e[s],t,r,i);return null}return t=lw(t),n&&n[Pm]?n.O(e,t,tu(r)?!!r.capture:!!r,i):gM(n,e,t,!0,r,i)}function TT(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)TT(n,e[s],t,r,i);else r=tu(r)?!!r.capture:!!r,t=lw(t),n&&n[Pm]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Xh(s=n.g[e],t,r,i))&&(nu(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=ST(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Xh(e,t,r,i)),(t=-1<n?e[n]:null)&&Dc(t))}function Dc(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Pm])CT(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(DT(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ST(e))?(CT(t,n),0==t.h&&(t.src=null,e[km]=null)):nu(n)}}}function DT(n){return n in ow?ow[n]:ow[n]="on"+n}function iL(n,e){if(n.ba)n=!0;else{e=new Nm(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Dc(n),n=t.call(r,e)}return n}function ST(n){return(n=n[km])instanceof Jh?n:null}var AT="__closure_events_fn_"+(1e9*Math.random()>>>0);function lw(n){return"function"==typeof n?n:(n[AT]||(n[AT]=function(e){return n.handleEvent(e)}),n[AT])}function Sr(){Oi.call(this),this.i=new Jh(this),this.P=this,this.I=null}function Pr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new qr(e,n);else if(e instanceof qr)e.target=e.target||n;else{var i=e;sw(e=new qr(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var u=e.g=t[s];i=uw(u,r,!0,e)&&i}if(i=uw(u=e.g=n,r,!0,e)&&i,i=uw(u,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=uw(u=e.g=t[s],r,!1,e)&&i}function uw(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var u=e[s];if(u&&!u.ba&&u.capture==t){var h=u.listener,p=u.ha||u.src;u.ea&&CT(n.i,u),i=!1!==h.call(p,r)&&i}}return i&&!r.defaultPrevented}Dr(Sr,Oi),Sr.prototype[Pm]=!0,Sr.prototype.removeEventListener=function(n,e,t,r){TT(this,n,e,t,r)},Sr.prototype.M=function(){if(Sr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)nu(t[r]);delete n.g[e],n.h--}}this.I=null},Sr.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Sr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var cw=Mt.JSON.stringify;function xT(){var n=Fm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var dw,_M=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Rs,n=>n.reset());class Rs{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function yM(n){Mt.setTimeout(()=>{throw n},0)}function Om(n,e){dw||function as(){var n=Mt.Promise.resolve(void 0);dw=function(){n.then(vM)}}(),hw||(dw(),hw=!0),Fm.add(n,e)}var hw=!1,Fm=new class MT{constructor(){this.h=this.g=null}add(e,t){const r=_M.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function vM(){for(var n;n=xT();){try{n.h.call(n.g)}catch(t){yM(t)}var e=_M;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}hw=!1}function Lm(n,e){Sr.call(this),this.h=n||1,this.g=e||Mt,this.j=Nr(this.lb,this),this.l=Date.now()}function ef(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Um(n,e,t){if("function"==typeof n)t&&(n=Nr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Nr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Mt.setTimeout(n,e||0)}function fw(n){n.g=Um(()=>{n.g=null,n.i&&(n.i=!1,fw(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Dr(Lm,Sr),(ot=Lm.prototype).ca=!1,ot.R=null,ot.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Pr(this,"tick"),this.ca&&(ef(this),this.start()))}},ot.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ot.M=function(){Lm.X.M.call(this),ef(this),delete this.g};class wM extends Oi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fw(this)}M(){super.M(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Sc(n){Oi.call(this),this.h=n,this.g={}}Dr(Sc,Oi);var pw=[];function RT(n,e,t,r){Array.isArray(t)||(t&&(pw[0]=t.toString()),t=pw);for(var i=0;i<t.length;i++){var s=aw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function gw(n){bT(n.g,function(e,t){this.g.hasOwnProperty(t)&&Dc(e)},n),n.g={}}function Vm(){this.g=!0}function ru(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function sa(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var u=1;u<i.length;u++)i[u]=""}}}return cw(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Sc.prototype.M=function(){Sc.X.M.call(this),gw(this)},Sc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vm.prototype.Aa=function(){this.g=!1},Vm.prototype.info=function(){};var iu={},EM=null;function Bm(){return EM=EM||new Sr}function NT(n){qr.call(this,iu.Pa,n)}function tf(n){const e=Bm();Pr(e,new NT(e))}function PT(n,e){qr.call(this,iu.STAT_EVENT,n),this.stat=e}function Gr(n){const e=Bm();Pr(e,new PT(e,n))}function bM(n,e){qr.call(this,iu.Qa,n),this.size=e}function Ac(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){n()},e)}iu.Pa="serverreachability",Dr(NT,qr),iu.STAT_EVENT="statevent",Dr(PT,qr),iu.Qa="timingevent",Dr(bM,qr);var jm={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},yw={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function kT(){}function vw(){}kT.prototype.h=null;var Gm,xc={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Hm(){qr.call(this,"d")}function qm(){qr.call(this,"c")}function su(){}function qa(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new Sc(this),this.O=CM,this.T=new Lm(n=Mm?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ww}function ww(){this.i=null,this.g="",this.h=!1}Dr(Hm,qr),Dr(qm,qr),Dr(su,kT),su.prototype.g=function(){return new XMLHttpRequest},su.prototype.i=function(){return{}},Gm=new su;var CM=45e3,Wm={},nf={};function Ew(n,e,t){n.K=1,n.v=Ym(go(e)),n.s=t,n.P=!0,OT(n,null)}function OT(n,e){n.F=Date.now(),rf(n),n.A=go(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),bw(t.i,"t",r),n.C=0,t=n.l.H,n.h=new ww,n.g=a_(n.l,t?e:null,!n.s),0<n.N&&(n.L=new wM(Nr(n.La,n,n.g),n.N)),RT(n.S,n.g,"readystatechange",n.ib),e=n.H?iw(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),tf(),function mw(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var u="",h=s.split("&"),p=0;p<h.length;p++){var _=h[p].split("=");if(1<_.length){var b=_[0];_=_[1];var T=b.split("_");u=2<=T.length&&"type"==T[1]?u+(b+"=")+_+"&":u+(b+"=redacted&")}}else u=null;else u=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+u})}(n.j,n.u,n.A,n.m,n.U,n.s)}function IM(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function TM(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=FT(n,t),i==nf){4==e&&(n.o=4,Gr(14),r=!1),ru(n.j,n.m,null,"[Incomplete Response]");break}if(i==Wm){n.o=4,Gr(15),ru(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ru(n.j,n.m,i,null),UT(n,i)}IM(n)&&i!=nf&&i!=Wm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Gr(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Xt(e),e.K=!0,Gr(11))):(ru(n.j,n.m,t,"[Invalid Chunked Response]"),Mc(n),zm(n))}function FT(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?nf:(t=Number(e.substring(t,r)),isNaN(t)?Wm:(r+=1)+t>e.length?nf:(e=e.substr(r,t),n.C=r+t,e))}function rf(n){n.V=Date.now()+n.O,LT(n,n.O)}function LT(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ac(Nr(n.gb,n),e)}function Zm(n){n.B&&(Mt.clearTimeout(n.B),n.B=null)}function zm(n){0==n.l.G||n.I||r_(n.l,n)}function Mc(n){Zm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,ef(n.T),gw(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function UT(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Xm(t.h,n)))if(!n.J&&Xm(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;_o(t),H(t)}vt(t),Gr(18)}}else t.Ba=i[1],0<t.Ba-t.T&&37500>i[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ac(Nr(t.cb,t),6e3));if(1>=xM(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else oa(t,11)}else if((n.J||t.g==n)&&_o(t),!xm(e))for(i=t.Fa.g.parse(e),e=0;e<i.length;e++){let _=i[e];if(t.T=_[0],_=_[1],2==t.G)if("c"==_[0]){t.I=_[1],t.ka=_[2];const b=_[3];null!=b&&(t.ma=b,t.j.info("VER="+t.ma));const T=_[4];null!=T&&(t.Ca=T,t.j.info("SVER="+t.Ca));const S=_[5];null!=S&&"number"==typeof S&&0<S&&(t.J=r=1.5*S,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const N=n.g;if(N){const O=N.g?N.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(O){var s=r.h;s.g||-1==O.indexOf("spdy")&&-1==O.indexOf("quic")&&-1==O.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(uf(s,s.h),s.h=null))}if(r.D){const W=N.g?N.g.getResponseHeader("X-HTTP-Session-Id"):null;W&&(r.za=W,En(r.F,r.D,W))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var u=n;if((r=t).sa=o_(r,r.H?r.ka:null,r.V),u.J){WT(r.h,u);var h=u,p=r.J;p&&h.setTimeout(p),h.B&&(Zm(h),rf(h)),r.g=u}else Ee(r);0<t.i.length&&de(t)}else"stop"!=_[0]&&"close"!=_[0]||oa(t,7);else 3==t.G&&("stop"==_[0]||"close"==_[0]?"stop"==_[0]?oa(t,7):k(t):"noop"!=_[0]&&t.l&&t.l.wa(_),t.A=0)}tf()}catch{}}function VT(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Tm(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function oL(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Tm(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function sL(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Tm(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ot=qa.prototype).setTimeout=function(n){this.O=n},ot.ib=function(n){n=n.target;const e=this.L;e&&3==g(n)?e.l():this.La(n)},ot.La=function(n){try{if(n==this.g)e:{const b=g(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>b)&&(3!=b||Mm||this.g&&(this.h.h||this.g.fa()||v(this.g)))){this.I||4!=b||7==e||tf(),Zm(this);var t=this.g.aa();this.Y=t;t:if(IM(this)){var r=v(this.g);n="";var i=r.length,s=4==g(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Mc(this),zm(this);var u="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==t,function Ha(n,e,t,r,i,s,u){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+u})}(this.j,this.u,this.A,this.m,this.U,b,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var h,p=this.g;if((h=p.g?p.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xm(h)){var _=h;break t}}_=null}if(!(t=_)){this.i=!1,this.o=3,Gr(12),Mc(this),zm(this);break e}ru(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,UT(this,t)}this.P?(TM(this,b,u),Mm&&this.i&&3==b&&(RT(this.S,this.T,"tick",this.hb),this.T.start())):(ru(this.j,this.m,u,null),UT(this,u)),4==b&&Mc(this),this.i&&!this.I&&(4==b?r_(this.l,this):(this.i=!1,rf(this)))}else 400==t&&0<u.indexOf("Unknown SID")?(this.o=3,Gr(12)):(this.o=0,Gr(13)),Mc(this),zm(this)}}}catch{}},ot.hb=function(){if(this.g){var n=g(this.g),e=this.g.fa();this.C<e.length&&(Zm(this),TM(this,n,e),this.i&&4!=n&&rf(this))}},ot.cancel=function(){this.I=!0,Mc(this)},ot.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function _w(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(tf(),Gr(17)),Mc(this),this.o=2,zm(this)):LT(this,this.V-n)};var sf=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ou(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ou){this.h=void 0!==e?e:n.h,mo(this,n.j),this.s=n.s,this.g=n.g,af(this,n.m),this.l=n.l,e=n.i;var t=new lf;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Km(this,t),this.o=n.o}else n&&(t=String(n).match(sf))?(this.h=!!e,mo(this,t[1]||"",!0),this.s=au(t[2]||""),this.g=au(t[3]||"",!0),af(this,t[4]),this.l=au(t[5]||"",!0),Km(this,t[6]||"",!0),this.o=au(t[7]||"")):(this.h=!!e,this.i=new lf(null,this.h))}function go(n){return new ou(n)}function mo(n,e,t){n.j=t?au(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function af(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Km(n,e,t){e instanceof lf?(n.i=e,function HT(n,e){e&&!n.j&&(Ga(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(jT(this,r),bw(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=lu(e,uL)),n.i=new lf(e,n.h))}function En(n,e,t){n.i.set(e,t)}function Ym(n){return En(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function au(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function lu(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,Qm),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function Qm(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ou.prototype.toString=function(){var n=[],e=this.j;e&&n.push(lu(e,SM,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(lu(e,SM,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(lu(t,"/"==t.charAt(0)?lL:aL,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",lu(t,BT)),n.join("")};var SM=/[#\/\?@]/g,aL=/[#\?:]/g,lL=/[#\?]/g,uL=/[#\?@]/g,BT=/#/g;function lf(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Ga(n){n.g||(n.g=new Map,n.h=0,n.i&&function DM(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function jT(n,e){Ga(n),e=uu(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function $T(n,e){return Ga(n),e=uu(n,e),n.g.has(e)}function bw(n,e,t){jT(n,e),0<t.length&&(n.i=null,n.g.set(uu(n,e),zh(t)),n.h+=t.length)}function uu(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function qT(n){this.l=n||GT,n=Mt.PerformanceNavigationTiming?0<(n=Mt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ga&&Mt.g.Ga()&&Mt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ot=lf.prototype).add=function(n,e){Ga(this),this.i=null,n=uu(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ot.forEach=function(n,e){Ga(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ot.oa=function(){Ga(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ot.W=function(n){Ga(this);let e=[];if("string"==typeof n)$T(this,n)&&(e=e.concat(this.g.get(uu(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ot.set=function(n,e){return Ga(this),this.i=null,$T(this,n=uu(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ot.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},ot.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),u=this.W(r);for(r=0;r<u.length;r++){var i=s;""!==u[r]&&(i+="="+encodeURIComponent(String(u[r]))),n.push(i)}}return this.i=n.join("&")};var GT=10;function Jm(n){return!!n.h||!!n.g&&n.g.size>=n.j}function xM(n){return n.h?1:n.g?n.g.size:0}function Xm(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function uf(n,e){n.g?n.g.add(e):n.h=e}function WT(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function ZT(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return zh(n.i)}function zT(){}function cL(){this.g=new zT}function MM(n,e,t){const r=t||"";try{VT(n,function(i,s){let u=i;tu(i)&&(u=cw(i)),e.push(r+s+"="+encodeURIComponent(u))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function e_(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function t_(n){this.l=n.ac||null,this.j=n.jb||!1}function Cw(n,e){Sr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=KT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}qT.prototype.cancel=function(){if(this.i=ZT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},zT.prototype.stringify=function(n){return Mt.JSON.stringify(n,void 0)},zT.prototype.parse=function(n){return Mt.JSON.parse(n,void 0)},Dr(t_,kT),t_.prototype.g=function(){return new Cw(this.l,this.j)},t_.prototype.i=function(n){return function(){return n}}({}),Dr(Cw,Sr);var KT=0;function NM(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function n_(n){n.readyState=4,n.l=null,n.j=null,n.A=null,cf(n)}function cf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ot=Cw.prototype).open=function(n,e){if(this.readyState!=KT)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,cf(this)},ot.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Mt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},ot.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,n_(this)),this.readyState=KT},ot.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,cf(this)),this.g&&(this.readyState=3,cf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Mt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NM(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},ot.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?n_(this):cf(this),3==this.readyState&&NM(this)}},ot.Va=function(n){this.g&&(this.response=this.responseText=n,n_(this))},ot.Ua=function(n){this.g&&(this.response=n,n_(this))},ot.ga=function(){this.g&&n_(this)},ot.setRequestHeader=function(n,e){this.v.append(n,e)},ot.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ot.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Cw.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var dL=Mt.JSON.parse;function Jn(n){Sr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=PM,this.K=this.L=!1}Dr(Jn,Sr);var PM="",hL=/^https?$/i,fL=["POST","PUT"];function o(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,a(n),d(n)}function a(n){n.D||(n.D=!0,Pr(n,"complete"),Pr(n,"error"))}function l(n){if(n.h&&typeof Cm<"u"&&(!n.C[1]||4!=g(n)||2!=n.aa()))if(n.v&&4==g(n))Um(n.Ha,0,n);else if(Pr(n,"readystatechange"),4==g(n)){n.h=!1;try{const h=n.aa();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(sf)[1]||null;if(!i&&Mt.self&&Mt.self.location){var s=Mt.self.location.protocol;i=s.substr(0,s.length-1)}r=!hL.test(i?i.toLowerCase():"")}t=r}if(t)Pr(n,"complete"),Pr(n,"success");else{n.m=6;try{var u=2<g(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.aa()+"]",a(n)}}finally{d(n)}}}function d(n,e){if(n.g){f(n);const t=n.g,r=n.C[0]?Im:null;n.g=null,n.C=null,e||Pr(n,"ready");try{t.onreadystatechange=r}catch{}}}function f(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Mt.clearTimeout(n.A),n.A=null)}function g(n){return n.g?n.g.readyState:0}function v(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case PM:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function E(n){let e="";return bT(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function I(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=E(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):En(n,e,t))}function D(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function x(n){this.Ca=0,this.i=[],this.j=new Vm,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=D("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=D("baseRetryDelayMs",5e3,n),this.bb=D("retryDelaySeedMs",1e4,n),this.$a=D("forwardChannelMaxRetries",2,n),this.ta=D("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new qT(n&&n.concurrentRequestLimit),this.Fa=new cL,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function k(n){if(ee(n),3==n.G){var e=n.U++,t=go(n.F);En(t,"SID",n.I),En(t,"RID",e),En(t,"TYPE","terminate"),Xe(n,t),(e=new qa(n,n.j,e,void 0)).K=2,e.v=Ym(go(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon&&(t=Mt.navigator.sendBeacon(e.v.toString(),"")),!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=a_(e.l,null),e.g.da(e.v)),e.F=Date.now(),rf(e)}s_(n)}function H(n){n.g&&(Xt(n),n.g.cancel(),n.g=null)}function ee(n){H(n),n.u&&(Mt.clearTimeout(n.u),n.u=null),_o(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Mt.clearTimeout(n.m),n.m=null)}function de(n){Jm(n.h)||n.m||(n.m=!0,Om(n.Ja,n),n.C=0)}function He(n,e){var t;t=e?e.m:n.U++;const r=go(n.F);En(r,"SID",n.I),En(r,"RID",t),En(r,"AID",n.T),Xe(n,r),n.o&&n.s&&I(r,n.o,n.s),t=new qa(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=_t(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),uf(n.h,t),Ew(t,r,e)}function Xe(n,e){n.ia&&bT(n.ia,function(t,r){En(e,r,t)}),n.l&&VT({},function(t,r){En(e,r,t)})}function _t(n,e,t){t=Math.min(n.i.length,t);var r=n.l?Nr(n.l.Ra,n.l,n):null;e:{var i=n.i;let s=-1;for(;;){const u=["count="+t];-1==s?0<t?(s=i[0].h,u.push("ofs="+s)):s=0:u.push("ofs="+s);let h=!0;for(let p=0;p<t;p++){let _=i[p].h;const b=i[p].g;if(_-=s,0>_)s=Math.max(0,i[p].h-100),h=!1;else try{MM(b,u,"req"+_+"_")}catch{r&&r(b)}}if(h){r=u.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function Ee(n){n.g||n.u||(n.Z=1,Om(n.Ia,n),n.A=0)}function vt(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ac(Nr(n.Ia,n),i_(n,n.A)),n.A++,0))}function Xt(n){null!=n.B&&(Mt.clearTimeout(n.B),n.B=null)}function An(n){n.g=new qa(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=go(n.sa);En(e,"RID","rpc"),En(e,"SID",n.I),En(e,"CI",n.L?"0":"1"),En(e,"AID",n.T),En(e,"TYPE","xmlhttp"),Xe(n,e),n.o&&n.s&&I(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Ym(go(e)),t.s=null,t.P=!0,OT(t,n)}function _o(n){null!=n.v&&(Mt.clearTimeout(n.v),n.v=null)}function r_(n,e){var t=null;if(n.g==e){_o(n),Xt(n),n.g=null;var r=2}else{if(!Xm(n.h,e))return;t=e.D,WT(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Pr(r=Bm(),new bM(r,t)),de(n)}else Ee(n);else if(3==(i=e.o)||0==i&&0<n.pa||!(1==r&&function Fe(n,e){return!(xM(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Ac(Nr(n.Ja,n,e),i_(n,n.C)),n.C++,0)))}(n,e)||2==r&&vt(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),i){case 1:oa(n,5);break;case 4:oa(n,10);break;case 3:oa(n,6);break;default:oa(n,2)}}function i_(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function oa(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=Nr(n.kb,n);t||(t=new ou("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||mo(t,"https"),Ym(t)),function RM(n,e){const t=new Vm;if(Mt.Image){const r=new Image;r.onload=Am(e_,t,r,"TestLoadImage: loaded",!0,e),r.onerror=Am(e_,t,r,"TestLoadImage: error",!1,e),r.onabort=Am(e_,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=Am(e_,t,r,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Gr(2);n.G=0,n.l&&n.l.va(e),s_(n),ee(n)}function s_(n){if(n.G=0,n.la=[],n.l){const e=ZT(n.h);(0!=e.length||0!=n.i.length)&&(fM(n.la,e),fM(n.la,n.i),n.h.i.length=0,zh(n.i),n.i.length=0),n.l.ua()}}function o_(n,e,t){var r=t instanceof ou?go(t):new ou(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),af(r,r.m);else{var i=Mt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new ou(null,void 0);r&&mo(s,r),e&&(s.g=e),i&&af(s,i),t&&(s.l=t),r=s}return e=n.za,(t=n.D)&&e&&En(r,t,e),En(r,"VER",n.ma),Xe(n,r),r}function a_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jn(t&&n.Da&&!n.ra?new t_({jb:!0}):n.ra)).Ka(n.H),e}function l_(){}function Rc(){if(Tc&&!(10<=Number(eL)))throw Error("Environmental error: no available transport.")}function si(n,e){Sr.call(this),this.g=new x(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!xm(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xm(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new u_(this)}function gL(n){Hm.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function mL(){qm.call(this),this.status=1}function u_(n){this.g=n}(ot=Jn.prototype).Ka=function(n){this.L=n},ot.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Gm.g(),this.C=function $m(n){return n.h||(n.h=n.i())}(this.u?this.u:Gm),this.g.onreadystatechange=Nr(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void o(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=Mt.FormData&&n instanceof Mt.FormData,!(0<=J0(fL,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,u]of t)this.g.setRequestHeader(s,u);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{f(this),0<this.B&&((this.K=function pL(n){return Tc&&function wT(){return function gT(n){var e=XF;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=pT(String(Yh)).split("."),t=pT("9").split("."),r=Math.max(e.length,t.length);for(let u=0;0==n&&u<r;u++){var i=e[u]||"",s=t[u]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;n=X0(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||X0(0==i[2].length,0==s[2].length)||X0(i[2],s[2]),i=i[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nr(this.qa,this)):this.A=Um(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){o(this,s)}},ot.qa=function(){typeof Cm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Pr(this,"timeout"),this.abort(8))},ot.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Pr(this,"complete"),Pr(this,"abort"),d(this))},ot.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),d(this,!0)),Jn.X.M.call(this)},ot.Ha=function(){this.s||(this.F||this.v||this.l?l(this):this.fb())},ot.fb=function(){l(this)},ot.aa=function(){try{return 2<g(this)?this.g.status:-1}catch{return-1}},ot.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},ot.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),dL(e)}},ot.Ea=function(){return this.m},ot.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ot=x.prototype).ma=8,ot.G=1,ot.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const i=new qa(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=iw(s),sw(s,this.S)):s=this.S),null!==this.o||this.N||(i.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=_t(this,i,e),En(t=go(this.F),"RID",n),En(t,"CVER",22),this.D&&En(t,"X-HTTP-Session-Id",this.D),Xe(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(E(s)))+"&"+e:this.o&&I(t,this.o,s)),uf(this.h,i),this.Ya&&En(t,"TYPE","init"),this.O?(En(t,"$req",e),En(t,"SID","null"),i.Z=!0,Ew(i,t,null)):Ew(i,t,e),this.G=2}}else 3==this.G&&(n?He(this,n):0==this.i.length||Jm(this.h)||He(this))},ot.Ia=function(){if(this.u=null,An(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ac(Nr(this.eb,this),n)}},ot.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Gr(10),H(this),An(this))},ot.cb=function(){null!=this.v&&(this.v=null,H(this),vt(this),Gr(19))},ot.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Gr(2)):(this.j.info("Failed to ping google.com"),Gr(1))},(ot=l_.prototype).xa=function(){},ot.wa=function(){},ot.va=function(){},ot.ua=function(){},ot.Ra=function(){},Rc.prototype.g=function(n,e){return new si(n,e)},Dr(si,Sr),si.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Gr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=o_(n,null,n.V),de(n)},si.prototype.close=function(){k(this.g)},si.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=cw(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&de(e)},si.prototype.M=function(){this.g.l=null,delete this.j,k(this.g),delete this.g,si.X.M.call(this)},Dr(gL,Hm),Dr(mL,qm),Dr(u_,l_),u_.prototype.xa=function(){Pr(this.g,"a")},u_.prototype.wa=function(n){Pr(this.g,new gL(n))},u_.prototype.va=function(n){Pr(this.g,new mL)},u_.prototype.ua=function(){Pr(this.g,"b")},Rc.prototype.createWebChannel=Rc.prototype.g,si.prototype.send=si.prototype.u,si.prototype.open=si.prototype.m,si.prototype.close=si.prototype.close,jm.NO_ERROR=0,jm.TIMEOUT=8,jm.HTTP_ERROR=6,yw.COMPLETE="complete",vw.EventType=xc,xc.OPEN="a",xc.CLOSE="b",xc.ERROR="c",xc.MESSAGE="d",Sr.prototype.listen=Sr.prototype.N,Jn.prototype.listenOnce=Jn.prototype.O,Jn.prototype.getLastError=Jn.prototype.Oa,Jn.prototype.getLastErrorCode=Jn.prototype.Ea,Jn.prototype.getStatus=Jn.prototype.aa,Jn.prototype.getResponseJson=Jn.prototype.Sa,Jn.prototype.getResponseText=Jn.prototype.fa,Jn.prototype.send=Jn.prototype.da,Jn.prototype.setWithCredentials=Jn.prototype.Ka;var fq=xs.createWebChannelTransport=function(){return new Rc},pq=xs.getStatEventTarget=function(){return Bm()},kM=xs.ErrorCode=jm,gq=xs.EventType=yw,mq=xs.Event=iu,_L=xs.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},_q=xs.FetchXmlHttpFactory=t_,YT=xs.WebChannel=vw,yq=xs.XhrIo=Jn;const yL="@firebase/firestore";class Wr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Wr.UNAUTHENTICATED=new Wr(null),Wr.GOOGLE_CREDENTIALS=new Wr("google-credentials-uid"),Wr.FIRST_PARTY=new Wr("first-party-uid"),Wr.MOCK_USER=new Wr("mock-user");let c_="9.14.0";const Nc=new jr.Yd("@firebase/firestore");function OM(){return Nc.logLevel}function ke(n,...e){if(Nc.logLevel<=jr.in.DEBUG){const t=e.map(FM);Nc.debug(`Firestore (${c_}): ${n}`,...t)}}function mr(n,...e){if(Nc.logLevel<=jr.in.ERROR){const t=e.map(FM);Nc.error(`Firestore (${c_}): ${n}`,...t)}}function df(n,...e){if(Nc.logLevel<=jr.in.WARN){const t=e.map(FM);Nc.warn(`Firestore (${c_}): ${n}`,...t)}}function FM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function st(n="Unexpected state"){const e=`FIRESTORE (${c_}) INTERNAL ASSERTION FAILED: `+n;throw mr(e),new Error(e)}function Ct(n,e){n||st()}function Ge(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class De extends R.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class kr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class vL{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Eq{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Wr.UNAUTHENTICATED))}shutdown(){}}class bq{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Cq{constructor(e){this.t=e,this.currentUser=Wr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=_=>this.i!==i?(i=this.i,t(_)):Promise.resolve();let u=new kr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new kr,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const _=u;e.enqueueRetryable((0,z.Z)(function*(){yield _.promise,yield s(r.currentUser)}))},p=_=>{ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=_,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(_=>p(_)),setTimeout(()=>{if(!this.auth){const _=this.t.getImmediate({optional:!0});_?p(_):(ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new kr)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ct("string"==typeof r.accessToken),new vL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ct(null===e||"string"==typeof e),new Wr(e)}}class Iq{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i,this.type="FirstParty",this.user=Wr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ct(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Tq{constructor(e,t,r,i){this.h=e,this.l=t,this.m=r,this.g=i}getToken(){return Promise.resolve(new Iq(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Wr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class wL{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Dq{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=s=>{null!=s.error&&ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const u=s.token!==this.A;return this.A=s.token,ke("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?i(s):ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ct("string"==typeof t.token),this.A=t.token,new wL(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Sq(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class EL{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=Sq(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function kt(n,e){return n<e?-1:n>e?1:0}function d_(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function bL(n){return n+"\0"}class Gn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new De(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new De(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new De(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new De(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Gn.fromMillis(Date.now())}static fromDate(e){return Gn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Gn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?kt(this.nanoseconds,e.nanoseconds):kt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class It{constructor(e){this.timestamp=e}static fromTimestamp(e){return new It(e)}static min(){return new It(new Gn(0,0))}static max(){return new It(new Gn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Iw{constructor(e,t,r){void 0===t?t=0:t>e.length&&st(),void 0===r?r=e.length-t:r>e.length-t&&st(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Iw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Iw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),u=t.get(i);if(s<u)return-1;if(s>u)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class nn extends Iw{construct(e,t,r){return new nn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new De(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new nn(t)}static emptyPath(){return new nn([])}}const Aq=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Iw{construct(e,t,r){return new lr(e,t,r)}static isValidIdentifier(e){return Aq.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new De(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new De(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[i+1];if("\\"!==p&&"."!==p&&"`"!==p)throw new De(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,i+=2}else"`"===h?(u=!u,i++):"."!==h||u?(r+=h,i++):(s(),i++)}if(s(),u)throw new De(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(nn.fromString(e))}static fromName(e){return new qe(nn.fromString(e).popFirst(5))}static empty(){return new qe(nn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===nn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return nn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new nn(e.slice()))}}class QT{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function LM(n){return n.fields.find(e=>2===e.kind)}function hf(n){return n.fields.filter(e=>2!==e.kind)}QT.UNKNOWN_ID=-1;class JT{constructor(e,t){this.fieldPath=e,this.kind=t}}class Tw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Tw(0,Ns.min())}}function CL(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=It.fromTimestamp(1e9===r?new Gn(t+1,0):new Gn(t,r));return new Ns(i,qe.empty(),e)}function IL(n){return new Ns(n.readTime,n.key,-1)}class Ns{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Ns(It.min(),qe.empty(),-1)}static max(){return new Ns(It.max(),qe.empty(),-1)}}function UM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:kt(n.largestBatchId,e.largestBatchId))}const TL="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class DL{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Pc(n){return VM.apply(this,arguments)}function VM(){return VM=(0,z.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==TL)throw n;ke("LocalStore","Unexpectedly lost primary lease")}),VM.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&st(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let i=0,s=0,u=!1;e.forEach(h=>{++i,h.next(()=>{++s,u&&s===i&&t()},p=>r(p))}),u=!0,s===i&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(i=>i?se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new se((r,i)=>{const s=e.length,u=new Array(s);let h=0;for(let p=0;p<s;p++){const _=p;t(e[_]).next(b=>{u[_]=b,++h,h===s&&r(u)},b=>i(b))}})}static doWhile(e,t){return new se((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class XT{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new kr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Dw(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const i=BM(r.target.error);this.P.reject(new Dw(e,i))}}static open(e,t,r,i){try{return new XT(t,e.transaction(i,r))}catch(s){throw new Dw(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(ke("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Nq(t)}}class aa{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===aa.D((0,R.z$)())&&mr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ke("SimpleDb","Removing database:",e),ff(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,R.hl)())return!1;if(aa.N())return!0;const e=(0,R.z$)(),t=aa.D(e),r=0<t&&t<10,i=aa.k(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,z.Z)(function*(){return t.db||(ke("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=u=>{r(u.target.result)},s.onblocked=()=>{i(new Dw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=u=>{const h=u.target.error;i("VersionError"===h.name?new De(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new De(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Dw(e,h))},s.onupgradeneeded=u=>{ke("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',u.oldVersion),t.S.$(u.target.result,s.transaction,u.oldVersion,t.version).next(()=>{ke("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,z.Z)(function*(){const u="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.F(e);const p=XT.open(s.db,e,u?"readonly":"readwrite",r),_=i(p).next(b=>(p.V(),b)).catch(b=>(p.abort(b),se.reject(b))).toPromise();return _.catch(()=>{}),yield p.v,_}catch(p){const _=p,b="FirebaseError"!==_.name&&h<3;if(ke("SimpleDb","Transaction failed with error:",_.message,"Retrying:",b),s.close(),!b)return Promise.reject(_)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Rq{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return ff(this.U.delete())}}class Dw extends De{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function kc(n){return"IndexedDbTransactionError"===n.name}class Nq{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ke("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ke("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ff(r)}add(e){return ke("SimpleDb","ADD",this.store.name,e,e),ff(this.store.add(e))}get(e){return ff(this.store.get(e)).next(t=>(void 0===t&&(t=null),ke("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ke("SimpleDb","DELETE",this.store.name,e),ff(this.store.delete(e))}count(){return ke("SimpleDb","COUNT",this.store.name),ff(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.H(i,(u,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new se((s,u)=>{i.onerror=h=>{u(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((i,s)=>{r.onerror=u=>{s(u.target.error)},r.onsuccess=u=>{i(u.target.result)}})}Y(e,t){ke("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const i=this.cursor(r);return this.H(i,(s,u,h)=>h.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.H(i,t)}tt(e){const t=this.cursor({});return new se((r,i)=>{t.onerror=s=>{const u=BM(s.target.error);i(u)},t.onsuccess=s=>{const u=s.target.result;u?e(u.primaryKey,u.value).next(h=>{h?u.continue():r()}):r()}})}H(e,t){const r=[];return new se((i,s)=>{e.onerror=u=>{s(u.target.error)},e.onsuccess=u=>{const h=u.target.result;if(!h)return void i();const p=new Rq(h),_=t(h.primaryKey,h.value,p);if(_ instanceof se){const b=_.catch(T=>(p.done(),se.reject(T)));r.push(b)}p.isDone?i():null===p.G?h.continue():h.continue(p.G)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ff(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=BM(r.target.error);t(i)}})}let SL=!1;function BM(n){const e=aa.D((0,R.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new De("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return SL||(SL=!0,setTimeout(()=>{throw r},0)),r}}return n}class Pq{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;ke("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,z.Z)(function*(){t.task=null;try{ke("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){kc(r)?ke("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Pc(r)}yield t.nt(6e4)}))}}class kq{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,z.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let i=t,s=!0;return se.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(u=>{if(null!==u&&!r.has(u))return ke("IndexBackiller",`Processing collection: ${u}`),this.rt(e,u,i).next(h=>{i-=h,r.add(u)});s=!1})).next(()=>t-i)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const u=s.changes;return this.localStore.indexManager.updateIndexEntries(e,u).next(()=>this.ot(i,s)).next(h=>(ke("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>u.size)}))}ot(e,t){let r=e;return t.changes.forEach((i,s)=>{const u=IL(s);UM(u,r)>0&&(r=u)}),new Ns(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ls{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>t.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function AL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}ls.at=-1;class ur{constructor(e,t){this.comparator=e,this.root=t||oi.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,oi.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,oi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eD(this.root,e,this.comparator,!1)}getReverseIterator(){return new eD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eD(this.root,e,this.comparator,!0)}}class eD{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class oi{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??oi.RED,this.left=i??oi.EMPTY,this.right=s??oi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new oi(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return oi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return oi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,oi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,oi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw st();const e=this.left.check();if(e!==this.right.check())throw st();return e+(this.isRed()?0:1)}}oi.EMPTY=null,oi.RED=!0,oi.BLACK=!1,oi.EMPTY=new class{constructor(){this.size=0}get key(){throw st()}get value(){throw st()}get color(){throw st()}get left(){throw st()}get right(){throw st()}copy(n,e,t,r,i){return this}insert(n,e,t){return new oi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bn{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ML(this.data.getIterator())}getIteratorFrom(e){return new ML(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bn(this.comparator);return t.data=e,t}}class ML{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function h_(n){return n.hasNext()?n.getNext():void 0}class Ps{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new Ps([])}unionWith(e){let t=new bn(lr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ps(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return d_(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Or{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Or(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new Or(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return kt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Or.EMPTY_BYTE_STRING=new Or("");const Fq=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Oc(n){if(Ct(!!n),"string"==typeof n){let e=0;const t=Fq.exec(n);if(Ct(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:cr(n.seconds),nanos:cr(n.nanos)}}function cr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function gf(n){return"string"==typeof n?Or.fromBase64String(n):Or.fromUint8Array(n)}function jM(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function RL(n){const e=n.mapValue.fields.__previous_value__;return jM(e)?RL(e):e}function Sw(n){const e=Oc(n.mapValue.fields.__local_write_time__.timestampValue);return new Gn(e.seconds,e.nanos)}class Lq{constructor(e,t,r,i,s,u,h,p){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=u,this.autoDetectLongPolling=h,this.useFetchStreams=p}}class Fc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fc&&e.projectId===this.projectId&&e.database===this.database}}function Aw(n){return null==n}function xw(n){return 0===n&&1/n==-1/0}function NL(n){return"number"==typeof n&&Number.isInteger(n)&&!xw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Lc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},tD={nullValue:"NULL_VALUE"};function mf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?jM(n)?4:FL(n)?9007199254740991:10:st()}function Wa(n,e){if(n===e)return!0;const t=mf(n);if(t!==mf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Sw(n).isEqual(Sw(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Oc(r.timestampValue),u=Oc(i.timestampValue);return s.seconds===u.seconds&&s.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,gf(n.bytesValue).isEqual(gf(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return cr(r.geoPointValue.latitude)===cr(i.geoPointValue.latitude)&&cr(r.geoPointValue.longitude)===cr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return cr(r.integerValue)===cr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=cr(r.doubleValue),u=cr(i.doubleValue);return s===u?xw(s)===xw(u):isNaN(s)&&isNaN(u)}return!1}(n,e);case 9:return d_(n.arrayValue.values||[],e.arrayValue.values||[],Wa);case 10:return function(r,i){const s=r.mapValue.fields||{},u=i.mapValue.fields||{};if(AL(s)!==AL(u))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===u[h]||!Wa(s[h],u[h])))return!1;return!0}(n,e);default:return st()}var i}function Mw(n,e){return void 0!==(n.values||[]).find(t=>Wa(t,e))}function Uc(n,e){if(n===e)return 0;const t=mf(n),r=mf(e);if(t!==r)return kt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return kt(n.booleanValue,e.booleanValue);case 2:return function(i,s){const u=cr(i.integerValue||i.doubleValue),h=cr(s.integerValue||s.doubleValue);return u<h?-1:u>h?1:u===h?0:isNaN(u)?isNaN(h)?0:-1:1}(n,e);case 3:return PL(n.timestampValue,e.timestampValue);case 4:return PL(Sw(n),Sw(e));case 5:return kt(n.stringValue,e.stringValue);case 6:return function(i,s){const u=gf(i),h=gf(s);return u.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const u=i.split("/"),h=s.split("/");for(let p=0;p<u.length&&p<h.length;p++){const _=kt(u[p],h[p]);if(0!==_)return _}return kt(u.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const u=kt(cr(i.latitude),cr(s.latitude));return 0!==u?u:kt(cr(i.longitude),cr(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const u=i.values||[],h=s.values||[];for(let p=0;p<u.length&&p<h.length;++p){const _=Uc(u[p],h[p]);if(_)return _}return kt(u.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Lc.mapValue&&s===Lc.mapValue)return 0;if(i===Lc.mapValue)return 1;if(s===Lc.mapValue)return-1;const u=i.fields||{},h=Object.keys(u),p=s.fields||{},_=Object.keys(p);h.sort(),_.sort();for(let b=0;b<h.length&&b<_.length;++b){const T=kt(h[b],_[b]);if(0!==T)return T;const S=Uc(u[h[b]],p[_[b]]);if(0!==S)return S}return kt(h.length,_.length)}(n.mapValue,e.mapValue);default:throw st()}}function PL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return kt(n,e);const t=Oc(n),r=Oc(e),i=kt(t.seconds,r.seconds);return 0!==i?i:kt(t.nanos,r.nanos)}function f_(n){return $M(n)}function $M(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Oc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?gf(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const u of r.values||[])s?s=!1:i+=",",i+=$M(u);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",u=!0;for(const h of i)u?u=!1:s+=",",s+=`${h}:${$M(r.fields[h])}`;return s+"}"}(n.mapValue):st();var e}function _f(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function HM(n){return!!n&&"integerValue"in n}function Rw(n){return!!n&&"arrayValue"in n}function kL(n){return!!n&&"nullValue"in n}function OL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nD(n){return!!n&&"mapValue"in n}function Nw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Nw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Nw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function FL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Uq(n){return"nullValue"in n?tD:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?_f(Fc.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:st()}function Vq(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?_f(Fc.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Lc:st()}function LL(n,e){const t=Uc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function UL(n,e){const t=Uc(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ai{constructor(e){this.value=e}static empty(){return new ai({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nD(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Nw(t)}setAll(e){let t=lr.emptyPath(),r={},i=[];e.forEach((u,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,r,i),r={},i=[],t=h.popLast()}u?r[h.lastSegment()]=Nw(u):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());nD(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];nD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){pf(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new ai(Nw(this.value))}}function VL(n){const e=[];return pf(n.fields,(t,r)=>{const i=new lr([t]);if(nD(r)){const s=VL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const u of s)e.push(i.child(u))}else e.push(i)}),new Ps(e)}class Pn{constructor(e,t,r,i,s,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=s,this.documentState=u}static newInvalidDocument(e){return new Pn(e,0,It.min(),It.min(),ai.empty(),0)}static newFoundDocument(e,t,r){return new Pn(e,1,t,It.min(),r,0)}static newNoDocument(e,t){return new Pn(e,2,t,It.min(),ai.empty(),0)}static newUnknownDocument(e,t){return new Pn(e,3,t,It.min(),ai.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ai.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ai.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=It.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Pn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Pn(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Bq{constructor(e,t=null,r=[],i=[],s=null,u=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=u,this.endAt=h,this.ht=null}}function BL(n,e=null,t=[],r=[],i=null,s=null,u=null){return new Bq(n,e,t,r,i,s,u)}function yf(n){const e=Ge(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+f_(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Aw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>f_(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>f_(r)).join(",")),e.ht=t}return e.ht}function Pw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Kq(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!Wa(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!GL(n.startAt,e.startAt)&&GL(n.endAt,e.endAt)}function rD(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function iD(n,e){return n.filters.filter(t=>t instanceof li&&t.field.isEqual(e))}function jL(n,e,t){let r=tD,i=!0;for(const s of iD(n,e)){let u=tD,h=!0;switch(s.op){case"<":case"<=":u=Uq(s.value);break;case"==":case"in":case">=":u=s.value;break;case">":u=s.value,h=!1;break;case"!=":case"not-in":u=tD}LL({value:r,inclusive:i},{value:u,inclusive:h})<0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];LL({value:r,inclusive:i},{value:u,inclusive:t.inclusive})<0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}function $L(n,e,t){let r=Lc,i=!0;for(const s of iD(n,e)){let u=Lc,h=!0;switch(s.op){case">=":case">":u=Vq(s.value),h=!1;break;case"==":case"in":case"<=":u=s.value;break;case"<":u=s.value,h=!1;break;case"!=":case"not-in":u=Lc}UL({value:r,inclusive:i},{value:u,inclusive:h})>0&&(r=u,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const u=t.position[s];UL({value:r,inclusive:i},{value:u,inclusive:t.inclusive})>0&&(r=u,i=t.inclusive);break}return{value:r,inclusive:i}}class li extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,r):new $q(e,t,r):"array-contains"===t?new Gq(e,r):"in"===t?new Wq(e,r):"not-in"===t?new Zq(e,r):"array-contains-any"===t?new zq(e,r):new li(e,t,r)}static lt(e,t,r){return"in"===t?new Hq(e,r):new qq(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Uc(t,this.value)):null!==t&&mf(this.value)===mf(t)&&this.ft(Uc(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return st()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class $q extends li{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.ft(t)}}class Hq extends li{constructor(e,t){super(e,"in",t),this.keys=HL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class qq extends li{constructor(e,t){super(e,"not-in",t),this.keys=HL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function HL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class Gq extends li{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Rw(t)&&Mw(t.arrayValue,this.value)}}class Wq extends li{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Mw(this.value.arrayValue,t)}}class Zq extends li{constructor(e,t){super(e,"not-in",t)}matches(e){if(Mw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Mw(this.value.arrayValue,t)}}class zq extends li{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Rw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Mw(this.value.arrayValue,r))}}class Vc{constructor(e,t){this.position=e,this.inclusive=t}}class p_{constructor(e,t="asc"){this.field=e,this.dir=t}}function Kq(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function qL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],u=n.position[i];if(r=s.field.isKeyField()?qe.comparator(qe.fromName(u.referenceValue),t.key):Uc(u,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function GL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wa(n.position[t],e.position[t]))return!1;return!0}class cu{constructor(e,t=null,r=[],i=[],s=null,u="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=u,this.startAt=h,this.endAt=p,this._t=null,this.wt=null}}function WL(n,e,t,r,i,s,u,h){return new cu(n,e,t,r,i,s,u,h)}function g_(n){return new cu(n)}function ZL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function qM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function GM(n){for(const e of n.filters)if(e.dt())return e.field;return null}function WM(n){return null!==n.collectionGroup}function m_(n){const e=Ge(n);if(null===e._t){e._t=[];const t=GM(e),r=qM(e);if(null!==t&&null===r)t.isKeyField()||e._t.push(new p_(t)),e._t.push(new p_(lr.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new p_(lr.keyField(),s))}}}return e._t}function Fi(n){const e=Ge(n);if(!e.wt)if("F"===e.limitType)e.wt=BL(e.path,e.collectionGroup,m_(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of m_(e))t.push(new p_(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new Vc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Vc(e.startAt.position,e.startAt.inclusive):null;e.wt=BL(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.wt}function sD(n,e,t){return new cu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function kw(n,e){return Pw(Fi(n),Fi(e))&&n.limitType===e.limitType}function zL(n){return`${yf(Fi(n))}|lt:${n.limitType}`}function ZM(n){return`Query(target=${function jq(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${f_(r.value)}`;var r}).join(", ")}]`),Aw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>f_(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>f_(t)).join(",")),`Target(${e})`}(Fi(n))}; limitType=${n.limitType})`}function zM(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):qe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,u){const h=qL(i,s,u);return i.inclusive?h<=0:h<0}(t.startAt,m_(t),r)||t.endAt&&!function(i,s,u){const h=qL(i,s,u);return i.inclusive?h>=0:h>0}(t.endAt,m_(t),r)));var t,r}function KL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function YL(n){return(e,t)=>{let r=!1;for(const i of m_(n)){const s=Yq(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function Yq(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(i,s,u){const h=s.data.field(i),p=u.data.field(i);return null!==h&&null!==p?Uc(h,p):st()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return st()}}function QL(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xw(e)?"-0":e}}function JL(n){return{integerValue:""+n}}function XL(n,e){return NL(e)?JL(e):QL(n,e)}class oD{constructor(){this._=void 0}}function Qq(n,e,t){return n instanceof __?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof vf?t2(n,e):n instanceof wf?n2(n,e):function(r,i){const s=e2(r,i),u=r2(s)+r2(r.yt);return HM(s)&&HM(r.yt)?JL(u):QL(r.It,u)}(n,e)}function Jq(n,e,t){return n instanceof vf?t2(n,e):n instanceof wf?n2(n,e):t}function e2(n,e){return n instanceof y_?HM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class __ extends oD{}class vf extends oD{constructor(e){super(),this.elements=e}}function t2(n,e){const t=i2(e);for(const r of n.elements)t.some(i=>Wa(i,r))||t.push(r);return{arrayValue:{values:t}}}class wf extends oD{constructor(e){super(),this.elements=e}}function n2(n,e){let t=i2(e);for(const r of n.elements)t=t.filter(i=>!Wa(i,r));return{arrayValue:{values:t}}}class y_ extends oD{constructor(e,t){super(),this.It=e,this.yt=t}}function r2(n){return cr(n.integerValue||n.doubleValue)}function i2(n){return Rw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ow{constructor(e,t){this.field=e,this.transform=t}}class eG{constructor(e,t){this.version=e,this.transformResults=t}}class Wn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Wn}static exists(e){return new Wn(void 0,e)}static updateTime(e){return new Wn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aD(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lD{}function s2(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new w_(n.key,Wn.none()):new v_(n.key,n.data,Wn.none());{const t=n.data,r=ai.empty();let i=new bn(lr.comparator);for(let s of e.fields)if(!i.has(s)){let u=t.field(s);null===u&&s.length>1&&(s=s.popLast(),u=t.field(s)),null===u?r.delete(s):r.set(s,u),i=i.add(s)}return new du(n.key,r,new Ps(i.toArray()),Wn.none())}}function tG(n,e,t){n instanceof v_?function(r,i,s){const u=r.value.clone(),h=l2(r.fieldTransforms,i,s.transformResults);u.setAll(h),i.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(n,e,t):n instanceof du?function(r,i,s){if(!aD(r.precondition,i))return void i.convertToUnknownDocument(s.version);const u=l2(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(a2(r)),h.setAll(u),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Fw(n,e,t,r){return n instanceof v_?function(i,s,u,h){if(!aD(i.precondition,s))return u;const p=i.value.clone(),_=u2(i.fieldTransforms,h,s);return p.setAll(_),s.convertToFoundDocument(s.version,p).setHasLocalMutations(),null}(n,e,t,r):n instanceof du?function(i,s,u,h){if(!aD(i.precondition,s))return u;const p=u2(i.fieldTransforms,h,s),_=s.data;return _.setAll(a2(i)),_.setAll(p),s.convertToFoundDocument(s.version,_).setHasLocalMutations(),null===u?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(b=>b.field))}(n,e,t,r):(u=t,aD(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):u);var s,u}function nG(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=e2(r.transform,i||null);null!=s&&(null===t&&(t=ai.empty()),t.set(r.field,s))}return t||null}function o2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&d_(t,r,(i,s)=>function Xq(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof vf&&r instanceof vf||t instanceof wf&&r instanceof wf?d_(t.elements,r.elements,Wa):t instanceof y_&&r instanceof y_?Wa(t.yt,r.yt):t instanceof __&&r instanceof __);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class v_ extends lD{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class du extends lD{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function a2(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function l2(n,e,t){const r=new Map;Ct(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],u=s.transform,h=e.data.field(s.field);r.set(s.field,Jq(u,h,t[i]))}return r}function u2(n,e,t){const r=new Map;for(const i of n){const s=i.transform,u=t.data.field(i.field);r.set(i.field,Qq(s,u,e))}return r}class w_ extends lD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class KM extends lD{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class rG{constructor(e){this.count=e}}var Ar,rn;function c2(n){switch(n){default:return st();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function d2(n){if(void 0===n)return mr("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Ar.OK:return ue.OK;case Ar.CANCELLED:return ue.CANCELLED;case Ar.UNKNOWN:return ue.UNKNOWN;case Ar.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Ar.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Ar.INTERNAL:return ue.INTERNAL;case Ar.UNAVAILABLE:return ue.UNAVAILABLE;case Ar.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Ar.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Ar.NOT_FOUND:return ue.NOT_FOUND;case Ar.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Ar.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Ar.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Ar.ABORTED:return ue.ABORTED;case Ar.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Ar.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Ar.DATA_LOSS:return ue.DATA_LOSS;default:return st()}}(rn=Ar||(Ar={}))[rn.OK=0]="OK",rn[rn.CANCELLED=1]="CANCELLED",rn[rn.UNKNOWN=2]="UNKNOWN",rn[rn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",rn[rn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",rn[rn.NOT_FOUND=5]="NOT_FOUND",rn[rn.ALREADY_EXISTS=6]="ALREADY_EXISTS",rn[rn.PERMISSION_DENIED=7]="PERMISSION_DENIED",rn[rn.UNAUTHENTICATED=16]="UNAUTHENTICATED",rn[rn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",rn[rn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",rn[rn.ABORTED=10]="ABORTED",rn[rn.OUT_OF_RANGE=11]="OUT_OF_RANGE",rn[rn.UNIMPLEMENTED=12]="UNIMPLEMENTED",rn[rn.INTERNAL=13]="INTERNAL",rn[rn.UNAVAILABLE=14]="UNAVAILABLE",rn[rn.DATA_LOSS=15]="DATA_LOSS";class Bc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){pf(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return xL(this.inner)}size(){return this.innerSize}}const iG=new ur(qe.comparator);function us(){return iG}const h2=new ur(qe.comparator);function Lw(...n){let e=h2;for(const t of n)e=e.insert(t.key,t);return e}function f2(n){let e=h2;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Za(){return Uw()}function p2(){return Uw()}function Uw(){return new Bc(n=>n.toString(),(n,e)=>n.isEqual(e))}const sG=new ur(qe.comparator),oG=new bn(qe.comparator);function jt(...n){let e=oG;for(const t of n)e=e.add(t);return e}const aG=new bn(kt);function uD(){return aG}class Vw{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Bw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Vw(It.min(),i,uD(),us(),jt())}}class Bw{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Bw(r,t,jt(),jt(),jt())}}class cD{constructor(e,t,r,i){this.Tt=e,this.removedTargetIds=t,this.key=r,this.Et=i}}class g2{constructor(e,t){this.targetId=e,this.At=t}}class m2{constructor(e,t,r=Or.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class _2{constructor(){this.Rt=0,this.bt=v2(),this.Pt=Or.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jt(),t=jt(),r=jt();return this.bt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:st()}}),new Bw(this.Pt,this.vt,e,t,r)}Nt(){this.Vt=!1,this.bt=v2()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class lG{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=us(),this.qt=y2(),this.Kt=new bn(kt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const r=this.zt(t);switch(e.state){case 0:this.Ht(t)&&r.Ct(e.resumeToken);break;case 1:r.Ft(),r.St||r.Nt(),r.Ct(e.resumeToken);break;case 2:r.Ft(),r.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(r.$t(),r.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),r.Ct(e.resumeToken));break;default:st()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((r,i)=>{this.Ht(i)&&t(i)})}Yt(e){const t=e.targetId,r=e.At.count,i=this.Xt(t);if(i){const s=i.target;if(rD(s))if(0===r){const u=new qe(s.path);this.jt(t,u,Pn.newNoDocument(u,It.min()))}else Ct(1===r);else this.Zt(t)!==r&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,u)=>{const h=this.Xt(u);if(h){if(s.current&&rD(h.target)){const p=new qe(h.target.path);null!==this.Ut.get(p)||this.ee(u,p)||this.jt(u,p,Pn.newNoDocument(p,e))}s.Dt&&(t.set(u,s.xt()),s.Nt())}});let r=jt();this.qt.forEach((s,u)=>{let h=!0;u.forEachWhile(p=>{const _=this.Xt(p);return!_||2===_.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.Ut.forEach((s,u)=>u.setReadTime(e));const i=new Vw(e,t,this.Kt,this.Ut,r);return this.Ut=us(),this.qt=y2(),this.Kt=new bn(kt),i}Qt(e,t){if(!this.Ht(e))return;const r=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,r),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,r){if(!this.Ht(e))return;const i=this.zt(e);this.ee(e,t)?i.kt(t,1):i.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),r&&(this.Ut=this.Ut.insert(t,r))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new _2,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new bn(kt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||ke("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new _2),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function y2(){return new ur(qe.comparator)}function v2(){return new ur(qe.comparator)}const uG={asc:"ASCENDING",desc:"DESCENDING"},cG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class dG{constructor(e,t){this.databaseId=e,this.gt=t}}function jw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function w2(n,e){return n.gt?e.toBase64():e.toUint8Array()}function hG(n,e){return jw(n,e.toTimestamp())}function Zr(n){return Ct(!!n),It.fromTimestamp(function(e){const t=Oc(e);return new Gn(t.seconds,t.nanos)}(n))}function YM(n,e){return(t=n,new nn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function E2(n){const e=nn.fromString(n);return Ct(x2(e)),e}function $w(n,e){return YM(n.databaseId,e.path)}function za(n,e){const t=E2(e);if(t.get(1)!==n.databaseId.projectId)throw new De(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new De(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe(C2(t))}function QM(n,e){return YM(n.databaseId,e)}function b2(n){const e=E2(n);return 4===e.length?nn.emptyPath():C2(e)}function Hw(n){return new nn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function C2(n){return Ct(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function I2(n,e,t){return{name:$w(n,e),fields:t.value.mapValue.fields}}function T2(n,e,t){const r=za(n,e.name),i=Zr(e.updateTime),s=new ai({mapValue:{fields:e.fields}}),u=Pn.newFoundDocument(r,i,s);return t&&u.setHasCommittedMutations(),t?u.setHasCommittedMutations():u}function qw(n,e){let t;if(e instanceof v_)t={update:I2(n,e.key,e.value)};else if(e instanceof w_)t={delete:$w(n,e.key)};else if(e instanceof du)t={update:I2(n,e.key,e.data),updateMask:EG(e.fieldMask)};else{if(!(e instanceof KM))return st();t={verify:$w(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const u=s.transform;if(u instanceof __)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof vf)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof wf)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof y_)return{fieldPath:s.field.canonicalString(),increment:u.yt};throw st()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:hG(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:st()),t;var i}function JM(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Wn.updateTime(Zr(i.updateTime)):void 0!==i.exists?Wn.exists(i.exists):Wn.none():Wn.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,u){let h=null;"setToServerValue"in u?(Ct("REQUEST_TIME"===u.setToServerValue),h=new __):"appendMissingElements"in u?h=new vf(u.appendMissingElements.values||[]):"removeAllFromArray"in u?h=new wf(u.removeAllFromArray.values||[]):"increment"in u?h=new y_(s,u.increment):st();const p=lr.fromServerFormat(u.fieldPath);return new Ow(p,h)}(n,i)):[];var i;if(e.update){const i=za(n,e.update.name),s=new ai({mapValue:{fields:e.update.fields}});if(e.updateMask){const u=new Ps((e.updateMask.fieldPaths||[]).map(_=>lr.fromServerFormat(_)));return new du(i,s,u,t,r)}return new v_(i,s,t,r)}if(e.delete){const i=za(n,e.delete);return new w_(i,t)}if(e.verify){const i=za(n,e.verify);return new KM(i,t)}return st()}function D2(n,e){return{documents:[QM(n,e.path)]}}function XM(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=QM(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=QM(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(p){if(0===p.length)return;const _=p.map(b=>function(T){if("=="===T.op){if(OL(T.value))return{unaryFilter:{field:E_(T.field),op:"IS_NAN"}};if(kL(T.value))return{unaryFilter:{field:E_(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(OL(T.value))return{unaryFilter:{field:E_(T.field),op:"IS_NOT_NAN"}};if(kL(T.value))return{unaryFilter:{field:E_(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:E_(T.field),op:yG(T.op),value:T.value}}}(b));return 1===_.length?_[0]:{compositeFilter:{op:"AND",filters:_}}}(e.filters);i&&(t.structuredQuery.where=i);const s=function(p){if(0!==p.length)return p.map(_=>{return{field:E_((b=_).field),direction:_G(b.dir)};var b})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const u=(_=e.limit,n.gt||Aw(_)?_:{value:_});var _,h,p;return null!==u&&(t.structuredQuery.limit=u),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(p=e.endAt).inclusive,values:p.position}),t}function S2(n){let e=b2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Ct(1===r);const b=t.from[0];b.allDescendants?i=b.collectionId:e=e.child(b.collectionId)}let s=[];t.where&&(s=A2(t.where));let u=[];t.orderBy&&(u=t.orderBy.map(b=>{return new p_(b_((T=b).field),function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let h=null;t.limit&&(h=function(b){let T;return T="object"==typeof b?b.value:b,Aw(T)?null:T}(t.limit));let p=null;var b;t.startAt&&(p=new Vc((b=t.startAt).values||[],!!b.before));let _=null;return t.endAt&&(_=function(b){return new Vc(b.values||[],!b.before)}(t.endAt)),WL(e,i,u,s,h,"F",p,_)}function A2(n){return n?void 0!==n.unaryFilter?[wG(n)]:void 0!==n.fieldFilter?[vG(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>A2(e)).reduce((e,t)=>e.concat(t)):st():[]}function _G(n){return uG[n]}function yG(n){return cG[n]}function E_(n){return{fieldPath:n.canonicalString()}}function b_(n){return lr.fromServerFormat(n.fieldPath)}function vG(n){return li.create(b_(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return st()}}(n.fieldFilter.op),n.fieldFilter.value)}function wG(n){switch(n.unaryFilter.op){case"IS_NAN":const e=b_(n.unaryFilter.field);return li.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=b_(n.unaryFilter.field);return li.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=b_(n.unaryFilter.field);return li.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=b_(n.unaryFilter.field);return li.create(i,"!=",{nullValue:"NULL_VALUE"});default:return st()}}function EG(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function x2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Li(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=M2(e)),e=bG(n.get(t),e);return M2(e)}function bG(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function M2(n){return n+"\x01\x01"}function Ka(n){const e=n.length;if(Ct(e>=2),2===e)return Ct("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),nn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const u=n.indexOf("\x01",s);switch((u<0||u>t)&&st(),n.charAt(u+1)){case"\x01":const h=n.substring(s,u);let p;0===i.length?p=h:(i+=h,p=i,i=""),r.push(p);break;case"\x10":i+=n.substring(s,u),i+="\0";break;case"\x11":i+=n.substring(s,u+1);break;default:st()}s=u+2}return new nn(r)}const R2=["userId","batchId"];function dD(n,e){return[n,Li(e)]}function N2(n,e,t){return[n,Li(e),t]}const CG={},IG=["prefixPath","collectionGroup","readTime","documentId"],TG=["prefixPath","collectionGroup","documentId"],DG=["collectionGroup","readTime","prefixPath","documentId"],SG=["canonicalId","targetId"],AG=["targetId","path"],xG=["path","targetId"],MG=["collectionId","parent"],RG=["indexId","uid"],NG=["uid","sequenceNumber"],PG=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],kG=["indexId","uid","orderedDocumentKey"],OG=["userId","collectionPath","documentId"],FG=["userId","collectionPath","largestBatchId"],LG=["userId","collectionGroup","largestBatchId"],P2=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],UG=[...P2,"documentOverlays"],k2=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],O2=k2,VG=[...O2,"indexConfiguration","indexState","indexEntries"];class eR extends DL{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function zr(n,e){const t=Ge(n);return aa.M(t.ie,e)}class tR{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&tG(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Fw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Fw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=p2();return this.mutations.forEach(i=>{const s=e.get(i.key),u=s.overlayedDocument;let h=this.applyToLocalView(u,s.mutatedFields);h=t.has(i.key)?null:h;const p=s2(u,h);null!==p&&r.set(i.key,p),u.isValidDocument()||u.convertToNoDocument(It.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&d_(this.mutations,e.mutations,(t,r)=>o2(t,r))&&d_(this.baseMutations,e.baseMutations,(t,r)=>o2(t,r))}}class nR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Ct(e.mutations.length===r.length);let i=sG;const s=e.mutations;for(let u=0;u<s.length;u++)i=i.insert(s[u].key,r[u].version);return new nR(e,t,r,i)}}class rR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class jc{constructor(e,t,r,i,s=It.min(),u=It.min(),h=Or.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=h}withSequenceNumber(e){return new jc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new jc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new jc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class F2{constructor(e){this.re=e}}function L2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:hD(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:$w(i=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:jw(i,s.version.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ef(e.version)};else{if(!e.isUnknownDocument())return st();r.unknownDocument={path:t.path.toArray(),version:Ef(e.version)}}var i,s;return r}function hD(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ef(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bf(n){const e=new Gn(n.seconds,n.nanoseconds);return It.fromTimestamp(e)}function Cf(n,e){const t=(e.baseMutations||[]).map(s=>JM(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const u=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(u.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const r=e.mutations.map(s=>JM(n.re,s)),i=Gn.fromMillis(e.localWriteTimeMs);return new tR(e.batchId,i,t,r)}function Gw(n){const e=bf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?bf(n.lastLimboFreeSnapshotVersion):It.min();let r;var i;return void 0!==n.query.documents?(Ct(1===(i=n.query).documents.length),r=Fi(g_(b2(i.documents[0])))):r=Fi(S2(n.query)),new jc(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Or.fromBase64String(n.resumeToken))}function U2(n,e){const t=Ef(e.snapshotVersion),r=Ef(e.lastLimboFreeSnapshotVersion);let i;i=rD(e.target)?D2(n.re,e.target):XM(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:yf(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function iR(n){const e=S2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?sD(e,e.limit,"L"):e}function sR(n,e){return new rR(e.largestBatchId,JM(n.re,e.overlayMutation))}function V2(n,e){const t=e.path.lastSegment();return[n,Li(e.path.popLast()),t]}function B2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ef(r.readTime),documentKey:Li(r.documentKey.path),largestBatchId:r.largestBatchId}}class jG{getBundleMetadata(e,t){return j2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:bf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return j2(e).put({bundleId:(r=t).id,createTime:Ef(Zr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return $2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:iR(i.bundledQuery),readTime:bf(i.readTime)};var i})}saveNamedQuery(e,t){return $2(e).put({name:(r=t).name,readTime:Ef(Zr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function j2(n){return zr(n,"bundles")}function $2(n){return zr(n,"namedQueries")}class fD{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new fD(e,t.uid||"")}getOverlay(e,t){return Ww(e).get(V2(this.userId,t)).next(r=>r?sR(this.It,r):null)}getOverlays(e,t){const r=Za();return se.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,u)=>{const h=new rR(t,u);i.push(this.ue(e,h))}),se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(u=>i.add(Li(u.getCollectionPath())));const s=[];return i.forEach(u=>{const h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,r+1],!1,!0);s.push(Ww(e).Y("collectionPathOverlayIndex",h))}),se.waitFor(s)}getOverlaysForCollection(e,t,r){const i=Za(),s=Li(t),u=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Ww(e).W("collectionPathOverlayIndex",u).next(h=>{for(const p of h){const _=sR(this.It,p);i.set(_.getKey(),_)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=Za();let u;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Ww(e).Z({index:"collectionGroupOverlayIndex",range:h},(p,_,b)=>{const T=sR(this.It,_);s.size()<i||T.largestBatchId===u?(s.set(T.getKey(),T),u=T.largestBatchId):b.done()}).next(()=>s)}ue(e,t){return Ww(e).put(function(r,i,s){const[u,h,p]=V2(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:p,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:qw(r.re,s.mutation)}}(this.It,this.userId,t))}}function Ww(n){return zr(n,"documentOverlays")}class If{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(cr(e.integerValue));else if("doubleValue"in e){const r=cr(e.doubleValue);isNaN(r)?this.le(t,13):(this.le(t,15),xw(r)?t.fe(0):t.fe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.le(t,20),"string"==typeof r?t.de(r):(t.de(`${r.seconds||""}`),t.fe(r.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(gf(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.le(t,45),t.fe(r.latitude||0),t.fe(r.longitude||0)}else"mapValue"in e?FL(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):st()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const r=e.fields||{};this.le(t,55);for(const i of Object.keys(r))this._e(i,t),this.ae(r[i],t)}pe(e,t){const r=e.values||[];this.le(t,50);for(const i of r)this.ae(i,t)}ge(e,t){this.le(t,37),qe.fromName(e).path.forEach(r=>{this.le(t,60),this.Ie(r,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function $G(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function H2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=$G(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}If.Te=new If;class HG{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ae(r.value),r=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Pe(r.value),r=t.next();this.ve()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ae(r);else if(r<2048)this.Ae(960|r>>>6),this.Ae(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r);else{const i=t.codePointAt(0);this.Ae(240|i>>>18),this.Ae(128|63&i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i)}}this.Re()}Se(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Pe(r);else if(r<2048)this.Pe(960|r>>>6),this.Pe(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r);else{const i=t.codePointAt(0);this.Pe(240|i>>>18),this.Pe(128|63&i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i)}}this.ve()}De(e){const t=this.Ce(e),r=H2(t);this.xe(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ne(e){const t=this.Ce(e),r=H2(t);this.xe(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class qG{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class GG{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Zw{constructor(){this.Be=new HG,this.Le=new qG(this.Be),this.Ue=new GG(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Tf{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Tf(this.indexId,this.documentKey,this.arrayValue,r)}}function Df(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=q2(n.arrayValue,e.arrayValue),0!==t?t:(t=q2(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function q2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class WG{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const r=t;r.dt()?this.je=r:this.Qe.push(r)}}We(e){const t=LM(e);if(void 0!==t&&!this.ze(t))return!1;const r=hf(e);let i=0,s=0;for(;i<r.length&&this.ze(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.je){const u=r[i];if(!this.He(this.je,u)||!this.Je(this.Ge[s++],u))return!1;++i}for(;i<r.length;++i){const u=r[i];if(s>=this.Ge.length||!this.Je(this.Ge[s++],u))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ZG{constructor(){this.Ye=new oR}addToCollectionParentIndex(e,t){return this.Ye.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(Ns.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(Ns.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class oR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new bn(nn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bn(nn.comparator)).toArray()}}const pD=new Uint8Array(0);class zG{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new oR,this.Ze=new Bc(r=>yf(r),(r,i)=>Pw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:r,parent:Li(i)};return G2(e).put(s)}return se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[bL(t),""],!1,!0);return G2(e).W(i).next(s=>{for(const u of s){if(u.collectionId!==t)break;r.push(Ka(u.parent))}return r})}addFieldIndex(e,t){const r=gD(e),i={indexId:(u=t).indexId,collectionGroup:u.collectionGroup,fields:u.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var u;delete i.indexId;const s=r.add(i);if(t.indexState){const u=Kw(e);return s.next(h=>{u.put(B2(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=gD(e),i=Kw(e),s=zw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=zw(e);let i=!0;const s=new Map;return se.forEach(this.tn(t),u=>this.en(e,u).next(h=>{i&&(i=!!h),s.set(u,h)})).next(()=>{if(i){let u=jt();const h=[];return se.forEach(s,(p,_)=>{var b;ke("IndexedDbIndexManager",`Using index ${b=p,`id=${b.indexId}|cg=${b.collectionGroup}|f=${b.fields.map(Ue=>`${Ue.fieldPath}:${Ue.kind}`).join(",")}`} to execute ${yf(t)}`);const T=function(Ue,Ve){const rt=LM(Ve);if(void 0===rt)return null;for(const dt of iD(Ue,rt.fieldPath))switch(dt.op){case"array-contains-any":return dt.value.arrayValue.values||[];case"array-contains":return[dt.value]}return null}(_,p),S=function(Ue,Ve){const rt=new Map;for(const dt of hf(Ve))for(const Wt of iD(Ue,dt.fieldPath))switch(Wt.op){case"==":case"in":rt.set(dt.fieldPath.canonicalString(),Wt.value);break;case"not-in":case"!=":return rt.set(dt.fieldPath.canonicalString(),Wt.value),Array.from(rt.values())}return null}(_,p),N=function(Ue,Ve){const rt=[];let dt=!0;for(const Wt of hf(Ve)){const yr=0===Wt.kind?jL(Ue,Wt.fieldPath,Ue.startAt):$L(Ue,Wt.fieldPath,Ue.startAt);rt.push(yr.value),dt&&(dt=yr.inclusive)}return new Vc(rt,dt)}(_,p),O=function(Ue,Ve){const rt=[];let dt=!0;for(const Wt of hf(Ve)){const yr=0===Wt.kind?$L(Ue,Wt.fieldPath,Ue.endAt):jL(Ue,Wt.fieldPath,Ue.endAt);rt.push(yr.value),dt&&(dt=yr.inclusive)}return new Vc(rt,dt)}(_,p),W=this.nn(p,_,N),J=this.nn(p,_,O),Me=this.sn(p,_,S),Be=this.rn(p.indexId,T,W,N.inclusive,J,O.inclusive,Me);return se.forEach(Be,Ue=>r.J(Ue,t.limit).next(Ve=>{Ve.forEach(rt=>{const dt=qe.fromSegments(rt.documentKey);u.has(dt)||(u=u.add(dt),h.push(dt))})}))}).next(()=>h)}return se.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,r,i,s,u,h){const p=(null!=t?t.length:1)*Math.max(r.length,s.length),_=p/(null!=t?t.length:1),b=[];for(let T=0;T<p;++T){const S=t?this.on(t[T/_]):pD,N=this.un(e,S,r[T%_],i),O=this.cn(e,S,s[T%_],u),W=h.map(J=>this.un(e,S,J,!0));b.push(...this.createRange(N,O,W))}return b}un(e,t,r,i){const s=new Tf(e,qe.empty(),t,r);return i?s:s.Ke()}cn(e,t,r,i){const s=new Tf(e,qe.empty(),t,r);return i?s.Ke():s}en(e,t){const r=new WG(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let u=null;for(const h of s)r.We(h)&&(!u||h.fields.length>u.fields.length)&&(u=h);return u})}getIndexType(e,t){let r=2;return se.forEach(this.tn(t),i=>this.en(e,i).next(s=>{s?0!==r&&s.fields.length<function(u){let h=new bn(lr.comparator),p=!1;for(const _ of u.filters){const b=_;b.field.isKeyField()||("array-contains"===b.op||"array-contains-any"===b.op?p=!0:h=h.add(b.field))}for(const _ of u.orderBy)_.field.isKeyField()||(h=h.add(_.field));return h.size+(p?1:0)}(i)&&(r=1):r=0})).next(()=>r)}an(e,t){const r=new Zw;for(const i of hf(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const u=r.qe(i.kind);If.Te.ce(s,u)}return r.$e()}on(e){const t=new Zw;return If.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const r=new Zw;return If.Te.ce(_f(this.databaseId,t),r.qe(function(i){const s=hf(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.$e()}sn(e,t,r){if(null===r)return[];let i=[];i.push(new Zw);let s=0;for(const u of hf(e)){const h=r[s++];for(const p of i)if(this.ln(t,u.fieldPath)&&Rw(h))i=this.fn(i,u,h);else{const _=p.qe(u.kind);If.Te.ce(h,_)}}return this.dn(i)}nn(e,t,r){return this.sn(e,t,r.position)}dn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].$e();return t}fn(e,t,r){const i=[...e],s=[];for(const u of r.arrayValue.values||[])for(const h of i){const p=new Zw;p.seed(h.$e()),If.Te.ce(u,p.qe(t.kind)),s.push(p)}return s}ln(e,t){return!!e.filters.find(r=>r instanceof li&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=gD(e),i=Kw(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(s=>{const u=[];return se.forEach(s,h=>i.get([h.indexId,this.uid]).next(p=>{u.push(function(_,b){const T=b?new Tw(b.sequenceNumber,new Ns(bf(b.readTime),new qe(Ka(b.documentKey)),b.largestBatchId)):Tw.empty(),S=_.fields.map(([N,O])=>new JT(lr.fromServerFormat(N),O));return new QT(_.indexId,_.collectionGroup,S,T)}(h,p))})).next(()=>u)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:kt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=gD(e),s=Kw(e);return this._n(e).next(u=>i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>se.forEach(h,p=>s.put(B2(p.indexId,this.user,u,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(i,s)=>{const u=r.get(i.collectionGroup);return(u?se.resolve(u):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),se.forEach(h,p=>this.wn(e,i,p).next(_=>{const b=this.mn(s,p);return _.isEqual(b)?se.resolve():this.gn(e,s,p,_,b)}))))})}yn(e,t,r,i){return zw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.hn(r,t.key),documentKey:t.key.path.toArray()})}pn(e,t,r,i){return zw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.hn(r,t.key),t.key.path.toArray()])}wn(e,t,r){const i=zw(e);let s=new bn(Df);return i.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.hn(r,t)])},(u,h)=>{s=s.add(new Tf(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}mn(e,t){let r=new bn(Df);const i=this.an(t,e);if(null==i)return r;const s=LM(t);if(null!=s){const u=e.data.field(s.fieldPath);if(Rw(u))for(const h of u.arrayValue.values||[])r=r.add(new Tf(t.indexId,e.key,this.on(h),i))}else r=r.add(new Tf(t.indexId,e.key,pD,i));return r}gn(e,t,r,i,s){ke("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const u=[];return function(h,p,_,b,T){const S=h.getIterator(),N=p.getIterator();let O=h_(S),W=h_(N);for(;O||W;){let J=!1,Me=!1;if(O&&W){const Be=_(O,W);Be<0?Me=!0:Be>0&&(J=!0)}else null!=O?Me=!0:J=!0;J?(b(W),W=h_(N)):Me?(T(O),O=h_(S)):(O=h_(S),W=h_(N))}}(i,s,Df,h=>{u.push(this.yn(e,t,r,h))},h=>{u.push(this.pn(e,t,r,h))}),se.waitFor(u)}_n(e){let t=1;return Kw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((u,h)=>Df(u,h)).filter((u,h,p)=>!h||0!==Df(u,p[h-1]));const i=[];i.push(e);for(const u of r){const h=Df(u,e),p=Df(u,t);if(0===h)i[0]=e.Ke();else if(h>0&&p<0)i.push(u),i.push(u.Ke());else if(p>0)break}i.push(t);const s=[];for(let u=0;u<i.length;u+=2)s.push(IDBKeyRange.bound([i[u].indexId,this.uid,i[u].arrayValue,i[u].directionalValue,pD,[]],[i[u+1].indexId,this.uid,i[u+1].arrayValue,i[u+1].directionalValue,pD,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(W2)}getMinOffset(e,t){return se.mapArray(this.tn(t),r=>this.en(e,r).next(i=>i||st())).next(W2)}}function G2(n){return zr(n,"collectionParents")}function zw(n){return zr(n,"indexEntries")}function gD(n){return zr(n,"indexConfiguration")}function Kw(n){return zr(n,"indexState")}function W2(n){Ct(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;UM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Ns(e.readTime,e.documentKey,t)}const Z2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class cs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new cs(e,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function z2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],u=IDBKeyRange.only(t.batchId);let h=0;const p=r.Z({range:u},(b,T,S)=>(h++,S.delete()));s.push(p.next(()=>{Ct(1===h)}));const _=[];for(const b of t.mutations){const T=N2(e,b.key.path,t.batchId);s.push(i.delete(T)),_.push(b.key)}return se.waitFor(s).next(()=>_)}function mD(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw st();e=n.noDocument}return JSON.stringify(e).length}cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs(41943040,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);class _D{constructor(e,t,r,i){this.userId=e,this.It=t,this.indexManager=r,this.referenceDelegate=i,this.In={}}static oe(e,t,r,i){Ct(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new _D(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return $c(e).Z({index:"userMutationsIndex",range:r},(i,s,u)=>{t=!1,u.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=C_(e),u=$c(e);return u.add({}).next(h=>{Ct("number"==typeof h);const p=new tR(h,t,r,i),_=function(S,N,O){const W=O.baseMutations.map(Me=>qw(S.re,Me)),J=O.mutations.map(Me=>qw(S.re,Me));return{userId:N,batchId:O.batchId,localWriteTimeMs:O.localWriteTime.toMillis(),baseMutations:W,mutations:J}}(this.It,this.userId,p),b=[];let T=new bn((S,N)=>kt(S.canonicalString(),N.canonicalString()));for(const S of i){const N=N2(this.userId,S.key.path,h);T=T.add(S.key.path.popLast()),b.push(u.put(_)),b.push(s.put(N,CG))}return T.forEach(S=>{b.push(this.indexManager.addToCollectionParentIndex(e,S))}),e.addOnCommittedListener(()=>{this.In[h]=p.keys()}),se.waitFor(b).next(()=>p)})}lookupMutationBatch(e,t){return $c(e).get(t).next(r=>r?(Ct(r.userId===this.userId),Cf(this.It,r)):null)}Tn(e,t){return this.In[t]?se.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.In[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return $c(e).Z({index:"userMutationsIndex",range:i},(u,h,p)=>{h.userId===this.userId&&(Ct(h.batchId>=r),s=Cf(this.It,h)),p.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return $c(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(i,s,u)=>{r=s.batchId,u.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return $c(e).W("userMutationsIndex",t).next(r=>r.map(i=>Cf(this.It,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=dD(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return C_(e).Z({range:i},(u,h,p)=>{const[_,b,T]=u,S=Ka(b);if(_===this.userId&&t.path.isEqual(S))return $c(e).get(T).next(N=>{if(!N)throw st();Ct(N.userId===this.userId),s.push(Cf(this.It,N))});p.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(kt);const i=[];return t.forEach(s=>{const u=dD(this.userId,s.path),h=IDBKeyRange.lowerBound(u),p=C_(e).Z({range:h},(_,b,T)=>{const[S,N,O]=_,W=Ka(N);S===this.userId&&s.path.isEqual(W)?r=r.add(O):T.done()});i.push(p)}),se.waitFor(i).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=dD(this.userId,r),u=IDBKeyRange.lowerBound(s);let h=new bn(kt);return C_(e).Z({range:u},(p,_,b)=>{const[T,S,N]=p,O=Ka(S);T===this.userId&&r.isPrefixOf(O)?O.length===i&&(h=h.add(N)):b.done()}).next(()=>this.En(e,h))}En(e,t){const r=[],i=[];return t.forEach(s=>{i.push($c(e).get(s).next(u=>{if(null===u)throw st();Ct(u.userId===this.userId),r.push(Cf(this.It,u))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return z2(e.ie,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return C_(e).Z({range:r},(s,u,h)=>{if(s[0]===this.userId){const p=Ka(s[1]);i.push(p)}else h.done()}).next(()=>{Ct(0===i.length)})})}containsKey(e,t){return K2(e,this.userId,t)}Rn(e){return Y2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function K2(n,e,t){const r=dD(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let u=!1;return C_(n).Z({range:s,X:!0},(h,p,_)=>{const[b,T,S]=h;b===e&&T===i&&(u=!0),_.done()}).next(()=>u)}function $c(n){return zr(n,"mutations")}function C_(n){return zr(n,"documentMutations")}function Y2(n){return zr(n,"mutationQueues")}class Sf{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Sf(0)}static vn(){return new Sf(-1)}}class KG{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Sf(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>It.fromTimestamp(new Gn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Sn(e,i)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>I_(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(Ct(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return I_(e).Z((u,h)=>{const p=Gw(h);p.sequenceNumber<=t&&null===r.get(p.targetId)&&(i++,s.push(this.removeTargetData(e,p)))}).next(()=>se.waitFor(s)).next(()=>i)}forEachTarget(e,t){return I_(e).Z((r,i)=>{const s=Gw(i);t(s)})}Vn(e){return Q2(e).get("targetGlobalKey").next(t=>(Ct(null!==t),t))}Sn(e,t){return Q2(e).put("targetGlobalKey",t)}Dn(e,t){return I_(e).put(U2(this.It,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=yf(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return I_(e).Z({range:i,index:"queryTargetsIndex"},(u,h,p)=>{const _=Gw(h);Pw(t,_.target)&&(s=_,p.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=Hc(e);return t.forEach(u=>{const h=Li(u.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,u))}),se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Hc(e);return se.forEach(t,s=>{const u=Li(s.path);return se.waitFor([i.delete([r,u]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=Hc(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Hc(e);let s=jt();return i.Z({range:r,X:!0},(u,h,p)=>{const _=Ka(u[1]),b=new qe(_);s=s.add(b)}).next(()=>s)}containsKey(e,t){const r=Li(t.path),i=IDBKeyRange.bound([r],[bL(r)],!1,!0);let s=0;return Hc(e).Z({index:"documentTargetsIndex",X:!0,range:i},([u,h],p,_)=>{0!==u&&(s++,_.done())}).next(()=>s>0)}se(e,t){return I_(e).get(t).next(r=>r?Gw(r):null)}}function I_(n){return zr(n,"targets")}function Q2(n){return zr(n,"targetGlobal")}function Hc(n){return zr(n,"targetDocuments")}function J2([n,e],[t,r]){const i=kt(n,t);return 0===i?kt(e,r):i}class YG{constructor(e){this.xn=e,this.buffer=new bn(J2),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();J2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class QG{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;ke("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,z.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){kc(r)?ke("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Pc(r)}yield t.Fn(3e5)}))}}class JG{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(ls.at);const r=new YG(t);return this.$n.forEachTarget(e,i=>r.On(i.sequenceNumber)).next(()=>this.$n.Ln(e,i=>r.On(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(Z2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ke("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z2):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let r,i,s,u,h,p,_;const b=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(ke("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),i=this.params.maximumSequenceNumbersToCollect):i=T,u=Date.now(),this.nthSequenceNumber(e,i))).next(T=>(r=T,h=Date.now(),this.removeTargets(e,r,t))).next(T=>(s=T,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(T=>(_=Date.now(),OM()<=jr.in.DEBUG&&ke("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${u-b}ms\n\tDetermined least recently used ${i} in `+(h-u)+`ms\n\tRemoved ${s} targets in `+(p-h)+`ms\n\tRemoved ${T} documents in `+(_-p)+`ms\nTotal Duration: ${_-b}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:T})))}}class XG{constructor(e,t){this.db=e,this.garbageCollector=new JG(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}qn(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,i)=>t(i))}addReference(e,t,r){return yD(e,r)}removeReference(e,t,r){return yD(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return yD(e,t)}Gn(e,t){return function(r,i){let s=!1;return Y2(r).tt(u=>K2(r,u,i).next(h=>(h&&(s=!0),se.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Kn(e,(u,h)=>{if(h<=t){const p=this.Gn(e,u).next(_=>{if(!_)return s++,r.getEntry(e,u).next(()=>(r.removeEntry(u,It.min()),Hc(e).delete([0,Li(u.path)])))});i.push(p)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return yD(e,t)}Kn(e,t){const r=Hc(e);let i,s=ls.at;return r.Z({index:"documentTargetsIndex"},([u,h],{path:p,sequenceNumber:_})=>{0===u?(s!==ls.at&&t(new qe(Ka(i)),s),s=_,i=p):s=ls.at}).next(()=>{s!==ls.at&&t(new qe(Ka(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function yD(n,e){return Hc(n).put((r=n.currentSequenceNumber,{targetId:0,path:Li(e.path),sequenceNumber:r}));var r}class X2{constructor(){this.changes=new Bc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Pn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class eW{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Af(e).put(r)}removeEntry(e,t,r){return Af(e).delete(function(i,s){const u=i.path.toArray();return[u.slice(0,u.length-2),u[u.length-2],hD(s),u[u.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Pn.newInvalidDocument(t);return Af(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Yw(t))},(i,s)=>{r=this.jn(t,s)}).next(()=>r)}Wn(e,t){let r={size:0,document:Pn.newInvalidDocument(t)};return Af(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Yw(t))},(i,s)=>{r={document:this.jn(t,s),size:mD(s)}}).next(()=>r)}getEntries(e,t){let r=us();return this.zn(e,t,(i,s)=>{const u=this.jn(i,s);r=r.insert(i,u)}).next(()=>r)}Hn(e,t){let r=us(),i=new ur(qe.comparator);return this.zn(e,t,(s,u)=>{const h=this.jn(s,u);r=r.insert(s,h),i=i.insert(s,mD(u))}).next(()=>({documents:r,Jn:i}))}zn(e,t,r){if(t.isEmpty())return se.resolve();let i=new bn(rU);t.forEach(p=>i=i.add(p));const s=IDBKeyRange.bound(Yw(i.first()),Yw(i.last())),u=i.getIterator();let h=u.getNext();return Af(e).Z({index:"documentKeyIndex",range:s},(p,_,b)=>{const T=qe.fromSegments([..._.prefixPath,_.collectionGroup,_.documentId]);for(;h&&rU(h,T)<0;)r(h,null),h=u.getNext();h&&h.isEqual(T)&&(r(h,_),h=u.hasNext()?u.getNext():null),h?b.j(Yw(h)):b.done()}).next(()=>{for(;h;)r(h,null),h=u.hasNext()?u.getNext():null})}getAllFromCollection(e,t,r){const i=[t.popLast().toArray(),t.lastSegment(),hD(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Af(e).W(IDBKeyRange.bound(i,s,!0)).next(u=>{let h=us();for(const p of u){const _=this.jn(qe.fromSegments(p.prefixPath.concat(p.collectionGroup,p.documentId)),p);h=h.insert(_.key,_)}return h})}getAllFromCollectionGroup(e,t,r,i){let s=us();const u=nU(t,r),h=nU(t,Ns.max());return Af(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(u,h,!0)},(p,_,b)=>{const T=this.jn(qe.fromSegments(_.prefixPath.concat(_.collectionGroup,_.documentId)),_);s=s.insert(T.key,T),s.size===i&&b.done()}).next(()=>s)}newChangeBuffer(e){return new tW(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return tU(e).get("remoteDocumentGlobalKey").next(t=>(Ct(!!t),t))}Qn(e,t){return tU(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function BG(n,e){let t;if(e.document)t=T2(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),i=bf(e.noDocument.readTime);t=Pn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return st();{const r=qe.fromSegments(e.unknownDocument.path),i=bf(e.unknownDocument.version);t=Pn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Gn(r[0],r[1]);return It.fromTimestamp(i)}(e.readTime)),t}(this.It,t);if(!r.isNoDocument()||!r.version.isEqual(It.min()))return r}return Pn.newInvalidDocument(e)}}function eU(n){return new eW(n)}class tW extends X2{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Bc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new bn((s,u)=>kt(s.canonicalString(),u.canonicalString()));return this.changes.forEach((s,u)=>{const h=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,h.readTime)),u.isValidDocument()){const p=L2(this.Yn.It,u);i=i.add(s.path.popLast()),r+=mD(p)-h.size,t.push(this.Yn.addEntry(e,s,p))}else if(r-=h.size,this.trackRemovals){const p=L2(this.Yn.It,u.convertToNoDocument(It.min()));t.push(this.Yn.addEntry(e,s,p))}}),i.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:i})=>(i.forEach((s,u)=>{this.Xn.set(s,{size:u,readTime:r.get(s).readTime})}),r))}}function tU(n){return zr(n,"remoteDocumentGlobal")}function Af(n){return zr(n,"remoteDocumentsV14")}function Yw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function nU(n,e){const t=e.documentKey.path.toArray();return[n,hD(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function rU(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=kt(t[s],r[s]),i)return i;return i=kt(t.length,r.length),i||(i=kt(t[t.length-2],r[r.length-2]),i||kt(t[t.length-1],r[r.length-1]))}class nW{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class iU{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.getBaseDocument(e,t,r))).next(i=>(null!==r&&Fw(r.mutation,i,Ps.empty(),Gn.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const i=Za();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let u=Lw();return s.forEach((h,p)=>{u=u.insert(h,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=Za();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((u,h)=>{t.set(u,h)})})}computeViews(e,t,r,i){let s=us();const u=Uw(),h=Uw();return t.forEach((p,_)=>{const b=r.get(_.key);i.has(_.key)&&(void 0===b||b.mutation instanceof du)?s=s.insert(_.key,_):void 0!==b&&(u.set(_.key,b.mutation.getFieldMask()),Fw(b.mutation,_,b.mutation.getFieldMask(),Gn.now()))}),this.recalculateAndSaveOverlays(e,s).next(p=>(p.forEach((_,b)=>u.set(_,b)),t.forEach((_,b)=>{var T;return h.set(_,new nW(b,null!==(T=u.get(_))&&void 0!==T?T:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Uw();let i=new ur((u,h)=>u-h),s=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const h of u)h.keys().forEach(p=>{const _=t.get(p);if(null===_)return;let b=r.get(p)||Ps.empty();b=h.applyToLocalView(_,b),r.set(p,b);const T=(i.get(h.batchId)||jt()).add(p);i=i.insert(h.batchId,T)})}).next(()=>{const u=[],h=i.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),_=p.key,b=p.value,T=p2();b.forEach(S=>{if(!s.has(S)){const N=s2(t.get(S),r.get(S));null!==N&&T.set(S,N),s=s.add(S)}}),u.push(this.documentOverlayCache.saveOverlays(e,_,T))}return se.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):WM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const u=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):se.resolve(Za());let h=-1,p=s;return u.next(_=>se.forEach(_,(b,T)=>(h<T.largestBatchId&&(h=T.largestBatchId),s.get(b)?se.resolve():this.getBaseDocument(e,b,T).next(S=>{p=p.insert(b,S)}))).next(()=>this.populateOverlays(e,_,s)).next(()=>this.computeViews(e,p,_,jt())).next(b=>({batchId:h,changes:f2(b)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let i=Lw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Lw();return this.indexManager.getCollectionParents(e,i).next(u=>se.forEach(u,h=>{const p=(_=t,b=h.child(i),new cu(b,null,_.explicitOrderBy.slice(),_.filters.slice(),_.limit,_.limitType,_.startAt,_.endAt));var _,b;return this.getDocumentsMatchingCollectionQuery(e,p,r).next(_=>{_.forEach((b,T)=>{s=s.insert(b,T)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.remoteDocumentCache.getAllFromCollection(e,t.path,r).next(s=>(i=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId))).next(s=>{s.forEach((h,p)=>{const _=p.getKey();null===i.get(_)&&(i=i.insert(_,Pn.newInvalidDocument(_)))});let u=Lw();return i.forEach((h,p)=>{const _=s.get(h);void 0!==_&&Fw(_.mutation,p,Ps.empty(),Gn.now()),zM(t,p)&&(u=u.insert(h,p))}),u})}getBaseDocument(e,t,r){return null===r||1===r.mutation.type?this.remoteDocumentCache.getEntry(e,t):se.resolve(Pn.newInvalidDocument(t))}}class rW{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return se.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:Zr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:iR(r.bundledQuery),readTime:Zr(r.readTime)}),se.resolve();var r}}class iW{constructor(){this.overlays=new ur(qe.comparator),this.es=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Za();return se.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.ue(e,t,s)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.es.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=Za(),s=t.length+1,u=new qe(t.child("")),h=this.overlays.getIteratorFrom(u);for(;h.hasNext();){const p=h.getNext().value,_=p.getKey();if(!t.isPrefixOf(_.path))break;_.path.length===s&&p.largestBatchId>r&&i.set(p.getKey(),p)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new ur((_,b)=>_-b);const u=this.overlays.getIterator();for(;u.hasNext();){const _=u.getNext().value;if(_.getKey().getCollectionGroup()===t&&_.largestBatchId>r){let b=s.get(_.largestBatchId);null===b&&(b=Za(),s=s.insert(_.largestBatchId,b)),b.set(_.getKey(),_)}}const h=Za(),p=s.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((_,b)=>h.set(_,b)),!(h.size()>=i)););return se.resolve(h)}ue(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const u=this.es.get(i.largestBatchId).delete(r.key);this.es.set(i.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new rR(t,r));let s=this.es.get(t);void 0===s&&(s=jt(),this.es.set(t,s)),this.es.set(t,s.add(r.key))}}class aR{constructor(){this.ns=new bn(Kr.ss),this.rs=new bn(Kr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Kr(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Kr(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new nn([])),r=new Kr(t,e),i=new Kr(t,e+1),s=[];return this.rs.forEachInRange([r,i],u=>{this.cs(u),s.push(u.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new nn([])),r=new Kr(t,e),i=new Kr(t,e+1);let s=jt();return this.rs.forEachInRange([r,i],u=>{s=s.add(u.key)}),s}containsKey(e){const t=new Kr(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Kr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||kt(e._s,t._s)}static os(e,t){return kt(e._s,t._s)||qe.comparator(e.key,t.key)}}class sW{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new bn(Kr.ss)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.ws;this.ws++;const u=new tR(s,t,r,i);this.mutationQueue.push(u);for(const h of i)this.gs=this.gs.add(new Kr(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return se.resolve(u)}lookupMutationBatch(e,t){return se.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.ps(t+1),s=i<0?0:i;return se.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kr(t,0),i=new Kr(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([r,i],u=>{const h=this.ys(u._s);s.push(h)}),se.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bn(kt);return t.forEach(i=>{const s=new Kr(i,0),u=new Kr(i,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,u],h=>{r=r.add(h._s)})}),se.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;qe.isDocumentKey(s)||(s=s.child(""));const u=new Kr(new qe(s),0);let h=new bn(kt);return this.gs.forEachWhile(p=>{const _=p.key.path;return!!r.isPrefixOf(_)&&(_.length===i&&(h=h.add(p._s)),!0)},u),se.resolve(this.Is(h))}Is(e){const t=[];return e.forEach(r=>{const i=this.ys(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Ct(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return se.forEach(t.mutations,i=>{const s=new Kr(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Kr(t,0),i=this.gs.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return se.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class oW{constructor(e){this.Es=e,this.docs=new ur(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,u=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():Pn.newInvalidDocument(t))}getEntries(e,t){let r=us();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Pn.newInvalidDocument(i))}),se.resolve(r)}getAllFromCollection(e,t,r){let i=us();const s=new qe(t.child("")),u=this.docs.getIteratorFrom(s);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||UM(IL(p),r)<=0||(i=i.insert(p.key,p.mutableCopy()))}return se.resolve(i)}getAllFromCollectionGroup(e,t,r,i){st()}As(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new aW(this)}getSize(e){return se.resolve(this.size)}}class aW extends X2{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Yn.addEntry(e,i)):this.Yn.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class lW{constructor(e){this.persistence=e,this.Rs=new Bc(t=>yf(t),Pw),this.lastRemoteSnapshotVersion=It.min(),this.highestTargetId=0,this.bs=0,this.Ps=new aR,this.targetCount=0,this.vs=Sf.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,i)=>t(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),se.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Sf(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Dn(t),se.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.Rs.forEach((u,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.Rs.delete(u),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),se.waitFor(s).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(u=>{s.push(i.markPotentiallyOrphaned(e,u))}),se.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.Ps.containsKey(t))}}class sU{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ls(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new lW(this),this.indexManager=new ZG,this.remoteDocumentCache=new oW(r=>this.referenceDelegate.xs(r)),this.It=new F2(t),this.Ns=new rW(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new iW,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new sW(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("MemoryPersistence","Starting transaction:",e);const i=new uW(this.Ss.next());return this.referenceDelegate.ks(),r(i).next(s=>this.referenceDelegate.Os(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ms(e,t){return se.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class uW extends DL{constructor(e){super(),this.currentSequenceNumber=e}}class vD{constructor(e){this.persistence=e,this.Fs=new aR,this.$s=null}static Bs(e){return new vD(e)}get Ls(){if(this.$s)return this.$s;throw st()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),se.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(i=>this.Ls.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ls.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ls,r=>{const i=qe.fromPath(r);return this.Us(e,i).next(s=>{s||t.removeEntry(i,It.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return se.or([()=>se.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class cW{constructor(e){this.It=e}$(e,t,r,i){const s=new XT("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R2,{unique:!0}),h.createObjectStore("documentMutations"),oU(e),function(h){h.createObjectStore("remoteDocuments")}(e));let u=se.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),oU(e)),u=u.next(()=>function(h){const p=h.store("targetGlobal"),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:It.min().toTimestamp(),targetCount:0};return p.put("targetGlobalKey",_)}(s))),r<4&&i>=4&&(0!==r&&(u=u.next(()=>function(h,p){return p.store("mutations").W().next(_=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",R2,{unique:!0});const b=p.store("mutations"),T=_.map(S=>b.put(S));return se.waitFor(T)})}(e,s))),u=u.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(u=u.next(()=>this.qs(s))),r<6&&i>=6&&(u=u.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),r<7&&i>=7&&(u=u.next(()=>this.Gs(s))),r<8&&i>=8&&(u=u.next(()=>this.Qs(e,s))),r<9&&i>=9&&(u=u.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(u=u.next(()=>this.js(s))),r<11&&i>=11&&(u=u.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(u=u.next(()=>{!function(h){const p=h.createObjectStore("documentOverlays",{keyPath:OG});p.createIndex("collectionPathOverlayIndex",FG,{unique:!1}),p.createIndex("collectionGroupOverlayIndex",LG,{unique:!1})}(e)})),r<13&&i>=13&&(u=u.next(()=>function(h){const p=h.createObjectStore("remoteDocumentsV14",{keyPath:IG});p.createIndex("documentKeyIndex",TG),p.createIndex("collectionGroupIndex",DG)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(u=u.next(()=>this.zs(e,s))),r<15&&i>=15&&(u=u.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:RG}).createIndex("sequenceNumberIndex",NG,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:PG}).createIndex("documentKeyIndex",kG,{unique:!1})}(e))),u}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,i)=>{t+=mD(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}qs(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(i=>se.forEach(i,s=>{const u=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",u).next(h=>se.forEach(h,p=>{Ct(p.userId===s.userId);const _=Cf(this.It,p);return z2(e,s.userId,_).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.Z((u,h)=>{const p=new nn(u),_=[0,Li(p)];s.push(t.get(_).next(b=>b?se.resolve():t.put({targetId:0,path:Li(p),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>se.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:MG});const r=t.store("collectionParents"),i=new oR,s=u=>{if(i.add(u)){const h=u.lastSegment(),p=u.popLast();return r.put({collectionId:h,parent:Li(p)})}};return t.store("remoteDocuments").Z({X:!0},(u,h)=>{const p=new nn(u);return s(p.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([u,h,p],_)=>{const b=Ka(h);return s(b.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,i)=>{const s=Gw(i),u=U2(this.It,s);return t.put(u)})}Ws(e,t){const r=t.store("remoteDocuments"),i=[];return r.Z((s,u)=>{const h=t.store("remoteDocumentsV14"),p=(_=u,_.document?new qe(nn.fromString(_.document.name).popFirst(5)):_.noDocument?qe.fromSegments(_.noDocument.path):_.unknownDocument?qe.fromSegments(_.unknownDocument.path):st()).path.toArray();var _;const b={prefixPath:p.slice(0,p.length-2),collectionGroup:p[p.length-2],documentId:p[p.length-1],readTime:u.readTime||[0,0],unknownDocument:u.unknownDocument,noDocument:u.noDocument,document:u.document,hasCommittedMutations:!!u.hasCommittedMutations};i.push(h.put(b))}).next(()=>se.waitFor(i))}zs(e,t){const r=t.store("mutations"),i=eU(this.It),s=new sU(vD.Bs,this.It.re);return r.W().next(u=>{const h=new Map;return u.forEach(p=>{var _;let b=null!==(_=h.get(p.userId))&&void 0!==_?_:jt();Cf(this.It,p).keys().forEach(T=>b=b.add(T)),h.set(p.userId,b)}),se.forEach(h,(p,_)=>{const b=new Wr(_),T=fD.oe(this.It,b),S=s.getIndexManager(b),N=_D.oe(b,this.It,S,s.referenceDelegate);return new iU(i,N,T,S).recalculateAndSaveOverlaysForDocumentKeys(new eR(t,ls.at),p).next()})})}}function oU(n){n.createObjectStore("targetDocuments",{keyPath:AG}).createIndex("documentTargetsIndex",xG,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",SG,{unique:!0}),n.createObjectStore("targetGlobal")}const lR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class uR{constructor(e,t,r,i,s,u,h,p,_,b,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=s,this.window=u,this.document=h,this.Js=_,this.Ys=b,this.Xs=T,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=S=>Promise.resolve(),!uR.C())throw new De(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new XG(this,i),this.ii=t+"main",this.It=new F2(p),this.ri=new aa(this.ii,this.Xs,new cW(this.It)),this.Cs=new KG(this.referenceDelegate,this.It),this.remoteDocumentCache=eU(this.It),this.Ns=new jG,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===b&&mr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new De(ue.FAILED_PRECONDITION,lR);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ls(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,z.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,z.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,z.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wD(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(kc(e))return ke("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ke("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Qw(e).get("owner").next(t=>se.resolve(this.mi(t)))}gi(e){return wD(e).delete(this.clientId)}yi(){var e=this;return(0,z.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=zr(r,"clientMetadata");return i.W().next(s=>{const u=e.Ii(s,18e5),h=s.filter(p=>-1===u.indexOf(p));return se.forEach(h,p=>i.delete(p.clientId)).next(()=>h)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?se.resolve(!0):Qw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new De(ue.FAILED_PRECONDITION,lR);return!1}}return!(!this.networkEnabled||!this.inForeground)||wD(e).W().next(r=>void 0===this.Ii(r,5e3).find(i=>{if(this.clientId!==i.clientId){const u=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||u&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&ke("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,z.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new eR(t,ls.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>wD(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return _D.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new zG(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return fD.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){ke("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(u=this.Xs)?VG:14===u?O2:13===u?k2:12===u?UG:11===u?P2:void st();var u;let h;return this.ri.runTransaction(e,i,s,p=>(h=new eR(p,this.Ss?this.Ss.next():ls.at),"readwrite-primary"===t?this.fi(h).next(_=>!!_||this.di(h)).next(_=>{if(!_)throw mr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new De(ue.FAILED_PRECONDITION,TL);return r(h)}).next(_=>this.wi(h).next(()=>_)):this.Vi(h).next(()=>r(h)))).then(p=>(h.raiseOnCommittedEvent(),p))}Vi(e){return Qw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new De(ue.FAILED_PRECONDITION,lR)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qw(e).put("owner",t)}static C(){return aa.C()}_i(e){const t=Qw(e);return t.get("owner").next(r=>this.mi(r)?(ke("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(mr(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,R.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return ke("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){mr("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Qw(n){return zr(n,"owner")}function wD(n){return zr(n,"clientMetadata")}function cR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class dR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=i}static Ci(e,t){let r=jt(),i=jt();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new dR(e,t.fromCache,r,i)}}class aU{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.ki(e,t).next(s=>s||this.Oi(e,t,i,r)).next(s=>s||this.Mi(e,t))}ki(e,t){if(ZL(t))return se.resolve(null);let r=Fi(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=sD(t,null,"F"),r=Fi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const u=jt(...s);return this.Ni.getDocuments(e,u).next(h=>this.indexManager.getMinOffset(e,r).next(p=>{const _=this.Fi(t,h);return this.$i(t,_,u,p.readTime)?this.ki(e,sD(t,null,"F")):this.Bi(e,_,t,p)}))})))}Oi(e,t,r,i){return ZL(t)||i.isEqual(It.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(s=>{const u=this.Fi(t,s);return this.$i(t,u,r,i)?this.Mi(e,t):(OM()<=jr.in.DEBUG&&ke("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ZM(t)),this.Bi(e,u,t,CL(i,-1)))})}Fi(e,t){let r=new bn(YL(e));return t.forEach((i,s)=>{zM(e,s)&&(r=r.add(s))}),r}$i(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Mi(e,t){return OM()<=jr.in.DEBUG&&ke("QueryEngine","Using full collection scan to execute query:",ZM(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ns.min())}Bi(e,t,r,i){return this.Ni.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(u=>{s=s.insert(u.key,u)}),s))}}class dW{constructor(e,t,r,i){this.persistence=e,this.Li=t,this.It=i,this.Ui=new ur(kt),this.qi=new Bc(s=>yf(s),Pw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iU(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function lU(n,e,t,r){return new dW(n,e,t,r)}function uU(n,e){return hR.apply(this,arguments)}function hR(){return hR=(0,z.Z)(function*(n,e){const t=Ge(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const u=[],h=[];let p=jt();for(const _ of i){u.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}for(const _ of s){h.push(_.batchId);for(const b of _.mutations)p=p.add(b.key)}return t.localDocuments.getDocuments(r,p).next(_=>({ji:_,removedBatchIds:u,addedBatchIds:h}))})})}),hR.apply(this,arguments)}function hW(n,e){const t=Ge(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(u,h,p,_){const b=p.batch,T=b.keys();let S=se.resolve();return T.forEach(N=>{S=S.next(()=>_.getEntry(h,N)).next(O=>{const W=p.docVersions.get(N);Ct(null!==W),O.version.compareTo(W)<0&&(b.applyToRemoteDocument(O,p),O.isValidDocument()&&(O.setReadTime(p.commitVersion),_.addEntry(O)))})}),S.next(()=>u.mutationQueue.removeMutationBatch(h,b))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let h=jt();for(let p=0;p<u.mutationResults.length;++p)u.mutationResults[p].transformResults.length>0&&(h=h.add(u.batch.mutations[p].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function cU(n){const e=Ge(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function fW(n,e){const t=Ge(n),r=e.snapshotVersion;let i=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const u=t.Gi.newChangeBuffer({trackRemovals:!0});i=t.Ui;const h=[];e.targetChanges.forEach((b,T)=>{const S=i.get(T);if(!S)return;h.push(t.Cs.removeMatchingKeys(s,b.removedDocuments,T).next(()=>t.Cs.addMatchingKeys(s,b.addedDocuments,T)));let N=S.withSequenceNumber(s.currentSequenceNumber);var O,W,J;e.targetMismatches.has(T)?N=N.withResumeToken(Or.EMPTY_BYTE_STRING,It.min()).withLastLimboFreeSnapshotVersion(It.min()):b.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(b.resumeToken,r)),i=i.insert(T,N),W=N,J=b,(0===(O=S).resumeToken.approximateByteSize()||W.snapshotVersion.toMicroseconds()-O.snapshotVersion.toMicroseconds()>=3e8||J.addedDocuments.size+J.modifiedDocuments.size+J.removedDocuments.size>0)&&h.push(t.Cs.updateTargetData(s,N))});let p=us(),_=jt();if(e.documentUpdates.forEach(b=>{e.resolvedLimboDocuments.has(b)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,b))}),h.push(dU(s,u,e.documentUpdates).next(b=>{p=b.Wi,_=b.zi})),!r.isEqual(It.min())){const b=t.Cs.getLastRemoteSnapshotVersion(s).next(T=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(b)}return se.waitFor(h).next(()=>u.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,p,_)).next(()=>p)}).then(s=>(t.Ui=i,s))}function dU(n,e,t){let r=jt(),i=jt();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let u=us();return t.forEach((h,p)=>{const _=s.get(h);p.isFoundDocument()!==_.isFoundDocument()&&(i=i.add(h)),p.isNoDocument()&&p.version.isEqual(It.min())?(e.removeEntry(h,p.readTime),u=u.insert(h,p)):!_.isValidDocument()||p.version.compareTo(_.version)>0||0===p.version.compareTo(_.version)&&_.hasPendingWrites?(e.addEntry(p),u=u.insert(h,p)):ke("LocalStore","Ignoring outdated watch update for ",h,". Current version:",_.version," Watch version:",p.version)}),{Wi:u,zi:i}})}function pW(n,e){const t=Ge(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function T_(n,e){const t=Ge(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Cs.getTargetData(r,e).next(s=>s?(i=s,se.resolve(i)):t.Cs.allocateTargetId(r).next(u=>(i=new jc(e,u,0,r.currentSequenceNumber),t.Cs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ui.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(r.targetId,r),t.qi.set(e,r.targetId)),r})}function D_(n,e,t){return fR.apply(this,arguments)}function fR(){return fR=(0,z.Z)(function*(n,e,t){const r=Ge(n),i=r.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,u=>r.persistence.referenceDelegate.removeTarget(u,i)))}catch(u){if(!kc(u))throw u;ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ui=r.Ui.remove(e),r.qi.delete(i.target)}),fR.apply(this,arguments)}function ED(n,e,t){const r=Ge(n);let i=It.min(),s=jt();return r.persistence.runTransaction("Execute query","readonly",u=>function(h,p,_){const b=Ge(h),T=b.qi.get(_);return void 0!==T?se.resolve(b.Ui.get(T)):b.Cs.getTargetData(p,_)}(r,u,Fi(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(u,h.targetId).next(p=>{s=p})}).next(()=>r.Li.getDocumentsMatchingQuery(u,e,t?i:It.min(),t?s:jt())).next(h=>(pU(r,KL(e),h),{documents:h,Hi:s})))}function hU(n,e){const t=Ge(n),r=Ge(t.Cs),i=t.Ui.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.se(s,e).next(u=>u?u.target:null))}function fU(n,e){const t=Ge(n),r=t.Ki.get(e)||It.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Gi.getAllFromCollectionGroup(i,e,CL(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(pU(t,e,i),i))}function pU(n,e,t){let r=n.Ki.get(e)||It.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Ki.set(e,r)}function pR(){return pR=(0,z.Z)(function*(n,e,t,r){const i=Ge(n);let s=jt(),u=us();for(const _ of t){const b=e.Ji(_.metadata.name);_.document&&(s=s.add(b));const T=e.Yi(_);T.setReadTime(e.Xi(_.metadata.readTime)),u=u.insert(b,T)}const h=i.Gi.newChangeBuffer({trackRemovals:!0}),p=yield T_(i,(_=r,Fi(g_(nn.fromString(`__bundle__/docs/${_}`)))));var _;return i.persistence.runTransaction("Apply bundle documents","readwrite",_=>dU(_,h,u).next(b=>(h.apply(_),b)).next(b=>i.Cs.removeMatchingKeysForTargetId(_,p.targetId).next(()=>i.Cs.addMatchingKeys(_,s,p.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(_,b.Wi,b.zi)).next(()=>b.Wi)))}),pR.apply(this,arguments)}function mW(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,z.Z)(function*(n,e,t=jt()){const r=yield T_(n,Fi(iR(e.bundledQuery))),i=Ge(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const u=Zr(e.readTime);if(r.snapshotVersion.compareTo(u)>=0)return i.Ns.saveNamedQuery(s,e);const h=r.withResumeToken(Or.EMPTY_BYTE_STRING,u);return i.Ui=i.Ui.insert(h.targetId,h),i.Cs.updateTargetData(s,h).next(()=>i.Cs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Cs.addMatchingKeys(s,t,r.targetId)).next(()=>i.Ns.saveNamedQuery(s,e))})}),gR.apply(this,arguments)}function gU(n,e){return`firestore_clients_${n}_${e}`}function mU(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function mR(n,e){return`firestore_targets_${n}_${e}`}class bD{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Zi(e,t,r){const i=JSON.parse(r);let s,u="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return u&&i.error&&(u="string"==typeof i.error.message&&"string"==typeof i.error.code,u&&(s=new De(i.error.code,i.error.message))),u?new bD(e,t,i.state,s):(mr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Jw{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new De(r.error.code,r.error.message))),s?new Jw(e,r.state,i):(mr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class CD{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=uD();for(let u=0;i&&u<r.activeTargetIds.length;++u)i=NL(r.activeTargetIds[u]),s=s.add(r.activeTargetIds[u]);return i?new CD(e,s):(mr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _R{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _R(t.clientId,t.onlineState):(mr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class yR{constructor(){this.activeTargetIds=uD()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vR{constructor(e,t,r,i,s){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ur(kt),this.started=!1,this.cr=[];const u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=gU(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new yR),this.lr=new RegExp(`^firestore_clients_${u}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${u}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${u}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,z.Z)(function*(){const t=yield e.syncEngine.vi();for(const i of t){if(i===e.sr)continue;const s=e.getItem(gU(e.persistenceKey,i));if(s){const u=CD.Zi(i,s);u&&(e.ur=e.ur.insert(u.clientId,u))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const i=e.yr(r);i&&e.pr(i)}for(const i of e.cr)e.rr(i);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(mR(this.persistenceKey,e));if(r){const i=Jw.Zi(e,r);i&&(t=i.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mR(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Er(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ke("SharedClientState","READ",e,t),t}setItem(e,t){ke("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ke("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ke("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void mr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,z.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const i=t.vr(r.key);return t.Vr(i,null)}{const i=t.Sr(r.key,r.newValue);if(i)return t.Vr(i.clientId,i)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const i=t.Dr(r.key,r.newValue);if(i)return t.Cr(i)}}else if(t._r.test(r.key)){if(null!==r.newValue){const i=t.Nr(r.key,r.newValue);if(i)return t.kr(i)}}else if(r.key===t.wr){if(null!==r.newValue){const i=t.yr(r.newValue);if(i)return t.pr(i)}}else if(r.key===t.hr){const i=function(s){let u=ls.at;if(null!=s)try{const h=JSON.parse(s);Ct("number"==typeof h),u=h}catch(h){mr("SharedClientState","Failed to read sequence number from WebStorage",h)}return u}(r.newValue);i!==ls.at&&t.sequenceNumberHandler(i)}else if(r.key===t.mr){const i=t.Or(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const i=new bD(this.currentUser,e,t,r),s=mU(this.persistenceKey,this.currentUser,e);this.setItem(s,i.tr())}Er(e){const t=mU(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const i=mR(this.persistenceKey,e),s=new Jw(e,t,r);this.setItem(i,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return CD.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),i=Number(r[1]);return bD.Zi(new Wr(void 0!==r[2]?r[2]:null),i,t)}Nr(e,t){const r=this._r.exec(e),i=Number(r[1]);return Jw.Zi(i,t)}yr(e){return _R.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,z.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);ke("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),s=this.Ir(r),u=[],h=[];return s.forEach(p=>{i.has(p)||u.push(p)}),i.forEach(p=>{s.has(p)||h.push(p)}),this.syncEngine.Br(u,h).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=uD();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class _U{constructor(){this.Lr=new yR,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,r){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new yR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class _W{qr(e){}shutdown(){}}class yU{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const yW={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class vW{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class wW extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,i,s){const u=this.ho(e,t);ke("RestConnection","Sending: ",u,r);const h={};return this.lo(h,i,s),this.fo(e,u,h,r).then(p=>(ke("RestConnection","Received: ",p),p),p=>{throw df("RestConnection",`${e} failed with error: `,p,"url: ",u,"request:",r),p})}_o(e,t,r,i,s,u){return this.ao(e,t,r,i,s)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+c_,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}ho(e,t){return`${this.oo}/v1/${t}:${yW[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,i){return new Promise((s,u)=>{const h=new yq;h.setWithCredentials(!0),h.listenOnce(gq.COMPLETE,()=>{var _;try{switch(h.getLastErrorCode()){case kM.NO_ERROR:const b=h.getResponseJson();ke("Connection","XHR received:",JSON.stringify(b)),s(b);break;case kM.TIMEOUT:ke("Connection",'RPC "'+e+'" timed out'),u(new De(ue.DEADLINE_EXCEEDED,"Request time out"));break;case kM.HTTP_ERROR:const T=h.getStatus();if(ke("Connection",'RPC "'+e+'" failed with status:',T,"response text:",h.getResponseText()),T>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const N=null===(_=S)||void 0===_?void 0:_.error;if(N&&N.status&&N.message){const O=function(W){const J=W.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(J)>=0?J:ue.UNKNOWN}(N.status);u(new De(O,N.message))}else u(new De(ue.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new De(ue.UNAVAILABLE,"Connection failed."));break;default:st()}}finally{ke("Connection",'RPC "'+e+'" completed.')}});const p=JSON.stringify(i);h.send(t,"POST",p,r,15)})}wo(e,t,r){const i=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=fq(),u=pq(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new _q({})),this.lo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;const p=i.join("");ke("Connection","Creating WebChannel: "+p,h);const _=s.createWebChannel(p,h);let b=!1,T=!1;const S=new vW({Hr:O=>{T?ke("Connection","Not sending because WebChannel is closed:",O):(b||(ke("Connection","Opening WebChannel transport."),_.open(),b=!0),ke("Connection","WebChannel sending:",O),_.send(O))},Jr:()=>_.close()}),N=(O,W,J)=>{O.listen(W,Me=>{try{J(Me)}catch(Be){setTimeout(()=>{throw Be},0)}})};return N(_,YT.EventType.OPEN,()=>{T||ke("Connection","WebChannel transport opened.")}),N(_,YT.EventType.CLOSE,()=>{T||(T=!0,ke("Connection","WebChannel transport closed"),S.io())}),N(_,YT.EventType.ERROR,O=>{T||(T=!0,df("Connection","WebChannel transport errored:",O),S.io(new De(ue.UNAVAILABLE,"The operation could not be completed")))}),N(_,YT.EventType.MESSAGE,O=>{var W;if(!T){const J=O.data[0];Ct(!!J);const Me=J,Be=Me.error||(null===(W=Me[0])||void 0===W?void 0:W.error);if(Be){ke("Connection","WebChannel received error:",Be);const Ue=Be.status;let Ve=function(dt){const Wt=Ar[dt];if(void 0!==Wt)return d2(Wt)}(Ue),rt=Be.message;void 0===Ve&&(Ve=ue.INTERNAL,rt="Unknown error status: "+Ue+" with message "+Be.message),T=!0,S.io(new De(Ve,rt)),_.close()}else ke("Connection","WebChannel received:",J),S.ro(J)}}),N(u,mq.STAT_EVENT,O=>{O.stat===_L.PROXY?ke("Connection","Detected buffering proxy"):O.stat===_L.NOPROXY&&ke("Connection","Detected no buffering proxy")}),setTimeout(()=>{S.so()},0),S}}function vU(){return typeof window<"u"?window:null}function ID(){return typeof document<"u"?document:null}function Xw(n){return new dG(n,!0)}class wR{constructor(e,t,r=1e3,i=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=i,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,t-r);i>0&&ke("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class wU{constructor(e,t,r,i,s,u,h,p){this.Hs=e,this.vo=r,this.Vo=i,this.connection=s,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new wR(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,z.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,z.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,z.Z)(function*(){r.Lo(),r.Uo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(mr(t.toString()),mr("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.qo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.So===t&&this.Go(r,i)},r=>{e(()=>{const i=new De(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(i)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(i=>{r(()=>this.Qo(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,z.Z)(function*(){e.state=0,e.start()}))}Qo(e){return ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class EW extends wU{constructor(e,t,r,i,s,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,u),this.It=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function pG(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(p=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===p?1:"REMOVE"===p?2:"CURRENT"===p?3:"RESET"===p?4:st(),i=e.targetChange.targetIds||[],s=function(p,_){return p.gt?(Ct(void 0===_||"string"==typeof _),Or.fromBase64String(_||"")):(Ct(void 0===_||_ instanceof Uint8Array),Or.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,h=u&&function(p){const _=void 0===p.code?ue.UNKNOWN:d2(p.code);return new De(_,p.message||"")}(u);t=new m2(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=za(n,r.document.name),s=Zr(r.document.updateTime),u=new ai({mapValue:{fields:r.document.fields}}),h=Pn.newFoundDocument(i,s,u);t=new cD(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=za(n,r.document),s=r.readTime?Zr(r.readTime):It.min(),u=Pn.newNoDocument(i,s);t=new cD([],r.removedTargetIds||[],u.key,u)}else if("documentRemove"in e){const r=e.documentRemove,i=za(n,r.document);t=new cD([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return st();{const r=e.filter,s=new rG(r.count||0);t=new g2(r.targetId,s)}}var p;return t}(this.It,e),r=function(i){if(!("targetChange"in i))return It.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?It.min():s.readTime?Zr(s.readTime):It.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=Hw(this.It),t.addTarget=function(i,s){let u;const h=s.target;return u=rD(h)?{documents:D2(i,h)}:{query:XM(i,h)},u.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?u.resumeToken=w2(i,s.resumeToken):s.snapshotVersion.compareTo(It.min())>0&&(u.readTime=jw(i,s.snapshotVersion.toTimestamp())),u}(this.It,e);const r=function mG(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return st()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=Hw(this.It),t.removeTarget=e,this.Bo(t)}}class bW extends wU{constructor(e,t,r,i,s,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,u),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ct(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function gG(n,e){return n&&n.length>0?(Ct(void 0!==e),n.map(t=>function(r,i){let s=Zr(r.updateTime?r.updateTime:i);return s.isEqual(It.min())&&(s=Zr(i)),new eG(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Zr(e.commitTime);return this.listener.Zo(r,t)}return Ct(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Hw(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>qw(this.It,r))};this.Bo(t)}}class CW extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.It=i,this.nu=!1}su(){if(this.nu)throw new De(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.ao(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new De(ue.UNKNOWN,i.toString())})}_o(e,t,r,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,u])=>this.connection._o(e,t,r,s,u,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new De(ue.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class TW{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(mr(t),this.ou=!1):ke("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class DW{constructor(e,t,r,i,s){var u=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(h=>{r.enqueueAndForget((0,z.Z)(function*(){var p;hu(u)&&(ke("RemoteStore","Restarting streams for network reachability change."),yield(p=(0,z.Z)(function*(_){const b=Ge(_);b._u.add(4),yield S_(b),b.gu.set("Unknown"),b._u.delete(4),yield eE(b)}),function(_){return p.apply(this,arguments)})(u))}))}),this.gu=new TW(r,i)}}function eE(n){return bR.apply(this,arguments)}function bR(){return bR=(0,z.Z)(function*(n){if(hu(n))for(const e of n.wu)yield e(!0)}),bR.apply(this,arguments)}function S_(n){return CR.apply(this,arguments)}function CR(){return CR=(0,z.Z)(function*(n){for(const e of n.wu)yield e(!1)}),CR.apply(this,arguments)}function TD(n,e){const t=Ge(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),DR(t)?TR(t):x_(t).ko()&&IR(t,e))}function tE(n,e){const t=Ge(n),r=x_(t);t.du.delete(e),r.ko()&&EU(t,e),0===t.du.size&&(r.ko()?r.Fo():hu(t)&&t.gu.set("Unknown"))}function IR(n,e){n.yu.Mt(e.targetId),x_(n).zo(e)}function EU(n,e){n.yu.Mt(e),x_(n).Ho(e)}function TR(n){n.yu=new lG({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),x_(n).start(),n.gu.uu()}function DR(n){return hu(n)&&!x_(n).No()&&n.du.size>0}function hu(n){return 0===Ge(n)._u.size}function bU(n){n.yu=void 0}function SW(n){return SR.apply(this,arguments)}function SR(){return SR=(0,z.Z)(function*(n){n.du.forEach((e,t)=>{IR(n,e)})}),SR.apply(this,arguments)}function AW(n,e){return AR.apply(this,arguments)}function AR(){return AR=(0,z.Z)(function*(n,e){bU(n),DR(n)?(n.gu.hu(e),TR(n)):n.gu.set("Unknown")}),AR.apply(this,arguments)}function xW(n,e,t){return xR.apply(this,arguments)}function xR(){return xR=(0,z.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof m2&&2===e.state&&e.cause)try{yield(r=(0,z.Z)(function*(i,s){const u=s.cause;for(const h of s.targetIds)i.du.has(h)&&(yield i.remoteSyncer.rejectListen(h,u),i.du.delete(h),i.yu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield DD(n,r)}else if(e instanceof cD?n.yu.Gt(e):e instanceof g2?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(It.min()))try{const r=yield cU(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const u=i.yu.te(s);return u.targetChanges.forEach((h,p)=>{if(h.resumeToken.approximateByteSize()>0){const _=i.du.get(p);_&&i.du.set(p,_.withResumeToken(h.resumeToken,s))}}),u.targetMismatches.forEach(h=>{const p=i.du.get(h);if(!p)return;i.du.set(h,p.withResumeToken(Or.EMPTY_BYTE_STRING,p.snapshotVersion)),EU(i,h);const _=new jc(p.target,h,1,p.sequenceNumber);IR(i,_)}),i.remoteSyncer.applyRemoteEvent(u)}(n,t))}catch(r){ke("RemoteStore","Failed to raise snapshot:",r),yield DD(n,r)}var r}),xR.apply(this,arguments)}function DD(n,e,t){return MR.apply(this,arguments)}function MR(){return MR=(0,z.Z)(function*(n,e,t){if(!kc(e))throw e;n._u.add(1),yield S_(n),n.gu.set("Offline"),t||(t=()=>cU(n.localStore)),n.asyncQueue.enqueueRetryable((0,z.Z)(function*(){ke("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield eE(n)}))}),MR.apply(this,arguments)}function CU(n,e){return e().catch(t=>DD(n,t,e))}function A_(n){return RR.apply(this,arguments)}function RR(){return RR=(0,z.Z)(function*(n){const e=Ge(n),t=qc(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;MW(e);)try{const i=yield pW(e.localStore,r);if(null===i){0===e.fu.length&&t.Fo();break}r=i.batchId,RW(e,i)}catch(i){yield DD(e,i)}IU(e)&&TU(e)}),RR.apply(this,arguments)}function MW(n){return hu(n)&&n.fu.length<10}function RW(n,e){n.fu.push(e);const t=qc(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function IU(n){return hu(n)&&!qc(n).No()&&n.fu.length>0}function TU(n){qc(n).start()}function NW(n){return NR.apply(this,arguments)}function NR(){return NR=(0,z.Z)(function*(n){qc(n).eu()}),NR.apply(this,arguments)}function PW(n){return PR.apply(this,arguments)}function PR(){return PR=(0,z.Z)(function*(n){const e=qc(n);for(const t of n.fu)e.Xo(t.mutations)}),PR.apply(this,arguments)}function kW(n,e,t){return kR.apply(this,arguments)}function kR(){return kR=(0,z.Z)(function*(n,e,t){const r=n.fu.shift(),i=nR.from(r,e,t);yield CU(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield A_(n)}),kR.apply(this,arguments)}function OW(n,e){return OR.apply(this,arguments)}function OR(){return OR=(0,z.Z)(function*(n,e){var t;e&&qc(n).Yo&&(yield(t=(0,z.Z)(function*(r,i){if(c2(s=i.code)&&s!==ue.ABORTED){const u=r.fu.shift();qc(r).Mo(),yield CU(r,()=>r.remoteSyncer.rejectFailedWrite(u.batchId,i)),yield A_(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),IU(n)&&TU(n)}),OR.apply(this,arguments)}function DU(n,e){return FR.apply(this,arguments)}function FR(){return FR=(0,z.Z)(function*(n,e){const t=Ge(n);t.asyncQueue.verifyOperationInProgress(),ke("RemoteStore","RemoteStore received new credentials");const r=hu(t);t._u.add(3),yield S_(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield eE(t)}),FR.apply(this,arguments)}function LR(n,e){return UR.apply(this,arguments)}function UR(){return UR=(0,z.Z)(function*(n,e){const t=Ge(n);e?(t._u.delete(2),yield eE(t)):e||(t._u.add(2),yield S_(t),t.gu.set("Unknown"))}),UR.apply(this,arguments)}function x_(n){return n.pu||(n.pu=function(e,t,r){const i=Ge(e);return i.su(),new EW(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:SW.bind(null,n),Zr:AW.bind(null,n),Wo:xW.bind(null,n)}),n.wu.push(function(){var e=(0,z.Z)(function*(t){t?(n.pu.Mo(),DR(n)?TR(n):n.gu.set("Unknown")):(yield n.pu.stop(),bU(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function qc(n){return n.Iu||(n.Iu=function(e,t,r){const i=Ge(e);return i.su(),new bW(t,i.connection,i.authCredentials,i.appCheckCredentials,i.It,r)}(n.datastore,n.asyncQueue,{Yr:NW.bind(null,n),Zr:OW.bind(null,n),tu:PW.bind(null,n),Zo:kW.bind(null,n)}),n.wu.push(function(){var e=(0,z.Z)(function*(t){t?(n.Iu.Mo(),yield A_(n)):(yield n.Iu.stop(),n.fu.length>0&&(ke("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class VR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new kr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}static createAndSchedule(e,t,r,i,s){const u=Date.now()+r,h=new VR(e,t,u,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new De(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function M_(n,e){if(mr("AsyncQueue",`${e}: ${n}`),kc(n))return new De(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class R_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Lw(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new R_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof R_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new R_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class SU{constructor(){this.Tu=new ur(qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):st():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class N_{constructor(e,t,r,i,s,u,h,p,_){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=u,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=_}static fromInitialDocuments(e,t,r,i,s){const u=[];return t.forEach(h=>{u.push({type:0,doc:h})}),new N_(e,t,R_.emptySet(t),u,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class FW{constructor(){this.Au=void 0,this.listeners=[]}}class LW{constructor(){this.queries=new Bc(e=>zL(e),kw),this.onlineState="Unknown",this.Ru=new Set}}function BR(n,e){return jR.apply(this,arguments)}function jR(){return jR=(0,z.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new FW),i)try{s.Au=yield t.onListen(r)}catch(u){const h=M_(u,`Initialization of query '${ZM(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&qR(t)}),jR.apply(this,arguments)}function $R(n,e){return HR.apply(this,arguments)}function HR(){return HR=(0,z.Z)(function*(n,e){const t=Ge(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const u=s.listeners.indexOf(e);u>=0&&(s.listeners.splice(u,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),HR.apply(this,arguments)}function UW(n,e){const t=Ge(n);let r=!1;for(const i of e){const u=t.queries.get(i.query);if(u){for(const h of u.listeners)h.Pu(i)&&(r=!0);u.Au=i}}r&&qR(t)}function VW(n,e,t){const r=Ge(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function qR(n){n.Ru.forEach(e=>{e.next()})}class GR{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new N_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=N_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class BW{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class AU{constructor(e){this.It=e}Ji(e){return za(this.It,e)}Yi(e){return e.metadata.exists?T2(this.It,e.document,!1):Pn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Zr(e)}}class jW{constructor(e,t,r){this.Mu=e,this.localStore=t,this.It=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xU(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=nn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new AU(this.It);for(const i of e)if(i.metadata.queries){const s=r.Ji(i.metadata.name);for(const u of i.metadata.queries){const h=(t.get(u)||jt()).add(s);t.set(u,h)}}return t}complete(){var e=this;return(0,z.Z)(function*(){const t=yield function gW(n,e,t,r){return pR.apply(this,arguments)}(e.localStore,new AU(e.It),e.documents,e.Mu.id),r=e.$u(e.documents);for(const i of e.queries)yield mW(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function xU(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class MU{constructor(e){this.key=e}}class RU{constructor(e){this.key=e}}class NU{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jt(),this.mutatedKeys=jt(),this.Gu=YL(e),this.Qu=new R_(this.Gu)}get ju(){return this.Uu}Wu(e,t){const r=t?t.zu:new SU,i=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,u=i,h=!1;const p="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,_="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((b,T)=>{const S=i.get(b),N=zM(this.query,T)?T:null,O=!!S&&this.mutatedKeys.has(S.key),W=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let J=!1;S&&N?S.data.isEqual(N.data)?O!==W&&(r.track({type:3,doc:N}),J=!0):this.Hu(S,N)||(r.track({type:2,doc:N}),J=!0,(p&&this.Gu(N,p)>0||_&&this.Gu(N,_)<0)&&(h=!0)):!S&&N?(r.track({type:0,doc:N}),J=!0):S&&!N&&(r.track({type:1,doc:S}),J=!0,(p||_)&&(h=!0)),J&&(N?(u=u.add(N),s=W?s.add(b):s.delete(b)):(u=u.delete(b),s=s.delete(b)))}),null!==this.query.limit)for(;u.size>this.query.limit;){const b="F"===this.query.limitType?u.last():u.first();u=u.delete(b.key),s=s.delete(b.key),r.track({type:1,doc:b})}return{Qu:u,zu:r,$i:h,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((_,b)=>function(T,S){const N=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return st()}};return N(T)-N(S)}(_.type,b.type)||this.Gu(_.doc,b.doc)),this.Ju(r);const u=t?this.Yu():[],h=0===this.Ku.size&&this.current?1:0,p=h!==this.qu;return this.qu=h,0!==s.length||p?{snapshot:new N_(this.query,e.Qu,i,s,e.mutatedKeys,0===h,p,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:u}:{Xu:u}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new SU,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new RU(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new MU(r))}),t}tc(e){this.Uu=e.Hi,this.Ku=jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return N_.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class $W{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class HW{constructor(e){this.key=e,this.nc=!1}}class qW{constructor(e,t,r,i,s,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=u,this.sc={},this.ic=new Bc(h=>zL(h),kw),this.rc=new Map,this.oc=new Set,this.uc=new ur(qe.comparator),this.cc=new Map,this.ac=new aR,this.hc={},this.lc=new Map,this.fc=Sf.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function GW(n,e){return WR.apply(this,arguments)}function WR(){return WR=(0,z.Z)(function*(n,e){const t=gN(n);let r,i;const s=t.ic.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.ec();else{const u=yield T_(t.localStore,Fi(e));t.isPrimaryClient&&TD(t.remoteStore,u);const h=t.sharedClientState.addLocalQueryTarget(u.targetId);r=u.targetId,i=yield ZR(t,e,r,"current"===h,u.resumeToken)}return i}),WR.apply(this,arguments)}function ZR(n,e,t,r,i){return zR.apply(this,arguments)}function zR(){return zR=(0,z.Z)(function*(n,e,t,r,i){n._c=(T,S,N)=>{return(O=(0,z.Z)(function*(W,J,Me,Be){let Ue=J.view.Wu(Me);Ue.$i&&(Ue=yield ED(W.localStore,J.query,!1).then(({documents:dt})=>J.view.Wu(dt,Ue)));const Ve=Be&&Be.targetChanges.get(J.targetId),rt=J.view.applyChanges(Ue,W.isPrimaryClient,Ve);return iN(W,J.targetId,rt.Xu),rt.snapshot}),function(W,J,Me,Be){return O.apply(this,arguments)})(n,T,S,N);var O};const s=yield ED(n.localStore,e,!0),u=new NU(e,s.Hi),h=u.Wu(s.documents),p=Bw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),_=u.applyChanges(h,n.isPrimaryClient,p);iN(n,t,_.Xu);const b=new $W(e,t,u);return n.ic.set(e,b),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),_.snapshot}),zR.apply(this,arguments)}function WW(n,e){return KR.apply(this,arguments)}function KR(){return KR=(0,z.Z)(function*(n,e){const t=Ge(n),r=t.ic.get(e),i=t.rc.get(r.targetId);if(i.length>1)return t.rc.set(r.targetId,i.filter(s=>!kw(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield D_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),tE(t.remoteStore,r.targetId),P_(t,r.targetId)}).catch(Pc))):(P_(t,r.targetId),yield D_(t.localStore,r.targetId,!0))}),KR.apply(this,arguments)}function YR(){return YR=(0,z.Z)(function*(n,e,t){const r=mN(n);try{const i=yield function(s,u){const h=Ge(s),p=Gn.now(),_=u.reduce((S,N)=>S.add(N.key),jt());let b,T;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>{let N=us(),O=jt();return h.Gi.getEntries(S,_).next(W=>{N=W,N.forEach((J,Me)=>{Me.isValidDocument()||(O=O.add(J))})}).next(()=>h.localDocuments.getOverlayedDocuments(S,N)).next(W=>{b=W;const J=[];for(const Me of u){const Be=nG(Me,b.get(Me.key).overlayedDocument);null!=Be&&J.push(new du(Me.key,Be,VL(Be.value.mapValue),Wn.exists(!0)))}return h.mutationQueue.addMutationBatch(S,p,J,u)}).next(W=>{T=W;const J=W.applyToLocalDocumentSet(b,O);return h.documentOverlayCache.saveOverlays(S,W.batchId,J)})}).then(()=>({batchId:T.batchId,changes:f2(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,u,h){let p=s.hc[s.currentUser.toKey()];p||(p=new ur(kt)),p=p.insert(u,h),s.hc[s.currentUser.toKey()]=p}(r,i.batchId,t),yield fu(r,i.changes),yield A_(r.remoteStore)}catch(i){const s=M_(i,"Failed to persist write");t.reject(s)}}),YR.apply(this,arguments)}function PU(n,e){return QR.apply(this,arguments)}function QR(){return QR=(0,z.Z)(function*(n,e){const t=Ge(n);try{const r=yield fW(t.localStore,e);e.targetChanges.forEach((i,s)=>{const u=t.cc.get(s);u&&(Ct(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?u.nc=!0:i.modifiedDocuments.size>0?Ct(u.nc):i.removedDocuments.size>0&&(Ct(u.nc),u.nc=!1))}),yield fu(t,r,e)}catch(r){yield Pc(r)}}),QR.apply(this,arguments)}function kU(n,e,t){const r=Ge(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.ic.forEach((s,u)=>{const h=u.view.bu(e);h.snapshot&&i.push(h.snapshot)}),function(s,u){const h=Ge(s);h.onlineState=u;let p=!1;h.queries.forEach((_,b)=>{for(const T of b.listeners)T.bu(u)&&(p=!0)}),p&&qR(h)}(r.eventManager,e),i.length&&r.sc.Wo(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function zW(n,e,t){return JR.apply(this,arguments)}function JR(){return JR=(0,z.Z)(function*(n,e,t){const r=Ge(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.cc.get(e),s=i&&i.key;if(s){let u=new ur(qe.comparator);u=u.insert(s,Pn.newNoDocument(s,It.min()));const h=jt().add(s),p=new Vw(It.min(),new Map,new bn(kt),u,h);yield PU(r,p),r.uc=r.uc.remove(s),r.cc.delete(e),sN(r)}else yield D_(r.localStore,e,!1).then(()=>P_(r,e,t)).catch(Pc)}),JR.apply(this,arguments)}function KW(n,e){return XR.apply(this,arguments)}function XR(){return XR=(0,z.Z)(function*(n,e){const t=Ge(n),r=e.batch.batchId;try{const i=yield hW(t.localStore,e);rN(t,r,null),nN(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield fu(t,i)}catch(i){yield Pc(i)}}),XR.apply(this,arguments)}function YW(n,e,t){return eN.apply(this,arguments)}function eN(){return eN=(0,z.Z)(function*(n,e,t){const r=Ge(n);try{const i=yield function(s,u){const h=Ge(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",p=>{let _;return h.mutationQueue.lookupMutationBatch(p,u).next(b=>(Ct(null!==b),_=b.keys(),h.mutationQueue.removeMutationBatch(p,b))).next(()=>h.mutationQueue.performConsistencyCheck(p)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(p,_,u)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(p,_)).next(()=>h.localDocuments.getDocuments(p,_))})}(r.localStore,e);rN(r,e,t),nN(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield fu(r,i)}catch(i){yield Pc(i)}}),eN.apply(this,arguments)}function tN(){return tN=(0,z.Z)(function*(n,e){const t=Ge(n);hu(t.remoteStore)||ke("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const u=Ge(s);return u.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>u.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.lc.get(r)||[];i.push(e),t.lc.set(r,i)}catch(r){const i=M_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),tN.apply(this,arguments)}function nN(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function rN(n,e,t){const r=Ge(n);let i=r.hc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.hc[r.currentUser.toKey()]=i}}function P_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||OU(n,r)})}function OU(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(tE(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),sN(n))}function iN(n,e,t){for(const r of t)r instanceof MU?(n.ac.addReference(r.key,e),JW(n,r)):r instanceof RU?(ke("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||OU(n,r.key)):st()}function JW(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(ke("SyncEngine","New document in limbo: "+t),n.oc.add(r),sN(n))}function sN(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new qe(nn.fromString(e)),r=n.fc.next();n.cc.set(r,new HW(t)),n.uc=n.uc.insert(t,r),TD(n.remoteStore,new jc(Fi(g_(t.path)),r,2,ls.at))}}function fu(n,e,t){return oN.apply(this,arguments)}function oN(){return oN=(0,z.Z)(function*(n,e,t){const r=Ge(n),i=[],s=[],u=[];var h;r.ic.isEmpty()||(r.ic.forEach((h,p)=>{u.push(r._c(p,e,t).then(_=>{if((_||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(p.targetId,_?.fromCache?"not-current":"current"),_){i.push(_);const b=dR.Ci(p.targetId,_);s.push(b)}}))}),yield Promise.all(u),r.sc.Wo(i),yield(h=(0,z.Z)(function*(p,_){const b=Ge(p);try{yield b.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>se.forEach(_,S=>se.forEach(S.Si,N=>b.persistence.referenceDelegate.addReference(T,S.targetId,N)).next(()=>se.forEach(S.Di,N=>b.persistence.referenceDelegate.removeReference(T,S.targetId,N)))))}catch(T){if(!kc(T))throw T;ke("LocalStore","Failed to update sequence numbers: "+T)}for(const T of _){const S=T.targetId;if(!T.fromCache){const N=b.Ui.get(S),W=N.withLastLimboFreeSnapshotVersion(N.snapshotVersion);b.Ui=b.Ui.insert(S,W)}}}),function(p,_){return h.apply(this,arguments)})(r.localStore,s))}),oN.apply(this,arguments)}function XW(n,e){return aN.apply(this,arguments)}function aN(){return aN=(0,z.Z)(function*(n,e){const t=Ge(n);if(!t.currentUser.isEqual(e)){ke("SyncEngine","User change. New user:",e.toKey());const r=yield uU(t.localStore,e);t.currentUser=e,(i=t).lc.forEach(u=>{u.forEach(h=>{h.reject(new De(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield fu(t,r.ji)}var i}),aN.apply(this,arguments)}function eZ(n,e){const t=Ge(n),r=t.cc.get(e);if(r&&r.nc)return jt().add(r.key);{let i=jt();const s=t.rc.get(e);if(!s)return i;for(const u of s){const h=t.ic.get(u);i=i.unionWith(h.view.ju)}return i}}function tZ(n,e){return lN.apply(this,arguments)}function lN(){return lN=(0,z.Z)(function*(n,e){const t=Ge(n),r=yield ED(t.localStore,e.query,!0),i=e.view.tc(r);return t.isPrimaryClient&&iN(t,e.targetId,i.Xu),i}),lN.apply(this,arguments)}function nZ(n,e){return uN.apply(this,arguments)}function uN(){return uN=(0,z.Z)(function*(n,e){const t=Ge(n);return fU(t.localStore,e).then(r=>fu(t,r))}),uN.apply(this,arguments)}function rZ(n,e,t,r){return cN.apply(this,arguments)}function cN(){return cN=(0,z.Z)(function*(n,e,t,r){const i=Ge(n),s=yield function(u,h){const p=Ge(u),_=Ge(p.mutationQueue);return p.persistence.runTransaction("Lookup mutation documents","readonly",b=>_.Tn(b,h).next(T=>T?p.localDocuments.getDocuments(b,T):se.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield A_(i.remoteStore):"acknowledged"===t||"rejected"===t?(rN(i,e,r||null),nN(i,e),h=e,Ge(Ge(i.localStore).mutationQueue).An(h)):st(),yield fu(i,s)):ke("SyncEngine","Cannot apply mutation batch with id: "+e)}),cN.apply(this,arguments)}function dN(){return dN=(0,z.Z)(function*(n,e){const t=Ge(n);if(gN(t),mN(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield FU(t,r.toArray());t.dc=!0,yield LR(t.remoteStore,!0);for(const s of i)TD(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const r=[];let i=Promise.resolve();t.rc.forEach((s,u)=>{t.sharedClientState.isLocalQueryTarget(u)?r.push(u):i=i.then(()=>(P_(t,u),D_(t.localStore,u,!0))),tE(t.remoteStore,u)}),yield i,yield FU(t,r),function(s){const u=Ge(s);u.cc.forEach((h,p)=>{tE(u.remoteStore,p)}),u.ac.fs(),u.cc=new Map,u.uc=new ur(qe.comparator)}(t),t.dc=!1,yield LR(t.remoteStore,!1)}}),dN.apply(this,arguments)}function FU(n,e,t){return hN.apply(this,arguments)}function hN(){return hN=(0,z.Z)(function*(n,e,t){const r=Ge(n),i=[],s=[];for(const u of e){let h;const p=r.rc.get(u);if(p&&0!==p.length){h=yield T_(r.localStore,Fi(p[0]));for(const _ of p){const b=r.ic.get(_),T=yield tZ(r,b);T.snapshot&&s.push(T.snapshot)}}else{const _=yield hU(r.localStore,u);h=yield T_(r.localStore,_),yield ZR(r,LU(_),u,!1,h.resumeToken)}i.push(h)}return r.sc.Wo(s),i}),hN.apply(this,arguments)}function LU(n){return WL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function sZ(n){const e=Ge(n);return Ge(Ge(e.localStore).persistence).vi()}function oZ(n,e,t,r){return fN.apply(this,arguments)}function fN(){return fN=(0,z.Z)(function*(n,e,t,r){const i=Ge(n);if(i.dc)return void ke("SyncEngine","Ignoring unexpected query state notification.");const s=i.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const u=yield fU(i.localStore,KL(s[0])),h=Vw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Or.EMPTY_BYTE_STRING);yield fu(i,u,h);break}case"rejected":yield D_(i.localStore,e,!0),P_(i,e,r);break;default:st()}}),fN.apply(this,arguments)}function aZ(n,e,t){return pN.apply(this,arguments)}function pN(){return pN=(0,z.Z)(function*(n,e,t){const r=gN(n);if(r.dc){for(const i of e){if(r.rc.has(i)){ke("SyncEngine","Adding an already active target "+i);continue}const s=yield hU(r.localStore,i),u=yield T_(r.localStore,s);yield ZR(r,LU(s),u.targetId,!1,u.resumeToken),TD(r.remoteStore,u)}for(const i of t)r.rc.has(i)&&(yield D_(r.localStore,i,!1).then(()=>{tE(r.remoteStore,i),P_(r,i)}).catch(Pc))}}),pN.apply(this,arguments)}function gN(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PU.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=eZ.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zW.bind(null,e),e.sc.Wo=UW.bind(null,e.eventManager),e.sc.wc=VW.bind(null,e.eventManager),e}function mN(n){const e=Ge(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=KW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=YW.bind(null,e),e}class UU{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,z.Z)(function*(){t.It=Xw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return lU(this.persistence,new aU,e.initialUser,this.It)}yc(e){return new sU(vD.Bs,this.It)}gc(e){return new _U}terminate(){var e=this;return(0,z.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class VU extends UU{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield mN(r.Ac.syncEngine),yield A_(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return lU(this.persistence,new aU,e.initialUser,this.It)}Tc(e,t){return new QG(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new kq(t,this.persistence);return new Pq(e.asyncQueue,r)}yc(e){const t=cR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?cs.withCacheSize(this.cacheSizeBytes):cs.DEFAULT;return new uR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,vU(),ID(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new _U}}class uZ extends VU{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,z.Z)(function*(){yield t().call(r,e);const i=r.Ac.syncEngine;r.sharedClientState instanceof vR&&(r.sharedClientState.syncEngine={Fr:rZ.bind(null,i),$r:oZ.bind(null,i),Br:aZ.bind(null,i),vi:sZ.bind(null,i),Mr:nZ.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var s=(0,z.Z)(function*(u){yield function iZ(n,e){return dN.apply(this,arguments)}(r.Ac.syncEngine,u),r.gcScheduler&&(u&&!r.gcScheduler.started?r.gcScheduler.start():u||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(u&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():u||r.indexBackfillerScheduler.stop())});return function(u){return s.apply(this,arguments)}}())})()}gc(e){const t=vU();if(!vR.C(t))throw new De(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=cR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class _N{initialize(e,t){var r=this;return(0,z.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>kU(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=XW.bind(null,r.syncEngine),yield LR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new LW}createDatastore(e){const t=Xw(e.databaseInfo.databaseId),r=new wW(e.databaseInfo);return new CW(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>kU(this.syncEngine,h,0),u=yU.C()?new yU:new _W,new DW(t,r,i,s,u);var t,r,i,s,u}createSyncEngine(e,t){return function(r,i,s,u,h,p,_){const b=new qW(r,i,s,u,h,p);return _&&(b.dc=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,z.Z)(function*(t){const r=Ge(t);ke("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield S_(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function yN(n,e,t){if(!t)throw new De(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function BU(n,e,t,r){if(!0===e&&!0===r)throw new De(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jU(n){if(!qe.isDocumentKey(n))throw new De(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function $U(n){if(qe.isDocumentKey(n))throw new De(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function SD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":st()}function Jt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new De(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=SD(n);throw new De(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function HU(n,e){if(e<=0)throw new De(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const qU=new Map;class GU{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new De(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new De(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,BU("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new GU({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new De(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new De(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new GU(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Eq;switch(t.type){case"gapi":return new Tq(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new De(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=qU.get(e);t&&(ke("ComponentProvider","Removing Datastore"),qU.delete(e),t.terminate())}(this),Promise.resolve()}}function WU(n,e,t,r={}){var i;const s=(n=Jt(n,nE))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&df("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let u,h;if("string"==typeof r.mockUserToken)u=r.mockUserToken,h=Wr.MOCK_USER;else{u=(0,R.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new De(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Wr(p)}n._authCredentials=new bq(new vL(u,h))}}class jn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ya(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jn(this.firestore,e,this._key)}}class yi{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yi(this.firestore,e,this._query)}}class Ya extends yi{constructor(e,t,r){super(e,t,g_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jn(this.firestore,null,new qe(e))}withConverter(e){return new Ya(this.firestore,e,this._path)}}function vN(n,e,...t){if(n=(0,R.m9)(n),yN("collection","path",e),n instanceof nE){const r=nn.fromString(e,...t);return $U(r),new Ya(n,null,r)}{if(!(n instanceof jn||n instanceof Ya))throw new De(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return $U(r),new Ya(n.firestore,null,r)}}function AD(n,e,...t){if(n=(0,R.m9)(n),1===arguments.length&&(e=EL.R()),yN("doc","path",e),n instanceof nE){const r=nn.fromString(e,...t);return jU(r),new jn(n,null,new qe(r))}{if(!(n instanceof jn||n instanceof Ya))throw new De(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(nn.fromString(e,...t));return jU(r),new jn(n.firestore,n instanceof Ya?n.converter:null,new qe(r))}}function ZU(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),(n instanceof jn||n instanceof Ya)&&(e instanceof jn||e instanceof Ya)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function wN(n,e){return n=(0,R.m9)(n),e=(0,R.m9)(e),n instanceof yi&&e instanceof yi&&n.firestore===e.firestore&&kw(n._query,e._query)&&n.converter===e.converter}function zU(n,e=10240){let t=0;return{read:()=>(0,z.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,z.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class xD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):mr("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class dZ{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new kr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,z.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,z.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,z.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),i=Number(r);isNaN(i)&&e.Dc(`length string (${r}) is not valid number`);const s=yield e.Cc(i);return new BW(JSON.parse(s),t.length+i)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,z.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,z.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,z.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class pZ{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,z.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new De(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,z.Z)(function*(s,u){const h=Ge(s),p=Hw(h.It)+"/documents",_={documents:u.map(N=>$w(h.It,N))},b=yield h._o("BatchGetDocuments",p,_,u.length),T=new Map;b.forEach(N=>{const O=function fG(n,e){return"found"in e?function(t,r){Ct(!!r.found);const i=za(t,r.found.name),s=Zr(r.found.updateTime),u=new ai({mapValue:{fields:r.found.fields}});return Pn.newFoundDocument(i,s,u)}(n,e):"missing"in e?function(t,r){Ct(!!r.missing),Ct(!!r.readTime);const i=za(t,r.missing),s=Zr(r.readTime);return Pn.newNoDocument(i,s)}(n,e):st()}(h.It,N);T.set(O.key.toString(),O)});const S=[];return u.forEach(N=>{const O=T.get(N.toString());Ct(!!O),S.push(O)}),S}),function(s,u){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new w_(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,z.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=qe.fromPath(i);e.mutations.push(new KM(s,e.precondition(s)))}),yield(r=(0,z.Z)(function*(i,s){const u=Ge(i),h=Hw(u.It)+"/documents",p={writes:s.map(_=>qw(u.It,_))};yield u.ao("Commit",h,p)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw st();t=It.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new De(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(It.min())?Wn.exists(!1):Wn.updateTime(t):Wn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(It.min()))throw new De(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Wn.updateTime(t)}return Wn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class gZ{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.kc=r.maxAttempts,this.xo=new wR(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,z.Z)(function*(){const t=new pZ(e.datastore),r=e.Mc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Fc(s)}))}).catch(i=>{e.Fc(i)})}))}Mc(e){try{const t=this.updateFunction(e);return!Aw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!c2(t)}return!1}}class mZ{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Wr.UNAUTHENTICATED,this.clientId=EL.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var u=(0,z.Z)(function*(h){ke("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return u.apply(this,arguments)}}()),this.appCheckCredentials.start(r,u=>(ke("FirestoreClient","Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}getConfiguration(){var e=this;return(0,z.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new De(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new kr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=M_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function KU(n,e){return EN.apply(this,arguments)}function EN(){return EN=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ke("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,z.Z)(function*(s){r.isEqual(s)||(yield uU(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),EN.apply(this,arguments)}function YU(n,e){return bN.apply(this,arguments)}function bN(){return bN=(0,z.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield CN(n);ke("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>DU(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>DU(e.remoteStore,s)),n.onlineComponents=e}),bN.apply(this,arguments)}function CN(n){return IN.apply(this,arguments)}function IN(){return IN=(0,z.Z)(function*(n){return n.offlineComponents||(ke("FirestoreClient","Using default OfflineComponentProvider"),yield KU(n,new UU)),n.offlineComponents}),IN.apply(this,arguments)}function MD(n){return TN.apply(this,arguments)}function TN(){return TN=(0,z.Z)(function*(n){return n.onlineComponents||(ke("FirestoreClient","Using default OnlineComponentProvider"),yield YU(n,new _N)),n.onlineComponents}),TN.apply(this,arguments)}function QU(n){return CN(n).then(e=>e.persistence)}function RD(n){return CN(n).then(e=>e.localStore)}function DN(n){return MD(n).then(e=>e.remoteStore)}function SN(n){return MD(n).then(e=>e.syncEngine)}function k_(n){return AN.apply(this,arguments)}function AN(){return AN=(0,z.Z)(function*(n){const e=yield MD(n),t=e.eventManager;return t.onListen=GW.bind(null,e.syncEngine),t.onUnlisten=WW.bind(null,e.syncEngine),t}),AN.apply(this,arguments)}function XU(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(i,s,u,h,p){const _=new xD({next:T=>{s.enqueueAndForget(()=>$R(i,b));const S=T.docs.has(u);!S&&T.fromCache?p.reject(new De(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&T.fromCache&&h&&"server"===h.source?p.reject(new De(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):p.resolve(T)},error:T=>p.reject(T)}),b=new GR(g_(u.path),_,{includeMetadataChanges:!0,Nu:!0});return BR(i,b)}(yield k_(n),n.asyncQueue,e,t,r)})),r.promise}function eV(n,e,t={}){const r=new kr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function(i,s,u,h,p){const _=new xD({next:T=>{s.enqueueAndForget(()=>$R(i,b)),T.fromCache&&"server"===h.source?p.reject(new De(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):p.resolve(T)},error:T=>p.reject(T)}),b=new GR(u,_,{includeMetadataChanges:!0,Nu:!0});return BR(i,b)}(yield k_(n),n.asyncQueue,e,t,r)})),r.promise}class IZ{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new wR(this,"async_queue_retry"),this.Wc=()=>{const t=ID();t&&ke("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=ID();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=ID();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new kr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,z.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!kc(t))throw t;ke("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,mr("INTERNAL UNHANDLED ERROR: ",function(s){let u=s.message||"";return s.stack&&(u=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),u}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const i=VR.createAndSchedule(this,e,t,r,s=>this.Yc(s));return this.qc.push(i),i}zc(){this.Kc&&st()}verifyOperationInProgress(){}Xc(){var e=this;return(0,z.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function xN(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class TZ{constructor(){this._progressObserver={},this._taskCompletionResolver=new kr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class $n extends nE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new IZ,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tV(this),this._firestoreClient.terminate()}}function SZ(n,e){const t="object"==typeof n?n:(0,Pt.getApp)(),r="string"==typeof n?n:e||"(default)",i=(0,Pt._getProvider)(t,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=(0,R.P0)("firestore");s&&WU(i,...s)}return i}function _r(n){return n._firestoreClient||tV(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tV(n){var e;const t=n._freezeSettings(),r=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Lq(n._databaseId,s,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var s,h;n._firestoreClient=new mZ(n._authCredentials,n._appCheckCredentials,n._queue,r)}function nV(n,e,t){const r=new kr;return n.asyncQueue.enqueue((0,z.Z)(function*(){try{yield KU(n,t),yield YU(n,e),r.resolve()}catch(i){const s=i;if(!("FirebaseError"===(u=s).name?u.code===ue.FAILED_PRECONDITION||u.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&u instanceof DOMException)||22===u.code||20===u.code||11===u.code))throw s;df("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var u})).then(()=>r.promise)}function rV(n){if(n._initialized||n._terminated)throw new De(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Qa{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qa(Or.fromBase64String(e))}catch(t){throw new De(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Qa(Or.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class pu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new De(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xf{constructor(e){this._methodName=e}}class ND{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new De(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new De(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return kt(this._lat,e._lat)||kt(this._long,e._long)}}const FZ=/^__.*__$/;class LZ{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new du(e,this.data,this.fieldMask,t,this.fieldTransforms):new v_(e,this.data,t,this.fieldTransforms)}}class iV{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new du(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function sV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw st()}}class PD{constructor(e,t,r,i,s,u){this.settings=e,this.databaseId=t,this.It=r,this.ignoreUndefinedProperties=i,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=u||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new PD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.ua(e),i}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.ia({path:r,oa:!1});return i.na(),i}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return FD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(sV(this.sa)&&FZ.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class UZ{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=r||Xw(e)}da(e,t,r,i=!1){return new PD({sa:e,methodName:t,fa:r,path:lr.emptyPath(),oa:!1,la:i},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Mf(n){const e=n._freezeSettings(),t=Xw(n._databaseId);return new UZ(n._databaseId,!!e.ignoreUndefinedProperties,t)}function kD(n,e,t,r,i,s={}){const u=n.da(s.merge||s.mergeFields?2:0,e,t,i);PN("Data must be an object, but it was:",u,r);const h=lV(r,u);let p,_;if(s.merge)p=new Ps(u.fieldMask),_=u.fieldTransforms;else if(s.mergeFields){const b=[];for(const T of s.mergeFields){const S=kN(e,T,t);if(!u.contains(S))throw new De(ue.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);cV(b,S)||b.push(S)}p=new Ps(b),_=u.fieldTransforms.filter(T=>p.covers(T.field))}else p=null,_=u.fieldTransforms;return new LZ(new ai(h),p,_)}class rE extends xf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof rE}}function oV(n,e,t){return new PD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class MN extends xf{_toFieldTransform(e){return new Ow(e.path,new __)}isEqual(e){return e instanceof MN}}class VZ extends xf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=oV(this,e,!0),r=this._a.map(s=>Rf(s,t)),i=new vf(r);return new Ow(e.path,i)}isEqual(e){return this===e}}class BZ extends xf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=oV(this,e,!0),r=this._a.map(s=>Rf(s,t)),i=new wf(r);return new Ow(e.path,i)}isEqual(e){return this===e}}class jZ extends xf{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new y_(e.It,XL(e.It,this.wa));return new Ow(e.path,t)}isEqual(e){return this===e}}function RN(n,e,t,r){const i=n.da(1,e,t);PN("Data must be an object, but it was:",i,r);const s=[],u=ai.empty();pf(r,(p,_)=>{const b=OD(e,p,t);_=(0,R.m9)(_);const T=i.ca(b);if(_ instanceof rE)s.push(b);else{const S=Rf(_,T);null!=S&&(s.push(b),u.set(b,S))}});const h=new Ps(s);return new iV(u,h,i.fieldTransforms)}function NN(n,e,t,r,i,s){const u=n.da(1,e,t),h=[kN(e,r,t)],p=[i];if(s.length%2!=0)throw new De(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<s.length;S+=2)h.push(kN(e,s[S])),p.push(s[S+1]);const _=[],b=ai.empty();for(let S=h.length-1;S>=0;--S)if(!cV(_,h[S])){const N=h[S];let O=p[S];O=(0,R.m9)(O);const W=u.ca(N);if(O instanceof rE)_.push(N);else{const J=Rf(O,W);null!=J&&(_.push(N),b.set(N,J))}}const T=new Ps(_);return new iV(b,T,u.fieldTransforms)}function aV(n,e,t,r=!1){return Rf(t,n.da(r?4:3,e))}function Rf(n,e){if(uV(n=(0,R.m9)(n)))return PN("Unsupported field value:",e,n),lV(n,e);if(n instanceof xf)return function(t,r){if(!sV(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const u of t){let h=Rf(u,r.aa(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,R.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return XL(r.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Gn.fromDate(t);return{timestampValue:jw(r.It,i)}}if(t instanceof Gn){const i=new Gn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:jw(r.It,i)}}if(t instanceof ND)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Qa)return{bytesValue:w2(r.It,t._byteString)};if(t instanceof jn){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:YM(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${SD(t)}`)}(n,e)}function lV(n,e){const t={};return xL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pf(n,(r,i)=>{const s=Rf(i,e.ra(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function uV(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Gn||n instanceof ND||n instanceof Qa||n instanceof jn||n instanceof xf)}function PN(n,e,t){if(!uV(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=SD(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function kN(n,e,t){if((e=(0,R.m9)(e))instanceof pu)return e._internalPath;if("string"==typeof e)return OD(n,e);throw FD("Field path arguments must be of type string or ",n,!1,void 0,t)}const $Z=new RegExp("[~\\*/\\[\\]]");function OD(n,e,t){if(e.search($Z)>=0)throw FD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new pu(...e.split("."))._internalPath}catch{throw FD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function FD(n,e,t,r,i){const s=r&&!r.isEmpty(),u=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(s||u)&&(p+=" (found",s&&(p+=` in field ${r}`),u&&(p+=` in document ${i}`),p+=")"),new De(ue.INVALID_ARGUMENT,h+n+p)}function cV(n,e){return n.some(t=>t.isEqual(e))}class iE{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new jn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new HZ(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(LD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class HZ extends iE{data(){return super.data()}}function LD(n,e){return"string"==typeof e?OD(n,e):e instanceof pu?e._internalPath:e._delegate._internalPath}function dV(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new De(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class sE{}function Gc(n,...e){for(const t of e)n=t._apply(n);return n}class qZ extends sE{constructor(e,t,r){super(),this.ma=e,this.ga=t,this.ya=r,this.type="where"}_apply(e){const t=Mf(e.firestore),r=function(i,s,u,h,p,_,b){let T;if(p.isKeyField()){if("array-contains"===_||"array-contains-any"===_)throw new De(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if("in"===_||"not-in"===_){_V(b,_);const N=[];for(const O of b)N.push(mV(h,i,O));T={arrayValue:{values:N}}}else T=mV(h,i,b)}else"in"!==_&&"not-in"!==_&&"array-contains-any"!==_||_V(b,_),T=aV(u,"where",b,"in"===_||"not-in"===_);const S=li.create(p,_,T);return function(N,O){if(O.dt()){const J=GM(N);if(null!==J&&!J.isEqual(O.field))throw new De(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${J.toString()}' and '${O.field.toString()}'`);const Me=qM(N);null!==Me&&yV(0,O.field,Me)}const W=function(J,Me){for(const Be of J.filters)if(Me.indexOf(Be.op)>=0)return Be.op;return null}(N,function(J){switch(J){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(O.op));if(null!==W)throw new De(ue.INVALID_ARGUMENT,W===O.op?`Invalid query. You cannot use more than one '${O.op.toString()}' filter.`:`Invalid query. You cannot use '${O.op.toString()}' filters with '${W.toString()}' filters.`)}(i,S),S}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new yi(e.firestore,e.converter,function(i,s){const u=i.filters.concat([s]);return new cu(i.path,i.collectionGroup,i.explicitOrderBy.slice(),u,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class WZ extends sE{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new De(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new De(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const u=new p_(i,s);return function(h,p){if(null===qM(h)){const _=GM(h);null!==_&&yV(0,_,p.field)}}(r,u),u}(e._query,this.ma,this.pa);return new yi(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new cu(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class hV extends sE{constructor(e,t,r){super(),this.type=e,this.Ia=t,this.Ta=r}_apply(e){return new yi(e.firestore,e.converter,sD(e._query,this.Ia,this.Ta))}}class fV extends sE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=gV(e,this.type,this.Ea,this.Aa);return new yi(e.firestore,e.converter,(i=t,new cu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class pV extends sE{constructor(e,t,r){super(),this.type=e,this.Ea=t,this.Aa=r}_apply(e){const t=gV(e,this.type,this.Ea,this.Aa);return new yi(e.firestore,e.converter,(i=t,new cu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function gV(n,e,t,r){if(t[0]=(0,R.m9)(t[0]),t[0]instanceof iE)return function(i,s,u,h,p){if(!h)throw new De(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const _=[];for(const b of m_(i))if(b.field.isKeyField())_.push(_f(s,h.key));else{const T=h.data.field(b.field);if(jM(T))throw new De(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+b.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const S=b.field.canonicalString();throw new De(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${S}' (used as the orderBy) does not exist.`)}_.push(T)}return new Vc(_,p)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Mf(n.firestore);return function(s,u,h,p,_,b){const T=s.explicitOrderBy;if(_.length>T.length)throw new De(ue.INVALID_ARGUMENT,`Too many arguments provided to ${p}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const S=[];for(let N=0;N<_.length;N++){const O=_[N];if(T[N].field.isKeyField()){if("string"!=typeof O)throw new De(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${p}(), but got a ${typeof O}`);if(!WM(s)&&-1!==O.indexOf("/"))throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${p}() must be a plain document ID, but '${O}' contains a slash.`);const W=s.path.child(nn.fromString(O));if(!qe.isDocumentKey(W))throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${p}() must result in a valid document path, but '${W}' is not because it contains an odd number of segments.`);const J=new qe(W);S.push(_f(u,J))}else{const W=aV(h,p,O);S.push(W)}}return new Vc(S,b)}(n._query,n.firestore._databaseId,i,e,t,r)}}function mV(n,e,t){if("string"==typeof(t=(0,R.m9)(t))){if(""===t)throw new De(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!WM(e)&&-1!==t.indexOf("/"))throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(nn.fromString(t));if(!qe.isDocumentKey(r))throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return _f(n,new qe(r))}if(t instanceof jn)return _f(n,t._key);throw new De(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${SD(t)}.`)}function _V(n,e){if(!Array.isArray(n)||0===n.length)throw new De(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new De(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yV(n,e,t){if(!t.isEqual(e))throw new De(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class ON{convertValue(e,t="none"){switch(mf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(gf(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw st()}}convertObject(e,t){const r={};return pf(e.fields,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new ND(cr(e.latitude),cr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=RL(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Sw(e));default:return null}}convertTimestamp(e){const t=Oc(e);return new Gn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=nn.fromString(e);Ct(x2(r));const i=new Fc(r.get(1),r.get(3)),s=new qe(r.popFirst(5));return i.isEqual(t)||mr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function UD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class e6 extends ON{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}class Nf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class gu extends iE{constructor(e,t,r,i,s,u){super(e,t,r,i,u),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new oE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(LD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class oE extends gu{data(e={}){return super.data(e)}}class Wc{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Nf(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new oE(this._firestore,this._userDataWriter,r.key,r,new Nf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new De(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(u=>({type:"added",doc:new oE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Nf(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(u=>i||3!==u.type).map(u=>{const h=new oE(r._firestore,r._userDataWriter,u.doc.key,u.doc,new Nf(r._snapshot.mutatedKeys.has(u.doc.key),r._snapshot.fromCache),r.query.converter);let p=-1,_=-1;return 0!==u.type&&(p=s.indexOf(u.doc.key),s=s.delete(u.doc.key)),1!==u.type&&(s=s.add(u.doc),_=s.indexOf(u.doc.key)),{type:t6(u.type),doc:h,oldIndex:p,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function t6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return st()}}function vV(n,e){return n instanceof gu&&e instanceof gu?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Wc&&e instanceof Wc&&n._firestore===e._firestore&&wN(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Zc extends ON{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qa(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new jn(this.firestore,null,t)}}function wV(n,e,t){n=Jt(n,jn);const r=Jt(n.firestore,$n),i=UD(n.converter,e,t);return O_(r,[kD(Mf(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Wn.none())])}function EV(n,e,t,...r){n=Jt(n,jn);const i=Jt(n.firestore,$n),s=Mf(i);let u;return u="string"==typeof(e=(0,R.m9)(e))||e instanceof pu?NN(s,"updateDoc",n._key,e,t,r):RN(s,"updateDoc",n._key,e),O_(i,[u.toMutation(n._key,Wn.exists(!0))])}function FN(n,...e){var t,r,i;n=(0,R.m9)(n);let s={includeMetadataChanges:!1},u=0;"object"!=typeof e[u]||xN(e[u])||(s=e[u],u++);const h={includeMetadataChanges:s.includeMetadataChanges};if(xN(e[u])){const T=e[u];e[u]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[u+1]=null===(r=T.error)||void 0===r?void 0:r.bind(T),e[u+2]=null===(i=T.complete)||void 0===i?void 0:i.bind(T)}let p,_,b;if(n instanceof jn)_=Jt(n.firestore,$n),b=g_(n._key.path),p={next:T=>{e[u]&&e[u](LN(_,n,T))},error:e[u+1],complete:e[u+2]};else{const T=Jt(n,yi);_=Jt(T.firestore,$n),b=T._query;const S=new Zc(_);p={next:N=>{e[u]&&e[u](new Wc(_,S,T,N))},error:e[u+1],complete:e[u+2]},dV(n._query)}return function(T,S,N,O){const W=new xD(O),J=new GR(S,W,N);return T.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return BR(yield k_(T),J)})),()=>{W.bc(),T.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return $R(yield k_(T),J)}))}}(_r(_),b,h,p)}function O_(n,e){return function(t,r){const i=new kr;return t.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function ZW(n,e,t){return YR.apply(this,arguments)}(yield SN(t),r,i)})),i.promise}(_r(n),e)}function LN(n,e,t){const r=t.docs.get(e._key),i=new Zc(n);return new gu(n,i,e._key,r,new Nf(t.hasPendingWrites,t.fromCache),e.converter)}const d6={maxAttempts:5};class bV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mf(e)}set(e,t,r){this._verifyNotCommitted();const i=zc(e,this._firestore),s=UD(i.converter,t,r),u=kD(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(u.toMutation(i._key,Wn.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=zc(e,this._firestore);let u;return u="string"==typeof(t=(0,R.m9)(t))||t instanceof pu?NN(this._dataReader,"WriteBatch.update",s._key,t,r,i):RN(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(u.toMutation(s._key,Wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=zc(e,this._firestore);return this._mutations=this._mutations.concat(new w_(t._key,Wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new De(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function zc(n,e){if((n=(0,R.m9)(n)).firestore!==e)throw new De(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class h6 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mf(e)}get(e){const t=zc(e,this._firestore),r=new e6(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return st();const s=i[0];if(s.isFoundDocument())return new iE(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new iE(this._firestore,r,t._key,null,t.converter);throw st()})}set(e,t,r){const i=zc(e,this._firestore),s=UD(i.converter,t,r),u=kD(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,u),this}update(e,t,r,...i){const s=zc(e,this._firestore);let u;return u="string"==typeof(t=(0,R.m9)(t))||t instanceof pu?NN(this._dataReader,"Transaction.update",s._key,t,r,i):RN(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,u),this}delete(e){const t=zc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=zc(e,this._firestore),r=new Zc(this._firestore);return super.get(e).then(i=>new gu(this._firestore,r,t._key,i._document,new Nf(!1,!1),t.converter))}}!function(n,e=!0){c_=Pt.SDK_VERSION,(0,Pt._registerComponent)(new or.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),u=new $n(new Cq(t.getProvider("auth-internal")),new Dq(t.getProvider("app-check-internal")),function(h,p){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new De(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fc(h.options.projectId,p)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),(0,Pt.registerVersion)(yL,"3.7.3",n),(0,Pt.registerVersion)(yL,"3.7.3","esm2017")}();var v6={includeMetadataChanges:!1};function D6(n,e){return void 0===e&&(e={}),function T6(n){return function UN(n,e){return void 0===e&&(e=v6),new qn.y(function(t){return{unsubscribe:FN(n,e,{next:t.next.bind(t),error:t.error.bind(t),complete:t.complete.bind(t)})}})}(n,{includeMetadataChanges:!0}).pipe((0,Je.U)(function(e){return e.docs}))}(n).pipe((0,Je.U)(function(t){return t.map(function(r){return function IV(n,e){void 0===e&&(e={});var t=n.data();return!n.exists()||"object"!=typeof t||null===t||e.idField&&(t[e.idField]=n.id),t}(r,e)})}))}class F_{constructor(e){return e}}const AV="firestore",jN=new c.OlP("angularfire2.firestore-instances");function x6(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new F_(r)}}const M6={provide:class S6{constructor(){return FI(AV)}},deps:[[new c.FiY,jN]]},R6={provide:F_,useFactory:function A6(n,e){const t=function Jg(n,e,t){if(e){if(1===e.length)return e[0];const s=e.filter(u=>u.app===t);if(1===s.length)return s[0]}return t.container.getProvider(n).getImmediate({optional:!0})}(AV,n,e);return t&&new F_(t)},deps:[[new c.FiY,jN],Xl]};let N6=(()=>{class n{constructor(){(0,Pt.registerVersion)("angularfire",Ba.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[R6,M6]}),n})();function P6(n,...e){return{ngModule:N6,providers:[{provide:jN,useFactory:x6(n),multi:!0,deps:[c.R0b,c.zs3,wc,S0,[new c.FiY,HI],[new c.FiY,eu],...e]}]}}const $N=Xg(D6,!0),HN=Xg(vN,!0),k6=Xg(SZ,!0);function O6(n,e){1&n&&c.GkF(0)}function F6(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",54),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function L6(n,e){if(1&n&&(c.TgZ(0,"div",40)(1,"div",41)(2,"div",42)(3,"div",43),c._UZ(4,"img",44),c.qZA(),c.TgZ(5,"div",45)(6,"div",46),c._UZ(7,"i",47),c.qZA(),c.TgZ(8,"div",48),c._UZ(9,"img",49),c.qZA()(),c.TgZ(10,"div",50)(11,"div",46),c._UZ(12,"i",47),c.qZA(),c.TgZ(13,"div",48),c._UZ(14,"img",49),c.qZA()(),c.TgZ(15,"div",51)(16,"div",46),c._UZ(17,"i",47),c.qZA(),c.TgZ(18,"div",48),c._UZ(19,"img",49),c.qZA()()()(),c.TgZ(20,"div",52)(21,"h4",53),c._uU(22),c.qZA(),c.YNc(23,F6,4,1,"ul",34),c.qZA()()),2&n){const t=c.oxw().$implicit;c.xp6(4),c.s9C("src",t.imgUrl,c.LSH),c.xp6(5),c.s9C("src",t.img_1,c.LSH),c.xp6(5),c.s9C("src",t.img_2,c.LSH),c.xp6(5),c.s9C("src",t.img_3,c.LSH),c.xp6(3),c.Oqu(t.title),c.xp6(1),c.Q6J("ngForOf",t.description)}}function U6(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",54),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function V6(n,e){if(1&n&&(c.TgZ(0,"div",55)(1,"div",56)(2,"div",42)(3,"div",43),c._UZ(4,"img",44),c.qZA(),c.TgZ(5,"div",45)(6,"div",46),c._UZ(7,"i",47),c.qZA(),c.TgZ(8,"div",48),c._UZ(9,"img",49),c.qZA()(),c.TgZ(10,"div",50)(11,"div",46),c._UZ(12,"i",47),c.qZA(),c.TgZ(13,"div",48),c._UZ(14,"img",49),c.qZA()(),c.TgZ(15,"div",51)(16,"div",46),c._UZ(17,"i",47),c.qZA(),c.TgZ(18,"div",48),c._UZ(19,"img",49),c.qZA()()()(),c.TgZ(20,"div",57)(21,"h4",53),c._uU(22),c.qZA(),c.YNc(23,U6,4,1,"ul",34),c.qZA()()),2&n){const t=c.oxw().$implicit;c.xp6(4),c.s9C("src",t.imgUrl,c.LSH),c.xp6(5),c.s9C("src",t.img_1,c.LSH),c.xp6(5),c.s9C("src",t.img_2,c.LSH),c.xp6(5),c.s9C("src",t.img_3,c.LSH),c.xp6(3),c.Oqu(t.title),c.xp6(1),c.Q6J("ngForOf",t.description)}}function B6(n,e){if(1&n&&(c.TgZ(0,"div")(1,"div"),c.YNc(2,O6,1,0,"ng-container",37),c.YNc(3,L6,24,6,"ng-template",null,38,c.W1O),c.YNc(5,V6,24,6,"ng-template",null,39,c.W1O),c.qZA()()),2&n){const t=e.$implicit,r=c.MAs(4),i=c.MAs(6);c.xp6(1),c.Udp("display",t.display),c.xp6(1),c.Q6J("ngIf",t.direction)("ngIfThen",r)("ngIfElse",i)}}let j6=(()=>{class n{constructor(t){const r=HN(t,"about");this.subscribe=$N(r)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(F_))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-about"]],decls:85,vars:3,consts:[[1,"about","h-auto"],["data-aos","fade-up",1,"container"],[1,"-mx-4","mt-9"],[1,"w-full","px-4"],[1,"mx-auto","mb-[60px]","max-w-[510px]","text-center"],[1,"text-blackColor","mb-2","block","text-lg","font-semibold"],[1,"primary-color","mb-4","text-3xl","font-bold","sm:text-4xl","md:text-[40px]"],[1,"md:flex","items-center","gap-10"],[1,"col-lg-3"],[1,"overflow-hidden","w-[350px]","h-[350px]","rounded-md","bg-primary-color"],["src","https://firebasestorage.googleapis.com/v0/b/mayaramein-portfolio.appspot.com/o/projects%2Fabout-me.png?alt=media&token=1eed87ad-90f9-425f-af8b-42a1cc9708f5","alt","",1,"img-fluid"],[1,"col-lg-9","pt-4","pt-lg-0","content"],[1,"md:flex","gap-10"],[1,"col-lg-6"],[1,"bi","bi-rounded-right"],[1,"fa-solid","fa-cake-candles"],[1,"fa-solid","fa-globe"],[1,"fa-brands","fa-whatsapp"],[1,"fa-solid","fa-location-dot"],[1,"fa-solid","fa-graduation-cap"],[1,"fa-solid","fa-building-columns"],[1,"fa-solid","fa-envelope"],[1,"fa-solid","fa-laptop"],["id","about",1,"w-screen","overflow-hidden","lg:pt-[120px]","lg:pb-[60px]"],[1,"-mx-4","mt-6"],[1,"mx-auto","mb-[30px]","max-w-[400px]","text-center"],[1,"mr-0","flex","items-start","flex-row"],[1,"w-full","h-full"],[1,"relative","overflow-hidden","p-10","h-full"],[1,"hidden","md:flex","justify-center"],[1,"w-24","h-24","bg-white","border-2","border-secondaryColor","rounded-full"],["src","https://firebasestorage.googleapis.com/v0/b/mayaramein-portfolio.appspot.com/o/main%2Flogo-icon.png?alt=media&token=4512640c-284e-4dc4-83a6-354b9919be6f","alt","logo",1,"p-3"],[1,"invisible","md:visible","border-2-2","border-yellow-555","absolute","h-full","border",2,"right","50%","border","2px solid #FFC100","border-radius","1%"],[1,"invisible","md:visible","border-2-2","border-yellow-555","absolute","h-full","border",2,"left","50%","border","2px solid #FFC100","border-radius","1%"],[4,"ngFor","ngForOf"],[1,"hidden","md:flex","justify-center","text-primaryColor"],["src","https://firebasestorage.googleapis.com/v0/b/mayaramein-portfolio.appspot.com/o/main%2Fprofile-picture.png?alt=media&token=698a099f-da18-4b80-b05a-c5be90ff1baa","alt","me",1,"w-24","h-24","p-1","border-secondaryColor","border-2","rounded-full"],[4,"ngIf","ngIfThen","ngIfElse"],["Dright",""],["Dleft",""],[1,"mb-8","block","md:flex","justify-between","items-center","w-full"],[1,"w-[370px]","h-[400px]","md:w-[600px]","md:h-[650px]","items-center","justify-center","rounded-md","overflow-hidden"],[1,"card"],[1,"card--image"],["alt","image",1,"img-fluid",3,"src"],[1,"card--info","info--1"],[1,"icon"],[1,"fa-solid","fa-plus","light-color"],[1,"info--image"],["alt","info image",1,"img-fluid",3,"src"],[1,"card--info","info--2"],[1,"card--info","info--3"],[1,"order-1","md:w-5/12","px-1","py-4","text-left"],[1,"mb-3","font-bold","text-lg","md:text-2xl"],[1,"fa-regular","fa-circle-check","primary-color"],[1,"mb-8","block","md:flex","justify-between","flex-row-reverse","items-center","w-full"],[1,"w-[350px]","h-[350px]","md:w-[600px]","md:h-[650px]","items-center","justify-center","rounded-md","overflow-hidden"],[0,"md","dir","rtl",1,"order-1","md:w-5/12","px-1","py-4","md:text-right"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"span",5),c._uU(6," About "),c.qZA(),c.TgZ(7,"h2",6),c._uU(8," Get To Know Me "),c.qZA()()()(),c.TgZ(9,"div",7)(10,"div",8)(11,"div",9),c._UZ(12,"img",10),c.qZA()(),c.TgZ(13,"div",11)(14,"div",12)(15,"div",13)(16,"ul")(17,"li"),c._UZ(18,"i",14),c.TgZ(19,"strong"),c._UZ(20,"i",15),c._uU(21," Birthday:"),c.qZA(),c._uU(22," 24 June 1998"),c.qZA(),c.TgZ(23,"li"),c._UZ(24,"i",14),c.TgZ(25,"strong"),c._UZ(26,"i",16),c._uU(27," Website:"),c.qZA(),c._uU(28," www.mayaramein.com"),c.qZA(),c.TgZ(29,"li"),c._UZ(30,"i",14),c.TgZ(31,"strong"),c._UZ(32,"i",17),c._uU(33," Phone:"),c.qZA(),c._uU(34," (+20) 102 954 5294"),c.qZA(),c.TgZ(35,"li"),c._UZ(36,"i",14),c.TgZ(37,"strong"),c._UZ(38,"i",18),c._uU(39," Location:"),c.qZA(),c._uU(40," Cairo, Egypt"),c.qZA()()(),c.TgZ(41,"div",13)(42,"ul")(43,"li"),c._UZ(44,"i",14),c.TgZ(45,"strong"),c._UZ(46,"i",19),c._uU(47," Current Degree:"),c.qZA(),c._uU(48," Master"),c.qZA(),c.TgZ(49,"li"),c._UZ(50,"i",14),c.TgZ(51,"strong"),c._UZ(52,"i",20),c._uU(53," Academic Email:"),c.qZA(),c._uU(54," mayarmohsan_psw@fci.helwan.edu.eg"),c.qZA(),c.TgZ(55,"li"),c._UZ(56,"i",14),c.TgZ(57,"strong"),c._UZ(58,"i",21),c._uU(59," Contact Email:"),c.qZA(),c._uU(60," mayaramein@outlook.com"),c.qZA(),c.TgZ(61,"li"),c._UZ(62,"i",14),c.TgZ(63,"strong"),c._UZ(64,"i",22),c._uU(65," Freelance:"),c.qZA(),c._uU(66," Available"),c.qZA()()()()()()()(),c.TgZ(67,"section",23)(68,"div",24)(69,"div",3)(70,"div",25)(71,"h2",6),c._uU(72," My Journey "),c.qZA()()()(),c.TgZ(73,"div",26)(74,"div",27)(75,"div",28)(76,"div",29)(77,"div",30),c._UZ(78,"img",31),c.qZA()(),c._UZ(79,"div",32)(80,"span",33),c.YNc(81,B6,7,5,"div",34),c.ALo(82,"async"),c.qZA(),c.TgZ(83,"div",35),c._UZ(84,"img",36),c.qZA()()()()),2&t&&(c.xp6(81),c.Q6J("ngForOf",c.lcZ(82,1,r.subscribe)))},dependencies:[Ii,Rn,gd],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap";.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#5333ed}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;padding-right:2px;color:#5333ed}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.card[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;box-shadow:0 2.8px 2.2px #00000004,0 6.7px 5.3px #00000005,0 12.5px 10px #00000006,0 22.3px 17.9px #00000008,0 41.8px 33.4px #00000009,0 100px 80px #0000000d}.card--image[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;align-items:center;overflow:hidden}.card--image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:90%;height:90%;object-fit:cover}.card--info[_ngcontent-%COMP%]{--size: 20px;width:var(--size);height:var(--size);background:rgba(0,0,0,.75);border-radius:2px;position:absolute;transition:width .55s ease,height .55s ease,right .55s ease,background .55s ease;overflow:hidden;box-shadow:0 2.8px 2.2px #00000004,0 6.7px 5.3px #00000005,0 12.5px 10px #00000006,0 22.3px 17.9px #00000008,0 41.8px 33.4px #00000009,0 100px 80px #0000000d,0 0 2.2px #0000000b,0 0 5.3px #0001,0 0 10px #00000014,0 0 17.9px #00000018,0 0 33.4px #0000001d,0 0 80px #00000029,0 .2px 2.2px #00000004,0 .6px 5.3px #00000005,0 1.1px 10px #00000006,0 2px 17.9px #00000008,0 3.8px 33.4px #00000009,0 9px 80px #0000000d}.card--info[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;top:0;width:100%;height:100%;background:linear-gradient(to top,rgba(0,0,0,.65) 0%,rgba(0,0,0,.25) 50%,transparent 100%);z-index:1;opacity:0;transition:opacity .55s ease}.card--info.info--1[_ngcontent-%COMP%]{bottom:47%;right:80%}.card--info.info--2[_ngcontent-%COMP%]{bottom:25%;right:15%}.card--info.info--3[_ngcontent-%COMP%]{top:25%;right:35%}.card--info[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:50%;left:50%;transform:translate(-50%,-50%);display:flex;justify-content:center;align-items:center}.card--info[_ngcontent-%COMP%]   .info--text[_ngcontent-%COMP%]{display:block;position:absolute;left:10%;bottom:5%;font-size:.55rem;letter-spacing:1px;font-family:Montserrat;font-weight:700;color:#fff;white-space:nowrap;z-index:2;opacity:0;transform:translateY(25%);transition:opacity .25s ease,transform .25s ease}.card--info[_ngcontent-%COMP%]   .info--image[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;overflow:hidden}.card--info[_ngcontent-%COMP%]   .info--image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;object-fit:cover;opacity:0;transition:opacity .55s ease}.card[_ngcontent-%COMP%]:hover   .card--info[_ngcontent-%COMP%]{--size: 100px}.card[_ngcontent-%COMP%]:hover   .card--info[_ngcontent-%COMP%]:after{opacity:1}.card[_ngcontent-%COMP%]:hover   .card--info.info--1[_ngcontent-%COMP%]{right:71%;transition-delay:.1s}.card[_ngcontent-%COMP%]:hover   .card--info.info--2[_ngcontent-%COMP%]{right:15%}.card[_ngcontent-%COMP%]:hover   .card--info[_ngcontent-%COMP%]   .info--image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:1}.card[_ngcontent-%COMP%]:hover   .card--info[_ngcontent-%COMP%]   .info--text[_ngcontent-%COMP%]{transition-delay:.55s;opacity:1;transform:translateY(0)}.support[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;padding:10px;display:flex}.support[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:0 10px;color:#fff;font-size:1.8rem;-webkit-backface-visibility:hidden;backface-visibility:hidden;transition:all .15s ease}.support[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{transform:scale(1.1)}']}),n})(),$6=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-developer"]],decls:2,vars:0,template:function(t,r){1&t&&(c.TgZ(0,"p"),c._uU(1,"developer works!"),c.qZA())}}),n})(),H6=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-freelancer"]],decls:2,vars:0,template:function(t,r){1&t&&(c.TgZ(0,"p"),c._uU(1,"freelancer works!"),c.qZA())}}),n})();class Kc{constructor(){}}Kc.\u0275fac=function(e){return new(e||Kc)},Kc.\u0275prov=c.Yz7({token:Kc,factory:Kc.\u0275fac,providedIn:"root"}),Kc.ngInjectableDef=(0,c.Yz7)({factory:function(){return new Kc},token:Kc,providedIn:"root"});let W6=(()=>{class n{constructor(){this.writeText="",this.loopNumber=0,this.isDeleting=!1}ngOnInit(){setTimeout(()=>this.writeLine(),500)}writeLine(){let r=this.StringList[this.loopNumber%this.StringList.length];this.writeText=r.substring(0,this.isDeleting?this.writeText.length-1:this.writeText.length+1);let i=90;this.isDeleting&&(i/=2),this.isDeleting||this.writeText!==r?this.isDeleting&&""===this.writeText&&(this.isDeleting=!1,this.loopNumber++,i=this.speed||700):(i=this.speed||700,this.isDeleting=!0),setTimeout(()=>function q6(n,e,t,r){return new(t||(t=Promise))(function(s,u){function h(b){try{_(r.next(b))}catch(T){u(T)}}function p(b){try{_(r.throw(b))}catch(T){u(T)}}function _(b){b.done?s(b.value):function i(s){return s instanceof t?s:new t(function(u){u(s)})}(b.value).then(h,p)}_((r=r.apply(n,e||[])).next())})}(this,void 0,void 0,function*(){return yield this.writeLine()}),i)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["ngtypewriter"]],inputs:{StringList:"StringList",speed:"speed"},decls:2,vars:1,consts:[[2,"border-right","1px solid #666","animation","blink 1s","padding-right","3px"]],template:function(t,r){1&t&&(c.TgZ(0,"span",0),c._uU(1),c.qZA()),2&t&&(c.xp6(1),c.Oqu(r.writeText))},styles:["@-webkit-keyframes blink{50%{border-right:transparent}}@keyframes blink{50%{border-right:transparent}}"]}),n})(),Z6=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),z6=(()=>{class n{constructor(){this.phrases=["Full Stack Developer.","Software Developer.","UI Developer.","Frontend Developer.","Backend Developer.","Software Engineer.","Freelancer.","Graphic Designer."]}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-home"]],decls:24,vars:2,consts:[[1,"home"],["id","hero",1,"relative","flex","flex-col","md:flex-row","justify-center","text-center","md:text-left","h-[595px]","w-full","bg-gradient-to-t","from-lighterColor"],[1,"invisible","md:visible","absolute","rounded-md","bg-secondary-color","primary-color","shadow-lg","shadow-secondaryColor/50","lg:top-[9em]","lg:right-[26em]","justify-center","items-center"],[1,"fa-solid","fa-code","text-primaryColor","p-3","text-xl"],[1,"invisible","md:visible","absolute","rounded-md","bg-secondary-color","primary-color","shadow-lg","shadow-secondary-color/50","top-[12em]","right-[2em]","justify-center","items-center"],[1,"fa-solid","fa-pen-nib","text-primaryColor","p-3","text-xl"],[1,"flex-2"],[1,"primary-color","h-auto","md:pl-48","pt-12","md:pt-48","space-y-4"],[1,"inline","text-lg","md:text-2xl"],[1,"inline","text-3xl","md:text-5xl","font-bold","primary-color"],[1,"block","md:inline","text-lg","md:text-2xl"],["id","text",1,"block","md:inline","text-3xl","md:text-5xl","font-bold","primary-color"],[3,"StringList","speed"],[1,"grid","md:block","m-6","md:m-0","md:pl-24","md:mt-24","md:ml-24","md:space-x-4"],["href","https://firebasestorage.googleapis.com/v0/b/mayaramein-portfolio.appspot.com/o/main%2FMayar%20Mohsen.pdf?alt=media&token=d9fcc8d6-a1b7-4962-9001-b4f8367ed636","target","_blank",1,"bg-primary-color","mt-[20px]","px-12","py-4","text-white","text-xl","rounded-md","hover:underline","hover:underline-offset-[8px]"],["routerLink","/contact","target","_blank",1,"bg-primary-color","mt-[20px]","px-12","py-4","text-white","text-xl","rounded-md","hover:underline","hover:underline-offset-[8px]"],[1,"flex-1","overflow-hidden"],["src","https://firebasestorage.googleapis.com/v0/b/mayaramein-portfolio.appspot.com/o/main%2Fff.png?alt=media&token=dfb939bf-eae0-4ce0-9d86-ea98ada8bbe6","alt","hero",1,"invisible","lg:visible","absolute","bottom-0","right-0","w-3/4","lg:w-[33em]"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0)(1,"section",1)(2,"span",2),c._UZ(3,"i",3),c.qZA(),c.TgZ(4,"span",4),c._UZ(5,"i",5),c.qZA(),c.TgZ(6,"div",6)(7,"div",7)(8,"h2",8),c._uU(9,"Hello, My name is "),c.qZA(),c.TgZ(10,"h1",9),c._uU(11,"Mayar Amein"),c.qZA(),c.TgZ(12,"div")(13,"h2",10),c._uU(14,"and I'm "),c.qZA(),c.TgZ(15,"h1",11),c._UZ(16,"ngtypewriter",12),c.qZA()()(),c.TgZ(17,"div",13)(18,"a",14),c._uU(19,"Are you Hiring?"),c.qZA(),c.TgZ(20,"a",15),c._uU(21,"Need a Freelancer?"),c.qZA()()(),c.TgZ(22,"div",16),c._UZ(23,"img",17),c.qZA()()()),2&t&&(c.xp6(16),c.Q6J("StringList",r.phrases)("speed",2e3))},dependencies:[ql,W6],styles:[".home[_ngcontent-%COMP%]{overflow:hidden}"]}),n})();function K6(n,e){1&n&&c.GkF(0)}function Y6(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",29),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function Q6(n,e){if(1&n&&(c.TgZ(0,"div",15)(1,"div",16)(2,"video",17),c._UZ(3,"source",18),c.qZA()(),c.TgZ(4,"div",19)(5,"span",20),c._uU(6),c.qZA(),c.TgZ(7,"span",20),c._uU(8),c.qZA(),c.TgZ(9,"span",20),c._uU(10),c.qZA(),c.TgZ(11,"span",20),c._uU(12),c.qZA(),c.TgZ(13,"h4",21),c._uU(14),c.TgZ(15,"a",22),c._uU(16,"Live Preview"),c.qZA(),c.TgZ(17,"a",23),c._UZ(18,"i",24),c.qZA()(),c.TgZ(19,"p",25),c._uU(20),c.TgZ(21,"a",26),c._UZ(22,"i",27),c.qZA(),c.TgZ(23,"span",28),c._uU(24),c.qZA()(),c.YNc(25,Y6,4,1,"ul",10),c.qZA()()),2&n){const t=c.oxw().$implicit;c.xp6(2),c.s9C("poster",t.imgUrl,c.LSH),c.xp6(1),c.s9C("src",t.vidoeUrl,c.LSH),c.xp6(3),c.Oqu(t.type),c.xp6(2),c.Oqu(t.category),c.xp6(2),c.Oqu(t.subcategory),c.xp6(2),c.Oqu(t.project_type),c.xp6(2),c.hij("",t.title," "),c.xp6(1),c.s9C("href",t.live_link,c.LSH),c.xp6(2),c.s9C("href",t.code_link,c.LSH),c.xp6(3),c.hij("",t.org_name," "),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.Oqu(t.org_location),c.xp6(1),c.Q6J("ngForOf",t.description)}}function J6(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",35),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function X6(n,e){if(1&n&&(c.TgZ(0,"div",30)(1,"div",16)(2,"video",17),c._UZ(3,"source",18),c.qZA()(),c.TgZ(4,"div",31)(5,"span",32),c._uU(6),c.qZA(),c.TgZ(7,"span",33),c._uU(8),c.qZA(),c.TgZ(9,"span",20),c._uU(10),c.qZA(),c.TgZ(11,"span",20),c._uU(12),c.qZA(),c.TgZ(13,"h4",21),c._uU(14),c.TgZ(15,"a",22),c._uU(16,"Live Preview"),c.qZA(),c.TgZ(17,"a",23),c._UZ(18,"i",24),c.qZA()(),c.TgZ(19,"p",25),c._uU(20),c.TgZ(21,"a",26),c._UZ(22,"i",27),c.qZA(),c.TgZ(23,"span",34),c._uU(24),c.qZA()(),c.YNc(25,J6,4,1,"ul",10),c.qZA()()),2&n){const t=c.oxw().$implicit;c.xp6(2),c.s9C("poster",t.imgUrl,c.LSH),c.xp6(1),c.s9C("src",t.vidoeUrl,c.LSH),c.xp6(3),c.Oqu(t.type),c.xp6(2),c.Oqu(t.category),c.xp6(2),c.Oqu(t.subcategory),c.xp6(2),c.Oqu(t.project_type),c.xp6(2),c.hij("",t.title," "),c.xp6(1),c.s9C("href",t.live_link,c.LSH),c.xp6(2),c.s9C("href",t.code_link,c.LSH),c.xp6(3),c.hij("",t.org_name," "),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.Oqu(t.org_location),c.xp6(1),c.Q6J("ngForOf",t.description)}}function e4(n,e){if(1&n&&(c.TgZ(0,"div")(1,"div",11),c.YNc(2,K6,1,0,"ng-container",12),c.YNc(3,Q6,26,13,"ng-template",null,13,c.W1O),c.YNc(5,X6,26,13,"ng-template",null,14,c.W1O),c.qZA()()),2&n){const t=e.$implicit,r=c.MAs(4),i=c.MAs(6);c.xp6(1),c.Udp("display",t.display),c.xp6(1),c.Q6J("ngIf",t.direction)("ngIfThen",r)("ngIfElse",i)}}let t4=(()=>{class n{constructor(t){const r=HN(t,"portfolio");this.subscribe=$N(r)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(F_))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-portfolio"]],decls:14,vars:3,consts:[[1,"w-screen","overflow-hidden","lg:pt-[60px]","lg:pb-[60px]"],[1,"-mx-4"],[1,"w-full","px-4"],[1,"mx-auto","mb-[20px]","max-w-[510px]","text-center"],[1,"text-blackColor","mb-2","block","text-lg","font-semibold"],[1,"primary-color","mb-4","text-3xl","font-bold","sm:text-4xl","md:text-[40px]"],[1,"mr-0","py-8","flex","flex-col","items-start","md:flex-row"],[1,"w-full","h-full"],["src","https://firebasestorage.googleapis.com/v0/b/mayaramein-portfolio.appspot.com/o/projects%2Fprojects.png?alt=media&token=8ab78277-366d-494d-9c51-c4219e5d0fb9","alt","projects"],[1,"relative","wrap","overflow-hidden","p-12"],[4,"ngFor","ngForOf"],[1,"border-primary-color","rounded-md","hover:shadow-md"],[4,"ngIf","ngIfThen","ngIfElse"],["Dright",""],["Dleft",""],[1,"block","md:flex","justify-between","items-center","w-full"],[1,"min-w-[300px]","min-h-[200px]","md:w-[700px]","md:h-[300px]","items-center","justify-center","overflow-hidden"],["width","700","height","300","autoplay","",3,"poster"],["type","video/mp4",3,"src"],[1,"order-1","w-5/12","px-1","py-4","text-left"],[1,"badge","text-white","bg-primary-color","rounded-md","mr-3","px-1","md:px-3","py-1","text-xs"],[1,"mt-3","font-bold","text-lg","md:text-2xl","flex","items-center"],[1,"primary-color","border-primary-color","rounded-md","px-1","mx-3","p-1","text-xs",3,"href"],[1,"primary-color","text-2xl",3,"href"],[1,"fa-brands","fa-square-github"],[1,"mb-2","text-md","md:text-xl","flex","items-center"],["target","_blank",1,"primary-color","rounded-md","mr-3","px-3","py-1","text-lg",3,"href"],[1,"fa-solid","fa-circle-info"],[1,"badge","bg-secondary-color","primary-color","rounded","px-1","md:px-3","text-xs"],[1,"fa-solid","fa-thumbtack","primary-color"],[1,"block","md:flex","justify-between","flex-row-reverse","items-center","w-full"],[1,"md:pl-9","w-full","md:w-5/12","p-4","overflow-clip"],[1,"badge","text-white","bg-primary-color","rounded-md","px-1","md:px-3","py-1","text-xs"],[1,"badge","text-white","bg-primary-color","rounded-md","m-3","px-1","md:px-3","py-1","text-xs"],[1,"badge","bg-secondary-color","primary-color","rounded-md","px-1","md:px-3","text-xs"],[1,"fa-regular","fa-circle-check","primary-color"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),c._uU(5," Portfolio "),c.qZA(),c.TgZ(6,"h2",5),c._uU(7," Latest Projects "),c.qZA()()()(),c.TgZ(8,"div",6)(9,"div",7),c._UZ(10,"img",8),c.TgZ(11,"div",9),c.YNc(12,e4,7,5,"div",10),c.ALo(13,"async"),c.qZA()()()()),2&t&&(c.xp6(12),c.Q6J("ngForOf",c.lcZ(13,1,r.subscribe)))},dependencies:[Ii,Rn,gd]}),n})();function n4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",18),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function r4(n,e){if(1&n&&(c.TgZ(0,"div",15)(1,"div",10)(2,"h4",16),c._uU(3),c.qZA(),c.YNc(4,n4,4,1,"ul",17),c.qZA()()),2&n){const t=c.oxw().$implicit;c.xp6(3),c.Oqu(t.title),c.xp6(1),c.Q6J("ngForOf",t.desc)}}function i4(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,r4,5,2,"div",14),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","Profile"==t.type)}}function s4(n,e){1&n&&c.GkF(0)}function o4(n,e){if(1&n&&(c.TgZ(0,"div")(1,"h4",24),c._uU(2),c.qZA(),c.TgZ(3,"a",25),c._UZ(4,"i",26),c.qZA()(),c.TgZ(5,"p",27),c._uU(6),c.TgZ(7,"em",28),c._uU(8),c.qZA()(),c.TgZ(9,"a",25),c._UZ(10,"i",29),c.qZA(),c.TgZ(11,"p",30),c._uU(12),c.ALo(13,"date"),c.ALo(14,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(2),c.Oqu(t.title),c.xp6(1),c.s9C("href",t.achievement_link,c.LSH),c.xp6(3),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.AsE("",c.xi3(13,7,t.start_date.toDate(),"MMM yyyy")," - ",c.xi3(14,10,t.end_date.toDate(),"MMM yyyy"),"")}}function a4(n,e){if(1&n&&(c.TgZ(0,"h4"),c._uU(1),c.qZA(),c.TgZ(2,"p",27),c._uU(3),c.TgZ(4,"em",28),c._uU(5),c.qZA()(),c.TgZ(6,"a",25),c._UZ(7,"i",29),c.qZA(),c.TgZ(8,"p",30),c._uU(9),c.ALo(10,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(t.title),c.xp6(2),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.hij("",c.xi3(10,5,t.start_date.toDate(),"MMM yyyy")," - Present")}}function l4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",18),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function u4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",31),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function c4(n,e){if(1&n&&(c.TgZ(0,"div",15)(1,"div",19),c.YNc(2,s4,1,0,"ng-container",20),c.YNc(3,o4,15,13,"ng-template",null,21,c.W1O),c.YNc(5,a4,11,8,"ng-template",null,22,c.W1O),c.TgZ(7,"p",23),c._uU(8,"Responsibilities:"),c.qZA(),c.YNc(9,l4,4,1,"ul",17),c.TgZ(10,"p",23),c._uU(11,"Key Achievements:"),c.qZA(),c.YNc(12,u4,4,1,"ul",17),c.qZA()()),2&n){const t=c.MAs(4),r=c.MAs(6),i=c.oxw().$implicit;c.xp6(2),c.Q6J("ngIf",i.current)("ngIfThen",r)("ngIfElse",t),c.xp6(7),c.Q6J("ngForOf",i.desc),c.xp6(3),c.Q6J("ngForOf",i.key_achievement)}}function d4(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,c4,13,5,"div",14),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","work"==t.type)}}function h4(n,e){1&n&&c.GkF(0)}function f4(n,e){if(1&n&&(c.TgZ(0,"h4"),c._uU(1),c.qZA(),c.TgZ(2,"p",27),c._uU(3),c.TgZ(4,"em",28),c._uU(5),c.qZA()(),c.TgZ(6,"a",25),c._UZ(7,"i",29),c.qZA(),c.TgZ(8,"p",30),c._uU(9),c.ALo(10,"date"),c.ALo(11,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(t.title),c.xp6(2),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.AsE("",c.xi3(10,6,t.start_date.toDate(),"MMM yyyy")," - ",c.xi3(11,9,t.end_date.toDate(),"MMM yyyy"),"")}}function p4(n,e){if(1&n&&(c.TgZ(0,"div")(1,"h4",24),c._uU(2),c.qZA(),c.TgZ(3,"a",25),c._UZ(4,"i",32),c.qZA()(),c.TgZ(5,"p",27),c._uU(6),c.TgZ(7,"em",28),c._uU(8),c.qZA()(),c.TgZ(9,"a",25),c._UZ(10,"i",29),c.qZA(),c.TgZ(11,"p",30),c._uU(12),c.ALo(13,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(2),c.Oqu(t.title),c.xp6(1),c.s9C("href",t.achievement_link,c.LSH),c.xp6(3),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.hij("",c.xi3(13,6,t.start_date.toDate(),"MMM yyyy")," - Present")}}function g4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",18),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function m4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",31),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function _4(n,e){if(1&n&&(c.TgZ(0,"div",15)(1,"div",19),c.YNc(2,h4,1,0,"ng-container",20),c.YNc(3,f4,12,12,"ng-template",null,22,c.W1O),c.YNc(5,p4,14,9,"ng-template",null,21,c.W1O),c.TgZ(7,"p",23),c._uU(8,"Responsibilities:"),c.qZA(),c.YNc(9,g4,4,1,"ul",17),c.TgZ(10,"p",23),c._uU(11,"Key Achievements:"),c.qZA(),c.YNc(12,m4,4,1,"ul",17),c.qZA()()),2&n){const t=c.MAs(4),r=c.MAs(6),i=c.oxw().$implicit;c.xp6(2),c.Q6J("ngIf",i.current)("ngIfThen",t)("ngIfElse",r),c.xp6(7),c.Q6J("ngForOf",i.desc),c.xp6(3),c.Q6J("ngForOf",i.key_achievement)}}function y4(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,_4,13,5,"div",14),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","Education"==t.type)}}function v4(n,e){1&n&&c.GkF(0)}function w4(n,e){if(1&n&&(c.TgZ(0,"h4"),c._uU(1),c.qZA(),c.TgZ(2,"p",27),c._uU(3),c.TgZ(4,"em",28),c._uU(5),c.qZA()(),c.TgZ(6,"p",30),c._uU(7),c.ALo(8,"date"),c.ALo(9,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(t.title),c.xp6(2),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(2),c.AsE("",c.xi3(8,5,t.start_date.toDate(),"MMM yyyy")," - ",c.xi3(9,8,t.end_date.toDate(),"MMM yyyy"),"")}}function E4(n,e){if(1&n&&(c.TgZ(0,"div")(1,"h4",24),c._uU(2),c.qZA(),c.TgZ(3,"a",25),c._UZ(4,"i",26),c._uU(5," Preview"),c.qZA()(),c.TgZ(6,"p",27),c._uU(7),c.TgZ(8,"em",28),c._uU(9),c.qZA()(),c.TgZ(10,"a",25),c._UZ(11,"i",29),c.qZA(),c.TgZ(12,"p",30),c._uU(13),c.ALo(14,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(2),c.Oqu(t.title),c.xp6(1),c.s9C("href",t.achievement_link,c.LSH),c.xp6(4),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.hij("",c.xi3(14,6,t.start_date.toDate(),"MMM yyyy")," - Present")}}function b4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",18),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function C4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",31),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function I4(n,e){if(1&n&&(c.TgZ(0,"div",15)(1,"div",19),c.YNc(2,v4,1,0,"ng-container",20),c.YNc(3,w4,10,11,"ng-template",null,22,c.W1O),c.YNc(5,E4,15,9,"ng-template",null,21,c.W1O),c.TgZ(7,"p",23),c._uU(8,"Project description:"),c.qZA(),c.YNc(9,b4,4,1,"ul",17),c.TgZ(10,"p",23),c._uU(11,"Achieved responsibilities:"),c.qZA(),c.YNc(12,C4,4,1,"ul",17),c.qZA()()),2&n){const t=c.MAs(4),r=c.MAs(6),i=c.oxw().$implicit;c.xp6(2),c.Q6J("ngIf",i.current)("ngIfThen",t)("ngIfElse",r),c.xp6(7),c.Q6J("ngForOf",i.desc),c.xp6(3),c.Q6J("ngForOf",i.key_achievement)}}function T4(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,I4,13,5,"div",14),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","project"==t.type)}}function D4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",31),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function S4(n,e){if(1&n&&(c.TgZ(0,"div",15)(1,"div",19)(2,"div")(3,"h4",24),c._uU(4),c.qZA(),c.TgZ(5,"a",25),c._UZ(6,"i",26),c.qZA()(),c.TgZ(7,"p",33),c._uU(8),c.qZA(),c.TgZ(9,"a",25),c._UZ(10,"i",29),c.qZA(),c.TgZ(11,"p",34),c._uU(12),c.ALo(13,"date"),c.qZA(),c.YNc(14,D4,4,1,"ul",17),c.qZA()()),2&n){const t=c.oxw().$implicit;c.xp6(4),c.Oqu(t.title),c.xp6(1),c.s9C("href",t.achievement_link,c.LSH),c.xp6(3),c.Oqu(t.org_name),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.Oqu(c.xi3(13,6,t.start_date.toDate(),"MMM yyyy")),c.xp6(2),c.Q6J("ngForOf",t.desc)}}function A4(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,S4,15,9,"div",14),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","award"==t.type)}}function x4(n,e){1&n&&c.GkF(0)}function M4(n,e){if(1&n&&(c.TgZ(0,"h4"),c._uU(1),c.qZA(),c.TgZ(2,"p",27),c._uU(3),c.TgZ(4,"em",28),c._uU(5),c.qZA()(),c.TgZ(6,"a",25),c._UZ(7,"i",29),c.qZA(),c.TgZ(8,"p",30),c._uU(9),c.ALo(10,"date"),c.ALo(11,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(t.title),c.xp6(2),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.AsE("",c.xi3(10,6,t.start_date.toDate(),"MMM yyyy")," - ",c.xi3(11,9,t.end_date.toDate(),"MMM yyyy"),"")}}function R4(n,e){if(1&n&&(c.TgZ(0,"div")(1,"h4",24),c._uU(2),c.qZA(),c.TgZ(3,"a",25),c._UZ(4,"i",32),c.qZA()(),c.TgZ(5,"p",27),c._uU(6),c.TgZ(7,"em",28),c._uU(8),c.qZA()(),c.TgZ(9,"a",25),c._UZ(10,"i",29),c.qZA(),c.TgZ(11,"p",30),c._uU(12),c.ALo(13,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(2),c.Oqu(t.title),c.xp6(1),c.s9C("href",t.achievement_link,c.LSH),c.xp6(3),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.hij("",c.xi3(13,6,t.start_date.toDate(),"MMM yyyy")," - Present")}}function N4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",31),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function P4(n,e){if(1&n&&(c.TgZ(0,"div",15)(1,"div",19),c.YNc(2,x4,1,0,"ng-container",20),c.YNc(3,M4,12,12,"ng-template",null,22,c.W1O),c.YNc(5,R4,14,9,"ng-template",null,21,c.W1O),c.TgZ(7,"p",23),c._uU(8,"Outcomes:"),c.qZA(),c.YNc(9,N4,4,1,"ul",17),c.qZA()()),2&n){const t=c.MAs(4),r=c.MAs(6),i=c.oxw().$implicit;c.xp6(2),c.Q6J("ngIf",i.current)("ngIfThen",t)("ngIfElse",r),c.xp6(7),c.Q6J("ngForOf",i.key_achievement)}}function k4(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,P4,10,4,"div",14),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","course"==t.type)}}function O4(n,e){1&n&&c.GkF(0)}function F4(n,e){if(1&n&&(c.TgZ(0,"div")(1,"h4",24),c._uU(2),c.qZA(),c.TgZ(3,"a",25),c._UZ(4,"i",26),c.qZA()(),c.TgZ(5,"p",27),c._uU(6),c.TgZ(7,"em",28),c._uU(8),c.qZA()(),c.TgZ(9,"a",25),c._UZ(10,"i",29),c.qZA(),c.TgZ(11,"p",30),c._uU(12),c.ALo(13,"date"),c.ALo(14,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(2),c.Oqu(t.title),c.xp6(1),c.s9C("href",t.achievement_link,c.LSH),c.xp6(3),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.AsE("",c.xi3(13,7,t.start_date.toDate(),"MMM yyyy")," - ",c.xi3(14,10,t.end_date.toDate(),"MMM yyyy"),"")}}function L4(n,e){if(1&n&&(c.TgZ(0,"h4"),c._uU(1),c.qZA(),c.TgZ(2,"p",27),c._uU(3),c.TgZ(4,"em",28),c._uU(5),c.qZA()(),c.TgZ(6,"a",25),c._UZ(7,"i",29),c.qZA(),c.TgZ(8,"p",30),c._uU(9),c.ALo(10,"date"),c.qZA()),2&n){const t=c.oxw(2).$implicit;c.xp6(1),c.Oqu(t.title),c.xp6(2),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(1),c.s9C("href",t.org_link,c.LSH),c.xp6(3),c.hij("",c.xi3(10,5,t.start_date.toDate(),"MMM yyyy")," - Present")}}function U4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",18),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function V4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",31),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function B4(n,e){if(1&n&&(c.TgZ(0,"div",15)(1,"div",19),c.YNc(2,O4,1,0,"ng-container",20),c.YNc(3,F4,15,13,"ng-template",null,21,c.W1O),c.YNc(5,L4,11,8,"ng-template",null,22,c.W1O),c.TgZ(7,"p",23),c._uU(8,"Responsibilities:"),c.qZA(),c.YNc(9,U4,4,1,"ul",17),c.TgZ(10,"p",23),c._uU(11,"Key Achievements:"),c.qZA(),c.YNc(12,V4,4,1,"ul",17),c.qZA()()),2&n){const t=c.MAs(4),r=c.MAs(6),i=c.oxw().$implicit;c.xp6(2),c.Q6J("ngIf",i.current)("ngIfThen",r)("ngIfElse",t),c.xp6(7),c.Q6J("ngForOf",i.desc),c.xp6(3),c.Q6J("ngForOf",i.key_achievement)}}function j4(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,B4,13,5,"div",14),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","additional"==t.type)}}function $4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",18),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function H4(n,e){if(1&n&&(c.TgZ(0,"ul")(1,"li"),c._UZ(2,"i",31),c._uU(3),c.qZA()()),2&n){const t=e.$implicit;c.xp6(3),c.hij(" ",t,"")}}function q4(n,e){if(1&n&&(c.TgZ(0,"div",15)(1,"div",19)(2,"h4"),c._uU(3),c.qZA(),c.TgZ(4,"p",35),c._uU(5),c.TgZ(6,"em",28),c._uU(7),c.qZA()(),c.TgZ(8,"p",30),c._uU(9),c.ALo(10,"date"),c.ALo(11,"date"),c.qZA(),c.TgZ(12,"p",23),c._uU(13,"Responsibilities:"),c.qZA(),c.YNc(14,$4,4,1,"ul",17),c.TgZ(15,"p",23),c._uU(16,"Key Achievements:"),c.qZA(),c.YNc(17,H4,4,1,"ul",17),c.qZA()()),2&n){const t=c.oxw().$implicit;c.xp6(3),c.Oqu(t.title),c.xp6(2),c.hij("",t.org_name,","),c.xp6(2),c.hij(" ",t.location,""),c.xp6(2),c.AsE("",c.xi3(10,7,t.start_date.toDate(),"MMM yyyy")," - ",c.xi3(11,10,t.end_date.toDate(),"MMM yyyy"),""),c.xp6(5),c.Q6J("ngForOf",t.desc),c.xp6(3),c.Q6J("ngForOf",t.key_achievement)}}function G4(n,e){if(1&n&&(c.TgZ(0,"div",13),c.YNc(1,q4,18,13,"div",14),c.qZA()),2&n){const t=e.$implicit;c.xp6(1),c.Q6J("ngIf","volunteer"==t.type)}}let W4=(()=>{class n{constructor(t){const r=HN(t,"resume");this.subscribe=$N(r)}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(F_))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-resume"]],decls:51,vars:24,consts:[[1,"resume","overflow-hidden"],["data-aos","fade-up",1,"container","p-9"],[1,"section-title"],[1,"relative","about","h-auto"],["href","https://firebasestorage.googleapis.com/v0/b/mayaramein-portfolio.appspot.com/o/main%2FMayar%20Mohsen.pdf?alt=media&token=d9fcc8d6-a1b7-4962-9001-b4f8367ed636","target","_black",1,"absolute","right-0","bg-primary-color","light-color","p-3","rounded-md"],[1,"fa-solid","fa-download"],["data-aos","fade-up",1,"container"],[1,"md:flex","items-center","gap-10"],[1,"col-lg-9","pt-4","pt-lg-0","content"],[1,"text-5xl","font-extrabold"],[1,"mb-3"],[1,"resume-title"],["class","row",4,"ngFor","ngForOf"],[1,"row"],["class","col-lg-6",4,"ngIf"],[1,"col-lg-6"],[1,"font-semibold","pb-3","primary-color"],[4,"ngFor","ngForOf"],[1,"fa-regular","fa-circle-check","primary-color"],[1,"resume-item","mb-3"],[4,"ngIf","ngIfThen","ngIfElse"],["Past",""],["Current",""],[1,"font-semibold"],[1,"inline"],["target","_blank",1,"primary-color","mx-3","p-1",3,"href"],[1,"fa-solid","fa-trophy"],[1,"inline","text-base","font-semibold"],[1,"text-sm"],[1,"fa-solid","fa-link"],[1,"mb-6","text-base"],[1,"fa-solid","fa-circle-check","primary-color"],[1,"fa-solid","fa-award"],[1,"text-base","font-semibold","inline"],[1,"mb-6","text-base","inline"],[1,"text-base","font-semibold"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"section",3)(4,"a",4),c._UZ(5,"i",5),c._uU(6," Download resume"),c.qZA(),c.TgZ(7,"div",6)(8,"div",7)(9,"div",8)(10,"h1",9),c._uU(11,"Mayar Mohsen Mohamed"),c.qZA(),c.TgZ(12,"h3",10),c._uU(13,"Software Engineer"),c.qZA()()()()()(),c.TgZ(14,"h3",11),c._uU(15,"Profile"),c.qZA(),c.YNc(16,i4,2,1,"div",12),c.ALo(17,"async"),c.TgZ(18,"h3",11),c._uU(19,"Work Experience"),c.qZA(),c.YNc(20,d4,2,1,"div",12),c.ALo(21,"async"),c.TgZ(22,"h3",11),c._uU(23,"Education"),c.qZA(),c.YNc(24,y4,2,1,"div",12),c.ALo(25,"async"),c.TgZ(26,"h3",11),c._uU(27,"Projects"),c.qZA(),c.YNc(28,T4,2,1,"div",12),c.ALo(29,"async"),c.TgZ(30,"h3",11),c._uU(31,"Awards"),c.qZA(),c.YNc(32,A4,2,1,"div",12),c.ALo(33,"async"),c.TgZ(34,"h3",11),c._uU(35,"Courses"),c.qZA(),c.YNc(36,k4,2,1,"div",12),c.ALo(37,"async"),c.TgZ(38,"h3",11),c._uU(39,"Addintional Information"),c.qZA(),c.YNc(40,j4,2,1,"div",12),c.ALo(41,"async"),c.TgZ(42,"h3",11),c._uU(43,"Extra-curricular Activities"),c.qZA(),c.YNc(44,G4,2,1,"div",12),c.ALo(45,"async"),c.TgZ(46,"h3",11),c._uU(47,"Refrences"),c.qZA(),c.TgZ(48,"h4"),c._uU(49,"References available upon request."),c.qZA()(),c._UZ(50,"app-footer"),c.qZA()),2&t&&(c.xp6(16),c.Q6J("ngForOf",c.lcZ(17,8,r.subscribe)),c.xp6(4),c.Q6J("ngForOf",c.lcZ(21,10,r.subscribe)),c.xp6(4),c.Q6J("ngForOf",c.lcZ(25,12,r.subscribe)),c.xp6(4),c.Q6J("ngForOf",c.lcZ(29,14,r.subscribe)),c.xp6(4),c.Q6J("ngForOf",c.lcZ(33,16,r.subscribe)),c.xp6(4),c.Q6J("ngForOf",c.lcZ(37,18,r.subscribe)),c.xp6(4),c.Q6J("ngForOf",c.lcZ(41,20,r.subscribe)),c.xp6(4),c.Q6J("ngForOf",c.lcZ(45,22,r.subscribe)))},dependencies:[Ii,Rn,mv,gd,md],styles:['@import"https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;500;700&display=swap";.resume[_ngcontent-%COMP%]   .resume-title[_ngcontent-%COMP%]{font-size:26px;font-weight:400;margin-top:20px;margin-bottom:20px;font-weight:700;color:#16161e;padding:20px 0 10px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]{padding:0 0 20px 20px;margin-top:-2px;border-left:2px solid #5333ed;position:relative}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{line-height:18px;font-size:18px;font-weight:600;color:#5333ed;margin-bottom:10px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{font-size:16px;background:#fff;padding:5px 15px;display:inline-block;font-weight:600;margin-bottom:10px;color:#5333ed}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:20px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]:last-child{padding-bottom:0}.resume[_ngcontent-%COMP%]   .resume-item[_ngcontent-%COMP%]:before{content:"";position:absolute;width:16px;height:16px;border-radius:50px;left:-9px;top:0;background:#fff;border:2px solid #ffc53b}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:700;font-size:26px;color:#5333ed}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-bottom:10px}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:20px;padding-right:2px;color:#5333ed}.about[_ngcontent-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}']}),n})(),RV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq))},n.\u0275dir=c.lG2({type:n}),n})(),Pf=(()=>{class n extends RV{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,features:[c.qOj]}),n})();const Ja=new c.OlP("NgValueAccessor"),K4={provide:Ja,useExisting:(0,c.Gpc)(()=>BD),multi:!0},Q4=new c.OlP("CompositionEventMode");let BD=(()=>{class n extends RV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Y4(){const n=L()?L().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(c.Qsj),c.Y36(c.SBq),c.Y36(Q4,8))},n.\u0275dir=c.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[c._Bn([K4]),c.qOj]}),n})();function Yc(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function PV(n){return null!=n&&"number"==typeof n.length}const vi=new c.OlP("NgValidators"),Qc=new c.OlP("NgAsyncValidators"),X4=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class kf{static min(e){return function kV(n){return e=>{if(Yc(e.value)||Yc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function OV(n){return e=>{if(Yc(e.value)||Yc(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function FV(n){return Yc(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function LV(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function UV(n){return Yc(n.value)||X4.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function VV(n){return e=>Yc(e.value)||!PV(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function BV(n){return e=>PV(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function jV(n){if(!n)return jD;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(Yc(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return ZV(e)}static composeAsync(e){return zV(e)}}function jD(n){return null}function $V(n){return null!=n}function HV(n){return(0,c.QGY)(n)?(0,Kt.D)(n):n}function qV(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function GV(n,e){return e.map(t=>t(n))}function WV(n){return n.map(e=>function ez(n){return!n.validate}(e)?e:t=>e.validate(t))}function ZV(n){if(!n)return null;const e=n.filter($V);return 0==e.length?null:function(t){return qV(GV(t,e))}}function GN(n){return null!=n?ZV(WV(n)):null}function zV(n){if(!n)return null;const e=n.filter($V);return 0==e.length?null:function(t){return function Z4(...n){const e=(0,Ai.jO)(n),{args:t,keys:r}=Go(n),i=new qn.y(s=>{const{length:u}=t;if(!u)return void s.complete();const h=new Array(u);let p=u,_=u;for(let b=0;b<u;b++){let T=!1;(0,Qs.Xf)(t[b]).subscribe((0,Ln.x)(s,S=>{T||(T=!0,_--),h[b]=S},()=>p--,void 0,()=>{(!p||!T)&&(_||s.next(r?Gd(r,h):h),s.complete())}))}});return e?i.pipe(Dp(e)):i}(GV(t,e).map(HV)).pipe((0,Je.U)(qV))}}function WN(n){return null!=n?zV(WV(n)):null}function KV(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function YV(n){return n._rawValidators}function QV(n){return n._rawAsyncValidators}function ZN(n){return n?Array.isArray(n)?n:[n]:[]}function $D(n,e){return Array.isArray(n)?n.includes(e):n===e}function JV(n,e){const t=ZN(e);return ZN(n).forEach(i=>{$D(t,i)||t.push(i)}),t}function XV(n,e){return ZN(e).filter(t=>!$D(n,t))}class eB{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=GN(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=WN(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Ui extends eB{get formDirective(){return null}get path(){return null}}class Jc extends eB{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class tB{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let nB=(()=>{class n extends tB{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Jc,2))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[c.qOj]}),n})(),rB=(()=>{class n extends tB{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Ui,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&c.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[c.qOj]}),n})();const aE="VALID",qD="INVALID",L_="PENDING",lE="DISABLED";function QN(n){return(GD(n)?n.validators:n)||null}function sB(n){return Array.isArray(n)?GN(n):n||null}function JN(n,e){return(GD(e)?e.asyncValidators:n)||null}function oB(n){return Array.isArray(n)?WN(n):n||null}function GD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function aB(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new c.vHH(1e3,"");if(!r[t])throw new c.vHH(1001,"")}function lB(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new c.vHH(1002,"")})}class WD{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=sB(this._rawValidators),this._composedAsyncValidatorFn=oB(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===aE}get invalid(){return this.status===qD}get pending(){return this.status==L_}get disabled(){return this.status===lE}get enabled(){return this.status!==lE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=sB(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=oB(e)}addValidators(e){this.setValidators(JV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(JV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(XV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(XV(e,this._rawAsyncValidators))}hasValidator(e){return $D(this._rawValidators,e)}hasAsyncValidator(e){return $D(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=L_,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=lE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=aE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===aE||this.status===L_)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?lE:aE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=L_,this._hasOwnPendingAsyncValidator=!0;const t=HV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new c.vpe,this.statusChanges=new c.vpe}_calculateStatus(){return this._allControlsDisabled()?lE:this.errors?qD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(L_)?L_:this._anyControlsHaveStatus(qD)?qD:aE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){GD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class uE extends WD{constructor(e,t,r){super(QN(t),JN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){lB(this,0,e),Object.keys(e).forEach(r=>{aB(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class uB extends uE{}function cE(n,e){XN(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function lz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&cB(n,e)})}(n,e),function cz(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function uz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&cB(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function az(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function zD(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),YD(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function KD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function XN(n,e){const t=YV(n);null!==e.validator?n.setValidators(KV(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=QV(n);null!==e.asyncValidator?n.setAsyncValidators(KV(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();KD(e._rawValidators,i),KD(e._rawAsyncValidators,i)}function YD(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=YV(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.validator);s.length!==i.length&&(t=!0,n.setValidators(s))}}if(null!==e.asyncValidator){const i=QV(n);if(Array.isArray(i)&&i.length>0){const s=i.filter(u=>u!==e.asyncValidator);s.length!==i.length&&(t=!0,n.setAsyncValidators(s))}}}const r=()=>{};return KD(e._rawValidators,r),KD(e._rawAsyncValidators,r),t}function cB(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function pB(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function gB(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const hE=class extends WD{constructor(e=null,t,r){super(QN(t),JN(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),GD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=gB(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){pB(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){pB(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){gB(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};let wB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=c.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const vz={provide:Ja,useExisting:(0,c.Gpc)(()=>rP),multi:!0};let rP=(()=>{class n extends Pf{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=c.n5z(n)))(r||n)}}(),n.\u0275dir=c.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&c.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[c._Bn([vz]),c.qOj]}),n})(),EB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})();const iP=new c.OlP("NgModelWithFormControlWarning"),Iz={provide:Ui,useExisting:(0,c.Gpc)(()=>QD)};let QD=(()=>{class n extends Ui{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new c.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(YD(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return cE(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){zD(t.control||null,t,!1),function pz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,function fB(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(zD(r||null,t),(n=>n instanceof hE)(i)&&(cE(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);(function dB(n,e){XN(n,e)})(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function dz(n,e){return YD(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){XN(this.form,this),this._oldForm&&YD(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(vi,10),c.Y36(Qc,10))},n.\u0275dir=c.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&c.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[c._Bn([Iz]),c.qOj,c.TTD]}),n})();const Sz={provide:Jc,useExisting:(0,c.Gpc)(()=>aP)};let aP=(()=>{class n extends Jc{constructor(t,r,i,s,u){super(),this._ngModelWarningConfig=u,this._added=!1,this.update=new c.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function tP(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===BD?t=s:function fz(n){return Object.getPrototypeOf(n.constructor)===Pf}(s)?r=s:i=s}),i||r||t||null}(0,s)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function eP(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return function ZD(n,e){return[...e.path,n]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(c.Y36(Ui,13),c.Y36(vi,10),c.Y36(Qc,10),c.Y36(Ja,10),c.Y36(iP,8))},n.\u0275dir=c.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[c._Bn([Sz]),c.qOj,c.TTD]}),n})(),LB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[EB]}),n})(),$z=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[LB]}),n})(),UB=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:iP,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[LB]}),n})();class VB extends WD{constructor(e,t,r){super(QN(t),JN(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){lB(this,0,e),e.forEach((r,i)=>{aB(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function BB(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Hz=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let s={};return BB(r)?s=r:null!==r&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new uE(i,s)}record(t,r=null){const i=this._reduceControls(t);return new uB(i,r)}control(t,r,i){let s={};return this.useNonNullable?(BB(r)?s=r:(s.validators=r,s.asyncValidators=i),new hE(t,{...s,nonNullable:!0})):new hE(t,r,i)}array(t,r,i){const s=t.map(u=>this._createControl(u));return new VB(s,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof hE||t instanceof WD?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:UB}),n})();function qz(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Name is required "),c.qZA())}function Gz(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Email is required "),c.qZA())}function Wz(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Email is required "),c.qZA())}function Zz(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Phone number is required "),c.qZA())}function zz(n,e){1&n&&(c.TgZ(0,"small"),c._uU(1," Message is required "),c.qZA())}const Kz=[{path:"",component:tx,children:[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",title:"Mayar Amein",component:z6},{path:"about",title:"Mayar Amein - About",component:j6},{path:"developer",title:"Mayar Amein - Developer",component:$6},{path:"freelancer",title:"Mayar Amein - Freelancer",component:H6},{path:"portfolio",title:"Mayar Amein - Portfolio",component:t4}]},{path:"contact",title:"Mayar Amein - Contact",component:(()=>{class n{constructor(t){this.fb=t}ngOnInit(){this.contactaddForm()}contactaddForm(){this.contactForm=this.fb.group({title:["",[kf.required,kf.minLength(2)]],message:["",[kf.required]],email:["",[kf.required,kf.pattern("^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+.[a-zA-Z0-9-.]+$")]],phone:["",[kf.required,kf.pattern("^[0-9]+$")]]})}get title(){return this.contactForm.get("title")}get message(){return this.contactForm.get("message")}get email(){return this.contactForm.get("email")}get phone(){return this.contactForm.get("phone")}ResetForm(){this.contactForm.reset()}submitContactData(){console.log(this.contactForm.value),this.ResetForm()}}return n.\u0275fac=function(t){return new(t||n)(c.Y36(Hz))},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-contactform"]],decls:68,vars:26,consts:[["id","contact",1,"w-screen","relative","z-10","overflow-hidden","py-20","lg:py-[30px]"],[1,"-mx-4","flex","flex-wrap"],[1,"w-full","px-4"],[1,"mx-auto","max-w-[400px]","text-center"],[1,"text-blackColor","mb-2","block","text-lg","font-semibold"],[1,"primary-color","mb-6","text-3xl","font-bold","sm:text-4xl","md:text-[40px]"],[1,"container","px-12","mx-auto"],[1,"flex","flex-wrap","lg:justify-between","items-center"],[1,"w-full","px-4","lg:w-2/3","xl:w-5/12"],[1,"mb-12","lg:mb-0"],[1,"mb-6","text-[32px]","font-bold","uppercase","sm:text-[40px]","lg:text-[36px]","xl:text-[40px]"],[1,"mb-8","flex","w-full","max-w-[370px]"],[1,"r-6","flex","h-[60px]","w-full","max-w-[60px]","items-center","justify-center","overflow-hidden","sm:h-[70px]","sm:max-w-[70px]"],[1,"primary-color","fa-solid","fa-envelope","text-xl"],[1,"w-full"],[1,"primary-color","mb-1","text-xl","font-bold"],["href","mailto: mayaramein@outlook.com",1,"text-body-color","text-base","hover:underline","hover:underline-offset-[8px]"],[1,"primary-color","fa-brands","fa-linkedin","text-2xl"],["href","https://www.linkedin.com/in/mayaramein/","target","_blank",1,"text-base","hover:underline","hover:underline-offset-[8px]"],[1,"primary-color","fa-brands","fa-whatsapp","text-2xl"],["href","https://wa.link/8fyewm","target","_blank",1,"text-base","hover:underline","hover:underline-offset-[8px]"],[1,"primary-color","text-xl","fa-brands","fa-facebook-messenger"],["href","https://www.facebook.com/mayaramein","target","_blank",1,"text-base","hover:underline","hover:underline-offset-[8px]"],[1,"w-full","mr-3","px-4","lg:w-1/3","xl:w-6/12"],[1,"relative","rounded-lg","bg-white","p-3","shadow-lg","sm:p-6"],["action","https://mailthis.to/mayaramein","method","POST","encType","multipart/form-data",1,"m-3",3,"formGroup","ngSubmit"],[1,"mb-3"],["placeholder","Name","type","text","formControlName","title","id","title","title","title",1,"form-control","p-2","text-body-color","border-[f0f0f0]","focus:border-primary","w-full","rounded","border","py-3","px-[14px]","text-base","outline-none","focus-visible:shadow-none"],[1,"",3,"hidden"],[4,"ngIf"],["placeholder","Email","type","text","formControlName","email","id","email","title","email",1,"form-control","p-2","text-body-color","border-[f0f0f0]","focus:border-primary","w-full","rounded","border","py-3","px-[14px]","text-base","outline-none","focus-visible:shadow-none"],["placeholder","Phone number","type","number","formControlName","phone","id","phone","title","message",1,"form-control","p-2","text-body-color","border-[f0f0f0]","focus:border-primary","w-full","rounded","border","py-3","px-[14px]","text-base","outline-none","focus-visible:shadow-none"],["placeholder","Message","formControlName","message","id","exampleFormControlTextarea1","title","message","rows","5","cols","45",1,"form-control","p-2","border","text-body-color","border-[f0f0f0]","focus:border-primary","w-full","resize-none","rounded","py-3","px-[14px]","text-base","outline-none","focus-visible:shadow-none"],["type","submit",1,"primary-color","font-bold","border-primary-color","w-full","rounded","p-3","hover:underline","hover:underline-offset-[8px]"]],template:function(t,r){1&t&&(c.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),c._uU(5," Contact "),c.qZA(),c.TgZ(6,"h2",5),c._uU(7," Have a Project ? "),c.qZA()()()(),c.TgZ(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9)(12,"h2",10),c._uU(13," Lets discuss your next success "),c.qZA(),c.TgZ(14,"div",11)(15,"div",12),c._UZ(16,"i",13),c.qZA(),c.TgZ(17,"div",14)(18,"h4",15),c._uU(19,"Email Address"),c.qZA(),c.TgZ(20,"a",16),c._uU(21," mayaramein@outlook.com "),c.qZA()()(),c.TgZ(22,"div",11)(23,"div",12),c._UZ(24,"i",17),c.qZA(),c.TgZ(25,"div",14)(26,"h4",15),c._uU(27,"LinkedIn"),c.qZA(),c.TgZ(28,"a",18),c._uU(29,"@mayaramein"),c.qZA()()(),c.TgZ(30,"div",11)(31,"div",12),c._UZ(32,"i",19),c.qZA(),c.TgZ(33,"div",14)(34,"h4",15),c._uU(35,"Phone Number"),c.qZA(),c.TgZ(36,"a",20),c._uU(37," [+20] 102 954 5294 "),c.qZA()()(),c.TgZ(38,"div",11)(39,"div",12),c._UZ(40,"i",21),c.qZA(),c.TgZ(41,"div",14)(42,"h4",15),c._uU(43,"Massenger"),c.qZA(),c.TgZ(44,"a",22),c._uU(45,"m.me/mayaramein"),c.qZA()()()()(),c.TgZ(46,"div",23)(47,"div",24)(48,"form",25),c.NdJ("ngSubmit",function(){return r.submitContactData()}),c.TgZ(49,"div",26),c._UZ(50,"input",27),c.TgZ(51,"div",28),c.YNc(52,qz,2,0,"small",29),c.qZA()(),c.TgZ(53,"div",26),c._UZ(54,"input",30),c.TgZ(55,"div",28),c.YNc(56,Gz,2,0,"small",29),c.YNc(57,Wz,2,0,"small",29),c.qZA()(),c.TgZ(58,"div",26),c._UZ(59,"input",31),c.TgZ(60,"div",28),c.YNc(61,Zz,2,0,"small",29),c.qZA()(),c.TgZ(62,"div",26),c._UZ(63,"textarea",32),c.TgZ(64,"div",28),c.YNc(65,zz,2,0,"small",29),c.qZA()(),c.TgZ(66,"button",33),c._uU(67,"Let's Talk"),c.qZA()()()()()()()),2&t&&(c.xp6(48),c.Q6J("formGroup",r.contactForm),c.xp6(2),c.ekj("is-invalid",null==r.title?null:r.title.invalid)("is-valid",null==r.title?null:r.title.valid),c.xp6(1),c.Q6J("hidden",(null==r.title?null:r.title.valid)||(null==r.title?null:r.title.untouched)),c.xp6(1),c.Q6J("ngIf",null==r.title||null==r.title.errors?null:r.title.errors.required),c.xp6(2),c.ekj("is-invalid",null==r.email?null:r.email.invalid)("is-valid",null==r.email?null:r.email.valid),c.xp6(1),c.Q6J("hidden",(null==r.email?null:r.email.valid)||(null==r.email?null:r.email.untouched)),c.xp6(1),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.required),c.xp6(1),c.Q6J("ngIf",null==r.email||null==r.email.errors?null:r.email.errors.email),c.xp6(2),c.ekj("is-invalid",null==r.phone?null:r.phone.invalid)("is-valid",null==r.phone?null:r.phone.valid),c.xp6(1),c.Q6J("hidden",(null==r.phone?null:r.phone.valid)||(null==r.phone?null:r.phone.untouched)),c.xp6(1),c.Q6J("ngIf",null==r.phone||null==r.phone.errors?null:r.phone.errors.required),c.xp6(2),c.ekj("is-invalid",null==r.message?null:r.message.invalid)("is-valid",null==r.message?null:r.message.valid),c.xp6(1),c.Q6J("hidden",(null==r.message?null:r.message.valid)||(null==r.message?null:r.message.untouched)),c.xp6(1),c.Q6J("ngIf",null==r.message||null==r.message.errors?null:r.message.errors.required))},dependencies:[Rn,wB,BD,rP,nB,rB,QD,aP]}),n})()},{path:"resume",title:"Mayar Amein - Resume",component:W4},{path:"**",title:"Mayar Amein - Not Found 404",component:nx}];let Yz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[pv.forRoot(Kz),pv]}),n})(),Qz=(()=>{class n{constructor(){this.title="mayaramein-portfolio"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=c.Xpm({type:n,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"overflow-hidden"]],template:function(t,r){1&t&&(c.TgZ(0,"div",0),c._UZ(1,"router-outlet"),c.qZA())},dependencies:[Aa]}),n})(),Jz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({imports:[up,pv]}),n})();class jB{}const mu="*";function $B(n,e=null){return{type:2,steps:n,options:e}}function HB(n){return{type:6,styles:n,offset:null}}function qB(n){Promise.resolve().then(n)}class fE{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){qB(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class GB{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,r=0,i=0;const s=this.players.length;0==s?qB(()=>this._onFinish()):this.players.forEach(u=>{u.onDone(()=>{++t==s&&this._onFinish()}),u.onDestroy(()=>{++r==s&&this._onDestroy()}),u.onStart(()=>{++i==s&&this._onStart()})}),this.totalTime=this.players.reduce((u,h)=>Math.max(u,h.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(r=>{const i=r.totalTime?Math.min(1,t/r.totalTime):1;r.setPosition(i)})}getPosition(){const e=this.players.reduce((t,r)=>null===t||r.totalTime>t.totalTime?r:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}function WB(n){return new c.vHH(3e3,!1)}function k5(){return typeof window<"u"&&typeof window.document<"u"}function hP(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Xc(n){switch(n.length){case 0:return new fE;case 1:return n[0];default:return new GB(n)}}function ZB(n,e,t,r,i=new Map,s=new Map){const u=[],h=[];let p=-1,_=null;if(r.forEach(b=>{const T=b.get("offset"),S=T==p,N=S&&_||new Map;b.forEach((O,W)=>{let J=W,Me=O;if("offset"!==W)switch(J=e.normalizePropertyName(J,u),Me){case"!":Me=i.get(W);break;case mu:Me=s.get(W);break;default:Me=e.normalizeStyleValue(W,J,Me,u)}N.set(J,Me)}),S||h.push(N),_=N,p=T}),u.length)throw function b5(n){return new c.vHH(3502,!1)}();return h}function fP(n,e,t,r){switch(e){case"start":n.onStart(()=>r(t&&pP(t,"start",n)));break;case"done":n.onDone(()=>r(t&&pP(t,"done",n)));break;case"destroy":n.onDestroy(()=>r(t&&pP(t,"destroy",n)))}}function pP(n,e,t){const s=gP(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,t.totalTime??n.totalTime,!!t.disabled),u=n._data;return null!=u&&(s._data=u),s}function gP(n,e,t,r,i="",s=0,u){return{element:n,triggerName:e,fromState:t,toState:r,phaseName:i,totalTime:s,disabled:!!u}}function ks(n,e,t){let r=n.get(e);return r||n.set(e,r=t),r}function zB(n){const e=n.indexOf(":");return[n.substring(1,e),n.slice(e+1)]}let mP=(n,e)=>!1,KB=(n,e,t)=>[],YB=null;function _P(n){const e=n.parentNode||n.host;return e===YB?null:e}(hP()||typeof Element<"u")&&(k5()?(YB=(()=>document.documentElement)(),mP=(n,e)=>{for(;e;){if(e===n)return!0;e=_P(e)}return!1}):mP=(n,e)=>n.contains(e),KB=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const r=n.querySelector(e);return r?[r]:[]});let Ff=null,QB=!1;const JB=mP,XB=KB;let ej=(()=>{class n{validateStyleProperty(t){return function F5(n){Ff||(Ff=function L5(){return typeof document<"u"?document.body:null}()||{},QB=!!Ff.style&&"WebkitAppearance"in Ff.style);let e=!0;return Ff.style&&!function O5(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in Ff.style,!e&&QB&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Ff.style)),e}(t)}matchesElement(t,r){return!1}containsElement(t,r){return JB(t,r)}getParentElement(t){return _P(t)}query(t,r,i){return XB(t,r,i)}computeStyle(t,r,i){return i||""}animate(t,r,i,s,u,h=[],p){return new fE(i,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})(),yP=(()=>{class n{}return n.NOOP=new ej,n})();const vP="ng-enter",JD="ng-leave",XD="ng-trigger",eS=".ng-trigger",nj="ng-animating",wP=".ng-animating";function _u(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:EP(parseFloat(e[1]),e[2])}function EP(n,e){return"s"===e?1e3*n:n}function tS(n,e,t){return n.hasOwnProperty("duration")?n:function B5(n,e,t){let i,s=0,u="";if("string"==typeof n){const h=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===h)return e.push(WB()),{duration:0,delay:0,easing:""};i=EP(parseFloat(h[1]),h[2]);const p=h[3];null!=p&&(s=EP(parseFloat(p),h[4]));const _=h[5];_&&(u=_)}else i=n;if(!t){let h=!1,p=e.length;i<0&&(e.push(function e5(){return new c.vHH(3100,!1)}()),h=!0),s<0&&(e.push(function t5(){return new c.vHH(3101,!1)}()),h=!0),h&&e.splice(p,0,WB())}return{duration:i,delay:s,easing:u}}(n,e,t)}function pE(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function rj(n){const e=new Map;return Object.keys(n).forEach(t=>{e.set(t,n[t])}),e}function ed(n,e=new Map,t){if(t)for(let[r,i]of t)e.set(r,i);for(let[r,i]of n)e.set(r,i);return e}function sj(n,e,t){return t?e+":"+t+";":""}function oj(n){let e="";for(let t=0;t<n.style.length;t++){const r=n.style.item(t);e+=sj(0,r,n.style.getPropertyValue(r))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=sj(0,q5(t),n.style[t]));n.setAttribute("style",e)}function Xa(n,e,t){n.style&&(e.forEach((r,i)=>{const s=CP(i);t&&!t.has(i)&&t.set(i,n.style[s]),n.style[s]=r}),hP()&&oj(n))}function Lf(n,e){n.style&&(e.forEach((t,r)=>{const i=CP(r);n.style[i]=""}),hP()&&oj(n))}function gE(n){return Array.isArray(n)?1==n.length?n[0]:$B(n):n}const bP=new RegExp("{{\\s*(.+?)\\s*}}","g");function aj(n){let e=[];if("string"==typeof n){let t;for(;t=bP.exec(n);)e.push(t[1]);bP.lastIndex=0}return e}function mE(n,e,t){const r=n.toString(),i=r.replace(bP,(s,u)=>{let h=e[u];return null==h&&(t.push(function r5(n){return new c.vHH(3003,!1)}()),h=""),h.toString()});return i==r?n:i}function nS(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const H5=/-+([a-z0-9])/g;function CP(n){return n.replace(H5,(...e)=>e[1].toUpperCase())}function q5(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Os(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function i5(n){return new c.vHH(3004,!1)}()}}function lj(n,e){return window.getComputedStyle(n)[e]}function Y5(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(r=>function Q5(n,e,t){if(":"==n[0]){const p=function J5(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,r)=>parseFloat(r)>parseFloat(t);case":decrement":return(t,r)=>parseFloat(r)<parseFloat(t);default:return e.push(function y5(n){return new c.vHH(3016,!1)}()),"* => *"}}(n,t);if("function"==typeof p)return void e.push(p);n=p}const r=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==r||r.length<4)return t.push(function _5(n){return new c.vHH(3015,!1)}()),e;const i=r[1],s=r[2],u=r[3];e.push(uj(i,u));"<"==s[0]&&!("*"==i&&"*"==u)&&e.push(uj(u,i))}(r,t,e)):t.push(n),t}const oS=new Set(["true","1"]),aS=new Set(["false","0"]);function uj(n,e){const t=oS.has(n)||aS.has(n),r=oS.has(e)||aS.has(e);return(i,s)=>{let u="*"==n||n==i,h="*"==e||e==s;return!u&&t&&"boolean"==typeof i&&(u=i?oS.has(n):aS.has(n)),!h&&r&&"boolean"==typeof s&&(h=s?oS.has(e):aS.has(e)),u&&h}}const X5=new RegExp("s*:selfs*,?","g");function IP(n,e,t,r){return new e8(n).build(e,t,r)}class e8{constructor(e){this._driver=e}build(e,t,r){const i=new r8(t);return this._resetContextStyleTimingState(i),Os(this,gE(e),i)}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles=new Map,e.collectedStyles.set("",new Map),e.currentTime=0}visitTrigger(e,t){let r=t.queryCount=0,i=t.depCount=0;const s=[],u=[];return"@"==e.name.charAt(0)&&t.errors.push(function o5(){return new c.vHH(3006,!1)}()),e.definitions.forEach(h=>{if(this._resetContextStyleTimingState(t),0==h.type){const p=h,_=p.name;_.toString().split(/\s*,\s*/).forEach(b=>{p.name=b,s.push(this.visitState(p,t))}),p.name=_}else if(1==h.type){const p=this.visitTransition(h,t);r+=p.queryCount,i+=p.depCount,u.push(p)}else t.errors.push(function a5(){return new c.vHH(3007,!1)}())}),{type:7,name:e.name,states:s,transitions:u,queryCount:r,depCount:i,options:null}}visitState(e,t){const r=this.visitStyle(e.styles,t),i=e.options&&e.options.params||null;if(r.containsDynamicStyles){const s=new Set,u=i||{};r.styles.forEach(h=>{h instanceof Map&&h.forEach(p=>{aj(p).forEach(_=>{u.hasOwnProperty(_)||s.add(_)})})}),s.size&&(nS(s.values()),t.errors.push(function l5(n,e){return new c.vHH(3008,!1)}()))}return{type:0,name:e.name,style:r,options:i?{params:i}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const r=Os(this,gE(e.animation),t);return{type:1,matchers:Y5(e.expr,t.errors),animation:r,queryCount:t.queryCount,depCount:t.depCount,options:Uf(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(r=>Os(this,r,t)),options:Uf(e.options)}}visitGroup(e,t){const r=t.currentTime;let i=0;const s=e.steps.map(u=>{t.currentTime=r;const h=Os(this,u,t);return i=Math.max(i,t.currentTime),h});return t.currentTime=i,{type:3,steps:s,options:Uf(e.options)}}visitAnimate(e,t){const r=function s8(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return TP(tS(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=TP(0,0,"");return s.dynamic=!0,s.strValue=t,s}const i=tS(t,e);return TP(i.duration,i.delay,i.easing)}(e.timings,t.errors);t.currentAnimateTimings=r;let i,s=e.styles?e.styles:HB({});if(5==s.type)i=this.visitKeyframes(s,t);else{let u=e.styles,h=!1;if(!u){h=!0;const _={};r.easing&&(_.easing=r.easing),u=HB(_)}t.currentTime+=r.duration+r.delay;const p=this.visitStyle(u,t);p.isEmptyStep=h,i=p}return t.currentAnimateTimings=null,{type:4,timings:r,style:i,options:null}}visitStyle(e,t){const r=this._makeStyleAst(e,t);return this._validateStyleAst(r,t),r}_makeStyleAst(e,t){const r=[],i=Array.isArray(e.styles)?e.styles:[e.styles];for(let h of i)"string"==typeof h?h===mu?r.push(h):t.errors.push(new c.vHH(3002,!1)):r.push(rj(h));let s=!1,u=null;return r.forEach(h=>{if(h instanceof Map&&(h.has("easing")&&(u=h.get("easing"),h.delete("easing")),!s))for(let p of h.values())if(p.toString().indexOf("{{")>=0){s=!0;break}}),{type:6,styles:r,easing:u,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){const r=t.currentAnimateTimings;let i=t.currentTime,s=t.currentTime;r&&s>0&&(s-=r.duration+r.delay),e.styles.forEach(u=>{"string"!=typeof u&&u.forEach((h,p)=>{const _=t.collectedStyles.get(t.currentQuerySelector),b=_.get(p);let T=!0;b&&(s!=i&&s>=b.startTime&&i<=b.endTime&&(t.errors.push(function c5(n,e,t,r,i){return new c.vHH(3010,!1)}()),T=!1),s=b.startTime),T&&_.set(p,{startTime:s,endTime:i}),t.options&&function $5(n,e,t){const r=e.params||{},i=aj(n);i.length&&i.forEach(s=>{r.hasOwnProperty(s)||t.push(function n5(n){return new c.vHH(3001,!1)}())})}(h,t.options,t.errors)})})}visitKeyframes(e,t){const r={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function d5(){return new c.vHH(3011,!1)}()),r;let s=0;const u=[];let h=!1,p=!1,_=0;const b=e.steps.map(Me=>{const Be=this._makeStyleAst(Me,t);let Ue=null!=Be.offset?Be.offset:function i8(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){const r=t;e=parseFloat(r.get("offset")),r.delete("offset")}});else if(n instanceof Map&&n.has("offset")){const t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}(Be.styles),Ve=0;return null!=Ue&&(s++,Ve=Be.offset=Ue),p=p||Ve<0||Ve>1,h=h||Ve<_,_=Ve,u.push(Ve),Be});p&&t.errors.push(function h5(){return new c.vHH(3012,!1)}()),h&&t.errors.push(function f5(){return new c.vHH(3200,!1)}());const T=e.steps.length;let S=0;s>0&&s<T?t.errors.push(function p5(){return new c.vHH(3202,!1)}()):0==s&&(S=1/(T-1));const N=T-1,O=t.currentTime,W=t.currentAnimateTimings,J=W.duration;return b.forEach((Me,Be)=>{const Ue=S>0?Be==N?1:S*Be:u[Be],Ve=Ue*J;t.currentTime=O+W.delay+Ve,W.duration=Ve,this._validateStyleAst(Me,t),Me.offset=Ue,r.styles.push(Me)}),r}visitReference(e,t){return{type:8,animation:Os(this,gE(e.animation),t),options:Uf(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:Uf(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:Uf(e.options)}}visitQuery(e,t){const r=t.currentQuerySelector,i=e.options||{};t.queryCount++,t.currentQuery=e;const[s,u]=function t8(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(X5,"")),n=n.replace(/@\*/g,eS).replace(/@\w+/g,t=>eS+"-"+t.slice(1)).replace(/:animating/g,wP),[n,e]}(e.selector);t.currentQuerySelector=r.length?r+" "+s:s,ks(t.collectedStyles,t.currentQuerySelector,new Map);const h=Os(this,gE(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=r,{type:11,selector:s,limit:i.limit||0,optional:!!i.optional,includeSelf:u,animation:h,originalSelector:e.selector,options:Uf(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function g5(){return new c.vHH(3013,!1)}());const r="full"===e.timings?{duration:0,delay:0,easing:"full"}:tS(e.timings,t.errors,!0);return{type:12,animation:Os(this,gE(e.animation),t),timings:r,options:null}}}class r8{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Uf(n){return n?(n=pE(n)).params&&(n.params=function n8(n){return n?pE(n):null}(n.params)):n={},n}function TP(n,e,t){return{duration:n,delay:e,easing:t}}function DP(n,e,t,r,i,s,u=null,h=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:r,duration:i,delay:s,totalTime:i+s,easing:u,subTimeline:h}}class lS{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let r=this._map.get(e);r||this._map.set(e,r=[]),r.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const l8=new RegExp(":enter","g"),c8=new RegExp(":leave","g");function SP(n,e,t,r,i,s=new Map,u=new Map,h,p,_=[]){return(new d8).buildKeyframes(n,e,t,r,i,s,u,h,p,_)}class d8{buildKeyframes(e,t,r,i,s,u,h,p,_,b=[]){_=_||new lS;const T=new AP(e,t,_,i,s,b,[]);T.options=p;const S=p.delay?_u(p.delay):0;T.currentTimeline.delayNextStep(S),T.currentTimeline.setStyles([u],null,T.errors,p),Os(this,r,T);const N=T.timelines.filter(O=>O.containsAnimation());if(N.length&&h.size){let O;for(let W=N.length-1;W>=0;W--){const J=N[W];if(J.element===t){O=J;break}}O&&!O.allowOnlyTimelineStyles()&&O.setStyles([h],null,T.errors,p)}return N.length?N.map(O=>O.buildKeyframes()):[DP(t,[],[],[],0,S,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const r=t.subInstructions.get(t.element);if(r){const i=t.createSubContext(e.options),s=t.currentTimeline.currentTime,u=this._visitSubInstructions(r,i,i.options);s!=u&&t.transformIntoNewTimeline(u)}t.previousNode=e}visitAnimateRef(e,t){const r=t.createSubContext(e.options);r.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,r),this.visitReference(e.animation,r),t.transformIntoNewTimeline(r.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,r){for(const i of e){const s=i?.delay;if(s){const u="number"==typeof s?s:_u(mE(s,i?.params??{},t.errors));r.delayNextStep(u)}}}_visitSubInstructions(e,t,r){let s=t.currentTimeline.currentTime;const u=null!=r.duration?_u(r.duration):null,h=null!=r.delay?_u(r.delay):null;return 0!==u&&e.forEach(p=>{const _=t.appendInstructionToTimeline(p,u,h);s=Math.max(s,_.duration+_.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Os(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const r=t.subContextCount;let i=t;const s=e.options;if(s&&(s.params||s.delay)&&(i=t.createSubContext(s),i.transformIntoNewTimeline(),null!=s.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=uS);const u=_u(s.delay);i.delayNextStep(u)}e.steps.length&&(e.steps.forEach(u=>Os(this,u,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>r&&i.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const r=[];let i=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?_u(e.options.delay):0;e.steps.forEach(u=>{const h=t.createSubContext(e.options);s&&h.delayNextStep(s),Os(this,u,h),i=Math.max(i,h.currentTimeline.currentTime),r.push(h.currentTimeline)}),r.forEach(u=>t.currentTimeline.mergeTimelineCollectedStyles(u)),t.transformIntoNewTimeline(i),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const r=e.strValue;return tS(t.params?mE(r,t.params,t.errors):r,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const r=t.currentAnimateTimings=this._visitTiming(e.timings,t),i=t.currentTimeline;r.delay&&(t.incrementTime(r.delay),i.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(r.duration),this.visitStyle(s,t),i.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const r=t.currentTimeline,i=t.currentAnimateTimings;!i&&r.hasCurrentStyleProperties()&&r.forwardFrame();const s=i&&i.easing||e.easing;e.isEmptyStep?r.applyEmptyStep(s):r.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const r=t.currentAnimateTimings,i=t.currentTimeline.duration,s=r.duration,h=t.createSubContext().currentTimeline;h.easing=r.easing,e.styles.forEach(p=>{h.forwardTime((p.offset||0)*s),h.setStyles(p.styles,p.easing,t.errors,t.options),h.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(h),t.transformIntoNewTimeline(i+s),t.previousNode=e}visitQuery(e,t){const r=t.currentTimeline.currentTime,i=e.options||{},s=i.delay?_u(i.delay):0;s&&(6===t.previousNode.type||0==r&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=uS);let u=r;const h=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!i.optional,t.errors);t.currentQueryTotal=h.length;let p=null;h.forEach((_,b)=>{t.currentQueryIndex=b;const T=t.createSubContext(e.options,_);s&&T.delayNextStep(s),_===t.element&&(p=T.currentTimeline),Os(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),u=Math.max(u,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(u),p&&(t.currentTimeline.mergeTimelineCollectedStyles(p),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const r=t.parentContext,i=t.currentTimeline,s=e.timings,u=Math.abs(s.duration),h=u*(t.currentQueryTotal-1);let p=u*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":p=h-p;break;case"full":p=r.currentStaggerTime}const b=t.currentTimeline;p&&b.delayNextStep(p);const T=b.currentTime;Os(this,e.animation,t),t.previousNode=e,r.currentStaggerTime=i.currentTime-T+(i.startTime-r.currentTimeline.startTime)}}const uS={};class AP{constructor(e,t,r,i,s,u,h,p){this._driver=e,this.element=t,this.subInstructions=r,this._enterClassName=i,this._leaveClassName=s,this.errors=u,this.timelines=h,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=uS,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=p||new cS(this._driver,t,0),h.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const r=e;let i=this.options;null!=r.duration&&(i.duration=_u(r.duration)),null!=r.delay&&(i.delay=_u(r.delay));const s=r.params;if(s){let u=i.params;u||(u=this.options.params={}),Object.keys(s).forEach(h=>{(!t||!u.hasOwnProperty(h))&&(u[h]=mE(s[h],u,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const r=e.params={};Object.keys(t).forEach(i=>{r[i]=t[i]})}}return e}createSubContext(e=null,t,r){const i=t||this.element,s=new AP(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,r||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=uS,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,r){const i={duration:t??e.duration,delay:this.currentTimeline.currentTime+(r??0)+e.delay,easing:""},s=new h8(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,i,e.stretchStartingKeyframe);return this.timelines.push(s),i}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,r,i,s,u){let h=[];if(i&&h.push(this.element),e.length>0){e=(e=e.replace(l8,"."+this._enterClassName)).replace(c8,"."+this._leaveClassName);let _=this._driver.query(this.element,e,1!=r);0!==r&&(_=r<0?_.slice(_.length+r,_.length):_.slice(0,r)),h.push(..._)}return!s&&0==h.length&&u.push(function m5(n){return new c.vHH(3014,!1)}()),h}}class cS{constructor(e,t,r,i){this._driver=e,this.element=t,this.startTime=r,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1===this._keyframes.size&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new cS(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,r]of this._globalTimelineStyles)this._backFill.set(t,r||mu),this._currentKeyframe.set(t,mu);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,r,i){t&&this._previousKeyframe.set("easing",t);const s=i&&i.params||{},u=function f8(n,e){const t=new Map;let r;return n.forEach(i=>{if("*"===i){r=r||e.keys();for(let s of r)t.set(s,mu)}else ed(i,t)}),t}(e,this._globalTimelineStyles);for(let[h,p]of u){const _=mE(p,s,r);this._pendingStyles.set(h,_),this._localTimelineStyles.has(h)||this._backFill.set(h,this._globalTimelineStyles.get(h)??mu),this._updateStyle(h,_)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,r)=>{const i=this._styleSummary.get(r);(!i||t.time>i.time)&&this._updateStyle(r,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,r=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((h,p)=>{const _=ed(h,new Map,this._backFill);_.forEach((b,T)=>{"!"===b?e.add(T):b===mu&&t.add(T)}),r||_.set("offset",p/this.duration),i.push(_)});const s=e.size?nS(e.values()):[],u=t.size?nS(t.values()):[];if(r){const h=i[0],p=new Map(h);h.set("offset",0),p.set("offset",1),i=[h,p]}return DP(this.element,i,s,u,this.duration,this.startTime,this.easing,!1)}}class h8 extends cS{constructor(e,t,r,i,s,u,h=!1){super(e,t,u.delay),this.keyframes=r,this.preStyleProps=i,this.postStyleProps=s,this._stretchStartingKeyframe=h,this.timings={duration:u.duration,delay:u.delay,easing:u.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:r,easing:i}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],u=r+t,h=t/u,p=ed(e[0]);p.set("offset",0),s.push(p);const _=ed(e[0]);_.set("offset",hj(h)),s.push(_);const b=e.length-1;for(let T=1;T<=b;T++){let S=ed(e[T]);const N=S.get("offset");S.set("offset",hj((t+N*r)/u)),s.push(S)}r=u,t=0,i="",e=s}return DP(this.element,e,this.preStyleProps,this.postStyleProps,r,t,i,!0)}}function hj(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class xP{}const p8=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class g8 extends xP{normalizePropertyName(e,t){return CP(e)}normalizeStyleValue(e,t,r,i){let s="";const u=r.toString().trim();if(p8.has(t)&&0!==r&&"0"!==r)if("number"==typeof r)s="px";else{const h=r.match(/^[+-]?[\d\.]+([a-z]*)$/);h&&0==h[1].length&&i.push(function s5(n,e){return new c.vHH(3005,!1)}())}return u+s}}function fj(n,e,t,r,i,s,u,h,p,_,b,T,S){return{type:0,element:n,triggerName:e,isRemovalTransition:i,fromState:t,fromStyles:s,toState:r,toStyles:u,timelines:h,queriedElements:p,preStyleProps:_,postStyleProps:b,totalTime:T,errors:S}}const MP={};class pj{constructor(e,t,r){this._triggerName=e,this.ast=t,this._stateStyles=r}match(e,t,r,i){return function m8(n,e,t,r,i){return n.some(s=>s(e,t,r,i))}(this.ast.matchers,e,t,r,i)}buildStyles(e,t,r){let i=this._stateStyles.get("*");return void 0!==e&&(i=this._stateStyles.get(e?.toString())||i),i?i.buildStyles(t,r):new Map}build(e,t,r,i,s,u,h,p,_,b){const T=[],S=this.ast.options&&this.ast.options.params||MP,O=this.buildStyles(r,h&&h.params||MP,T),W=p&&p.params||MP,J=this.buildStyles(i,W,T),Me=new Set,Be=new Map,Ue=new Map,Ve="void"===i,rt={params:_8(W,S),delay:this.ast.options?.delay},dt=b?[]:SP(e,t,this.ast.animation,s,u,O,J,rt,_,T);let Wt=0;if(dt.forEach(Vs=>{Wt=Math.max(Vs.duration+Vs.delay,Wt)}),T.length)return fj(t,this._triggerName,r,i,Ve,O,J,[],[],Be,Ue,Wt,T);dt.forEach(Vs=>{const bu=Vs.element,tq=ks(Be,bu,new Set);Vs.preStyleProps.forEach(ep=>tq.add(ep));const eb=ks(Ue,bu,new Set);Vs.postStyleProps.forEach(ep=>eb.add(ep)),bu!==t&&Me.add(bu)});const yr=nS(Me.values());return fj(t,this._triggerName,r,i,Ve,O,J,dt,yr,Be,Ue,Wt)}}function _8(n,e){const t=pE(e);for(const r in n)n.hasOwnProperty(r)&&null!=n[r]&&(t[r]=n[r]);return t}class y8{constructor(e,t,r){this.styles=e,this.defaultParams=t,this.normalizer=r}buildStyles(e,t){const r=new Map,i=pE(this.defaultParams);return Object.keys(e).forEach(s=>{const u=e[s];null!==u&&(i[s]=u)}),this.styles.styles.forEach(s=>{"string"!=typeof s&&s.forEach((u,h)=>{u&&(u=mE(u,i,t));const p=this.normalizer.normalizePropertyName(h,t);u=this.normalizer.normalizeStyleValue(h,p,u,t),r.set(p,u)})}),r}}class w8{constructor(e,t,r){this.name=e,this.ast=t,this._normalizer=r,this.transitionFactories=[],this.states=new Map,t.states.forEach(i=>{this.states.set(i.name,new y8(i.style,i.options&&i.options.params||{},r))}),gj(this.states,"true","1"),gj(this.states,"false","0"),t.transitions.forEach(i=>{this.transitionFactories.push(new pj(e,i,this.states))}),this.fallbackTransition=function E8(n,e,t){return new pj(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(u,h)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,r,i){return this.transitionFactories.find(u=>u.match(e,t,r,i))||null}matchStyles(e,t,r){return this.fallbackTransition.buildStyles(e,t,r)}}function gj(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}const b8=new lS;class C8{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._animations=new Map,this._playersById=new Map,this.players=[]}register(e,t){const r=[],s=IP(this._driver,t,r,[]);if(r.length)throw function C5(n){return new c.vHH(3503,!1)}();this._animations.set(e,s)}_buildPlayer(e,t,r){const i=e.element,s=ZB(0,this._normalizer,0,e.keyframes,t,r);return this._driver.animate(i,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,r={}){const i=[],s=this._animations.get(e);let u;const h=new Map;if(s?(u=SP(this._driver,t,s,vP,JD,new Map,new Map,r,b8,i),u.forEach(b=>{const T=ks(h,b.element,new Map);b.postStyleProps.forEach(S=>T.set(S,null))})):(i.push(function I5(){return new c.vHH(3300,!1)}()),u=[]),i.length)throw function T5(n){return new c.vHH(3504,!1)}();h.forEach((b,T)=>{b.forEach((S,N)=>{b.set(N,this._driver.computeStyle(T,N,mu))})});const _=Xc(u.map(b=>{const T=h.get(b.element);return this._buildPlayer(b,new Map,T)}));return this._playersById.set(e,_),_.onDestroy(()=>this.destroy(e)),this.players.push(_),_}destroy(e){const t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);const r=this.players.indexOf(t);r>=0&&this.players.splice(r,1)}_getPlayer(e){const t=this._playersById.get(e);if(!t)throw function D5(n){return new c.vHH(3301,!1)}();return t}listen(e,t,r,i){const s=gP(t,"","","");return fP(this._getPlayer(e),r,s,i),()=>{}}command(e,t,r,i){if("register"==r)return void this.register(e,i[0]);if("create"==r)return void this.create(e,t,i[0]||{});const s=this._getPlayer(e);switch(r){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(e)}}}const mj="ng-animate-queued",RP="ng-animate-disabled",A8=[],_j={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},x8={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},yo="__ng_removed";class NP{constructor(e,t=""){this.namespaceId=t;const r=e&&e.hasOwnProperty("value");if(this.value=function P8(n){return n??null}(r?e.value:e),r){const s=pE(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const r=this.options.params;Object.keys(t).forEach(i=>{null==r[i]&&(r[i]=t[i])})}}}const _E="void",PP=new NP(_E);class M8{constructor(e,t,r){this.id=e,this.hostElement=t,this._engine=r,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,vo(t,this._hostClassName)}listen(e,t,r,i){if(!this._triggers.has(t))throw function S5(n,e){return new c.vHH(3302,!1)}();if(null==r||0==r.length)throw function A5(n){return new c.vHH(3303,!1)}();if(!function k8(n){return"start"==n||"done"==n}(r))throw function x5(n,e){return new c.vHH(3400,!1)}();const s=ks(this._elementListeners,e,[]),u={name:t,phase:r,callback:i};s.push(u);const h=ks(this._engine.statesByElement,e,new Map);return h.has(t)||(vo(e,XD),vo(e,XD+"-"+t),h.set(t,PP)),()=>{this._engine.afterFlush(()=>{const p=s.indexOf(u);p>=0&&s.splice(p,1),this._triggers.has(t)||h.delete(t)})}}register(e,t){return!this._triggers.has(e)&&(this._triggers.set(e,t),!0)}_getTrigger(e){const t=this._triggers.get(e);if(!t)throw function M5(n){return new c.vHH(3401,!1)}();return t}trigger(e,t,r,i=!0){const s=this._getTrigger(t),u=new kP(this.id,t,e);let h=this._engine.statesByElement.get(e);h||(vo(e,XD),vo(e,XD+"-"+t),this._engine.statesByElement.set(e,h=new Map));let p=h.get(t);const _=new NP(r,this.id);if(!(r&&r.hasOwnProperty("value"))&&p&&_.absorbOptions(p.options),h.set(t,_),p||(p=PP),_.value!==_E&&p.value===_.value){if(!function L8(n,e){const t=Object.keys(n),r=Object.keys(e);if(t.length!=r.length)return!1;for(let i=0;i<t.length;i++){const s=t[i];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(p.params,_.params)){const W=[],J=s.matchStyles(p.value,p.params,W),Me=s.matchStyles(_.value,_.params,W);W.length?this._engine.reportError(W):this._engine.afterFlush(()=>{Lf(e,J),Xa(e,Me)})}return}const S=ks(this._engine.playersByElement,e,[]);S.forEach(W=>{W.namespaceId==this.id&&W.triggerName==t&&W.queued&&W.destroy()});let N=s.matchTransition(p.value,_.value,e,_.params),O=!1;if(!N){if(!i)return;N=s.fallbackTransition,O=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:N,fromState:p,toState:_,player:u,isFallbackTransition:O}),O||(vo(e,mj),u.onStart(()=>{U_(e,mj)})),u.onDone(()=>{let W=this.players.indexOf(u);W>=0&&this.players.splice(W,1);const J=this._engine.playersByElement.get(e);if(J){let Me=J.indexOf(u);Me>=0&&J.splice(Me,1)}}),this.players.push(u),S.push(u),u}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,r)=>{this._elementListeners.set(r,t.filter(i=>i.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(r=>r.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const r=this._engine.driver.query(e,eS,!0);r.forEach(i=>{if(i[yo])return;const s=this._engine.fetchNamespacesByElement(i);s.size?s.forEach(u=>u.triggerLeaveAnimation(i,t,!1,!0)):this.clearElementCache(i)}),this._engine.afterFlushAnimationsDone(()=>r.forEach(i=>this.clearElementCache(i)))}triggerLeaveAnimation(e,t,r,i){const s=this._engine.statesByElement.get(e),u=new Map;if(s){const h=[];if(s.forEach((p,_)=>{if(u.set(_,p.value),this._triggers.has(_)){const b=this.trigger(e,_,_E,i);b&&h.push(b)}}),h.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,u),r&&Xc(h).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),r=this._engine.statesByElement.get(e);if(t&&r){const i=new Set;t.forEach(s=>{const u=s.name;if(i.has(u))return;i.add(u);const p=this._triggers.get(u).fallbackTransition,_=r.get(u)||PP,b=new NP(_E),T=new kP(this.id,u,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:u,transition:p,fromState:_,toState:b,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const r=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let i=!1;if(r.totalAnimations){const s=r.players.length?r.playersByQueriedElement.get(e):[];if(s&&s.length)i=!0;else{let u=e;for(;u=u.parentNode;)if(r.statesByElement.get(u)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(e),i)r.markElementAsRemoved(this.id,e,!1,t);else{const s=e[yo];(!s||s===_j)&&(r.afterFlush(()=>this.clearElementCache(e)),r.destroyInnerAnimations(e),r._onRemovalComplete(e,t))}}insertNode(e,t){vo(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(r=>{const i=r.player;if(i.destroyed)return;const s=r.element,u=this._elementListeners.get(s);u&&u.forEach(h=>{if(h.name==r.triggerName){const p=gP(s,r.triggerName,r.fromState.value,r.toState.value);p._data=e,fP(r.player,h.phase,p,h.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):t.push(r)}),this._queue=[],t.sort((r,i)=>{const s=r.transition.ast.depCount,u=i.transition.ast.depCount;return 0==s||0==u?s-u:this._engine.driver.containsElement(r.element,i.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(r=>r.element===e)||t,t}}class R8{constructor(e,t,r){this.bodyNode=e,this.driver=t,this._normalizer=r,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(i,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(r=>{r.queued&&e.push(r)})}),e}createNamespace(e,t){const r=new M8(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(r,t):(this.newHostElements.set(t,r),this.collectEnterElement(t)),this._namespaceLookup[e]=r}_balanceNamespaceList(e,t){const r=this._namespaceList,i=this.namespacesByHostElement;if(r.length-1>=0){let u=!1,h=this.driver.getParentElement(t);for(;h;){const p=i.get(h);if(p){const _=r.indexOf(p);r.splice(_+1,0,e),u=!0;break}h=this.driver.getParentElement(h)}u||r.unshift(e)}else r.push(e);return i.set(t,e),e}register(e,t){let r=this._namespaceLookup[e];return r||(r=this.createNamespace(e,t)),r}registerTrigger(e,t,r){let i=this._namespaceLookup[e];i&&i.register(t,r)&&this.totalAnimations++}destroy(e,t){if(!e)return;const r=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(r.hostElement),delete this._namespaceLookup[e];const i=this._namespaceList.indexOf(r);i>=0&&this._namespaceList.splice(i,1)}),this.afterFlushAnimationsDone(()=>r.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,r=this.statesByElement.get(e);if(r)for(let i of r.values())if(i.namespaceId){const s=this._fetchNamespace(i.namespaceId);s&&t.add(s)}return t}trigger(e,t,r,i){if(dS(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,r,i),!0}return!1}insertNode(e,t,r,i){if(!dS(t))return;const s=t[yo];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const u=this.collectedLeaveElements.indexOf(t);u>=0&&this.collectedLeaveElements.splice(u,1)}if(e){const u=this._fetchNamespace(e);u&&u.insertNode(t,r)}i&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),vo(e,RP)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),U_(e,RP))}removeNode(e,t,r,i){if(dS(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i),r){const u=this.namespacesByHostElement.get(t);u&&u.id!==e&&u.removeNode(t,i)}}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,r,i,s){this.collectedLeaveElements.push(t),t[yo]={namespaceId:e,setForRemoval:i,hasAnimation:r,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,r,i,s){return dS(t)?this._fetchNamespace(e).listen(t,r,i,s):()=>{}}_buildInstruction(e,t,r,i,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,r,i,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,eS,!0);t.forEach(r=>this.destroyActiveAnimationsForElement(r)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,wP,!0),t.forEach(r=>this.finishActiveQueriedAnimationOnElement(r)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(r=>{r.queued?r.markedForDestroy=!0:r.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(r=>r.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Xc(this.players).onDone(()=>e());e()})}processLeaveNode(e){const t=e[yo];if(t&&t.setForRemoval){if(e[yo]=_j,t.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(t.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(RP)&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((r,i)=>this._balanceNamespaceList(r,i)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let r=0;r<this.collectedEnterElements.length;r++)vo(this.collectedEnterElements[r],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const r=[];try{t=this._flushAnimations(r,e)}finally{for(let i=0;i<r.length;i++)r[i]()}}else for(let r=0;r<this.collectedLeaveElements.length;r++)this.processLeaveNode(this.collectedLeaveElements[r]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(r=>r()),this._flushFns=[],this._whenQuietFns.length){const r=this._whenQuietFns;this._whenQuietFns=[],t.length?Xc(t).onDone(()=>{r.forEach(i=>i())}):r.forEach(i=>i())}}reportError(e){throw function R5(n){return new c.vHH(3402,!1)}()}_flushAnimations(e,t){const r=new lS,i=[],s=new Map,u=[],h=new Map,p=new Map,_=new Map,b=new Set;this.disabledNodes.forEach(at=>{b.add(at);const wt=this.driver.query(at,".ng-animate-queued",!0);for(let Dt=0;Dt<wt.length;Dt++)b.add(wt[Dt])});const T=this.bodyNode,S=Array.from(this.statesByElement.keys()),N=wj(S,this.collectedEnterElements),O=new Map;let W=0;N.forEach((at,wt)=>{const Dt=vP+W++;O.set(wt,Dt),at.forEach(an=>vo(an,Dt))});const J=[],Me=new Set,Be=new Set;for(let at=0;at<this.collectedLeaveElements.length;at++){const wt=this.collectedLeaveElements[at],Dt=wt[yo];Dt&&Dt.setForRemoval&&(J.push(wt),Me.add(wt),Dt.hasAnimation?this.driver.query(wt,".ng-star-inserted",!0).forEach(an=>Me.add(an)):Be.add(wt))}const Ue=new Map,Ve=wj(S,Array.from(Me));Ve.forEach((at,wt)=>{const Dt=JD+W++;Ue.set(wt,Dt),at.forEach(an=>vo(an,Dt))}),e.push(()=>{N.forEach((at,wt)=>{const Dt=O.get(wt);at.forEach(an=>U_(an,Dt))}),Ve.forEach((at,wt)=>{const Dt=Ue.get(wt);at.forEach(an=>U_(an,Dt))}),J.forEach(at=>{this.processLeaveNode(at)})});const rt=[],dt=[];for(let at=this._namespaceList.length-1;at>=0;at--)this._namespaceList[at].drainQueuedTransitions(t).forEach(Dt=>{const an=Dt.player,Xr=Dt.element;if(rt.push(an),this.collectedEnterElements.length){const bi=Xr[yo];if(bi&&bi.setForMove){if(bi.previousTriggersValues&&bi.previousTriggersValues.has(Dt.triggerName)){const tp=bi.previousTriggersValues.get(Dt.triggerName),To=this.statesByElement.get(Dt.element);if(To&&To.has(Dt.triggerName)){const aA=To.get(Dt.triggerName);aA.value=tp,To.set(Dt.triggerName,aA)}}return void an.destroy()}}const al=!T||!this.driver.containsElement(T,Xr),Bs=Ue.get(Xr),hd=O.get(Xr),tr=this._buildInstruction(Dt,r,hd,Bs,al);if(tr.errors&&tr.errors.length)return void dt.push(tr);if(al)return an.onStart(()=>Lf(Xr,tr.fromStyles)),an.onDestroy(()=>Xa(Xr,tr.toStyles)),void i.push(an);if(Dt.isFallbackTransition)return an.onStart(()=>Lf(Xr,tr.fromStyles)),an.onDestroy(()=>Xa(Xr,tr.toStyles)),void i.push(an);const iq=[];tr.timelines.forEach(bi=>{bi.stretchStartingKeyframe=!0,this.disabledNodes.has(bi.element)||iq.push(bi)}),tr.timelines=iq,r.append(Xr,tr.timelines),u.push({instruction:tr,player:an,element:Xr}),tr.queriedElements.forEach(bi=>ks(h,bi,[]).push(an)),tr.preStyleProps.forEach((bi,tp)=>{if(bi.size){let To=p.get(tp);To||p.set(tp,To=new Set),bi.forEach((aA,EO)=>To.add(EO))}}),tr.postStyleProps.forEach((bi,tp)=>{let To=_.get(tp);To||_.set(tp,To=new Set),bi.forEach((aA,EO)=>To.add(EO))})});if(dt.length){const at=[];dt.forEach(wt=>{at.push(function N5(n,e){return new c.vHH(3505,!1)}())}),rt.forEach(wt=>wt.destroy()),this.reportError(at)}const Wt=new Map,yr=new Map;u.forEach(at=>{const wt=at.element;r.has(wt)&&(yr.set(wt,wt),this._beforeAnimationBuild(at.player.namespaceId,at.instruction,Wt))}),i.forEach(at=>{const wt=at.element;this._getPreviousPlayers(wt,!1,at.namespaceId,at.triggerName,null).forEach(an=>{ks(Wt,wt,[]).push(an),an.destroy()})});const Vs=J.filter(at=>bj(at,p,_)),bu=new Map;vj(bu,this.driver,Be,_,mu).forEach(at=>{bj(at,p,_)&&Vs.push(at)});const eb=new Map;N.forEach((at,wt)=>{vj(eb,this.driver,new Set(at),p,"!")}),Vs.forEach(at=>{const wt=bu.get(at),Dt=eb.get(at);bu.set(at,new Map([...Array.from(wt?.entries()??[]),...Array.from(Dt?.entries()??[])]))});const ep=[],nq=[],rq={};u.forEach(at=>{const{element:wt,player:Dt,instruction:an}=at;if(r.has(wt)){if(b.has(wt))return Dt.onDestroy(()=>Xa(wt,an.toStyles)),Dt.disabled=!0,Dt.overrideTotalTime(an.totalTime),void i.push(Dt);let Xr=rq;if(yr.size>1){let Bs=wt;const hd=[];for(;Bs=Bs.parentNode;){const tr=yr.get(Bs);if(tr){Xr=tr;break}hd.push(Bs)}hd.forEach(tr=>yr.set(tr,Xr))}const al=this._buildAnimation(Dt.namespaceId,an,Wt,s,eb,bu);if(Dt.setRealPlayer(al),Xr===rq)ep.push(Dt);else{const Bs=this.playersByElement.get(Xr);Bs&&Bs.length&&(Dt.parentPlayer=Xc(Bs)),i.push(Dt)}}else Lf(wt,an.fromStyles),Dt.onDestroy(()=>Xa(wt,an.toStyles)),nq.push(Dt),b.has(wt)&&i.push(Dt)}),nq.forEach(at=>{const wt=s.get(at.element);if(wt&&wt.length){const Dt=Xc(wt);at.setRealPlayer(Dt)}}),i.forEach(at=>{at.parentPlayer?at.syncPlayerEvents(at.parentPlayer):at.destroy()});for(let at=0;at<J.length;at++){const wt=J[at],Dt=wt[yo];if(U_(wt,JD),Dt&&Dt.hasAnimation)continue;let an=[];if(h.size){let al=h.get(wt);al&&al.length&&an.push(...al);let Bs=this.driver.query(wt,wP,!0);for(let hd=0;hd<Bs.length;hd++){let tr=h.get(Bs[hd]);tr&&tr.length&&an.push(...tr)}}const Xr=an.filter(al=>!al.destroyed);Xr.length?O8(this,wt,Xr):this.processLeaveNode(wt)}return J.length=0,ep.forEach(at=>{this.players.push(at),at.onDone(()=>{at.destroy();const wt=this.players.indexOf(at);this.players.splice(wt,1)}),at.play()}),ep}elementContainsData(e,t){let r=!1;const i=t[yo];return i&&i.setForRemoval&&(r=!0),this.playersByElement.has(t)&&(r=!0),this.playersByQueriedElement.has(t)&&(r=!0),this.statesByElement.has(t)&&(r=!0),this._fetchNamespace(e).elementContainsData(t)||r}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,r,i,s){let u=[];if(t){const h=this.playersByQueriedElement.get(e);h&&(u=h)}else{const h=this.playersByElement.get(e);if(h){const p=!s||s==_E;h.forEach(_=>{_.queued||!p&&_.triggerName!=i||u.push(_)})}}return(r||i)&&(u=u.filter(h=>!(r&&r!=h.namespaceId||i&&i!=h.triggerName))),u}_beforeAnimationBuild(e,t,r){const s=t.element,u=t.isRemovalTransition?void 0:e,h=t.isRemovalTransition?void 0:t.triggerName;for(const p of t.timelines){const _=p.element,b=_!==s,T=ks(r,_,[]);this._getPreviousPlayers(_,b,u,h,t.toState).forEach(N=>{const O=N.getRealPlayer();O.beforeDestroy&&O.beforeDestroy(),N.destroy(),T.push(N)})}Lf(s,t.fromStyles)}_buildAnimation(e,t,r,i,s,u){const h=t.triggerName,p=t.element,_=[],b=new Set,T=new Set,S=t.timelines.map(O=>{const W=O.element;b.add(W);const J=W[yo];if(J&&J.removedBeforeQueried)return new fE(O.duration,O.delay);const Me=W!==p,Be=function F8(n){const e=[];return Ej(n,e),e}((r.get(W)||A8).map(Wt=>Wt.getRealPlayer())).filter(Wt=>!!Wt.element&&Wt.element===W),Ue=s.get(W),Ve=u.get(W),rt=ZB(0,this._normalizer,0,O.keyframes,Ue,Ve),dt=this._buildPlayer(O,rt,Be);if(O.subTimeline&&i&&T.add(W),Me){const Wt=new kP(e,h,W);Wt.setRealPlayer(dt),_.push(Wt)}return dt});_.forEach(O=>{ks(this.playersByQueriedElement,O.element,[]).push(O),O.onDone(()=>function N8(n,e,t){let r=n.get(e);if(r){if(r.length){const i=r.indexOf(t);r.splice(i,1)}0==r.length&&n.delete(e)}return r}(this.playersByQueriedElement,O.element,O))}),b.forEach(O=>vo(O,nj));const N=Xc(S);return N.onDestroy(()=>{b.forEach(O=>U_(O,nj)),Xa(p,t.toStyles)}),T.forEach(O=>{ks(i,O,[]).push(N)}),N}_buildPlayer(e,t,r){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,r):new fE(e.duration,e.delay)}}class kP{constructor(e,t,r){this.namespaceId=e,this.triggerName=t,this.element=r,this._player=new fE,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,r)=>{t.forEach(i=>fP(e,r,void 0,i))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ks(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function dS(n){return n&&1===n.nodeType}function yj(n,e){const t=n.style.display;return n.style.display=e??"none",t}function vj(n,e,t,r,i){const s=[];t.forEach(p=>s.push(yj(p)));const u=[];r.forEach((p,_)=>{const b=new Map;p.forEach(T=>{const S=e.computeStyle(_,T,i);b.set(T,S),(!S||0==S.length)&&(_[yo]=x8,u.push(_))}),n.set(_,b)});let h=0;return t.forEach(p=>yj(p,s[h++])),u}function wj(n,e){const t=new Map;if(n.forEach(h=>t.set(h,[])),0==e.length)return t;const i=new Set(e),s=new Map;function u(h){if(!h)return 1;let p=s.get(h);if(p)return p;const _=h.parentNode;return p=t.has(_)?_:i.has(_)?1:u(_),s.set(h,p),p}return e.forEach(h=>{const p=u(h);1!==p&&t.get(p).push(h)}),t}function vo(n,e){n.classList?.add(e)}function U_(n,e){n.classList?.remove(e)}function O8(n,e,t){Xc(t).onDone(()=>n.processLeaveNode(e))}function Ej(n,e){for(let t=0;t<n.length;t++){const r=n[t];r instanceof GB?Ej(r.players,e):e.push(r)}}function bj(n,e,t){const r=t.get(n);if(!r)return!1;let i=e.get(n);return i?r.forEach(s=>i.add(s)):e.set(n,r),t.delete(n),!0}class hS{constructor(e,t,r){this.bodyNode=e,this._driver=t,this._normalizer=r,this._triggerCache={},this.onRemovalComplete=(i,s)=>{},this._transitionEngine=new R8(e,t,r),this._timelineEngine=new C8(e,t,r),this._transitionEngine.onRemovalComplete=(i,s)=>this.onRemovalComplete(i,s)}registerTrigger(e,t,r,i,s){const u=e+"-"+i;let h=this._triggerCache[u];if(!h){const p=[],b=IP(this._driver,s,p,[]);if(p.length)throw function E5(n,e){return new c.vHH(3404,!1)}();h=function v8(n,e,t){return new w8(n,e,t)}(i,b,this._normalizer),this._triggerCache[u]=h}this._transitionEngine.registerTrigger(t,i,h)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,r,i){this._transitionEngine.insertNode(e,t,r,i)}onRemove(e,t,r,i){this._transitionEngine.removeNode(e,t,i||!1,r)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,r,i){if("@"==r.charAt(0)){const[s,u]=zB(r);this._timelineEngine.command(s,t,u,i)}else this._transitionEngine.trigger(e,t,r,i)}listen(e,t,r,i,s){if("@"==r.charAt(0)){const[u,h]=zB(r);return this._timelineEngine.listen(u,t,h,s)}return this._transitionEngine.listen(e,t,r,i,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let V8=(()=>{class n{constructor(t,r,i){this._element=t,this._startStyles=r,this._endStyles=i,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Xa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Xa(this._element,this._initialStyles),this._endStyles&&(Xa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Lf(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Lf(this._element,this._endStyles),this._endStyles=null),Xa(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function OP(n){let e=null;return n.forEach((t,r)=>{(function B8(n){return"display"===n||"position"===n})(r)&&(e=e||new Map,e.set(r,t))}),e}class Cj{constructor(e,t,r,i){this.element=e,this.keyframes=t,this.options=r,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=r.duration,this._delay=r.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){const t=[];return e.forEach(r=>{t.push(Object.fromEntries(r))}),t}_triggerWebAnimation(e,t,r){return e.animate(this._convertKeyframesToObject(t),r)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((r,i)=>{"offset"!==i&&e.set(i,this._finished?r:lj(this.element,i))}),this.currentSnapshot=e}triggerCallback(e){const t="start"===e?this._onStartFns:this._onDoneFns;t.forEach(r=>r()),t.length=0}}class j8{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}matchesElement(e,t){return!1}containsElement(e,t){return JB(e,t)}getParentElement(e){return _P(e)}query(e,t,r){return XB(e,t,r)}computeStyle(e,t,r){return window.getComputedStyle(e)[t]}animate(e,t,r,i,s,u=[]){const p={duration:r,delay:i,fill:0==i?"both":"forwards"};s&&(p.easing=s);const _=new Map,b=u.filter(N=>N instanceof Cj);(function G5(n,e){return 0===n||0===e})(r,i)&&b.forEach(N=>{N.currentSnapshot.forEach((O,W)=>_.set(W,O))});let T=function j5(n){return n.length?n[0]instanceof Map?n:n.map(e=>rj(e)):[]}(t).map(N=>ed(N));T=function W5(n,e,t){if(t.size&&e.length){let r=e[0],i=[];if(t.forEach((s,u)=>{r.has(u)||i.push(u),r.set(u,s)}),i.length)for(let s=1;s<e.length;s++){let u=e[s];i.forEach(h=>u.set(h,lj(n,h)))}}return e}(e,T,_);const S=function U8(n,e){let t=null,r=null;return Array.isArray(e)&&e.length?(t=OP(e[0]),e.length>1&&(r=OP(e[e.length-1]))):e instanceof Map&&(t=OP(e)),t||r?new V8(n,t,r):null}(e,T);return new Cj(e,T,p,S)}}let $8=(()=>{class n extends jB{constructor(t,r){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(r.body,{id:"0",encapsulation:c.ifc.None,styles:[],data:{animation:[]}})}build(t){const r=this._nextAnimationId.toString();this._nextAnimationId++;const i=Array.isArray(t)?$B(t):t;return Ij(this._renderer,null,r,"register",[i]),new H8(r,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(Ie))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class H8 extends class Xz{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new q8(this._id,e,t||{},this._renderer)}}class q8{constructor(e,t,r,i){this.id=e,this.element=t,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",r)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return Ij(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Ij(n,e,t,r,i){return n.setProperty(e,`@@${t}:${r}`,i)}const Tj="@.disabled";let G8=(()=>{class n{constructor(t,r,i){this.delegate=t,this.engine=r,this._zone=i,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),r.onRemovalComplete=(s,u)=>{const h=u?.parentNode(s);h&&u.removeChild(h,s)}}createRenderer(t,r){const s=this.delegate.createRenderer(t,r);if(!(t&&r&&r.data&&r.data.animation)){let b=this._rendererCache.get(s);return b||(b=new Dj("",s,this.engine,()=>this._rendererCache.delete(s)),this._rendererCache.set(s,b)),b}const u=r.id,h=r.id+"-"+this._currentId;this._currentId++,this.engine.register(h,t);const p=b=>{Array.isArray(b)?b.forEach(p):this.engine.registerTrigger(u,h,t,b.name,b)};return r.data.animation.forEach(p),new W8(this,h,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,r,i){t>=0&&t<this._microtaskId?this._zone.run(()=>r(i)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[u,h]=s;u(h)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([r,i]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(c.FYo),c.LFG(hS),c.LFG(c.R0b))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();class Dj{constructor(e,t,r,i){this.namespaceId=e,this.delegate=t,this.engine=r,this._onDestroy=i,this.destroyNode=this.delegate.destroyNode?s=>t.destroyNode(s):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,r,i=!0){this.delegate.insertBefore(e,t,r),this.engine.onInsert(this.namespaceId,t,e,i)}removeChild(e,t,r){this.engine.onRemove(this.namespaceId,t,this.delegate,r)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,r,i){this.delegate.setAttribute(e,t,r,i)}removeAttribute(e,t,r){this.delegate.removeAttribute(e,t,r)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,r,i){this.delegate.setStyle(e,t,r,i)}removeStyle(e,t,r){this.delegate.removeStyle(e,t,r)}setProperty(e,t,r){"@"==t.charAt(0)&&t==Tj?this.disableAnimations(e,!!r):this.delegate.setProperty(e,t,r)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,r){return this.delegate.listen(e,t,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class W8 extends Dj{constructor(e,t,r,i,s){super(t,r,i,s),this.factory=e,this.namespaceId=t}setProperty(e,t,r){"@"==t.charAt(0)?"."==t.charAt(1)&&t==Tj?this.disableAnimations(e,r=void 0===r||!!r):this.engine.process(this.namespaceId,e,t.slice(1),r):this.delegate.setProperty(e,t,r)}listen(e,t,r){if("@"==t.charAt(0)){const i=function Z8(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.slice(1),u="";return"@"!=s.charAt(0)&&([s,u]=function z8(n){const e=n.indexOf(".");return[n.substring(0,e),n.slice(e+1)]}(s)),this.engine.listen(this.namespaceId,i,s,u,h=>{this.factory.scheduleListenerCallback(h._data||-1,r,h)})}return this.delegate.listen(e,t,r)}}let K8=(()=>{class n extends hS{constructor(t,r,i,s){super(t.body,r,i)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Ie),c.LFG(yP),c.LFG(xP),c.LFG(c.z2F))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac}),n})();const Sj=[{provide:jB,useClass:$8},{provide:xP,useFactory:function Y8(){return new g8}},{provide:hS,useClass:K8},{provide:c.FYo,useFactory:function Q8(n,e,t){return new G8(n,e,t)},deps:[Ld,hS,c.R0b]}],FP=[{provide:yP,useFactory:()=>new j8},{provide:c.QbO,useValue:"BrowserAnimations"},...Sj],Aj=[{provide:yP,useClass:ej},{provide:c.QbO,useValue:"NoopAnimations"},...Sj];let J8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?Aj:FP}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:FP,imports:[jo]}),n})();var LP=U(1860);class X8 extends ys.x{constructor(e=1/0,t=1/0,r=C0){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:u}=this;t||(r.push(e),!i&&r.push(s.now()+u)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let u=0;u<s.length&&!e.closed;u+=r?1:2)e.next(s[u]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const u=t.now();let h=0;for(let p=1;p<r.length&&r[p]<=u;p+=2)h=p;h&&r.splice(0,h+1)}}}var xj=U(815);function Mj(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,xj.B)({connector:()=>new X8(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function Rj(n,e){return(0,ws.m)(e)?Vn(()=>n,e):Vn(()=>n)}var Yr=U(8939),pS=U(7841);const UP=new c.OlP("angularfire2.auth.use-emulator"),VP=new c.OlP("angularfire2.auth.settings"),BP=new c.OlP("angularfire2.auth.tenant-id"),jP=new c.OlP("angularfire2.auth.langugage-code"),$P=new c.OlP("angularfire2.auth.use-device-language"),HP=new c.OlP("angularfire.auth.persistence"),qP=(n,e,t,r,i,s,u,h)=>(0,Yr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const p=e.runOutsideAngular(()=>n.auth());if(t&&p.useEmulator(...t),r&&(p.tenantId=r),p.languageCode=i,s&&p.useDeviceLanguage(),u)for(const[_,b]of Object.entries(u))p.settings[_]=b;return h&&p.setPersistence(h),p},[t,r,i,s,u,h]);let gS=(()=>{class n{constructor(t,r,i,s,u,h,p,_,b,T,S,N){const O=new ys.x,W=it(void 0).pipe((0,Va.Q)(u.outsideAngular),Vn(()=>s.runOutsideAngular(()=>Promise.resolve().then(U.bind(U,4094)))),(0,Je.U)(()=>(0,Yr.on)(t,s,r)),(0,Je.U)(J=>qP(J,s,h,_,b,T,p,S)),Mj({bufferSize:1,refCount:!1}));if(gl(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=it(null);else{W.pipe(xi()).subscribe();const Me=W.pipe(Vn(Ve=>Ve.getRedirectResult().then(rt=>rt,()=>null)),ar,Mj({bufferSize:1,refCount:!1})),Be=W.pipe(Vn(Ve=>new qn.y(rt=>({unsubscribe:s.runOutsideAngular(()=>Ve.onAuthStateChanged(dt=>rt.next(dt),dt=>rt.error(dt),()=>rt.complete()))})))),Ue=W.pipe(Vn(Ve=>new qn.y(rt=>({unsubscribe:s.runOutsideAngular(()=>Ve.onIdTokenChanged(dt=>rt.next(dt),dt=>rt.error(dt),()=>rt.complete()))}))));this.authState=Me.pipe(Rj(Be),(0,vc.R)(u.outsideAngular),(0,Va.Q)(u.insideAngular)),this.user=Me.pipe(Rj(Ue),(0,vc.R)(u.outsideAngular),(0,Va.Q)(u.insideAngular)),this.idToken=this.user.pipe(Vn(Ve=>Ve?(0,Kt.D)(Ve.getIdToken()):it(null))),this.idTokenResult=this.user.pipe(Vn(Ve=>Ve?(0,Kt.D)(Ve.getIdTokenResult()):it(null))),this.credential=(0,LP.T)(Me,O,this.authState.pipe(gi(Ve=>!Ve))).pipe((0,Je.U)(Ve=>Ve?.user?Ve:null),(0,vc.R)(u.outsideAngular),(0,Va.Q)(u.insideAngular))}return(0,Yr.pX)(this,W,s,{spy:{apply:(J,Me,Be)=>{(J.startsWith("signIn")||J.startsWith("createUser"))&&Be.then(Ue=>O.next(Ue))}}})}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Yr.Dh),c.LFG(Yr.xv,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(wc),c.LFG(UP,8),c.LFG(VP,8),c.LFG(BP,8),c.LFG(jP,8),c.LFG($P,8),c.LFG(HP,8),c.LFG(eu,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tK=(()=>{class n{constructor(){pS.Z.registerVersion("angularfire",Ba.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[gS]}),n})();var GP=U(3394);const Nj="firebasestorage.googleapis.com",Pj="storageBucket";class Xn extends R.ZR{constructor(e,t,r=0){super(WP(e),`Firebase Storage: ${t} (${WP(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return WP(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function WP(n){return"storage/"+n}function ZP(){return new Xn("unknown","An unknown error occurred, please check the error payload for server response.")}function kj(){return new Xn("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Oj(){return new Xn("canceled","User canceled the upload/download.")}function Fj(){return new Xn("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function V_(n){return new Xn("invalid-argument",n)}function Lj(){return new Xn("app-deleted","The Firebase app was deleted.")}function Uj(n){return new Xn("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function yE(n,e){return new Xn("invalid-format","String does not match format '"+n+"': "+e)}function vE(n){throw new Xn("internal-error","Internal error: "+n)}class wi{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=wi.makeFromUrl(e,t)}catch{return new wi(e,"")}if(""===r.path)return r;throw function hK(n){return new Xn("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function _(Ve){Ve.path_=decodeURIComponent(Ve.path)}const T=t.replace(/[.]/g,"\\."),Ue=[{regex:h,indices:{bucket:1,path:3},postModify:function s(Ve){"/"===Ve.path.charAt(Ve.path.length-1)&&(Ve.path_=Ve.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:_},{regex:new RegExp(`^https?://${t===Nj?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:_}];for(let Ve=0;Ve<Ue.length;Ve++){const rt=Ue[Ve],dt=rt.regex.exec(e);if(dt){let yr=dt[rt.indices.path];yr||(yr=""),r=new wi(dt[rt.indices.bucket],yr),rt.postModify(r);break}}if(null==r)throw function dK(n){return new Xn("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class _K{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function mS(n){return"string"==typeof n||n instanceof String}function Vj(n){return zP()&&n instanceof Blob}function zP(){return typeof Blob<"u"&&!(0,R.UG)()}function KP(n,e,t,r){if(r<e)throw V_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw V_(`Invalid value for '${n}'. Expected ${t} or less.`)}function yu(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function Bj(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var td=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(td||(td={})),td))();function jj(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||i||s}class CK{constructor(e,t,r,i,s,u,h,p,_,b,T,S=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=u,this.callback_=h,this.errorCallback_=p,this.timeout_=_,this.progressCallback_=b,this.connectionFactory_=T,this.retry=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((N,O)=>{this.resolve_=N,this.reject_=O,this.start_()})}start_(){const t=(r,i)=>{const s=this.resolve_,u=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const p=this.callback_(h,h.getResponse());!function wK(n){return void 0!==n}(p)?s():s(p)}catch(p){u(p)}else if(null!==h){const p=ZP();p.serverResponse=h.getErrorText(),u(this.errorCallback_?this.errorCallback_(h,p):p)}else u(i.canceled?this.appDelete_?Lj():Oj():kj())};this.canceled_?t(0,new _S(!1,null,!0)):this.backoffId_=function yK(n,e,t){let r=1,i=null,s=null,u=!1,h=0;function p(){return 2===h}let _=!1;function b(...J){_||(_=!0,e.apply(null,J))}function T(J){i=setTimeout(()=>{i=null,n(N,p())},J)}function S(){s&&clearTimeout(s)}function N(J,...Me){if(_)return void S();if(J)return S(),void b.call(null,J,...Me);if(p()||u)return S(),void b.call(null,J,...Me);let Ue;r<64&&(r*=2),1===h?(h=2,Ue=0):Ue=1e3*(r+Math.random()),T(Ue)}let O=!1;function W(J){O||(O=!0,S(),!_&&(null!==i?(J||(h=2),clearTimeout(i),T(0)):J||(h=1)))}return T(0),s=setTimeout(()=>{u=!0,W(!0)},t),W}((r,i)=>{if(i)return void r(!1,new _S(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const u=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(u),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(u),this.pendingConnection_=null;const h=s.getErrorCode()===td.NO_ERROR,p=s.getStatus();if((!h||jj(p,this.additionalRetryCodes_))&&this.retry){const b=s.getErrorCode()===td.ABORT;return void r(!1,new _S(!1,null,b))}const _=-1!==this.successCodes_.indexOf(p);r(!0,new _S(_,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function vK(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class _S{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function MK(...n){const e=function xK(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(zP())return new Blob(n);throw new Xn("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Fs={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class YP{constructor(e,t){this.data=e,this.contentType=t||null}}function QP(n,e){switch(n){case Fs.RAW:return new YP($j(e));case Fs.BASE64:case Fs.BASE64URL:return new YP(Hj(n,e));case Fs.DATA_URL:return new YP(function kK(n){const e=new qj(n);return e.base64?Hj(Fs.BASE64,e.rest):function PK(n){let e;try{e=decodeURIComponent(n)}catch{throw yE(Fs.DATA_URL,"Malformed data URL.")}return $j(e)}(e.rest)}(e),function OK(n){return new qj(n).contentType}(e))}throw ZP()}function $j(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Hj(n,e){switch(n){case Fs.BASE64:{const i=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(i||s)throw yE(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case Fs.BASE64URL:{const i=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(i||s)throw yE(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function NK(n){if(typeof atob>"u")throw function mK(n){return new Xn("unsupported-environment",`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:yE(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class qj{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw yE(Fs.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function FK(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class el{constructor(e,t){let r=0,i="";Vj(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(Vj(this.data_)){const i=function RK(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new el(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new el(r,!0)}}static getBlob(...e){if(zP()){const t=e.map(r=>r instanceof el?r.data_:r);return new el(MK.apply(null,t))}{const t=e.map(u=>mS(u)?QP(Fs.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const i=new Uint8Array(r);let s=0;return t.forEach(u=>{for(let h=0;h<u.length;h++)i[s++]=u[h]}),new el(i,!0)}}uploadData(){return this.data_}}function JP(n){let e;try{e=JSON.parse(n)}catch{return null}return function bK(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function Gj(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function VK(n,e){return e}class Vi{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||VK}}let yS=null;function wE(){if(yS)return yS;const n=[];n.push(new Vi("bucket")),n.push(new Vi("generation")),n.push(new Vi("metageneration")),n.push(new Vi("name","fullPath",!0));const t=new Vi("name");t.xform=function e(s,u){return function BK(n){return!mS(n)||n.length<2?n:Gj(n)}(u)},n.push(t);const i=new Vi("size");return i.xform=function r(s,u){return void 0!==u?Number(u):u},n.push(i),n.push(new Vi("timeCreated")),n.push(new Vi("updated")),n.push(new Vi("md5Hash",null,!0)),n.push(new Vi("cacheControl",null,!0)),n.push(new Vi("contentDisposition",null,!0)),n.push(new Vi("contentEncoding",null,!0)),n.push(new Vi("contentLanguage",null,!0)),n.push(new Vi("contentType",null,!0)),n.push(new Vi("metadata","customMetadata",!0)),yS=n,yS}function Wj(n,e,t){const r=JP(e);return null===r?null:function $K(n,e,t){const r={type:"file"},i=t.length;for(let s=0;s<i;s++){const u=t[s];r[u.local]=u.xform(r,e[u.server])}return function jK(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new wi(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(r,n),r}(n,r,t)}function XP(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const Zj="prefixes";class tl{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function nl(n){if(!n)throw ZP()}function vS(n,e){return function t(r,i){const s=Wj(n,i,e);return nl(null!==s),s}}function B_(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function uK(){return new Xn("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function lK(){return new Xn("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function aK(n){return new Xn("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function cK(n){return new Xn("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function EE(n){const e=B_(n);return function t(r,i){let s=e(r,i);return 404===r.getStatus()&&(s=function oK(n){return new Xn("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=i.serverResponse,s}}function Kj(n,e,t){const i=yu(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new tl(i,"GET",vS(n,t),u);return h.errorHandler=EE(e),h}function zK(n,e,t,r,i){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),r&&(s.pageToken=r),i&&(s.maxResults=i);const h=yu(e.bucketOnlyServerUrl(),n.host,n._protocol),_=n.maxOperationRetryTime,b=new tl(h,"GET",function WK(n,e){return function t(r,i){const s=function GK(n,e,t){const r=JP(t);return null===r?null:function qK(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[Zj])for(const i of t[Zj]){const s=i.replace(/\/$/,""),u=n._makeStorageReference(new wi(e,s));r.prefixes.push(u)}if(t.items)for(const i of t.items){const s=n._makeStorageReference(new wi(e,i.name));r.items.push(s)}return r}(n,e,r)}(n,e,i);return nl(null!==s),s}}(n,e.bucket),_);return b.urlParams=s,b.errorHandler=B_(e),b}function Qj(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function JK(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class wS{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function ek(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{nl(!1)}return nl(!!t&&-1!==(e||["active"]).indexOf(t)),t}const n7={STATE_CHANGED:"state_changed"},Bi={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tk(n){switch(n){case"running":case"pausing":case"canceling":return Bi.RUNNING;case"paused":return Bi.PAUSED;case"success":return Bi.SUCCESS;case"canceled":return Bi.CANCELED;default:return Bi.ERROR}}class r7{constructor(e,t,r){if(function EK(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function j_(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class s7 extends class i7{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=td.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=td.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=td.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw vE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw vE("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw vE("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw vE("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw vE("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function la(){return new s7}class t${constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=wE(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(jj(i.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=kj()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,s)=>{this._resolve=i,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function XK(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u=Qj(e,r,i),h={name:u.fullPath},p=yu(s,n.host,n._protocol),b={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},T=XP(u,t),O=new tl(p,"POST",function N(W){let J;ek(W);try{J=W.getResponseHeader("X-Goog-Upload-URL")}catch{nl(!1)}return nl(mS(J)),J},n.maxUploadRetryTime);return O.urlParams=h,O.headers=b,O.body=T,O.errorHandler=B_(e),O}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,la,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function e7(n,e,t,r){const p=new tl(t,"POST",function s(_){const b=ek(_,["active","final"]);let T=null;try{T=_.getResponseHeader("X-Goog-Upload-Size-Received")}catch{nl(!1)}T||nl(!1);const S=Number(T);return nl(!isNaN(S)),new wS(S,r.size(),"final"===b)},n.maxUploadRetryTime);return p.headers={"X-Goog-Upload-Command":"query"},p.errorHandler=B_(e),p}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(i,la,t,r);this._request=s,s.getPromise().then(u=>{this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new wS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,s)=>{let u;try{u=function t7(n,e,t,r,i,s,u,h){const p=new wS(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw function pK(){return new Xn("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const _=p.total-p.current;let b=_;i>0&&(b=Math.min(b,i));const T=p.current;let N="";N=0===b?"finalize":_===b?"upload, finalize":"upload";const O={"X-Goog-Upload-Command":N,"X-Goog-Upload-Offset":`${p.current}`},W=r.slice(T,T+b);if(null===W)throw Fj();const Ue=new tl(t,"POST",function J(Ve,rt){const dt=ek(Ve,["active","final"]),Wt=p.current+b,yr=r.size();let Vs;return Vs="final"===dt?vS(e,s)(Ve,rt):null,new wS(Wt,yr,"final"===dt,Vs)},e.maxUploadRetryTime);return Ue.headers=O,Ue.body=W.uploadData(),Ue.progressCallback=h||null,Ue.errorHandler=B_(n),Ue}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){return this._error=p,void this._transition("error")}const h=this._ref.storage._makeRequest(u,la,i,s,!1);this._request=h,h.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Kj(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,la,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Jj(n,e,t,r,i){const s=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"},p=function h(){let Ue="";for(let Ve=0;Ve<2;Ve++)Ue+=Math.random().toString().slice(2);return Ue}();u["Content-Type"]="multipart/related; boundary="+p;const _=Qj(e,r,i),b=XP(_,t),N=el.getBlob("--"+p+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+b+"\r\n--"+p+"\r\nContent-Type: "+_.contentType+"\r\n\r\n",r,"\r\n--"+p+"--");if(null===N)throw Fj();const O={name:_.fullPath},W=yu(s,n.host,n._protocol),Me=n.maxUploadRetryTime,Be=new tl(W,"POST",vS(n,t),Me);return Be.urlParams=O,Be.headers=u,Be.body=N.uploadData(),Be.errorHandler=B_(e),Be}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,la,e,t);this._request=i,i.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Oj(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=tk(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const s=new r7(t||void 0,r||void 0,i||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(tk(this._state)){case Bi.SUCCESS:j_(this._resolve.bind(null,this.snapshot))();break;case Bi.CANCELED:case Bi.ERROR:j_(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(tk(this._state)){case Bi.RUNNING:case Bi.PAUSED:e.next&&j_(e.next.bind(e,this.snapshot))();break;case Bi.SUCCESS:e.complete&&j_(e.complete.bind(e))();break;default:e.error&&j_(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Vf{constructor(e,t){this._service=e,this._location=t instanceof wi?t:wi.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Vf(e,t)}get root(){const e=new wi(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Gj(this._location.path)}get storage(){return this._service}get parent(){const e=function LK(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new wi(this._location.bucket,e);return new Vf(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw Uj(e)}}function r$(n,e,t){return nk.apply(this,arguments)}function nk(){return nk=(0,z.Z)(function*(n,e,t){const i=yield i$(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield r$(n,e,i.nextPageToken))}),nk.apply(this,arguments)}function i$(n,e){null!=e&&"number"==typeof e.maxResults&&KP("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=zK(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,la)}function _7(n){n._throwIfRoot("getDownloadURL");const e=function KK(n,e,t){const i=yu(e.fullServerUrl(),n.host,n._protocol),u=n.maxOperationRetryTime,h=new tl(i,"GET",function ZK(n,e){return function t(r,i){const s=Wj(n,i,e);return nl(null!==s),function HK(n,e,t,r){const i=JP(e);if(null===i||!mS(i.downloadTokens))return null;const s=i.downloadTokens;if(0===s.length)return null;const u=encodeURIComponent;return s.split(",").map(_=>{const T=n.fullPath;return yu("/b/"+u(n.bucket)+"/o/"+u(T),t,r)+Bj({alt:"media",token:_})})[0]}(s,i,n.host,n._protocol)}}(n,t),u);return h.errorHandler=EE(e),h}(n.storage,n._location,wE());return n.storage.makeRequestWithTokens(e,la).then(t=>{if(null===t)throw function gK(){return new Xn("no-download-url","The given file does not have any download URLs.")}();return t})}function s$(n,e){const t=function UK(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new wi(n._location.bucket,t);return new Vf(n.storage,r)}function o$(n,e){if(n instanceof rk){const t=n;if(null==t._bucket)throw function fK(){return new Xn("no-default-bucket","No default bucket found. Did you set the '"+Pj+"' property when initializing the app?")}();const r=new Vf(t,t._bucket);return null!=e?o$(r,e):r}return void 0!==e?s$(n,e):n}function E7(n,e){if(e&&function v7(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof rk)return function w7(n,e){return new Vf(n,e)}(n,e);throw V_("To use ref(service, url), the first argument must be a Storage instance.")}return o$(n,e)}function a$(n,e){const t=e?.[Pj];return null==t?null:wi.makeFromBucketSpec(t,n)}class rk{constructor(e,t,r,i,s){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=Nj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?wi.makeFromBucketSpec(i,this._host):a$(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?wi.makeFromBucketSpec(this._url,e):a$(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){KP("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){KP("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,z.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,z.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Vf(this,e)}_makeRequest(e,t,r,i,s=!0){if(this._deleted)return new _K(Lj());{const u=function AK(n,e,t,r,i,s,u=!0){const h=Bj(n.urlParams),p=n.url+h,_=Object.assign({},n.headers);return function DK(n,e){e&&(n["X-Firebase-GMPID"]=e)}(_,e),function IK(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(_,t),function TK(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(_,s),function SK(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(_,r),new CK(p,n.method,_,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,u)}(e,this._appId,r,i,t,this._firebaseVersion,s);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}makeRequestWithTokens(e,t){var r=this;return(0,z.Z)(function*(){const[i,s]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,s).getPromise()})()}}const l$="@firebase/storage";function d$(n,e){return E7(n=(0,R.m9)(n),e)}function R7(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new rk(t,r,i,e,Pt.SDK_VERSION)}!function N7(){(0,Pt._registerComponent)(new or.wA("storage",R7,"PUBLIC").setMultipleInstances(!0)),(0,Pt.registerVersion)(l$,"0.9.14",""),(0,Pt.registerVersion)(l$,"0.9.14","esm2017")}();class ES{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class f${constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new ES(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new ES(r,this,this._ref))},t)}on(e,t,r,i){let s;return t&&(s="function"==typeof t?u=>t(new ES(u,this,this._ref)):{next:t.next?u=>t.next(new ES(u,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,r||void 0,i||void 0)}}class p${constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new vu(e,this._service))}get items(){return this._delegate.items.map(e=>new vu(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class vu{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function M7(n,e){return s$(n,e)}(this._delegate,e);return new vu(t,this.storage)}get root(){return new vu(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new vu(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new f$(function C7(n,e,t){return function h7(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new t$(n,new el(e),t)}(n=(0,R.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Fs.RAW,r){this._throwIfRoot("putString");const i=QP(t,e),s=Object.assign({},r);return null==s.contentType&&null!=i.contentType&&(s.contentType=i.contentType),new f$(new t$(this._delegate,new el(i.data,!0),s),this)}listAll(){return function S7(n){return function p7(n){const e={prefixes:[],items:[]};return r$(n,e).then(()=>e)}(n=(0,R.m9)(n))}(this._delegate).then(e=>new p$(e,this.storage))}list(e){return function D7(n,e){return i$(n=(0,R.m9)(n),e)}(this._delegate,e||void 0).then(t=>new p$(t,this.storage))}getMetadata(){return function I7(n){return function g7(n){n._throwIfRoot("getMetadata");const e=Kj(n.storage,n._location,wE());return n.storage.makeRequestWithTokens(e,la)}(n=(0,R.m9)(n))}(this._delegate)}updateMetadata(e){return function T7(n,e){return function m7(n,e){n._throwIfRoot("updateMetadata");const t=function YK(n,e,t,r){const s=yu(e.fullServerUrl(),n.host,n._protocol),h=XP(t,r),_=n.maxOperationRetryTime,b=new tl(s,"PATCH",vS(n,r),_);return b.headers={"Content-Type":"application/json; charset=utf-8"},b.body=h,b.errorHandler=EE(e),b}(n.storage,n._location,e,wE());return n.storage.makeRequestWithTokens(t,la)}(n=(0,R.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function A7(n){return _7(n=(0,R.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function x7(n){return function y7(n){n._throwIfRoot("deleteObject");const e=function QK(n,e){const r=yu(e.fullServerUrl(),n.host,n._protocol),h=new tl(r,"DELETE",function u(p,_){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=EE(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,la)}(n=(0,R.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw Uj(e)}}class g${constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(m$(e))throw V_("ref() expected a child path but got a URL, use refFromURL instead.");return new vu(d$(this._delegate,e),this)}refFromURL(e){if(!m$(e))throw V_("refFromURL() expected a full URL but got a child path, use ref() instead.");try{wi.makeFromUrl(e,this._delegate.host)}catch{throw V_("refFromUrl() expected a valid full URL but got an invalid one.")}return new vu(d$(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function h$(n,e,t,r={}){!function b7(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,R.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function m$(n){return/^[A-Za-z]+:\/\//.test(n)}function F7(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new g$(t,r)}function _$(n){const e=function U7(n){return new qn.y(e=>{const t=u=>e.next(u);t(n.snapshot);const s=n.on("state_changed",t);return n.then(u=>{t(u),e.complete()},u=>{t(n.snapshot),(u=>{e.error(u)})(u)}),function(){s()}}).pipe(function nK(n,e=Uh){return(0,Un.e)((t,r)=>{let i=null,s=null,u=null;const h=()=>{if(i){i.unsubscribe(),i=null;const _=s;s=null,r.next(_)}};function p(){const _=u+n,b=e.now();if(b<_)return i=this.schedule(void 0,_-b),void r.add(i);h()}t.subscribe((0,Ln.x)(r,_=>{s=_,u=e.now(),i||(i=e.schedule(p,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{s=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Je.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function bS(n){return{getDownloadURL:()=>it(void 0).pipe(Vh,Vn(()=>n.getDownloadURL()),ar),getMetadata:()=>it(void 0).pipe(Vh,Vn(()=>n.getMetadata()),ar),delete:()=>(0,Kt.D)(n.delete()),child:e=>bS(n.child(e)),updateMetadata:e=>(0,Kt.D)(n.updateMetadata(e)),put:(e,t)=>_$(n.put(e,t)),putString:(e,t,r)=>_$(n.putString(e,t,r)),list:e=>(0,Kt.D)(n.list(e)),listAll:()=>(0,Kt.D)(n.listAll())}}!function L7(n){const e={TaskState:Bi,TaskEvent:n7,StringFormat:Fs,Storage:g$,Reference:vu};n.INTERNAL.registerComponent(new or.wA("storage-compat",F7,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.22")}(GP.Z);const V7=new c.OlP("angularfire2.storageBucket"),B7=new c.OlP("angularfire2.storage.maxUploadRetryTime"),j7=new c.OlP("angularfire2.storage.maxOperationRetryTime"),$7=new c.OlP("angularfire2.storage.use-emulator");let H7=(()=>{class n{constructor(t,r,i,s,u,h,p,_,b,T){const S=(0,Yr.on)(t,u,r);this.storage=(0,Yr.cc)(`${S.name}.storage.${i}`,"AngularFireStorage",S.name,()=>{const N=u.runOutsideAngular(()=>S.storage(i||void 0)),O=b;return O&&N.useEmulator(...O),p&&N.setMaxUploadRetryTime(p),_&&N.setMaxOperationRetryTime(_),N},[p,_])}ref(t){return bS(this.storage.ref(t))}refFromURL(t){return bS(this.storage.refFromURL(t))}upload(t,r,i){return bS(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Yr.Dh),c.LFG(Yr.xv,8),c.LFG(V7,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(wc),c.LFG(B7,8),c.LFG(j7,8),c.LFG($7,8),c.LFG(eu,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),q7=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({}),n})(),G7=(()=>{class n{constructor(){pS.Z.registerVersion("angularfire",Ba.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[H7],imports:[q7]}),n})();function ik(){return(0,Un.e)((n,e)=>{let t,r=!1;n.subscribe((0,Ln.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}function y$(n,e=Ks.y){return n=n??W7,(0,Un.e)((t,r)=>{let i,s=!0;t.subscribe((0,Ln.x)(r,u=>{const h=e(u);(s||!n(i,h))&&(s=!1,i=h,r.next(u))}))})}function W7(n,e){return n===e}function sk(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new De("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function v$(){if(typeof Uint8Array>"u")throw new De("unimplemented","Uint8Arrays are not available in this environment.")}function w$(){if(!function Oq(){return typeof atob<"u"}())throw new De("unimplemented","Blobs are unavailable in Firestore in this environment.")}U(4094);class bE{constructor(e){this._delegate=e}static fromBase64String(e){return w$(),new bE(Qa.fromBase64String(e))}static fromUint8Array(e){return v$(),new bE(Qa.fromUint8Array(e))}toBase64(){return w$(),this._delegate.toBase64()}toUint8Array(){return v$(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function ok(n){return function K7(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class Y7{enableIndexedDbPersistence(e,t){return function AZ(n,e){rV(n=Jt(n,$n));const t=_r(n),r=n._freezeSettings(),i=new _N;return nV(t,i,new VU(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function xZ(n){rV(n=Jt(n,$n));const e=_r(n),t=n._freezeSettings(),r=new _N;return nV(e,r,new uZ(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function MZ(n){if(n._initialized&&!n._terminated)throw new De(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new kr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,z.Z)(function*(){try{yield(t=(0,z.Z)(function*(r){if(!aa.C())return Promise.resolve();const i=r+"main";yield aa.delete(i)}),function(r){return t.apply(this,arguments)})(cR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class E${constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&df("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){WU(this._delegate,e,t,r)}enableNetwork(){return function NZ(n){return function _Z(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield QU(n),t=yield DN(n);return e.setNetworkEnabled(!0),function(r){const i=Ge(r);return i._u.delete(0),eE(i)}(t)}))}(_r(n=Jt(n,$n)))}(this._delegate)}disableNetwork(){return function PZ(n){return function yZ(n){return n.asyncQueue.enqueue((0,z.Z)(function*(){const e=yield QU(n),t=yield DN(n);return e.setNetworkEnabled(!1),(r=(0,z.Z)(function*(i){const s=Ge(i);s._u.add(0),yield S_(s),s.gu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(_r(n=Jt(n,$n)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,BU("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function RZ(n){return function(e){const t=new kr;return e.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return function QW(n,e){return tN.apply(this,arguments)}(yield SN(e),t)})),t.promise}(_r(n=Jt(n,$n)))}(this._delegate)}onSnapshotsInSync(e){return function c6(n,e){return function EZ(n,e){const t=new xD(e);return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return r=yield k_(n),i=t,Ge(r).Ru.add(i),void i.next();var r,i})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return r=yield k_(n),i=t,void Ge(r).Ru.delete(i);var r,i}))}}(_r(n=Jt(n,$n)),xN(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new De("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new $_(this,vN(this._delegate,e))}catch(t){throw ji(t,"collection()","Firestore.collection()")}}doc(e){try{return new wo(this,AD(this._delegate,e))}catch(t){throw ji(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new $i(this,function cZ(n,e){if(n=Jt(n,nE),yN("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new De(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new yi(n,null,(t=e,new cu(nn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ji(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function f6(n,e,t){n=Jt(n,$n);const r=Object.assign(Object.assign({},d6),t);return function(i){if(i.maxAttempts<1)throw new De(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,u){const h=new kr;return i.asyncQueue.enqueueAndForget((0,z.Z)(function*(){const p=yield function JU(n){return MD(n).then(e=>e.datastore)}(i);new gZ(i.asyncQueue,p,u,s,h).run()})),h.promise}(_r(n),i=>e(new h6(n,i)),r)}(this._delegate,t=>e(new b$(this,t)))}batch(){return _r(this._delegate),new C$(new bV(this._delegate,e=>O_(this._delegate,e)))}loadBundle(e){return function kZ(n,e){const t=_r(n=Jt(n,$n)),r=new TZ;return function bZ(n,e,t,r){const i=function(s,u){let h;return h="string"==typeof s?(new TextEncoder).encode(s):s,p=function(p,_){if(p instanceof Uint8Array)return zU(p,_);if(p instanceof ArrayBuffer)return zU(new Uint8Array(p),_);if(p instanceof ReadableStream)return p.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new dZ(p,u);var p}(t,Xw(e));n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){!function lZ(n,e,t){const r=Ge(n);var i;(i=(0,z.Z)(function*(s,u,h){try{const p=yield u.getMetadata();if(yield function(S,N){const O=Ge(S),W=Zr(N.createTime);return O.persistence.runTransaction("hasNewerBundle","readonly",J=>O.Ns.getBundleMetadata(J,N.id)).then(J=>!!J&&J.createTime.compareTo(W)>=0)}(s.localStore,p))return yield u.close(),h._completeWith({taskState:"Success",documentsLoaded:(S=p).totalDocuments,bytesLoaded:S.totalBytes,totalDocuments:S.totalDocuments,totalBytes:S.totalBytes}),Promise.resolve(new Set);h._updateProgress(xU(p));const _=new jW(p,s.localStore,u.It);let b=yield u.mc();for(;b;){const S=yield _.Fu(b);S&&h._updateProgress(S),b=yield u.mc()}const T=yield _.complete();return yield fu(s,T.Lu,void 0),yield function(S,N){const O=Ge(S);return O.persistence.runTransaction("Save bundle","readwrite",W=>O.Ns.saveBundleMetadata(W,N))}(s.localStore,p),h._completeWith(T.progress),Promise.resolve(T.Bu)}catch(p){return df("SyncEngine",`Loading bundle failed with ${p}`),h._failWith(p),Promise.resolve(new Set)}var S}),function(s,u,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield SN(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function OZ(n,e){return function CZ(n,e){return n.asyncQueue.enqueue((0,z.Z)(function*(){return function(t,r){const i=Ge(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.Ns.getNamedQuery(s,r))}(yield RD(n),e)}))}(_r(n=Jt(n,$n)),e).then(t=>t?new yi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new $i(this,t):null)}}class CS extends ON{constructor(e){super(),this.firestore=e}convertBytes(e){return new bE(new Qa(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return wo.forKey(t,this.firestore,null)}}class b${constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new CS(e)}get(e){const t=jf(e);return this._delegate.get(t).then(r=>new CE(this._firestore,new gu(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=jf(e);return r?(sk("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=jf(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=jf(e);return this._delegate.delete(t),this}}class C${constructor(e){this._delegate=e}set(e,t,r){const i=jf(e);return r?(sk("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=jf(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=jf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Bf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new oE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new IE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Bf.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new Bf(e,new CS(e),t),i.set(t,s)),s}}Bf.INSTANCES=new WeakMap;class wo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CS(e)}static forPath(e,t,r){if(e.length%2!=0)throw new De("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new wo(t,new jn(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new wo(t,new jn(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new $_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new $_(this.firestore,vN(this._delegate,e))}catch(t){throw ji(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,R.m9)(e))instanceof jn&&ZU(this._delegate,e)}set(e,t){t=sk("DocumentReference.set",t);try{return t?wV(this._delegate,e,t):wV(this._delegate,e)}catch(r){throw ji(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?EV(this._delegate,e):EV(this._delegate,e,t,...r)}catch(i){throw ji(i,"updateDoc()","DocumentReference.update()")}}delete(){return function l6(n){return O_(Jt(n.firestore,$n),[new w_(n._key,Wn.none())])}(this._delegate)}onSnapshot(...e){const t=I$(e),r=T$(e,i=>new CE(this.firestore,new gu(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return FN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function r6(n){n=Jt(n,jn);const e=Jt(n.firestore,$n),t=_r(e),r=new Zc(e);return function vZ(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(i,s,u){try{const h=yield function(p,_){const b=Ge(p);return b.persistence.runTransaction("read document","readonly",T=>b.localDocuments.getDocument(T,_))}(i,s);h.isFoundDocument()?u.resolve(h):h.isNoDocument()?u.resolve(null):u.reject(new De(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const p=M_(h,`Failed to get document '${s} from cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield RD(n),e,t);var r})),t.promise}(t,n._key).then(i=>new gu(e,r,n._key,i,new Nf(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function i6(n){n=Jt(n,jn);const e=Jt(n.firestore,$n);return XU(_r(e),n._key,{source:"server"}).then(t=>LN(e,n,t))}(this._delegate):function n6(n){n=Jt(n,jn);const e=Jt(n.firestore,$n);return XU(_r(e),n._key).then(t=>LN(e,n,t))}(this._delegate),t.then(r=>new CE(this.firestore,new gu(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new wo(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}function ji(n,e,t){return n.message=n.message.replace(e,t),n}function I$(n){for(const e of n)if("object"==typeof e&&!ok(e))return e;return{}}function T$(n,e){var t,r;let i;return i=ok(n[0])?n[0]:ok(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class CE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new wo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vV(this._delegate,e._delegate)}}class IE extends CE{data(e){const t=this._delegate.data(e);return function wq(n,e){n||st()}(void 0!==t),t}}class $i{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new CS(e)}where(e,t,r){try{return new $i(this.firestore,Gc(this._delegate,function GZ(n,e,t){const r=e,i=LD("where",n);return new qZ(i,r,t)}(e,t,r)))}catch(i){throw ji(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new $i(this.firestore,Gc(this._delegate,function ZZ(n,e="asc"){const t=e,r=LD("orderBy",n);return new WZ(r,t)}(e,t)))}catch(r){throw ji(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new $i(this.firestore,Gc(this._delegate,function zZ(n){return HU("limit",n),new hV("limit",n,"F")}(e)))}catch(t){throw ji(t,"limit()","Query.limit()")}}limitToLast(e){try{return new $i(this.firestore,Gc(this._delegate,function KZ(n){return HU("limitToLast",n),new hV("limitToLast",n,"L")}(e)))}catch(t){throw ji(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new $i(this.firestore,Gc(this._delegate,function YZ(...n){return new fV("startAt",n,!0)}(...e)))}catch(t){throw ji(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new $i(this.firestore,Gc(this._delegate,function QZ(...n){return new fV("startAfter",n,!1)}(...e)))}catch(t){throw ji(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new $i(this.firestore,Gc(this._delegate,function JZ(...n){return new pV("endBefore",n,!1)}(...e)))}catch(t){throw ji(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new $i(this.firestore,Gc(this._delegate,function XZ(...n){return new pV("endAt",n,!0)}(...e)))}catch(t){throw ji(t,"endAt()","Query.endAt()")}}isEqual(e){return wN(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function o6(n){n=Jt(n,yi);const e=Jt(n.firestore,$n),t=_r(e),r=new Zc(e);return function wZ(n,e){const t=new kr;return n.asyncQueue.enqueueAndForget((0,z.Z)(function*(){return(r=(0,z.Z)(function*(i,s,u){try{const h=yield ED(i,s,!0),p=new NU(s,h.Hi),_=p.Wu(h.documents),b=p.applyChanges(_,!1);u.resolve(b.snapshot)}catch(h){const p=M_(h,`Failed to execute query '${s} against cache`);u.reject(p)}}),function(i,s,u){return r.apply(this,arguments)})(yield RD(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Wc(e,r,n,i))}(this._delegate):"server"===e?.source?function a6(n){n=Jt(n,yi);const e=Jt(n.firestore,$n),t=_r(e),r=new Zc(e);return eV(t,n._query,{source:"server"}).then(i=>new Wc(e,r,n,i))}(this._delegate):function s6(n){n=Jt(n,yi);const e=Jt(n.firestore,$n),t=_r(e),r=new Zc(e);return dV(n._query),eV(t,n._query).then(i=>new Wc(e,r,n,i))}(this._delegate),t.then(r=>new ak(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=I$(e),r=T$(e,i=>new ak(this.firestore,new Wc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return FN(this._delegate,t,r)}withConverter(e){return new $i(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}class J7{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new IE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ak{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new $i(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new IE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new J7(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new IE(this._firestore,r))})}isEqual(e){return vV(this._delegate,e._delegate)}}class $_ extends $i{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new wo(this.firestore,e):null}doc(e){try{return new wo(this.firestore,void 0===e?AD(this._delegate):AD(this._delegate,e))}catch(t){throw ji(t,"doc()","CollectionReference.doc()")}}add(e){return function u6(n,e){const t=Jt(n.firestore,$n),r=AD(n),i=UD(n.converter,e);return O_(t,[kD(Mf(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Wn.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new wo(this.firestore,t))}isEqual(e){return ZU(this._delegate,e._delegate)}withConverter(e){return new $_(this.firestore,this._delegate.withConverter(e?Bf.getInstance(this.firestore,e):null))}}function jf(n){return Jt(n,jn)}class lk{constructor(...e){this._delegate=new pu(...e)}static documentId(){return new lk(lr.keyField().canonicalString())}isEqual(e){return(e=(0,R.m9)(e))instanceof pu&&this._delegate._internalPath.isEqual(e._internalPath)}}class $f{constructor(e){this._delegate=e}static serverTimestamp(){const e=function g6(){return new MN("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new $f(e)}static delete(){const e=function p6(){return new rE("deleteField")}();return e._methodName="FieldValue.delete",new $f(e)}static arrayUnion(...e){const t=function m6(...n){return new VZ("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new $f(t)}static arrayRemove(...e){const t=function _6(...n){return new BZ("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new $f(t)}static increment(e){const t=function y6(n){return new jZ("increment",n)}(e);return t._methodName="FieldValue.increment",new $f(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const X7={Firestore:E$,GeoPoint:ND,Timestamp:Gn,Blob:bE,Transaction:b$,WriteBatch:C$,DocumentReference:wo,DocumentSnapshot:CE,Query:$i,QueryDocumentSnapshot:IE,QuerySnapshot:ak,CollectionReference:$_,FieldPath:lk,FieldValue:$f,setLogLevel:function Q7(n){!function vq(n){Nc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function D$(n,e){return function n9(n,e=Uh){return new qn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function uk(n,e){return D$(n,e).pipe((0,Je.U)(t=>({payload:t,type:"query"})))}function IS(n,e){return uk(n,e).pipe(zo(void 0),ik(),(0,Je.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(u=>({type:u.type,payload:u}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((u,h)=>{const p=i.find(b=>b.doc.ref.isEqual(u.ref)),_=t?.payload.docs.find(b=>b.ref.isEqual(u.ref));p&&JSON.stringify(p.doc.metadata)===JSON.stringify(u.metadata)||!p&&_&&JSON.stringify(_.metadata)===JSON.stringify(u.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:u}})}),s}))}function S$(n,e,t){return IS(n,t).pipe(eo((r,i)=>function i9(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function s9(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return ck(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return ck(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return ck(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),y$(),(0,Je.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function ck(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function A$(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function t9(n){(function e9(n,e){n.INTERNAL.registerComponent(new or.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},X7)))})(n,(e,t)=>new E$(e,t,new Y7)),n.registerVersion("@firebase/firestore-compat","0.2.3")}(GP.Z);class x${constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=IS(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Je.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(zo(void 0),ik(),gi(([r,i])=>i.length>0||!r),(0,Je.U)(([r,i])=>i),ar)}auditTrail(e){return this.stateChanges(e).pipe(eo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=A$(e);return S$(this.query,t,this.afs.schedulers.outsideAngular).pipe(ar)}valueChanges(e={}){return uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),ar)}get(e){return(0,Kt.D)(this.query.get(e)).pipe(ar)}add(e){return this.ref.add(e)}doc(e){return new M$(this.ref.doc(e),this.afs)}}class M${constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=P$(r,t);return new x$(i,s,this.afs)}snapshotChanges(){return function r9(n,e){return D$(n,e).pipe(zo(void 0),ik(),(0,Je.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(ar)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Je.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Kt.D)(this.ref.get(e)).pipe(ar)}}class o9{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?IS(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),gi(t=>t.length>0),ar):IS(this.query,this.afs.schedulers.outsideAngular).pipe(ar)}auditTrail(e){return this.stateChanges(e).pipe(eo((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=A$(e);return S$(this.query,t,this.afs.schedulers.outsideAngular).pipe(ar)}valueChanges(e={}){return uk(this.query,this.afs.schedulers.outsideAngular).pipe((0,Je.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),ar)}get(e){return(0,Kt.D)(this.query.get(e)).pipe(ar)}}const R$=new c.OlP("angularfire2.enableFirestorePersistence"),N$=new c.OlP("angularfire2.firestore.persistenceSettings"),a9=new c.OlP("angularfire2.firestore.settings"),l9=new c.OlP("angularfire2.firestore.use-emulator");function P$(n,e=(t=>t)){return{query:e(n),ref:n}}let u9=(()=>{class n{constructor(t,r,i,s,u,h,p,_,b,T,S,N,O,W,J,Me,Be){this.schedulers=p;const Ue=(0,Yr.on)(t,h,r),Ve=b;T&&qP(Ue,h,S,O,W,J,N,Me),[this.firestore,this.persistenceEnabled$]=(0,Yr.cc)(`${Ue.name}.firestore`,"AngularFirestore",Ue.name,()=>{const rt=h.runOutsideAngular(()=>Ue.firestore());if(s&&rt.settings(s),Ve&&rt.useEmulator(...Ve),i&&!gl(u)){const dt=()=>{try{return(0,Kt.D)(rt.enablePersistence(_||void 0).then(()=>!0,()=>!1))}catch(Wt){return typeof console<"u"&&console.warn(Wt),it(!1)}};return[rt,h.runOutsideAngular(dt)]}return[rt,it(!1)]},[s,Ve,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:u}=P$(i,r),h=this.schedulers.ngZone.run(()=>s);return new x$(h,u,this)}collectionGroup(t,r){const i=r||(u=>u),s=this.firestore.collectionGroup(t);return new o9(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new M$(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Yr.Dh),c.LFG(Yr.xv,8),c.LFG(R$,8),c.LFG(a9,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(wc),c.LFG(N$,8),c.LFG(l9,8),c.LFG(gS,8),c.LFG(UP,8),c.LFG(VP,8),c.LFG(BP,8),c.LFG(jP,8),c.LFG($P,8),c.LFG(HP,8),c.LFG(eu,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),c9=(()=>{class n{constructor(){pS.Z.registerVersion("angularfire",Ba.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:R$,useValue:!0},{provide:N$,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[u9]}),n})();var d9=U(408);const k$="@firebase/database",O$="0.13.10";let dk="";function F$(n){dk=n}class p9{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,R.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,R.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class g9{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,R.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const L$=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new p9(e)}}catch{}return new g9},Hf=L$("localStorage"),hk=L$("sessionStorage"),H_=new jr.Yd("@firebase/database"),U$=function(){let n=1;return function(){return n++}}(),V$=function(n){const e=(0,R.dS)(n),t=new R.gQ;t.update(e);const r=t.digest();return R.US.encodeByteArray(r)},TE=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=TE.apply(null,r):e+="object"==typeof r?(0,R.Wl)(r):r,e+=" "}return e};let qf=null,B$=!0;const j$=function(n,e){(0,R.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(H_.logLevel=jr.in.VERBOSE,qf=H_.log.bind(H_),e&&hk.set("logging_enabled",!0)):"function"==typeof n?qf=n:(qf=null,hk.remove("logging_enabled"))},Qr=function(...n){if(!0===B$&&(B$=!1,null===qf&&!0===hk.get("logging_enabled")&&j$(!0)),qf){const e=TE.apply(null,n);qf(e)}},DE=function(n){return function(...e){Qr(n,...e)}},fk=function(...n){const e="FIREBASE INTERNAL ERROR: "+TE(...n);H_.error(e)},rl=function(...n){const e=`FIREBASE FATAL ERROR: ${TE(...n)}`;throw H_.error(e),new Error(e)},Ei=function(...n){const e="FIREBASE WARNING: "+TE(...n);H_.warn(e)},TS=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},wu="[MIN_NAME]",il="[MAX_NAME]",Gf=function(n,e){if(n===e)return 0;if(n===wu||e===il)return-1;if(e===wu||n===il)return 1;{const t=DS(n),r=DS(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},y9=function(n,e){return n===e?0:n<e?-1:1},SE=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,R.Wl)(e))},pk=function(n){if("object"!=typeof n||null===n)return(0,R.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,R.Wl)(e[r]),t+=":",t+=pk(n[e[r]]);return t+="}",t},$$=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Jr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const H$=function(n){(0,R.hu)(!TS(n),"Invalid JSON number");const r=1023;let i,s,u,h,p;0===n?(s=0,u=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,u=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,u=Math.round(n/Math.pow(2,-1074))));const _=[];for(p=52;p;p-=1)_.push(u%2?1:0),u=Math.floor(u/2);for(p=11;p;p-=1)_.push(s%2?1:0),s=Math.floor(s/2);_.push(i?1:0),_.reverse();const b=_.join("");let T="";for(p=0;p<64;p+=8){let S=parseInt(b.substr(p,8),2).toString(16);1===S.length&&(S="0"+S),T+=S}return T.toLowerCase()},b9=new RegExp("^-?(0*)\\d{1,10}$"),q$=-2147483648,gk=2147483647,DS=function(n){if(b9.test(n)){const e=Number(n);if(e>=q$&&e<=gk)return e}return null},q_=function(n){try{n()}catch(e){setTimeout(()=>{throw Ei("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},AE=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class I9{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Ei(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class T9{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Qr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ei(e)}}let xE=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const K$=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,J$="websocket",X$="long_polling";class _k{constructor(e,t,r,i,s=!1,u="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=u,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Hf.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Hf.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function e3(n,e,t){let r;if((0,R.hu)("string"==typeof e,"typeof type must == string"),(0,R.hu)("object"==typeof t,"typeof params must == object"),e===J$)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==X$)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function D9(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Jr(t,(s,u)=>{i.push(s+"="+u)}),r+i.join("&")}class S9{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,R.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,R.p$)(this.counters_)}}const yk={},vk={};function wk(n){const e=n.toString();return yk[e]||(yk[e]=new S9),yk[e]}class x9{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&q_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class nd{constructor(e,t,r,i,s,u,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=u,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=DE(e),this.stats_=wk(t),this.urlFn=p=>(this.appCheckToken&&(p.ac=this.appCheckToken),e3(t,X$,p))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new x9(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,R.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ek((...s)=>{const[u,h,p,_,b]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===u)this.id=h,this.password=p;else{if("close"!==u)throw new Error("Unrecognized command received: "+u);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[u,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(u,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&K$.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){nd.forceAllow_=!0}static forceDisallow(){nd.forceDisallow_=!0}static isAvailable(){return!((0,R.Yr)()||!nd.forceAllow_&&(nd.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,R.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,R.h$)(t),i=$$(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,R.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,R.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Ek{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,R.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=U$(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Ek.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const u="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(u),this.myIFrame.doc.close()}catch(h){Qr("frame writing exception"),h.stack&&Qr(h.stack),Qr(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Qr("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const u=this.pendingSegs.shift();r=r+"&seg"+i+"="+u.seg+"&ts"+i+"="+u.ts+"&d"+i+"="+u.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,R.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Qr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let AS=null;typeof MozWebSocket<"u"?AS=MozWebSocket:typeof WebSocket<"u"&&(AS=WebSocket);let G_=(()=>{class n{constructor(t,r,i,s,u,h,p){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=u,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=DE(this.connId),this.stats_=wk(r),this.connURL=n.connectionURL_(r,h,p,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,u){const h={v:"5"};return!(0,R.Yr)()&&typeof location<"u"&&location.hostname&&K$.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),u&&(h.p=u),e3(t,J$,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Hf.set("previous_websocket_failure",!0);try{let i;if((0,R.Yr)()){i={headers:{"User-Agent":`Firebase/5/${dk}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const u=process.env,h=0===this.connURL.indexOf("wss://")?u.HTTPS_PROXY||u.https_proxy:u.HTTP_PROXY||u.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new AS(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==AS&&!n.forceDisallow_}static previouslyFailed(){return Hf.isInMemoryStorage||!0===Hf.get("previous_websocket_failure")}markConnectionHealthy(){Hf.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,R.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,R.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,R.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=$$(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),a3=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[nd,G_]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=G_&&G_.isAvailable();let i=r&&!G_.previouslyFailed();if(t.webSocketOnly&&(r||Ei("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[G_];else{const s=this.transports_=[];for(const u of n.ALL_TRANSPORTS)u&&u.isAvailable()&&s.push(u);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class p3{constructor(e,t,r,i,s,u,h,p,_,b){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=u,this.onReady_=h,this.onDisconnect_=p,this.onKill_=_,this.lastSessionId=b,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=DE("c:"+this.id+":"),this.transportManager_=new a3(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=AE(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=SE("t",e),r=SE("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=SE("t",e),r=SE("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=SE("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?fk("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):fk("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Ei("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),AE(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):AE(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Hf.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class g3{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class m3{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,R.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,R.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class xS extends m3{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,R.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new xS}getInitialEvent(e){return(0,R.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function dn(){return new pn("")}function qt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function rd(n){return n.pieces_.length-n.pieceNum_}function xn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new pn(n.pieces_,e)}function Ck(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ME(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function v3(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new pn(e,0)}function Zn(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new pn(t,0)}function Gt(n){return n.pieceNum_>=n.pieces_.length}function Hi(n,e){const t=qt(n),r=qt(e);if(null===t)return e;if(t===r)return Hi(xn(n),xn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function Q9(n,e){const t=ME(n,0),r=ME(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=Gf(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function Ik(n,e){if(rd(n)!==rd(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Eo(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(rd(n)>rd(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class J9{constructor(e,t){this.errorPrefix_=t,this.parts_=ME(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,R.ug)(this.parts_[r]);w3(this)}}function w3(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Wf(n))}function Wf(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Tk extends m3{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Tk}getInitialEvent(e){return(0,R.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const RE=1e3;let RS,Zf=(()=>{class n extends g3{constructor(t,r,i,s,u,h,p,_){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=u,this.authTokenProvider_=h,this.appCheckTokenProvider_=p,this.authOverride_=_,this.id=n.nextPersistentConnectionId_++,this.log_=DE("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,_&&!(0,R.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Tk.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&xS.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,u={r:s,a:t,b:r};this.log_((0,R.Wl)(u)),(0,R.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(u),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new R.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:h=>{const p=h.d;"ok"===h.s?r.resolve(p):r.reject(p)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const u=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+u),this.listens.has(h)||this.listens.set(h,new Map),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,R.hu)(!this.listens.get(h).has(u),"listen() called twice for same path/queryId.");const p={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(u,p),this.connected_&&this.sendListen_(p)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const u={p:i};t.tag&&(u.q=r._queryObject,u.t=t.tag),u.h=t.hashFn(),this.sendRequest("q",u,p=>{const _=p.d,b=p.s;n.warnOnListenWarnings_(_,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",p),"ok"!==b&&this.removeListen_(i,s),t.onComplete&&t.onComplete(b,_))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,R.r3)(t,"w")){const i=(0,R.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',u=r._path.toString();Ei(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${u} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,R.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,R.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const u=s.s,h=s.d||"error";this.authToken_===t&&("ok"===u?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(u,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,R.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const u={p:t};s&&(u.q=i,u.t=s),this.sendRequest("n",u)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const u={p:r,d:i};this.log_("onDisconnect "+t,u),this.sendRequest(t,u,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,u){this.initConnection_();const h={p:r,d:i};void 0!==u&&(h.h=u),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,u=>{this.log_(r+" response",u),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(u.s,u.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,R.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):fk("Unrecognized action received from server: "+(0,R.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,R.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RE,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=RE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=RE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,z.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),u=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let p=!1,_=null;const b=function(){_?_.close():(p=!0,s())};t.realtime_={close:b,sendRequest:function(N){(0,R.hu)(_,"sendRequest call when we're not connected not allowed."),_.sendRequest(N)}};const S=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[N,O]=yield Promise.all([t.authTokenProvider_.getToken(S),t.appCheckTokenProvider_.getToken(S)]);p?Qr("getToken() completed but was canceled"):(Qr("getToken() completed. Creating connection."),t.authToken_=N&&N.accessToken,t.appCheckToken_=O&&O.token,_=new p3(u,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,W=>{Ei(W+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(N){t.log_("Failed to get token: "+N),p||(t.repoInfo_.nodeAdmin&&Ei(N),b())}}})()}interrupt(t){Qr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Qr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,R.xb)(this.interruptReasons_)&&(this.reconnectDelay_=RE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(u=>pk(u)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new pn(t).toString();let s;if(this.listens.has(i)){const u=this.listens.get(i);s=u.get(r),u.delete(r),0===u.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Qr("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Qr("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,R.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+dk.replace(/\./g,"-")]=1,(0,R.uI)()?t["framework.cordova"]=1:(0,R.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=xS.getInstance().currentlyOnline();return(0,R.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class zt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new zt(e,t)}}class MS{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new zt(wu,e),i=new zt(wu,t);return 0!==this.compare(r,i)}minPost(){return zt.MIN}}class C3 extends MS{static get __EMPTY_NODE(){return RS}static set __EMPTY_NODE(e){RS=e}compare(e,t){return Gf(e.name,t.name)}isDefinedOn(e){throw(0,R.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return zt.MIN}maxPost(){return new zt(il,RS)}makePost(e,t){return(0,R.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new zt(e,RS)}toString(){return".key"}}const sl=new C3;class NS{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,i&&(u*=-1),u<0)e=this.isReverse_?e.left:e.right;else{if(0===u){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Sk,ua=(()=>{class n{constructor(t,r,i,s,u){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??ds.EMPTY_NODE,this.right=u??ds.EMPTY_NODE}copy(t,r,i,s,u){return new n(t??this.key,r??this.value,i??this.color,s??this.left,u??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const u=i(t,s.key);return s=u<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===u?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ds.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return ds.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class ds{constructor(e,t=ds.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new ds(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,ua.BLACK,null,null))}remove(e){return new ds(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ua.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new NS(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new NS(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new NS(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new NS(this.root_,null,this.comparator_,!0,e)}}function oY(n,e){return Gf(n.name,e.name)}function Dk(n,e){return Gf(n,e)}ds.EMPTY_NODE=new class sY{copy(e,t,r,i,s){return this}insert(e,t,r){return new ua(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const I3=function(n){return"number"==typeof n?"number:"+H$(n):"string:"+n},T3=function(n){if(n.isLeafNode()){const e=n.val();(0,R.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,R.r3)(e,".sv"),"Priority must be a string or number.")}else(0,R.hu)(n===Sk||n.isEmpty(),"priority of unexpected type.");(0,R.hu)(n===Sk||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let D3,S3,A3,W_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,R.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),T3(this.priorityNode_)}static set __childrenNodeConstructor(t){D3=t}static get __childrenNodeConstructor(){return D3}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return Gt(t)?this:".priority"===qt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=qt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,R.hu)(".priority"!==i||1===rd(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(xn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+I3(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?H$(this.value_):this.value_,this.lazyHash_=V$(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,R.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),u=n.VALUE_TYPE_ORDER.indexOf(i);return(0,R.hu)(s>=0,"Unknown leaf type: "+r),(0,R.hu)(u>=0,"Unknown leaf type: "+i),s===u?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:u-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const kn=new class cY extends MS{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?Gf(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return zt.MIN}maxPost(){return new zt(il,new W_("[PRIORITY-POST]",A3))}makePost(e,t){const r=S3(e);return new zt(t,new W_("[PRIORITY-POST]",r))}toString(){return".priority"}},dY=Math.log(2);class hY{constructor(e){this.count=parseInt(Math.log(e+1)/dY,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const PS=function(n,e,t,r){n.sort(e);const i=function(p,_){const b=_-p;let T,S;if(0===b)return null;if(1===b)return T=n[p],S=t?t(T):T,new ua(S,T.node,ua.BLACK,null,null);{const N=parseInt(b/2,10)+p,O=i(p,N),W=i(N+1,_);return T=n[N],S=t?t(T):T,new ua(S,T.node,ua.BLACK,O,W)}},h=function(p){let _=null,b=null,T=n.length;const S=function(O,W){const J=T-O,Me=T;T-=O;const Be=i(J+1,Me),Ue=n[J],Ve=t?t(Ue):Ue;N(new ua(Ve,Ue.node,W,null,Be))},N=function(O){_?(_.left=O,_=O):(b=O,_=O)};for(let O=0;O<p.count;++O){const W=p.nextBitIsOne(),J=Math.pow(2,p.count-(O+1));W?S(J,ua.BLACK):(S(J,ua.BLACK),S(J,ua.RED))}return b}(new hY(n.length));return new ds(r||e,h)};let Ak;const Z_={};class Eu{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,R.hu)(Z_&&kn,"ChildrenNode.ts has not been loaded"),Ak=Ak||new Eu({".priority":Z_},{".priority":kn}),Ak}get(e){const t=(0,R.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof ds?t:null}hasIndex(e){return(0,R.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,R.hu)(e!==sl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(zt.Wrap);let h,u=s.getNext();for(;u;)i=i||e.isDefinedOn(u.node),r.push(u),u=s.getNext();h=i?PS(r,e.getCompare()):Z_;const p=e.toString(),_=Object.assign({},this.indexSet_);_[p]=e;const b=Object.assign({},this.indexes_);return b[p]=h,new Eu(b,_)}addToIndexes(e,t){const r=(0,R.UI)(this.indexes_,(i,s)=>{const u=(0,R.DV)(this.indexSet_,s);if((0,R.hu)(u,"Missing index implementation for "+s),i===Z_){if(u.isDefinedOn(e.node)){const h=[],p=t.getIterator(zt.Wrap);let _=p.getNext();for(;_;)_.name!==e.name&&h.push(_),_=p.getNext();return h.push(e),PS(h,u.getCompare())}return Z_}{const h=t.get(e.name);let p=i;return h&&(p=p.remove(new zt(e.name,h))),p.insert(e,e.node)}});return new Eu(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,R.UI)(this.indexes_,i=>{if(i===Z_)return i;{const s=t.get(e.name);return s?i.remove(new zt(e.name,s)):i}});return new Eu(r,this.indexSet_)}}let NE,Lt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&T3(this.priorityNode_),this.children_.isEmpty()&&(0,R.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return NE||(NE=new n(new ds(Dk),null,Eu.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||NE}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?NE:r}}getChild(t){const r=qt(t);return null===r?this:this.getImmediateChild(r).getChild(xn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,R.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new zt(t,r);let s,u;r.isEmpty()?(s=this.children_.remove(t),u=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),u=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?NE:this.priorityNode_;return new n(s,h,u)}}updateChild(t,r){const i=qt(t);if(null===i)return r;{(0,R.hu)(".priority"!==qt(t)||1===rd(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(xn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,u=!0;if(this.forEachChild(kn,(h,p)=>{r[h]=p.val(t),i++,u&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):u=!1}),!t&&u&&s<2*i){const h=[];for(const p in r)h[p]=r[p];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+I3(this.getPriority().val())+":"),this.forEachChild(kn,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":V$(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const u=s.getPredecessorKey(new zt(t,r));return u?u.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new zt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new zt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,zt.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)<0;)s.getNext(),u=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,zt.Wrap);let u=s.peek();for(;null!=u&&r.compare(u,t)>0;)s.getNext(),u=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===PE?-1:0}withIndex(t){if(t===sl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===sl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(kn),s=r.getIterator(kn);let u=i.getNext(),h=s.getNext();for(;u&&h;){if(u.name!==h.name||!u.node.equals(h.node))return!1;u=i.getNext(),h=s.getNext()}return null===u&&null===h}return!1}return!1}}resolveIndex_(t){return t===sl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const PE=new class fY extends Lt{constructor(){super(new ds(Dk),Lt.EMPTY_NODE,Eu.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Lt.EMPTY_NODE}isEmpty(){return!1}};function er(n,e=null){if(null===n)return Lt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,R.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new W_(n,er(e));if(n instanceof Array){let t=Lt.EMPTY_NODE;return Jr(n,(r,i)=>{if((0,R.r3)(n,r)&&"."!==r.substring(0,1)){const s=er(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(er(e))}{const t=[];let r=!1;if(Jr(n,(u,h)=>{if("."!==u.substring(0,1)){const p=er(h);p.isEmpty()||(r=r||!p.getPriority().isEmpty(),t.push(new zt(u,p)))}}),0===t.length)return Lt.EMPTY_NODE;const s=PS(t,oY,u=>u.name,Dk);if(r){const u=PS(t,kn.getCompare());return new Lt(s,er(e),new Eu({".priority":u},{".priority":kn}))}return new Lt(s,er(e),Eu.Default)}}Object.defineProperties(zt,{MIN:{value:new zt(wu,Lt.EMPTY_NODE)},MAX:{value:new zt(il,PE)}}),C3.__EMPTY_NODE=Lt.EMPTY_NODE,W_.__childrenNodeConstructor=Lt,function aY(n){Sk=n}(PE),function uY(n){A3=n}(PE),function lY(n){S3=n}(er);class xk extends MS{constructor(e){super(),this.indexPath_=e,(0,R.hu)(!Gt(e)&&".priority"!==qt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?Gf(e.name,t.name):s}makePost(e,t){const r=er(e),i=Lt.EMPTY_NODE.updateChild(this.indexPath_,r);return new zt(t,i)}maxPost(){const e=Lt.EMPTY_NODE.updateChild(this.indexPath_,PE);return new zt(il,e)}toString(){return ME(this.indexPath_,0).join("/")}}const Mk=new class gY extends MS{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Gf(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return zt.MIN}maxPost(){return zt.MAX}makePost(e,t){const r=er(e);return new zt(t,r)}toString(){return".value"}},z_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",mY=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=z_.charAt(t%64),t=Math.floor(t/64);(0,R.hu)(0===t,"Cannot push at time == 0");let u=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)u+=z_.charAt(e[i]);return(0,R.hu)(20===u.length,"nextPushId: Length should be 20."),u}}(),R3=function(n){if(n===""+gk)return"-";const e=DS(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let u=0;u<t.length;u++)t[u]=n.charAt(u);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return il;const s=z_.charAt(z_.indexOf(t[r])+1);return t[r]=s,t.slice(0,r+1).join("")},N3=function(n){if(n===""+q$)return wu;const e=DS(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+gk:(delete t[t.length-1],t.join("")):(t[t.length-1]=z_.charAt(z_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function P3(n){return{type:"value",snapshotNode:n}}function K_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function kE(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function OE(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class Nk{constructor(e){this.index_=e}updateChild(e,t,r,i,s,u){(0,R.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=u&&(r.isEmpty()?e.hasChild(t)?u.trackChildChange(kE(t,h)):(0,R.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?u.trackChildChange(K_(t,r)):u.trackChildChange(OE(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(kn,(i,s)=>{t.hasChild(i)||r.trackChildChange(kE(i,s))}),t.isLeafNode()||t.forEachChild(kn,(i,s)=>{if(e.hasChild(i)){const u=e.getImmediateChild(i);u.equals(s)||r.trackChildChange(OE(i,s,u))}else r.trackChildChange(K_(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Lt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class FE{constructor(e){this.indexedFilter_=new Nk(e.getIndex()),this.index_=e.getIndex(),this.startPost_=FE.getStartPost_(e),this.endPost_=FE.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,s,u){return this.matches(new zt(t,r))||(r=Lt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,u)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Lt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Lt.EMPTY_NODE);const s=this;return t.forEachChild(kn,(u,h)=>{s.matches(new zt(u,h))||(i=i.updateImmediateChild(u,Lt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class yY{constructor(e){this.rangedFilter_=new FE(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,s,u){return this.rangedFilter_.matches(new zt(t,r))||(r=Lt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,u):this.fullLimitUpdateChild_(e,t,r,s,u)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Lt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Lt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let u=0;for(;s.hasNext()&&u<this.limit_;){const h=s.getNext();let p;if(p=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!p)break;i=i.updateImmediateChild(h.name,h.node),u++}}else{let s,u,h,p;if(i=t.withIndex(this.index_),i=i.updatePriority(Lt.EMPTY_NODE),this.reverse_){p=i.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();h=(S,N)=>T(N,S)}else p=i.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let _=0,b=!1;for(;p.hasNext();){const T=p.getNext();!b&&h(s,T)<=0&&(b=!0),b&&_<this.limit_&&h(T,u)<=0?_++:i=i.updateImmediateChild(T.name,Lt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let u;if(this.reverse_){const T=this.index_.getCompare();u=(S,N)=>T(N,S)}else u=this.index_.getCompare();const h=e;(0,R.hu)(h.numChildren()===this.limit_,"");const p=new zt(t,r),_=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),b=this.rangedFilter_.matches(p);if(h.hasChild(t)){const T=h.getImmediateChild(t);let S=i.getChildAfterChild(this.index_,_,this.reverse_);for(;null!=S&&(S.name===t||h.hasChild(S.name));)S=i.getChildAfterChild(this.index_,S,this.reverse_);const N=null==S?1:u(S,p);if(b&&!r.isEmpty()&&N>=0)return s?.trackChildChange(OE(t,r,T)),h.updateImmediateChild(t,r);{s?.trackChildChange(kE(t,T));const W=h.updateImmediateChild(t,Lt.EMPTY_NODE);return null!=S&&this.rangedFilter_.matches(S)?(s?.trackChildChange(K_(S.name,S.node)),W.updateImmediateChild(S.name,S.node)):W}}return r.isEmpty()?e:b&&u(_,p)>=0?(null!=s&&(s.trackChildChange(kE(_.name,_.node)),s.trackChildChange(K_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(_.name,Lt.EMPTY_NODE)):e}}class kS{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=kn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,R.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wu}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,R.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:il}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,R.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===kn}copy(){const e=new kS;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Pk(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function kk(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function OS(n,e){const t=n.copy();return t.index_=e,t}function k3(n){const e={};if(n.isDefault())return e;let t;return n.index_===kn?t="$priority":n.index_===Mk?t="$value":n.index_===sl?t="$key":((0,R.hu)(n.index_ instanceof xk,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,R.Wl)(t),n.startSet_&&(e.startAt=(0,R.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,R.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,R.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,R.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function O3(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==kn&&(e.i=n.index_.toString()),e}class FS extends g3{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=DE("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,R.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const u=FS.getListenId_(e,r),h={};this.listens_[u]=h;const p=k3(e._queryParams);this.restRequest_(s+".json",p,(_,b)=>{let T=b;if(404===_&&(T=null,_=null),null===_&&this.onDataUpdate_(s,T,!1,r),(0,R.DV)(this.listens_,u)===h){let S;S=_?401===_?"permission_denied":"rest_error:"+_:"ok",i(S,null)}})}unlisten(e,t){const r=FS.getListenId_(e,t);delete this.listens_[r]}get(e){const t=k3(e._queryParams),r=e._path.toString(),i=new R.BH;return this.restRequest_(r+".json",t,(s,u)=>{let h=u;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const u=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,R.xO)(t);this.log_("Sending REST request for "+u);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+u+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=(0,R.cI)(h.responseText)}catch{Ei("Failed to parse JSON response for "+u+": "+h.responseText)}r(null,p)}else 401!==h.status&&404!==h.status&&Ei("Got unsuccessful REST response for "+u+" Status: "+h.status),r(h.status);r=null}},h.open("GET",u,!0),h.send()})}}class IY{constructor(){this.rootNode_=Lt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function LS(){return{value:null,children:new Map}}function Y_(n,e,t){if(Gt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=qt(e);n.children.has(r)||n.children.set(r,LS()),Y_(n.children.get(r),e=xn(e),t)}}function Ok(n,e){if(Gt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(kn,(r,i)=>{Y_(n,new pn(r),i)}),Ok(n,e)}}if(n.children.size>0){const t=qt(e);return e=xn(e),n.children.has(t)&&Ok(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function Fk(n,e,t){null!==n.value?t(e,n.value):function TY(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{Fk(i,new pn(e.toString()+"/"+r),t)})}class DY{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Jr(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class xY{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new DY(e);const r=1e4+2e4*Math.random();AE(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Jr(e,(i,s)=>{s>0&&(0,R.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),AE(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var bo=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(bo||(bo={})),bo))();function Vk(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class US{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=bo.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(Gt(this.path)){if(null!=this.affectedTree.value)return(0,R.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new pn(e));return new US(dn(),t,this.revert)}}return(0,R.hu)(qt(this.path)===e,"operationForChild called for unrelated child."),new US(xn(this.path),this.affectedTree,this.revert)}}class LE{constructor(e,t){this.source=e,this.path=t,this.type=bo.LISTEN_COMPLETE}operationForChild(e){return Gt(this.path)?new LE(this.source,dn()):new LE(this.source,xn(this.path))}}class zf{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=bo.OVERWRITE}operationForChild(e){return Gt(this.path)?new zf(this.source,dn(),this.snap.getImmediateChild(e)):new zf(this.source,xn(this.path),this.snap)}}class Q_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=bo.MERGE}operationForChild(e){if(Gt(this.path)){const t=this.children.subtree(new pn(e));return t.isEmpty()?null:t.value?new zf(this.source,dn(),t.value):new Q_(this.source,dn(),t)}return(0,R.hu)(qt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Q_(this.source,xn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class id{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Gt(e))return this.isFullyInitialized()&&!this.filtered_;const t=qt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class MY{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function UE(n,e,t,r,i,s){const u=r.filter(h=>h.type===t);u.sort((h,p)=>function PY(n,e,t){if(null==e.childName||null==t.childName)throw(0,R.g5)("Should only compare child_ events.");const r=new zt(e.childName,e.snapshotNode),i=new zt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,p)),u.forEach(h=>{const p=function NY(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(_=>{_.respondsTo(h.type)&&e.push(_.createEvent(p,n.query_))})})}function VS(n,e){return{eventCache:n,serverCache:e}}function VE(n,e,t,r){return VS(new id(e,t,r),n.serverCache)}function L3(n,e,t,r){return VS(n.eventCache,new id(e,t,r))}function BS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Kf(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Bk;class On{constructor(e,t=(()=>(Bk||(Bk=new ds(y9)),Bk))()){this.value=e,this.children=t}static fromObject(e){let t=new On(null);return Jr(e,(r,i)=>{t=t.set(new pn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:dn(),value:this.value};if(Gt(e))return null;{const r=qt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(xn(e),t);return null!=s?{path:Zn(new pn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Gt(e))return this;{const t=qt(e),r=this.children.get(t);return null!==r?r.subtree(xn(e)):new On(null)}}set(e,t){if(Gt(e))return new On(t,this.children);{const r=qt(e),s=(this.children.get(r)||new On(null)).set(xn(e),t),u=this.children.insert(r,s);return new On(this.value,u)}}remove(e){if(Gt(e))return this.children.isEmpty()?new On(null):new On(null,this.children);{const t=qt(e),r=this.children.get(t);if(r){const i=r.remove(xn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new On(null):new On(this.value,s)}return this}}get(e){if(Gt(e))return this.value;{const t=qt(e),r=this.children.get(t);return r?r.get(xn(e)):null}}setTree(e,t){if(Gt(e))return t;{const r=qt(e),s=(this.children.get(r)||new On(null)).setTree(xn(e),t);let u;return u=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new On(this.value,u)}}fold(e){return this.fold_(dn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(Zn(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,dn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(Gt(e))return null;{const s=qt(e),u=this.children.get(s);return u?u.findOnPath_(xn(e),Zn(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,dn(),t)}foreachOnPath_(e,t,r){if(Gt(e))return this;{this.value&&r(t,this.value);const i=qt(e),s=this.children.get(i);return s?s.foreachOnPath_(xn(e),Zn(t,i),r):new On(null)}}foreach(e){this.foreach_(dn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Zn(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class ca{constructor(e){this.writeTree_=e}static empty(){return new ca(new On(null))}}function BE(n,e,t){if(Gt(e))return new ca(new On(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const u=Hi(i,e);return s=s.updateChild(u,t),new ca(n.writeTree_.set(i,s))}{const i=new On(t),s=n.writeTree_.setTree(e,i);return new ca(s)}}}function jk(n,e,t){let r=n;return Jr(t,(i,s)=>{r=BE(r,Zn(e,i),s)}),r}function U3(n,e){if(Gt(e))return ca.empty();{const t=n.writeTree_.setTree(e,new On(null));return new ca(t)}}function $k(n,e){return null!=Yf(n,e)}function Yf(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Hi(t.path,e)):null}function V3(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(kn,(r,i)=>{e.push(new zt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new zt(r,i.value))}),e}function sd(n,e){if(Gt(e))return n;{const t=Yf(n,e);return new ca(null!=t?new On(t):n.writeTree_.subtree(e))}}function Hk(n){return n.writeTree_.isEmpty()}function J_(n,e){return B3(dn(),n.writeTree_,e)}function B3(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,R.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=B3(Zn(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Zn(n,".priority"),r)),t}}function jS(n,e){return G3(e,n)}function VY(n,e){if(n.snap)return Eo(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Eo(Zn(n.path,t),e))return!0;return!1}function jY(n){return n.visible}function j3(n,e,t){let r=ca.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const u=s.path;let h;if(s.snap)Eo(t,u)?(h=Hi(t,u),r=BE(r,h,s.snap)):Eo(u,t)&&(h=Hi(u,t),r=BE(r,dn(),s.snap.getChild(h)));else{if(!s.children)throw(0,R.g5)("WriteRecord should have .snap or .children");if(Eo(t,u))h=Hi(t,u),r=jk(r,h,s.children);else if(Eo(u,t))if(h=Hi(u,t),Gt(h))r=jk(r,dn(),s.children);else{const p=(0,R.DV)(s.children,qt(h));if(p){const _=p.getChild(xn(h));r=BE(r,dn(),_)}}}}}return r}function $3(n,e,t,r,i){if(r||i){const s=sd(n.visibleWrites,e);return!i&&Hk(s)?t:i||null!=t||$k(s,dn())?J_(j3(n.allWrites,function(_){return(_.visible||i)&&(!r||!~r.indexOf(_.writeId))&&(Eo(_.path,e)||Eo(e,_.path))},e),t||Lt.EMPTY_NODE):null}{const s=Yf(n.visibleWrites,e);if(null!=s)return s;{const u=sd(n.visibleWrites,e);return Hk(u)?t:null!=t||$k(u,dn())?J_(u,t||Lt.EMPTY_NODE):null}}}function $S(n,e,t,r){return $3(n.writeTree,n.treePath,e,t,r)}function qk(n,e){return function $Y(n,e,t){let r=Lt.EMPTY_NODE;const i=Yf(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(kn,(s,u)=>{r=r.updateImmediateChild(s,u)}),r;if(t){const s=sd(n.visibleWrites,e);return t.forEachChild(kn,(u,h)=>{const p=J_(sd(s,new pn(u)),h);r=r.updateImmediateChild(u,p)}),V3(s).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}return V3(sd(n.visibleWrites,e)).forEach(u=>{r=r.updateImmediateChild(u.name,u.node)}),r}(n.writeTree,n.treePath,e)}function H3(n,e,t,r){return function HY(n,e,t,r,i){(0,R.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=Zn(e,t);if($k(n.visibleWrites,s))return null;{const u=sd(n.visibleWrites,s);return Hk(u)?i.getChild(t):J_(u,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function HS(n,e){return function GY(n,e){return Yf(n.visibleWrites,e)}(n.writeTree,Zn(n.treePath,e))}function Gk(n,e,t){return function qY(n,e,t,r){const i=Zn(e,t),s=Yf(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?J_(sd(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function q3(n,e){return G3(Zn(n.treePath,e),n.writeTree)}function G3(n,e){return{treePath:n,writeTree:e}}class KY{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,R.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,R.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,OE(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,kE(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,K_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,R.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,OE(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const W3=new class YY{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class Wk{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new id(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Gk(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Kf(this.viewCache_),s=function zY(n,e,t,r,i,s){return function WY(n,e,t,r,i,s,u){let h;const p=sd(n.visibleWrites,e),_=Yf(p,dn());if(null!=_)h=_;else{if(null==t)return[];h=J_(p,t)}if(h=h.withIndex(u),h.isEmpty()||h.isLeafNode())return[];{const b=[],T=u.getCompare(),S=s?h.getReverseIteratorFrom(r,u):h.getIteratorFrom(r,u);let N=S.getNext();for(;N&&b.length<i;)0!==T(N,r)&&b.push(N),N=S.getNext();return b}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function Z3(n,e,t,r,i,s){const u=e.eventCache;if(null!=HS(r,t))return e;{let h,p;if(Gt(t))if((0,R.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const _=Kf(e),T=qk(r,_ instanceof Lt?_:Lt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),T,s)}else{const _=$S(r,Kf(e));h=n.filter.updateFullNode(e.eventCache.getNode(),_,s)}else{const _=qt(t);if(".priority"===_){(0,R.hu)(1===rd(t),"Can't have a priority with additional path components");const b=u.getNode();p=e.serverCache.getNode();const T=H3(r,t,b,p);h=null!=T?n.filter.updatePriority(b,T):u.getNode()}else{const b=xn(t);let T;if(u.isCompleteForChild(_)){p=e.serverCache.getNode();const S=H3(r,t,u.getNode(),p);T=null!=S?u.getNode().getImmediateChild(_).updateChild(b,S):u.getNode().getImmediateChild(_)}else T=Gk(r,_,e.serverCache);h=null!=T?n.filter.updateChild(u.getNode(),_,T,b,i,s):u.getNode()}}return VE(e,h,u.isFullyInitialized()||Gt(t),n.filter.filtersNodes())}}function qS(n,e,t,r,i,s,u,h){const p=e.serverCache;let _;const b=u?n.filter:n.filter.getIndexedFilter();if(Gt(t))_=b.updateFullNode(p.getNode(),r,null);else if(b.filtersNodes()&&!p.isFiltered()){const N=p.getNode().updateChild(t,r);_=b.updateFullNode(p.getNode(),N,null)}else{const N=qt(t);if(!p.isCompleteForPath(t)&&rd(t)>1)return e;const O=xn(t),J=p.getNode().getImmediateChild(N).updateChild(O,r);_=".priority"===N?b.updatePriority(p.getNode(),J):b.updateChild(p.getNode(),N,J,O,W3,null)}const T=L3(e,_,p.isFullyInitialized()||Gt(t),b.filtersNodes());return Z3(n,T,t,i,new Wk(i,T,s),h)}function Zk(n,e,t,r,i,s,u){const h=e.eventCache;let p,_;const b=new Wk(i,e,s);if(Gt(t))_=n.filter.updateFullNode(e.eventCache.getNode(),r,u),p=VE(e,_,!0,n.filter.filtersNodes());else{const T=qt(t);if(".priority"===T)_=n.filter.updatePriority(e.eventCache.getNode(),r),p=VE(e,_,h.isFullyInitialized(),h.isFiltered());else{const S=xn(t),N=h.getNode().getImmediateChild(T);let O;if(Gt(S))O=r;else{const W=b.getCompleteChild(T);O=null!=W?".priority"===Ck(S)&&W.getChild(v3(S)).isEmpty()?W:W.updateChild(S,r):Lt.EMPTY_NODE}p=N.equals(O)?e:VE(e,n.filter.updateChild(h.getNode(),T,O,S,b,u),h.isFullyInitialized(),n.filter.filtersNodes())}}return p}function z3(n,e){return n.eventCache.isCompleteForChild(e)}function K3(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function zk(n,e,t,r,i,s,u,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let _,p=e;_=Gt(t)?r:new On(null).setTree(t,r);const b=e.serverCache.getNode();return _.children.inorderTraversal((T,S)=>{if(b.hasChild(T)){const O=K3(0,e.serverCache.getNode().getImmediateChild(T),S);p=qS(n,p,new pn(T),O,i,s,u,h)}}),_.children.inorderTraversal((T,S)=>{const N=!e.serverCache.isCompleteForChild(T)&&null===S.value;if(!b.hasChild(T)&&!N){const W=K3(0,e.serverCache.getNode().getImmediateChild(T),S);p=qS(n,p,new pn(T),W,i,s,u,h)}}),p}class sQ{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Nk(r.getIndex()),s=function vY(n){return n.loadsAllData()?new Nk(n.getIndex()):n.hasLimit()?new yY(n):new FE(n)}(r);this.processor_=function QY(n){return{filter:n}}(s);const u=t.serverCache,h=t.eventCache,p=i.updateFullNode(Lt.EMPTY_NODE,u.getNode(),null),_=s.updateFullNode(Lt.EMPTY_NODE,h.getNode(),null),b=new id(p,u.isFullyInitialized(),i.filtersNodes()),T=new id(_,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=VS(T,b),this.eventGenerator_=new MY(this.query_)}get query(){return this.query_}}function lQ(n,e){const t=Kf(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!Gt(e)&&!t.getImmediateChild(qt(e)).isEmpty())?t.getChild(e):null}function Y3(n){return 0===n.eventRegistrations_.length}function Q3(n,e,t){const r=[];if(t){(0,R.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const u=s.createCancelEvent(t,i);u&&r.push(u)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const u=n.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(u)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function J3(n,e,t,r){e.type===bo.MERGE&&null!==e.source.queryId&&((0,R.hu)(Kf(n.viewCache_),"We should always have a full cache before handling merges"),(0,R.hu)(BS(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function XY(n,e,t,r,i){const s=new KY;let u,h;if(t.type===bo.OVERWRITE){const _=t;_.source.fromUser?u=Zk(n,e,_.path,_.snap,r,i,s):((0,R.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered()&&!Gt(_.path),u=qS(n,e,_.path,_.snap,r,i,h,s))}else if(t.type===bo.MERGE){const _=t;_.source.fromUser?u=function tQ(n,e,t,r,i,s,u){let h=e;return r.foreach((p,_)=>{const b=Zn(t,p);z3(e,qt(b))&&(h=Zk(n,h,b,_,i,s,u))}),r.foreach((p,_)=>{const b=Zn(t,p);z3(e,qt(b))||(h=Zk(n,h,b,_,i,s,u))}),h}(n,e,_.path,_.children,r,i,s):((0,R.hu)(_.source.fromServer,"Unknown source."),h=_.source.tagged||e.serverCache.isFiltered(),u=zk(n,e,_.path,_.children,r,i,h,s))}else if(t.type===bo.ACK_USER_WRITE){const _=t;u=_.revert?function iQ(n,e,t,r,i,s){let u;if(null!=HS(r,t))return e;{const h=new Wk(r,e,i),p=e.eventCache.getNode();let _;if(Gt(t)||".priority"===qt(t)){let b;if(e.serverCache.isFullyInitialized())b=$S(r,Kf(e));else{const T=e.serverCache.getNode();(0,R.hu)(T instanceof Lt,"serverChildren would be complete if leaf node"),b=qk(r,T)}_=n.filter.updateFullNode(p,b,s)}else{const b=qt(t);let T=Gk(r,b,e.serverCache);null==T&&e.serverCache.isCompleteForChild(b)&&(T=p.getImmediateChild(b)),_=null!=T?n.filter.updateChild(p,b,T,xn(t),h,s):e.eventCache.getNode().hasChild(b)?n.filter.updateChild(p,b,Lt.EMPTY_NODE,xn(t),h,s):p,_.isEmpty()&&e.serverCache.isFullyInitialized()&&(u=$S(r,Kf(e)),u.isLeafNode()&&(_=n.filter.updateFullNode(_,u,s)))}return u=e.serverCache.isFullyInitialized()||null!=HS(r,dn()),VE(e,_,u,n.filter.filtersNodes())}}(n,e,_.path,r,i,s):function nQ(n,e,t,r,i,s,u){if(null!=HS(i,t))return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(null!=r.value){if(Gt(t)&&p.isFullyInitialized()||p.isCompleteForPath(t))return qS(n,e,t,p.getNode().getChild(t),i,s,h,u);if(Gt(t)){let _=new On(null);return p.getNode().forEachChild(sl,(b,T)=>{_=_.set(new pn(b),T)}),zk(n,e,t,_,i,s,h,u)}return e}{let _=new On(null);return r.foreach((b,T)=>{const S=Zn(t,b);p.isCompleteForPath(S)&&(_=_.set(b,p.getNode().getChild(S)))}),zk(n,e,t,_,i,s,h,u)}}(n,e,_.path,_.affectedTree,r,i,s)}else{if(t.type!==bo.LISTEN_COMPLETE)throw(0,R.g5)("Unknown operation type: "+t.type);u=function rQ(n,e,t,r,i){const s=e.serverCache;return Z3(n,L3(e,s.getNode(),s.isFullyInitialized()||Gt(t),s.isFiltered()),t,r,W3,i)}(n,e,t.path,r,s)}const p=s.getChanges();return function eQ(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=BS(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push(P3(BS(e)))}}(e,u,p),{viewCache:u,changes:p}}(n.processor_,i,e,t,r);return function JY(n,e){(0,R.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,R.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,R.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,X3(n,s.changes,s.viewCache.eventCache.getNode(),null)}function X3(n,e,t,r){return function RY(n,e,t,r){const i=[],s=[];return e.forEach(u=>{"child_changed"===u.type&&n.index_.indexedValueChanged(u.oldSnap,u.snapshotNode)&&s.push(function _Y(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(u.childName,u.snapshotNode))}),UE(n,i,"child_removed",e,r,t),UE(n,i,"child_added",e,r,t),UE(n,i,"child_moved",s,r,t),UE(n,i,"child_changed",e,r,t),UE(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let GS,ZS;class eH{constructor(){this.views=new Map}}function Kk(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,R.hu)(null!=s,"SyncTree gave us an op for an invalid query."),J3(s,e,t,r)}{let s=[];for(const u of n.views.values())s=s.concat(J3(u,e,t,r));return s}}function tH(n,e,t,r,i){const u=n.views.get(e._queryIdentifier);if(!u){let h=$S(t,i?r:null),p=!1;h?p=!0:r instanceof Lt?(h=qk(t,r),p=!1):(h=Lt.EMPTY_NODE,p=!1);const _=VS(new id(h,p,!1),new id(r,i,!1));return new sQ(e,_)}return u}function nH(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function od(n,e){let t=null;for(const r of n.views.values())t=t||lQ(r,e);return t}function rH(n,e){return e._queryParams.loadsAllData()?WS(n):n.views.get(e._queryIdentifier)}function iH(n,e){return null!=rH(n,e)}function ad(n){return null!=WS(n)}function WS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let yQ=1;class sH{constructor(e){this.listenProvider_=e,this.syncPointTree_=new On(null),this.pendingWriteTree_=function ZY(){return{visibleWrites:ca.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Yk(n,e,t,r,i){return function OY(n,e,t,r,i){(0,R.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=BE(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?X_(n,new zf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function ld(n,e,t=!1){const r=function LY(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function UY(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,R.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,u=n.allWrites.length-1;for(;i&&u>=0;){const h=n.allWrites[u];h.visible&&(u>=t&&VY(h,r.path)?i=!1:Eo(r.path,h.path)&&(s=!0)),u--}return!!i&&(s?(function BY(n){n.visibleWrites=j3(n.allWrites,jY,dn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=U3(n.visibleWrites,r.path):Jr(r.children,p=>{n.visibleWrites=U3(n.visibleWrites,Zn(r.path,p))}),!0))}(n.pendingWriteTree_,e)){let s=new On(null);return null!=r.snap?s=s.set(dn(),!0):Jr(r.children,u=>{s=s.set(new pn(u),!0)}),X_(n,new US(r.path,s,t))}return[]}function jE(n,e,t){return X_(n,new zf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function zS(n,e,t,r,i=!1){const s=e._path,u=n.syncPointTree_.get(s);let h=[];if(u&&("default"===e._queryIdentifier||iH(u,e))){const p=function gQ(n,e,t,r){const i=e._queryIdentifier,s=[];let u=[];const h=ad(n);if("default"===i)for(const[p,_]of n.views.entries())u=u.concat(Q3(_,t,r)),Y3(_)&&(n.views.delete(p),_.query._queryParams.loadsAllData()||s.push(_.query));else{const p=n.views.get(i);p&&(u=u.concat(Q3(p,t,r)),Y3(p)&&(n.views.delete(i),p.query._queryParams.loadsAllData()||s.push(p.query)))}return h&&!ad(n)&&s.push(new(function hQ(){return(0,R.hu)(GS,"Reference.ts has not been loaded"),GS}())(e._repo,e._path)),{removed:s,events:u}}(u,e,t,r);(function fQ(n){return 0===n.views.size})(u)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const _=p.removed;if(h=p.events,!i){const b=-1!==_.findIndex(S=>S._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(s,(S,N)=>ad(N));if(b&&!T){const S=n.syncPointTree_.subtree(s);if(!S.isEmpty()){const N=function TQ(n){return n.fold((e,t,r)=>{if(t&&ad(t))return[WS(t)];{let i=[];return t&&(i=nH(t)),Jr(r,(s,u)=>{i=i.concat(u)}),i}})}(S);for(let O=0;O<N.length;++O){const W=N[O],J=W.query,Me=uH(n,W);n.listenProvider_.startListening(HE(J),$E(n,J),Me.hashFn,Me.onComplete)}}}!T&&_.length>0&&!r&&(b?n.listenProvider_.stopListening(HE(e),null):_.forEach(S=>{const N=n.queryToTagMap.get(YS(S));n.listenProvider_.stopListening(HE(S),N)}))}!function DQ(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=YS(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,_)}return h}function oH(n,e,t,r){const i=Jk(n,r);if(null!=i){const s=Xk(i),u=s.path,h=s.queryId,p=Hi(u,e);return eO(n,u,new zf(Vk(h),p,t))}return[]}function Qk(n,e,t,r=!1){const i=e._path;let s=null,u=!1;n.syncPointTree_.foreachOnPath(i,(S,N)=>{const O=Hi(S,i);s=s||od(N,O),u=u||ad(N)});let p,h=n.syncPointTree_.get(i);h?(u=u||ad(h),s=s||od(h,dn())):(h=new eH,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=s?p=!0:(p=!1,s=Lt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((N,O)=>{const W=od(O,dn());W&&(s=s.updateImmediateChild(N,W))}));const _=iH(h,e);if(!_&&!e._queryParams.loadsAllData()){const S=YS(e);(0,R.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const N=function SQ(){return yQ++}();n.queryToTagMap.set(S,N),n.tagToQueryMap.set(N,S)}let T=function pQ(n,e,t,r,i,s){const u=tH(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,u),function uQ(n,e){n.eventRegistrations_.push(e)}(u,t),function cQ(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(kn,(s,u)=>{r.push(K_(s,u))}),t.isFullyInitialized()&&r.push(P3(t.getNode())),X3(n,r,t.getNode(),e)}(u,t)}(h,e,t,jS(n.pendingWriteTree_,i),s,p);if(!_&&!u&&!r){const S=rH(h,e);T=T.concat(function AQ(n,e,t){const r=e._path,i=$E(n,e),s=uH(n,t),u=n.listenProvider_.startListening(HE(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,R.hu)(!ad(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((_,b,T)=>{if(!Gt(_)&&b&&ad(b))return[WS(b).query];{let S=[];return b&&(S=S.concat(nH(b).map(N=>N.query))),Jr(T,(N,O)=>{S=S.concat(O)}),S}});for(let _=0;_<p.length;++_){const b=p[_];n.listenProvider_.stopListening(HE(b),$E(n,b))}}return u}(n,e,S))}return T}function KS(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(u,h)=>{const _=od(h,Hi(u,e));if(_)return _});return $3(i,e,s,t,!0)}function X_(n,e){return aH(e,n.syncPointTree_,null,jS(n.pendingWriteTree_,dn()))}function aH(n,e,t,r){if(Gt(n.path))return lH(n,e,t,r);{const i=e.get(dn());null==t&&null!=i&&(t=od(i,dn()));let s=[];const u=qt(n.path),h=n.operationForChild(u),p=e.children.get(u);if(p&&h){const _=t?t.getImmediateChild(u):null,b=q3(r,u);s=s.concat(aH(h,p,_,b))}return i&&(s=s.concat(Kk(i,n,r,t))),s}}function lH(n,e,t,r){const i=e.get(dn());null==t&&null!=i&&(t=od(i,dn()));let s=[];return e.children.inorderTraversal((u,h)=>{const p=t?t.getImmediateChild(u):null,_=q3(r,u),b=n.operationForChild(u);b&&(s=s.concat(lH(b,h,p,_)))}),i&&(s=s.concat(Kk(i,n,r,t))),s}function uH(n,e){const t=e.query,r=$E(n,t);return{hashFn:()=>(function oQ(n){return n.viewCache_.serverCache.getNode()}(e)||Lt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function bQ(n,e,t){const r=Jk(n,t);if(r){const i=Xk(r),s=i.path,u=i.queryId,h=Hi(s,e);return eO(n,s,new LE(Vk(u),h))}return[]}(n,t._path,r):function EQ(n,e){return X_(n,new LE({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function E9(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return zS(n,t,null,s)}}}}function $E(n,e){const t=YS(e);return n.queryToTagMap.get(t)}function YS(n){return n._path.toString()+"$"+n._queryIdentifier}function Jk(n,e){return n.tagToQueryMap.get(e)}function Xk(n){const e=n.indexOf("$");return(0,R.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new pn(n.substr(0,e))}}function eO(n,e,t){const r=n.syncPointTree_.get(e);return(0,R.hu)(r,"Missing sync point for query tag that we're tracking"),Kk(r,t,jS(n.pendingWriteTree_,e),null)}function HE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function _Q(){return(0,R.hu)(ZS,"Reference.ts has not been loaded"),ZS}())(n._repo,n._path):n}class tO{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new tO(t)}node(){return this.node_}}class nO{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Zn(this.path_,e);return new nO(this.syncTree_,t)}node(){return KS(this.syncTree_,this.path_)}}const cH=function(n,e,t){return n&&"object"==typeof n?((0,R.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?MQ(n[".sv"],e,t):"object"==typeof n[".sv"]?RQ(n[".sv"],e):void(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},MQ=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,R.hu)(!1,"Unexpected server value: "+n)},RQ=function(n,e,t){n.hasOwnProperty("increment")||(0,R.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,R.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,R.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const u=i.getValue();return"number"!=typeof u?r:u+r},dH=function(n,e,t,r){return iO(e,new nO(t,n),r)},rO=function(n,e,t){return iO(n,new tO(e),t)};function iO(n,e,t){const r=n.getPriority().val(),i=cH(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const u=n,h=cH(u.getValue(),e,t);return h!==u.getValue()||i!==u.getPriority().val()?new W_(h,er(i)):n}{const u=n;return s=u,i!==u.getPriority().val()&&(s=s.updatePriority(new W_(i))),u.forEachChild(kn,(h,p)=>{const _=iO(p,e.getImmediateChild(h),t);_!==p&&(s=s.updateImmediateChild(h,_))}),s}}class sO{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function QS(n,e){let t=e instanceof pn?e:new pn(e),r=n,i=qt(t);for(;null!==i;){const s=(0,R.DV)(r.node.children,i)||{children:{},childCount:0};r=new sO(i,r,s),t=xn(t),i=qt(t)}return r}function Qf(n){return n.node.value}function oO(n,e){n.node.value=e,aO(n)}function hH(n){return n.node.childCount>0}function JS(n,e){Jr(n.node.children,(t,r)=>{e(new sO(t,n,r))})}function fH(n,e,t,r){t&&!r&&e(n),JS(n,i=>{fH(i,e,!0,r)}),t&&r&&e(n)}function qE(n){return new pn(null===n.parent?n.name:qE(n.parent)+"/"+n.name)}function aO(n){null!==n.parent&&function kQ(n,e,t){const r=function NQ(n){return void 0===Qf(n)&&!hH(n)}(t),i=(0,R.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,aO(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,aO(n))}(n.parent,n.name,n)}const OQ=/[\[\].#$\/\u0000-\u001F\u007F]/,FQ=/[\[\].#$\u0000-\u001F\u007F]/,lO=10485760,XS=function(n){return"string"==typeof n&&0!==n.length&&!OQ.test(n)},pH=function(n){return"string"==typeof n&&0!==n.length&&!FQ.test(n)},GE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!TS(n)||n&&"object"==typeof n&&(0,R.r3)(n,".sv")},ol=function(n,e,t,r){r&&void 0===e||WE((0,R.gK)(n,"value"),e,t)},WE=function(n,e,t){const r=t instanceof pn?new J9(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Wf(r));if("function"==typeof e)throw new Error(n+"contains a function "+Wf(r)+" with contents = "+e.toString());if(TS(e))throw new Error(n+"contains "+e.toString()+" "+Wf(r));if("string"==typeof e&&e.length>lO/3&&(0,R.ug)(e)>lO)throw new Error(n+"contains a string greater than "+lO+" utf8 bytes "+Wf(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(Jr(e,(u,h)=>{if(".value"===u)i=!0;else if(".priority"!==u&&".sv"!==u&&(s=!0,!XS(u)))throw new Error(n+" contains an invalid key ("+u+") "+Wf(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function X9(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,R.ug)(e),w3(n)})(r,u),WE(n,h,r),function eY(n){const e=n.parts_.pop();n.byteLength_-=(0,R.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Wf(r)+" in addition to actual children.")}},gH=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,R.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Jr(e,(u,h)=>{const p=new pn(u);if(WE(i,h,Zn(t,p)),".priority"===Ck(p)&&!GE(h))throw new Error(i+"contains an invalid value for '"+p.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(p)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=ME(r);for(let u=0;u<s.length;u++)if((".priority"!==s[u]||u!==s.length-1)&&!XS(s[u]))throw new Error(n+"contains an invalid key ("+s[u]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(Q9);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Eo(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},uO=function(n,e,t){if(!t||void 0!==e){if(TS(e))throw new Error((0,R.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!GE(e))throw new Error((0,R.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},ZE=function(n,e,t,r){if(!(r&&void 0===t||XS(t)))throw new Error((0,R.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},zE=function(n,e,t,r){if(!(r&&void 0===t||pH(t)))throw new Error((0,R.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Co=function(n,e){if(".info"===qt(e))throw new Error(n+" failed = Can't modify data under /.info/")},mH=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!XS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),pH(n)}(t))throw new Error((0,R.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class BQ{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eA(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!Ik(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function _H(n,e,t){eA(n,t),yH(n,r=>Ik(r,e))}function Ls(n,e,t){eA(n,t),yH(n,r=>Eo(r,e)||Eo(e,r))}function yH(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(jQ(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function jQ(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();qf&&Qr("event: "+t.toString()),q_(r)}}}const vH="repo_interrupt";class HQ{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new BQ,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=LS(),this.transactionQueueTree_=new sO,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function wH(n){const t=n.infoData_.getNode(new pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function KE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:wH(n)})}function EH(n,e,t,r,i){n.dataUpdateCount++;const s=new pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let u=[];if(i)if(r){const p=(0,R.UI)(t,_=>er(_));u=function CQ(n,e,t,r){const i=Jk(n,r);if(i){const s=Xk(i),u=s.path,h=s.queryId,p=Hi(u,e),_=On.fromObject(t);return eO(n,u,new Q_(Vk(h),p,_))}return[]}(n.serverSyncTree_,s,p,i)}else{const p=er(t);u=oH(n.serverSyncTree_,s,p,i)}else if(r){const p=(0,R.UI)(t,_=>er(_));u=function wQ(n,e,t){const r=On.fromObject(t);return X_(n,new Q_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,p)}else{const p=er(t);u=jE(n.serverSyncTree_,s,p)}let h=s;u.length>0&&(h=ty(n,s)),Ls(n.eventQueue_,h,u)}function bH(n,e){cO(n,"connected",e),!1===e&&function zQ(n){ey(n,"onDisconnectEvents");const e=KE(n),t=LS();Fk(n.onDisconnect_,dn(),(i,s)=>{const u=dH(i,s,n.serverSyncTree_,e);Y_(t,i,u)});let r=[];Fk(t,dn(),(i,s)=>{r=r.concat(jE(n.serverSyncTree_,i,s));const u=pO(n,i);ty(n,u)}),n.onDisconnect_=LS(),Ls(n.eventQueue_,dn(),r)}(n)}function cO(n,e,t){const r=new pn("/.info/"+e),i=er(t);n.infoData_.updateSnapshot(r,i);const s=jE(n.infoSyncTree_,r,i);Ls(n.eventQueue_,r,s)}function tA(n){return n.nextWriteId_++}function dO(n,e,t,r,i){ey(n,"set",{path:e.toString(),value:t,priority:r});const s=KE(n),u=er(t,r),h=KS(n.serverSyncTree_,e),p=rO(u,h,s),_=tA(n),b=Yk(n.serverSyncTree_,e,p,_,!0);eA(n.eventQueue_,b),n.server_.put(e.toString(),u.val(!0),(S,N)=>{const O="ok"===S;O||Ei("set at "+e+" failed: "+S);const W=ld(n.serverSyncTree_,_,!O);Ls(n.eventQueue_,e,W),ud(0,i,S,N)});const T=pO(n,e);ty(n,T),Ls(n.eventQueue_,T,[])}function KQ(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Ok(n.onDisconnect_,e),ud(0,t,r,i)})}function CH(n,e,t,r){const i=er(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,u)=>{"ok"===s&&Y_(n.onDisconnect_,e,i),ud(0,r,s,u)})}function hO(n,e,t){let r;r=".info"===qt(e._path)?zS(n.infoSyncTree_,e,t):zS(n.serverSyncTree_,e,t),_H(n.eventQueue_,e._path,r)}function IH(n){n.persistentConnection_&&n.persistentConnection_.interrupt(vH)}function ey(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Qr(t,...e)}function ud(n,e,t,r){e&&q_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const u=new Error(s);u.code=i,e(u)}})}function fO(n,e,t){return KS(n.serverSyncTree_,e,t)||Lt.EMPTY_NODE}function nA(n,e=n.transactionQueueTree_){if(e||rA(n,e),Qf(e)){const t=DH(n,e);(0,R.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function tJ(n,e,t){const r=t.map(_=>_.currentWriteId),i=fO(n,e,r);let s=i;const u=i.hash();for(let _=0;_<t.length;_++){const b=t[_];(0,R.hu)(0===b.status,"tryToSendTransactionQueue_: items in queue should all be run."),b.status=1,b.retryCount++;const T=Hi(e,b.path);s=s.updateChild(T,b.currentOutputSnapshotRaw)}const h=s.val(!0),p=e;n.server_.put(p.toString(),h,_=>{ey(n,"transaction put response",{path:p.toString(),status:_});let b=[];if("ok"===_){const T=[];for(let S=0;S<t.length;S++)t[S].status=2,b=b.concat(ld(n.serverSyncTree_,t[S].currentWriteId)),t[S].onComplete&&T.push(()=>t[S].onComplete(null,!0,t[S].currentOutputSnapshotResolved)),t[S].unwatcher();rA(n,QS(n.transactionQueueTree_,e)),nA(n,n.transactionQueueTree_),Ls(n.eventQueue_,e,b);for(let S=0;S<T.length;S++)q_(T[S])}else{if("datastale"===_)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Ei("transaction at "+p.toString()+" failed: "+_);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=_}ty(n,e)}},u)}(n,qE(e),t)}else hH(e)&&JS(e,t=>{nA(n,t)})}function ty(n,e){const t=TH(n,e),r=qE(t);return function nJ(n,e,t){if(0===e.length)return;const r=[];let i=[];const u=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],_=Hi(t,p.path);let T,b=!1;if((0,R.hu)(null!==_,"rerunTransactionsUnderNode_: relativePath should not be null."),4===p.status)b=!0,T=p.abortReason,i=i.concat(ld(n.serverSyncTree_,p.currentWriteId,!0));else if(0===p.status)if(p.retryCount>=25)b=!0,T="maxretry",i=i.concat(ld(n.serverSyncTree_,p.currentWriteId,!0));else{const S=fO(n,p.path,u);p.currentInputSnapshot=S;const N=e[h].update(S.val());if(void 0!==N){WE("transaction failed: Data returned ",N,p.path);let O=er(N);"object"==typeof N&&null!=N&&(0,R.r3)(N,".priority")||(O=O.updatePriority(S.getPriority()));const J=p.currentWriteId,Me=KE(n),Be=rO(O,S,Me);p.currentOutputSnapshotRaw=O,p.currentOutputSnapshotResolved=Be,p.currentWriteId=tA(n),u.splice(u.indexOf(J),1),i=i.concat(Yk(n.serverSyncTree_,p.path,Be,p.currentWriteId,p.applyLocally)),i=i.concat(ld(n.serverSyncTree_,J,!0))}else b=!0,T="nodata",i=i.concat(ld(n.serverSyncTree_,p.currentWriteId,!0))}Ls(n.eventQueue_,t,i),i=[],b&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===T?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(T),!1,null)))}rA(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)q_(r[h]);nA(n,n.transactionQueueTree_)}(n,DH(n,t),r),r}function TH(n,e){let t,r=n.transactionQueueTree_;for(t=qt(e);null!==t&&void 0===Qf(r);)r=QS(r,t),t=qt(e=xn(e));return r}function DH(n,e){const t=[];return SH(n,e,t),t.sort((r,i)=>r.order-i.order),t}function SH(n,e,t){const r=Qf(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);JS(e,i=>{SH(n,i,t)})}function rA(n,e){const t=Qf(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,oO(e,t.length>0?t:void 0)}JS(e,r=>{rA(n,r)})}function pO(n,e){const t=qE(TH(n,e)),r=QS(n.transactionQueueTree_,e);return function PQ(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{gO(n,i)}),gO(n,r),fH(r,i=>{gO(n,i)}),t}function gO(n,e){const t=Qf(e);if(t){const r=[];let i=[],s=-1;for(let u=0;u<t.length;u++)3===t[u].status||(1===t[u].status?((0,R.hu)(s===u-1,"All SENT items should be at beginning of queue."),s=u,t[u].status=3,t[u].abortReason="set"):((0,R.hu)(0===t[u].status,"Unexpected transaction status in abort"),t[u].unwatcher(),i=i.concat(ld(n.serverSyncTree_,t[u].currentWriteId,!0)),t[u].onComplete&&r.push(t[u].onComplete.bind(null,new Error("set"),!1,null))));-1===s?oO(e,void 0):t.length=s+1,Ls(n.eventQueue_,qE(e),i);for(let u=0;u<r.length;u++)q_(r[u])}}const mO=function(n,e){const t=sJ(n),r=t.namespace;return"firebase.com"===t.domain&&rl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&rl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ei("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new _k(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new pn(t.pathString)}},sJ=function(n){let e="",t="",r="",i="",s="",u=!0,h="https",p=443;if("string"==typeof n){let _=n.indexOf("//");_>=0&&(h=n.substring(0,_-1),n=n.substring(_+2));let b=n.indexOf("/");-1===b&&(b=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(b,T)),b<T&&(i=function rJ(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(b,T)));const S=function iJ(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Ei(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));_=e.indexOf(":"),_>=0?(u="https"===h||"wss"===h,p=parseInt(e.substring(_+1),10)):_=e.length;const N=e.slice(0,_);if("localhost"===N.toLowerCase())t="localhost";else if(N.split(".").length<=2)t=N;else{const O=e.indexOf(".");r=e.substring(0,O).toLowerCase(),t=e.substring(O+1),s=r}"ns"in S&&(s=S.ns)}return{host:e,port:p,domain:t,subdomain:r,secure:u,scheme:h,pathString:i,namespace:s}};class AH{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,R.Wl)(this.snapshot.exportVal())}}class xH{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class _O{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,R.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class MH{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new R.BH;return KQ(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Co("OnDisconnect.remove",this._path);const e=new R.BH;return CH(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Co("OnDisconnect.set",this._path),ol("OnDisconnect.set",e,this._path,!1);const t=new R.BH;return CH(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Co("OnDisconnect.setWithPriority",this._path),ol("OnDisconnect.setWithPriority",e,this._path,!1),uO("OnDisconnect.setWithPriority",t,!1);const r=new R.BH;return function YQ(n,e,t,r,i){const s=er(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(u,h)=>{"ok"===u&&Y_(n.onDisconnect_,e,s),ud(0,i,u,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Co("OnDisconnect.update",this._path),gH("OnDisconnect.update",e,this._path,!1);const t=new R.BH;return function QQ(n,e,t,r){if((0,R.xb)(t))return Qr("onDisconnect().update() called with empty data.  Don't do anything."),void ud(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&Jr(t,(u,h)=>{const p=er(h);Y_(n.onDisconnect_,Zn(e,u),p)}),ud(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class hs{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return Gt(this._path)?null:Ck(this._path)}get ref(){return new Io(this._repo,this._path)}get _queryIdentifier(){const e=O3(this._queryParams),t=pk(e);return"{}"===t?"default":t}get _queryObject(){return O3(this._queryParams)}isEqual(e){if(!((e=(0,R.m9)(e))instanceof hs))return!1;const t=this._repo===e._repo,r=Ik(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Y9(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function iA(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function cd(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===sl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==wu)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==il)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===kn){if(null!=e&&!GE(e)||null!=t&&!GE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,R.hu)(n.getIndex()instanceof xk||n.getIndex()===Mk,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function sA(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Io extends hs{constructor(e,t){super(e,t,new kS,!1)}get parent(){const e=v3(this._path);return null===e?null:new Io(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Jf{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new pn(e),r=Xf(this.ref,e);return new Jf(this._node.getChild(t),r,kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Jf(i,Xf(this.ref,r),kn)))}hasChild(e){const t=new pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function RH(n,e){return(n=(0,R.m9)(n))._checkNotDeleted("ref"),void 0!==e?Xf(n._root,e):n._root}function NH(n,e){(n=(0,R.m9)(n))._checkNotDeleted("refFromURL");const t=mO(e,n._repo.repoInfo_.nodeAdmin);mH("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&rl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),RH(n,t.path.toString())}function Xf(n,e){return null===qt((n=(0,R.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zE("child","path",t,!1)):zE("child","path",e,!1),new Io(n._repo,Zn(n._path,e));var t}function yO(n,e){n=(0,R.m9)(n),Co("set",n._path),ol("set",e,n._path,!1);const t=new R.BH;return dO(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function cJ(n,e){gH("update",e,n._path,!1);const t=new R.BH;return function ZQ(n,e,t,r){ey(n,"update",{path:e.toString(),value:t});let i=!0;const s=KE(n),u={};if(Jr(t,(h,p)=>{i=!1,u[h]=dH(Zn(e,h),er(p),n.serverSyncTree_,s)}),i)Qr("update() called with empty data.  Don't do anything."),ud(0,r,"ok",void 0);else{const h=tA(n),p=function vQ(n,e,t,r){!function FY(n,e,t,r){(0,R.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=jk(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=On.fromObject(t);return X_(n,new Q_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,u,h);eA(n.eventQueue_,p),n.server_.merge(e.toString(),t,(_,b)=>{const T="ok"===_;T||Ei("update at "+e+" failed: "+_);const S=ld(n.serverSyncTree_,h,!T),N=S.length>0?ty(n,e):e;Ls(n.eventQueue_,N,S),ud(0,r,_,b)}),Jr(t,_=>{const b=pO(n,Zn(e,_));ty(n,b)}),Ls(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function dJ(n){n=(0,R.m9)(n);const e=new _O(()=>{}),t=new YE(e);return function WQ(n,e,t){const r=function IQ(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(_,b)=>{const T=Hi(_,t);r=r||od(b,T)});let i=n.syncPointTree_.get(t);i?r=r||od(i,dn()):(i=new eH,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,u=s?new id(r,!0,!1):null;return function aQ(n){return BS(n.viewCache_)}(tH(i,e,jS(n.pendingWriteTree_,e._path),s?u.getNode():Lt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=er(i).withIndex(e._queryParams.getIndex());let u;if(Qk(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())u=jE(n.serverSyncTree_,e._path,s);else{const h=$E(n.serverSyncTree_,e);u=oH(n.serverSyncTree_,e._path,s,h)}return Ls(n.eventQueue_,e._path,u),zS(n.serverSyncTree_,e,t,null,!0),s},i=>(ey(n,"get for query "+(0,R.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Jf(r,new Io(n._repo,n._path),n._queryParams.getIndex()))}class YE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new AH("value",this,new Jf(e.snapshotNode,new Io(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xH(this,e,t):null}matches(e){return e instanceof YE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class oA{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new xH(this,e,t):null}createEvent(e,t){(0,R.hu)(null!=e.childName,"Child events should have a childName.");const r=Xf(new Io(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new AH(e.type,this,new Jf(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof oA&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function QE(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const p=t,_=(b,T)=>{hO(n._repo,n,h),p(b,T)};_.userCallback=t.userCallback,_.context=t.context,t=_}const u=new _O(t,s||void 0),h="value"===e?new YE(u):new oA(e,u);return function JQ(n,e,t){let r;r=".info"===qt(e._path)?Qk(n.infoSyncTree_,e,t):Qk(n.serverSyncTree_,e,t),_H(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>hO(n._repo,n,h)}function vO(n,e,t,r){return QE(n,"value",e,t,r)}function PH(n,e,t,r){return QE(n,"child_added",e,t,r)}function kH(n,e,t,r){return QE(n,"child_changed",e,t,r)}function OH(n,e,t,r){return QE(n,"child_moved",e,t,r)}function FH(n,e,t,r){return QE(n,"child_removed",e,t,r)}function LH(n,e,t){let r=null;const i=t?new _O(t):null;"value"===e?r=new YE(i):e&&(r=new oA(e,i)),hO(n._repo,n,r)}class da{}class UH extends da{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ol("endAt",this._value,e._path,!0);const t=kk(e._queryParams,this._value,this._key);if(sA(t),cd(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class fJ extends da{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ol("endBefore",this._value,e._path,!1);const t=function CY(n,e,t){let r,i;return n.index_===sl?("string"==typeof e&&(e=N3(e)),i=kk(n,e,t)):(r=null==t?wu:N3(t),i=kk(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(sA(t),cd(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class VH extends da{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ol("startAt",this._value,e._path,!0);const t=Pk(e._queryParams,this._value,this._key);if(sA(t),cd(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class mJ extends da{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){ol("startAfter",this._value,e._path,!1);const t=function bY(n,e,t){let r;if(n.index_===sl)"string"==typeof e&&(e=R3(e)),r=Pk(n,e,t);else{let i;i=null==t?il:R3(t),r=Pk(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(sA(t),cd(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new hs(e._repo,e._path,t,e._orderByCalled)}}class yJ extends da{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new hs(e._repo,e._path,function wY(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class wJ extends da{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new hs(e._repo,e._path,function EY(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class bJ extends da{constructor(e){super(),this._path=e}_apply(e){iA(e,"orderByChild");const t=new pn(this._path);if(Gt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new xk(t),i=OS(e._queryParams,r);return cd(i),new hs(e._repo,e._path,i,!0)}}class IJ extends da{_apply(e){iA(e,"orderByKey");const t=OS(e._queryParams,sl);return cd(t),new hs(e._repo,e._path,t,!0)}}class DJ extends da{_apply(e){iA(e,"orderByPriority");const t=OS(e._queryParams,kn);return cd(t),new hs(e._repo,e._path,t,!0)}}class AJ extends da{_apply(e){iA(e,"orderByValue");const t=OS(e._queryParams,Mk);return cd(t),new hs(e._repo,e._path,t,!0)}}class MJ extends da{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(ol("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new UH(this._value,this._key)._apply(new VH(this._value,this._key)._apply(e))}}function ha(n,...e){let t=(0,R.m9)(n);for(const r of e)t=r._apply(t);return t}(function dQ(n){(0,R.hu)(!GS,"__referenceConstructor has already been defined"),GS=n})(Io),function mQ(n){(0,R.hu)(!ZS,"__referenceConstructor has already been defined"),ZS=n}(Io);const wO={};function jH(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||rl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Qr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let p,_,u=mO(s,i),h=u.repoInfo;typeof process<"u"&&process.env&&(_=process.env.FIREBASE_DATABASE_EMULATOR_HOST),_?(p=!0,s=`http://${_}?ns=${h.namespace}`,u=mO(s,i),h=u.repoInfo):p=!u.repoInfo.secure;const b=i&&p?new xE(xE.OWNER):new T9(n.name,n.options,e);mH("Invalid Firebase Database URL",u),Gt(u.path)||rl("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function OJ(n,e,t,r){let i=wO[e.name];i||(i={},wO[e.name]=i);let s=i[n.toURLString()];return s&&rl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new HQ(n,false,t,r),i[n.toURLString()]=s,s}(h,n,b,new I9(n.name,t));return new LJ(T,n)}class LJ{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function qQ(n,e,t){if(n.stats_=wk(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new FS(n.repoInfo_,(r,i,s,u)=>{EH(n,r,i,s,u)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>bH(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,R.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Zf(n.repoInfo_,e,(r,i,s,u)=>{EH(n,r,i,s,u)},r=>{bH(n,r)},r=>{!function GQ(n,e){Jr(e,(t,r)=>{cO(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function A9(n,e){const t=n.toString();return vk[t]||(vk[t]=e()),vk[t]}(n.repoInfo_,()=>new xY(n.stats_,n.server_)),n.infoData_=new IY,n.infoSyncTree_=new sH({startListening:(r,i,s,u)=>{let h=[];const p=n.infoData_.getNode(r._path);return p.isEmpty()||(h=jE(n.infoSyncTree_,r._path,p),setTimeout(()=>{u("ok")},0)),h},stopListening:()=>{}}),cO(n,"connected",!1),n.serverSyncTree_=new sH({startListening:(r,i,s,u)=>(n.server_.listen(r,s,i,(h,p)=>{const _=u(h,p);Ls(n.eventQueue_,r._path,_)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Io(this._repo,dn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function kJ(n,e){const t=wO[e];(!t||t[n.key]!==n)&&rl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),IH(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&rl("Cannot call "+e+" on a deleted database.")}}function $H(){a3.IS_TRANSPORT_INITIALIZED&&Ei("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function UJ(){$H(),nd.forceDisallow()}function VJ(){$H(),G_.forceDisallow(),nd.forceAllow()}function $J(n,e){j$(n,e)}const qJ={".sv":"timestamp"};class ZJ{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Zf.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Zf.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function HJ(n){F$(Pt.SDK_VERSION),(0,Pt._registerComponent)(new or.wA("database",(e,{instanceIdentifier:t})=>jH(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Pt.registerVersion)(k$,O$,n),(0,Pt.registerVersion)(k$,O$,"esm2017")}();const QJ=new jr.Yd("@firebase/database-compat"),qH=function(n){QJ.warn("FIREBASE WARNING: "+n)};class eX{constructor(e){this._delegate=e}cancel(e){(0,R.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,R.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,R.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,R.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,R.Dv)("OnDisconnect.set",1,2,arguments.length),(0,R.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,R.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,R.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,R.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,qH("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,R.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class tX{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,R.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class dd{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,R.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,R.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,R.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,R.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,R.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),zE("DataSnapshot.child","path",e,!1),new dd(this._database,this._delegate.child(e))}hasChild(e){return(0,R.Dv)("DataSnapshot.hasChild",1,1,arguments.length),zE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,R.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,R.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,R.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new dd(this._database,t)))}hasChildren(){return(0,R.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,R.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,R.Dv)("DataSnapshot.ref",0,0,arguments.length),new Us(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ui{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,R.Dv)("Query.on",2,4,arguments.length),(0,R.Wj)("Query.on","callback",t,!1);const u=ui.getCancelAndContextArgs_("Query.on",r,i),h=(_,b)=>{t.call(u.context,new dd(this.database,_),b)};h.userCallback=t,h.context=u.context;const p=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return vO(this._delegate,h,p),t;case"child_added":return PH(this._delegate,h,p),t;case"child_removed":return FH(this._delegate,h,p),t;case"child_changed":return kH(this._delegate,h,p),t;case"child_moved":return OH(this._delegate,h,p),t;default:throw new Error((0,R.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,R.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,R.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,R.Wj)("Query.off","callback",t,!0),(0,R.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,LH(this._delegate,e,i)}else LH(this._delegate,e)}get(){return dJ(this._delegate).then(e=>new dd(this.database,e))}once(e,t,r,i){(0,R.Dv)("Query.once",1,4,arguments.length),(0,R.Wj)("Query.once","callback",t,!0);const s=ui.getCancelAndContextArgs_("Query.once",r,i),u=new R.BH,h=(_,b)=>{const T=new dd(this.database,_);t&&t.call(s.context,T,b),u.resolve(T)};h.userCallback=t,h.context=s.context;const p=_=>{s.cancel&&s.cancel.call(s.context,_),u.reject(_)};switch(e){case"value":vO(this._delegate,h,p,{onlyOnce:!0});break;case"child_added":PH(this._delegate,h,p,{onlyOnce:!0});break;case"child_removed":FH(this._delegate,h,p,{onlyOnce:!0});break;case"child_changed":kH(this._delegate,h,p,{onlyOnce:!0});break;case"child_moved":OH(this._delegate,h,p,{onlyOnce:!0});break;default:throw new Error((0,R.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise}limitToFirst(e){return(0,R.Dv)("Query.limitToFirst",1,1,arguments.length),new ui(this.database,ha(this._delegate,function vJ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new yJ(n)}(e)))}limitToLast(e){return(0,R.Dv)("Query.limitToLast",1,1,arguments.length),new ui(this.database,ha(this._delegate,function EJ(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wJ(n)}(e)))}orderByChild(e){return(0,R.Dv)("Query.orderByChild",1,1,arguments.length),new ui(this.database,ha(this._delegate,function CJ(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return zE("orderByChild","path",n,!1),new bJ(n)}(e)))}orderByKey(){return(0,R.Dv)("Query.orderByKey",0,0,arguments.length),new ui(this.database,ha(this._delegate,function TJ(){return new IJ}()))}orderByPriority(){return(0,R.Dv)("Query.orderByPriority",0,0,arguments.length),new ui(this.database,ha(this._delegate,function SJ(){return new DJ}()))}orderByValue(){return(0,R.Dv)("Query.orderByValue",0,0,arguments.length),new ui(this.database,ha(this._delegate,function xJ(){return new AJ}()))}startAt(e=null,t){return(0,R.Dv)("Query.startAt",0,2,arguments.length),new ui(this.database,ha(this._delegate,function gJ(n=null,e){return ZE("startAt","key",e,!0),new VH(n,e)}(e,t)))}startAfter(e=null,t){return(0,R.Dv)("Query.startAfter",0,2,arguments.length),new ui(this.database,ha(this._delegate,function _J(n,e){return ZE("startAfter","key",e,!0),new mJ(n,e)}(e,t)))}endAt(e=null,t){return(0,R.Dv)("Query.endAt",0,2,arguments.length),new ui(this.database,ha(this._delegate,function hJ(n,e){return ZE("endAt","key",e,!0),new UH(n,e)}(e,t)))}endBefore(e=null,t){return(0,R.Dv)("Query.endBefore",0,2,arguments.length),new ui(this.database,ha(this._delegate,function pJ(n,e){return ZE("endBefore","key",e,!0),new fJ(n,e)}(e,t)))}equalTo(e,t){return(0,R.Dv)("Query.equalTo",1,2,arguments.length),new ui(this.database,ha(this._delegate,function RJ(n,e){return ZE("equalTo","key",e,!0),new MJ(n,e)}(e,t)))}toString(){return(0,R.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,R.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,R.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ui))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,R.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,R.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,R.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Us(this.database,new Io(this._delegate._repo,this._delegate._path))}}class Us extends ui{constructor(e,t){super(e,new hs(t._repo,t._path,new kS,!1)),this.database=e,this._delegate=t}getKey(){return(0,R.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,R.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Us(this.database,Xf(this._delegate,e))}getParent(){(0,R.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Us(this.database,e):null}getRoot(){return(0,R.Dv)("Reference.root",0,0,arguments.length),new Us(this.database,this._delegate.root)}set(e,t){(0,R.Dv)("Reference.set",1,2,arguments.length),(0,R.Wj)("Reference.set","onComplete",t,!0);const r=yO(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,R.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,qH("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Co("Reference.update",this._delegate._path),(0,R.Wj)("Reference.update","onComplete",t,!0);const r=cJ(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,R.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,R.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function uJ(n,e,t){if(Co("setWithPriority",n._path),ol("setWithPriority",e,n._path,!1),uO("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new R.BH;return dO(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,R.Dv)("Reference.remove",0,1,arguments.length),(0,R.Wj)("Reference.remove","onComplete",e,!0);const t=function aJ(n){return Co("remove",n._path),yO(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,R.Dv)("Reference.transaction",1,3,arguments.length),(0,R.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,R.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,R.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function zJ(n,e,t){var r;if(n=(0,R.m9)(n),Co("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new R.BH,h=vO(n,()=>{});return function eJ(n,e,t,r,i,s){ey(n,"transaction on "+e);const u={path:e,update:t,onComplete:r,status:null,order:U$(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=fO(n,e,void 0);u.currentInputSnapshot=h;const p=u.update(h.val());if(void 0===p)u.unwatcher(),u.currentOutputSnapshotRaw=null,u.currentOutputSnapshotResolved=null,u.onComplete&&u.onComplete(null,!1,u.currentInputSnapshot);else{WE("transaction failed: Data returned ",p,u.path),u.status=0;const _=QS(n.transactionQueueTree_,e),b=Qf(_)||[];let T;b.push(u),oO(_,b),"object"==typeof p&&null!==p&&(0,R.r3)(p,".priority")?(T=(0,R.DV)(p,".priority"),(0,R.hu)(GE(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(KS(n.serverSyncTree_,e)||Lt.EMPTY_NODE).getPriority().val();const S=KE(n),N=er(p,T),O=rO(N,h,S);u.currentOutputSnapshotRaw=N,u.currentOutputSnapshotResolved=O,u.currentWriteId=tA(n);const W=Yk(n.serverSyncTree_,e,O,u.currentWriteId,u.applyLocally);Ls(n.eventQueue_,e,W),nA(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(p,_,b)=>{let T=null;p?s.reject(p):(T=new Jf(b,new Io(n._repo,n._path),kn),s.resolve(new ZJ(_,T)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new tX(s.committed,new dd(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,R.Dv)("Reference.setPriority",1,2,arguments.length),(0,R.Wj)("Reference.setPriority","onComplete",t,!0);const r=function lJ(n,e){n=(0,R.m9)(n),Co("setPriority",n._path),uO("setPriority",e,!1);const t=new R.BH;return dO(n._repo,Zn(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,R.Dv)("Reference.push",0,2,arguments.length),(0,R.Wj)("Reference.push","onComplete",t,!0);const r=function oJ(n,e){n=(0,R.m9)(n),Co("push",n._path),ol("push",e,n._path,!0);const t=wH(n._repo),r=mY(t),i=Xf(n,r),s=Xf(n,r);let u;return u=null!=e?yO(s,e).then(()=>s):Promise.resolve(s),i.then=u.then.bind(u),i.catch=u.then.bind(u,void 0),i}(this._delegate,e),i=r.then(u=>new Us(this.database,u));t&&i.then(()=>t(null),u=>t(u));const s=new Us(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return Co("Reference.onDisconnect",this._delegate._path),new eX(new MH(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class JE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:UJ,forceLongPolling:VJ}}useEmulator(e,t,r={}){!function HH(n,e,t,r={}){(n=(0,R.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&rl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&rl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new xE(xE.OWNER);else if(r.mockUserToken){const u="string"==typeof r.mockUserToken?r.mockUserToken:(0,R.Sg)(r.mockUserToken,n.app.options.projectId);s=new xE(u)}!function PJ(n,e,t,r){n.repoInfo_=new _k(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,R.Dv)("database.ref",0,1,arguments.length),e instanceof Us){const t=NH(this._delegate,e.toString());return new Us(this,t)}{const t=RH(this._delegate,e);return new Us(this,t)}}refFromURL(e){(0,R.Dv)("database.refFromURL",1,1,arguments.length);const r=NH(this._delegate,e);return new Us(this,r)}goOffline(){return(0,R.Dv)("database.goOffline",0,0,arguments.length),function BJ(n){(n=(0,R.m9)(n))._checkNotDeleted("goOffline"),IH(n._repo)}(this._delegate)}goOnline(){return(0,R.Dv)("database.goOnline",0,0,arguments.length),function jJ(n){(n=(0,R.m9)(n))._checkNotDeleted("goOnline"),function XQ(n){n.persistentConnection_&&n.persistentConnection_.resume(vH)}(n._repo)}(this._delegate)}}JE.ServerValue={TIMESTAMP:function GJ(){return qJ}(),increment:n=>function WJ(n){return{".sv":{increment:n}}}(n)};var rX=Object.freeze({__proto__:null,initStandalone:function nX({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){F$(t);const u=new or.zt("auth-internal",new or.H0("database-standalone"));return u.setComponent(new or.wA("auth-internal",()=>r,"PRIVATE")),{instance:new JE(jH(n,u,void 0,e,s),n),namespace:i}}});const iX=JE.ServerValue;function GH(n){return null==n}function WH(n){return"function"==typeof n.set}function ZH(n,e){return WH(e)?e:n.ref(e)}function zH(n,e){if(function oX(n){return"string"==typeof n}(n))return e.stringCase();if(WH(n))return e.firebaseCase();if(function aX(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function XE(n,e,t="on",r=Uh){return new qn.y(i=>{let s=null;return s=n[t](e,(u,h)=>{r.schedule(()=>{i.next({snapshot:u,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},u=>{r.schedule(()=>i.error(u))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,Je.U)(i=>{const{snapshot:s,prevKey:u}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:u,key:h}}),(0,xj.B)())}function KH(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function cX(n,e){const{payload:t,prevKey:r,key:i}=e,s=KH(n,i),u=function uX(n,e){if(GH(e))return 0;{const t=KH(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(p=>{const _={payload:p,type:"value",prevKey:h,key:p.key};return h=p.key,n=[...n,_],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(p=>p.payload.key!==t.key)).splice(u,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(u,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(u,0,h),n}return n;default:return n}}function YH(n){return(GH(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function QH(n,e,t){return function lX(n,e,t){return XE(n,"value","once",t).pipe(Vn(r=>{const i=[it(r)];return e.forEach(s=>i.push(XE(n,s,"on",t))),(0,LP.T)(...i).pipe(eo(cX,[]))}),y$())}(n,e=YH(e),t)}function JH(n,e,t){const r=(e=YH(e)).map(i=>XE(n,i,"on",t));return(0,LP.T)(...r)}function XH(n,e){return function(r,i){return zH(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function pX(n){return function(t){return t?zH(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function eq(n,e){return function(){return XE(n,"value","on",e)}}!function sX(n){n.INTERNAL.registerComponent(new or.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new JE(i,r)},"PUBLIC").setServiceProps({Reference:Us,Query:ui,Database:JE,DataSnapshot:dd,enableLogging:$J,INTERNAL:rX,ServerValue:iX}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(GP.Z);const _X=new c.OlP("angularfire2.realtimeDatabaseURL"),yX=new c.OlP("angularfire2.database.use-emulator");let vX=(()=>{class n{constructor(t,r,i,s,u,h,p,_,b,T,S,N,O,W,J){this.schedulers=h;const Me=p,Be=(0,Yr.on)(t,u,r);_&&qP(Be,u,b,S,N,O,T,W),this.database=(0,Yr.cc)(`${Be.name}.database.${i}`,"AngularFireDatabase",Be.name,()=>{const Ue=u.runOutsideAngular(()=>Be.database(i||void 0));return Me&&Ue.useEmulator(...Me),Ue},[Me])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>ZH(this.database,t));let s=i;return r&&(s=r(i)),function gX(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:XH(r,"update"),set:XH(r,"set"),push:i=>r.push(i),remove:pX(r),snapshotChanges:i=>QH(n,i,t).pipe(ar),stateChanges:i=>JH(n,i,t).pipe(ar),auditTrail:i=>function dX(n,e,t){return function fX(n,e,t){return function hX(n,e){return XE(n,"value","on",e).pipe((0,Je.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function h9(...n){const e=(0,Ai.jO)(n);return(0,Un.e)((t,r)=>{const i=n.length,s=new Array(i);let u=n.map(()=>!1),h=!1;for(let p=0;p<i;p++)(0,Qs.Xf)(n[p]).subscribe((0,Ln.x)(r,_=>{s[p]=_,!h&&!u[p]&&(u[p]=!0,(h=u.every(Ks.y))&&(u=null))},d9.Z));t.subscribe((0,Ln.x)(r,p=>{if(h){const _=[p,...s];r.next(e?e(..._):_)}}))})}(e),(0,Je.U)(([i,s])=>{const u=i.lastKeyToLoad,h=s.map(p=>p.key);return{actions:s,lastKeyToLoad:u,loadedKeys:h}}),function f9(n){return(0,Un.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Ln.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Je.U)(i=>i.actions))}(n,JH(n,e).pipe(eo((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(ar),valueChanges:(i,s)=>QH(n,i,t).pipe((0,Je.U)(h=>h.map(p=>s&&s.idField?Object.assign(Object.assign({},p.payload.val()),{[s.idField]:p.key}):p.payload.val())),ar)}}(s,this)}object(t){return function mX(n,e){return{query:n,snapshotChanges:()=>eq(n,e.schedulers.outsideAngular)().pipe(ar),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>eq(n,e.schedulers.outsideAngular)().pipe(ar,(0,Je.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>ZH(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(c.LFG(Yr.Dh),c.LFG(Yr.xv,8),c.LFG(_X,8),c.LFG(c.Lbi),c.LFG(c.R0b),c.LFG(wc),c.LFG(yX,8),c.LFG(gS,8),c.LFG(UP,8),c.LFG(VP,8),c.LFG(BP,8),c.LFG(jP,8),c.LFG($P,8),c.LFG(HP,8),c.LFG(eu,8))},n.\u0275prov=c.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wX=(()=>{class n{constructor(){pS.Z.registerVersion("angularfire",Ba.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n}),n.\u0275inj=c.cJS({providers:[vX]}),n})(),EX=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=c.oAB({type:n,bootstrap:[Qz]}),n.\u0275inj=c.cJS({imports:[jo,J8,$z,UB,Yz,Jz,Z6,y1(()=>jI({apiKey:"AIzaSyAe_ByoiQFdDrVASwI1BEt-qPl5E0AXokU",authDomain:"mayaramein-portfolio.firebaseapp.com",projectId:"mayaramein-portfolio",storageBucket:"mayaramein-portfolio.appspot.com",messagingSenderId:"891216333732",appId:"1:891216333732:web:c56cbb9040c353b7c28f31"})),P6(()=>k6()),tK,c9,G7,wX]}),n})();(0,c.G48)(),Dl().bootstrapModule(EX).catch(n=>console.error(n))},4762:(gt,Se,U)=>{function le(K,Y){var ae={};for(var re in K)Object.prototype.hasOwnProperty.call(K,re)&&Y.indexOf(re)<0&&(ae[re]=K[re]);if(null!=K&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(re=Object.getOwnPropertySymbols(K);Re<re.length;Re++)Y.indexOf(re[Re])<0&&Object.prototype.propertyIsEnumerable.call(K,re[Re])&&(ae[re[Re]]=K[re[Re]])}return ae}function me(K,Y,ae,re){return new(ae||(ae=Promise))(function(xe,lt){function Yt(ln){try{$e(re.next(ln))}catch(Hn){lt(Hn)}}function Ut(ln){try{$e(re.throw(ln))}catch(Hn){lt(Hn)}}function $e(ln){ln.done?xe(ln.value):function Re(xe){return xe instanceof ae?xe:new ae(function(lt){lt(xe)})}(ln.value).then(Yt,Ut)}$e((re=re.apply(K,Y||[])).next())})}function oe(K){return this instanceof oe?(this.v=K,this):new oe(K)}function ce(K,Y,ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,re=ae.apply(K,Y||[]),xe=[];return Re={},lt("next"),lt("throw"),lt("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function lt(un){re[un]&&(Re[un]=function(Qt){return new Promise(function(Vt,xt){xe.push([un,Qt,Vt,xt])>1||Yt(un,Qt)})})}function Yt(un,Qt){try{!function Ut(un){un.value instanceof oe?Promise.resolve(un.value.v).then($e,ln):Hn(xe[0][2],un)}(re[un](Qt))}catch(Vt){Hn(xe[0][3],Vt)}}function $e(un){Yt("next",un)}function ln(un){Yt("throw",un)}function Hn(un,Qt){un(Qt),xe.shift(),xe.length&&Yt(xe[0][0],xe[0][1])}}function tt(K){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ae,Y=K[Symbol.asyncIterator];return Y?Y.call(K):(K=function Q(K){var Y="function"==typeof Symbol&&Symbol.iterator,ae=Y&&K[Y],re=0;if(ae)return ae.call(K);if(K&&"number"==typeof K.length)return{next:function(){return K&&re>=K.length&&(K=void 0),{value:K&&K[re++],done:!K}}};throw new TypeError(Y?"Object is not iterable.":"Symbol.iterator is not defined.")}(K),ae={},re("next"),re("throw"),re("return"),ae[Symbol.asyncIterator]=function(){return this},ae);function re(xe){ae[xe]=K[xe]&&function(lt){return new Promise(function(Yt,Ut){!function Re(xe,lt,Yt,Ut){Promise.resolve(Ut).then(function($e){xe({value:$e,done:Yt})},lt)}(Yt,Ut,(lt=K[xe](lt)).done,lt.value)})}}}U.d(Se,{FC:()=>ce,KL:()=>tt,_T:()=>le,mG:()=>me,qq:()=>oe})},4537:(gt,Se,U)=>{U.d(Se,{$8M:()=>Gu,$Z:()=>SC,AFp:()=>sw,ALo:()=>rT,AaK:()=>me,AsE:()=>As,CRH:()=>eu,CZH:()=>Qh,CqO:()=>o0,D6c:()=>e_,EJc:()=>DT,F4k:()=>lI,FYo:()=>wA,FiY:()=>Dn,G48:()=>OT,GfV:()=>Fb,GkF:()=>Ug,Gpc:()=>G,JOm:()=>so,LFG:()=>vn,LSH:()=>Lp,Lbi:()=>ow,Lck:()=>B1,MAs:()=>aI,MMx:()=>k0,NdJ:()=>kh,OlP:()=>fn,Oqu:()=>Zg,PXZ:()=>NT,Q6J:()=>Nh,QGY:()=>s0,QP$:()=>Te,QbO:()=>mM,Qsj:()=>TO,R0b:()=>as,RDi:()=>Pp,Rgc:()=>Wh,SBq:()=>Hl,Sil:()=>Sr,Suo:()=>wm,TTD:()=>Oo,TgZ:()=>Fg,Udp:()=>g0,W1O:()=>hT,X6Q:()=>Ew,XFs:()=>Ke,Xpm:()=>_e,Xts:()=>Uy,Y36:()=>Ma,YKP:()=>YI,YNc:()=>oI,Yjl:()=>V,Yz7:()=>Qt,Z0I:()=>qi,ZZ4:()=>Jm,_Bn:()=>$h,_UZ:()=>r0,_Vd:()=>Aa,_c5:()=>MM,_uU:()=>Oh,aQg:()=>uf,c2e:()=>IT,cJS:()=>xt,cg1:()=>OI,dDg:()=>RT,dqk:()=>St,eFA:()=>Ac,ekj:()=>m0,eoX:()=>gw,f3M:()=>gi,g9A:()=>km,h0i:()=>$a,hGG:()=>RM,hij:()=>Fh,iGM:()=>cT,ifc:()=>ct,ip1:()=>iw,jDz:()=>Hr,kL8:()=>d1,kYT:()=>$,lG2:()=>Z,lcZ:()=>cm,lqb:()=>io,lri:()=>Sc,n5z:()=>zs,oAB:()=>Zt,oxw:()=>Vg,q4F:()=>Lb,qLn:()=>ph,qOj:()=>Mh,qZA:()=>mc,rWj:()=>pw,s9C:()=>l0,sBO:()=>rf,sIi:()=>Kl,s_b:()=>pm,soG:()=>Dc,tb:()=>aw,tp0:()=>Ko,uIk:()=>Rh,vHH:()=>be,vpe:()=>po,wAp:()=>pt,xi3:()=>dm,xp6:()=>hC,z2F:()=>su,zSh:()=>jp,zs3:()=>z});var c=U(8023),j=U(4813),L=U(7241),le=U(1860),we=U(815);function ye(o){for(let a in o)if(o[a]===ye)return a;throw Error("Could not find renamed property on target object.")}function Ie(o,a){for(const l in a)a.hasOwnProperty(l)&&!o.hasOwnProperty(l)&&(o[l]=a[l])}function me(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(me).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const l=a.indexOf("\n");return-1===l?a:a.substring(0,l)}function Ne(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const q=ye({__forward_ref__:ye});function G(o){return o.__forward_ref__=G,o.toString=function(){return me(this())},o}function Q(o){return Le(o)?o():o}function Le(o){return"function"==typeof o&&o.hasOwnProperty(q)&&o.__forward_ref__===G}class be extends Error{constructor(a,l){super(function ze(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}(a,l)),this.code=a}}function oe(o){return"string"==typeof o?o:null==o?"":String(o)}function ve(o,a){throw new be(-201,!1)}function Ut(o,a){null==o&&function $e(o,a,l,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${l} ${d} ${a} <=Actual]`))}(a,o,null,"!=")}function Qt(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function xt(o){return{providers:o.providers||[],imports:o.imports||[]}}function xr(o){return js(o,Fr)||js(o,ps)}function qi(o){return null!==xr(o)}function js(o,a){return o.hasOwnProperty(a)?o[a]:null}function Gi(o){return o&&(o.hasOwnProperty(Mr)||o.hasOwnProperty($s))?o[Mr]:null}const Fr=ye({\u0275prov:ye}),Mr=ye({\u0275inj:ye}),ps=ye({ngInjectableDef:ye}),$s=ye({ngInjectorDef:ye});var Ke=(()=>((Ke=Ke||{})[Ke.Default=0]="Default",Ke[Ke.Host=1]="Host",Ke[Ke.Self=2]="Self",Ke[Ke.SkipSelf=4]="SkipSelf",Ke[Ke.Optional=8]="Optional",Ke))();let dr;function _n(o){const a=dr;return dr=o,a}function ei(o,a,l){const d=xr(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:l&Ke.Optional?null:void 0!==a?a:void ve(me(o))}function yn(o){return{toString:o}.toString()}var Cn=(()=>((Cn=Cn||{})[Cn.OnPush=0]="OnPush",Cn[Cn.Default=1]="Default",Cn))(),ct=(()=>{return(o=ct||(ct={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",ct;var o})();const St=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ur={},Et=[],Rr=ye({\u0275cmp:ye}),At=ye({\u0275dir:ye}),Ci=ye({\u0275pipe:ye}),Ht=ye({\u0275mod:ye}),vr=ye({\u0275fac:ye}),Mn=ye({__NG_ELEMENT_ID__:ye});let We=0;function _e(o){return yn(()=>{const l=!0===o.standalone,d={},f={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:d,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Cn.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&o.dependencies||null,getStandaloneInjector:null,selectors:o.selectors||Et,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||ct.Emulated,id:"c"+We++,styles:o.styles||Et,_:null,setInput:null,schemas:o.schemas||null,tView:null},g=o.dependencies,v=o.features;return f.inputs=B(o.inputs,d),f.outputs=B(o.outputs),v&&v.forEach(E=>E(f)),f.directiveDefs=g?()=>("function"==typeof g?g():g).map(mt).filter(yt):null,f.pipeDefs=g?()=>("function"==typeof g?g():g).map(te).filter(yt):null,f})}function mt(o){return M(o)||F(o)}function yt(o){return null!==o}function Zt(o){return yn(()=>({type:o.type,bootstrap:o.bootstrap||Et,declarations:o.declarations||Et,imports:o.imports||Et,exports:o.exports||Et,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function $(o,a){return yn(()=>{const l=Qe(o,!0);l.declarations=a.declarations||Et,l.imports=a.imports||Et,l.exports=a.exports||Et})}function B(o,a){if(null==o)return Ur;const l={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],g=f;Array.isArray(f)&&(g=f[1],f=f[0]),l[f]=d,a&&(a[f]=g)}return l}const Z=_e;function V(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function M(o){return o[Rr]||null}function F(o){return o[At]||null}function te(o){return o[Ci]||null}function Te(o){const a=M(o)||F(o)||te(o);return null!==a&&a.standalone}function Qe(o,a){const l=o[Ht]||null;if(!l&&!0===a)throw new Error(`Type ${me(o)} does not have '\u0275mod' property.`);return l}function hr(o){return Array.isArray(o)&&"object"==typeof o[1]}function ti(o){return Array.isArray(o)&&!0===o[1]}function Po(o){return 0!=(8&o.flags)}function Tu(o){return 2==(2&o.flags)}function fa(o){return 1==(1&o.flags)}function Zi(o){return null!==o.template}function Du(o){return 0!=(256&o[2])}function wr(o,a){return o.hasOwnProperty(vr)?o[vr]:null}class ga{constructor(a,l,d){this.previousValue=a,this.currentValue=l,this.firstChange=d}isFirstChange(){return this.firstChange}}function Oo(){return ap}function ap(o){return o.type.prototype.ngOnChanges&&(o.setInput=vd),yd}function yd(){const o=ma(this),a=o?.current;if(a){const l=o.previous;if(l===Ur)o.previous=a;else for(let d in a)l[d]=a[d];o.current=null,this.ngOnChanges(a)}}function vd(o,a,l,d){const f=ma(o)||function up(o,a){return o[lp]=a}(o,{previous:Ur,current:null}),g=f.current||(f.current={}),v=f.previous,E=this.declaredInputs[l],I=v[E];g[E]=new ga(I&&I.currentValue,a,v===Ur),o[d]=a}Oo.ngInherit=!0;const lp="__ngSimpleChanges__";function ma(o){return o[lp]||null}function Nn(o){for(;Array.isArray(o);)o=o[0];return o}function ml(o,a){return Nn(a[o])}function Vr(o,a){return Nn(a[o.index])}function _l(o,a){return o.data[a]}function Hs(o,a){return o[a]}function en(o,a){const l=a[o];return hr(l)?l:l[0]}function qs(o){return 64==(64&o[2])}function zi(o,a){return null==a?null:o[a]}function yl(o){o[18]=0}function vl(o,a){o[5]+=a;let l=o,d=o[3];for(;null!==d&&(1===a&&1===l[5]||-1===a&&0===l[5]);)d[5]+=a,l=d,d=d[3]}const Tt={lFrame:Rd(null),bindingsEnabled:!0};function wl(){return Tt.bindingsEnabled}function Ce(){return Tt.lFrame.lView}function $t(){return Tt.lFrame.tView}function ir(){let o=xu();for(;null!==o&&64===o.type;)o=o.parent;return o}function xu(){return Tt.lFrame.currentTNode}function fi(o,a){const l=Tt.lFrame;l.currentTNode=o,l.isParent=a}function Td(){return Tt.lFrame.isParent}function Ru(){Tt.lFrame.isParent=!1}function Kn(){const o=Tt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function bl(){return Tt.lFrame.bindingIndex++}function Gs(o){const a=Tt.lFrame,l=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,l}function fp(o,a){const l=Tt.lFrame;l.bindingIndex=l.bindingRootIndex=o,Nu(a)}function Nu(o){Tt.lFrame.currentDirectiveIndex=o}function Ad(){return Tt.lFrame.currentQueryIndex}function xd(o){Tt.lFrame.currentQueryIndex=o}function Md(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function hy(o,a,l){if(l&Ke.SkipSelf){let f=a,g=o;for(;!(f=f.parent,null!==f||l&Ke.Host||(f=Md(g),null===f||(g=g[15],10&f.type))););if(null===f)return!1;a=f,o=g}const d=Tt.lFrame=fy();return d.currentTNode=a,d.lView=o,!0}function Pu(o){const a=fy(),l=o[1];Tt.lFrame=a,a.currentTNode=l.firstChild,a.lView=o,a.tView=l,a.contextLView=o,a.bindingIndex=l.bindingStartIndex,a.inI18n=!1}function fy(){const o=Tt.lFrame,a=null===o?null:o.child;return null===a?Rd(o):a}function Rd(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function py(){const o=Tt.lFrame;return Tt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const pp=py;function ya(){const o=py();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function In(){return Tt.lFrame.selectedIndex}function ms(o){Tt.lFrame.selectedIndex=o}function Tn(){const o=Tt.lFrame;return _l(o.tView,o.selectedIndex)}function Cl(o,a){for(let l=a.directiveStart,d=a.directiveEnd;l<d;l++){const g=o.data[l].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:E,ngAfterViewInit:I,ngAfterViewChecked:D,ngOnDestroy:x}=g;v&&(o.contentHooks||(o.contentHooks=[])).push(-l,v),E&&((o.contentHooks||(o.contentHooks=[])).push(l,E),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(l,E)),I&&(o.viewHooks||(o.viewHooks=[])).push(-l,I),D&&((o.viewHooks||(o.viewHooks=[])).push(l,D),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(l,D)),null!=x&&(o.destroyHooks||(o.destroyHooks=[])).push(l,x)}}function Ou(o,a,l){kd(o,a,3,l)}function Uo(o,a,l,d){(3&o[2])===l&&kd(o,a,l,d)}function Pd(o,a){let l=o[2];(3&l)===a&&(l&=2047,l+=1,o[2]=l)}function kd(o,a,l,d){const g=d??-1,v=a.length-1;let E=0;for(let I=void 0!==d?65535&o[18]:0;I<v;I++)if("number"==typeof a[I+1]){if(E=a[I],null!=d&&E>=d)break}else a[I]<0&&(o[18]+=65536),(E<g||-1==g)&&(gp(o,l,a,I),o[18]=(4294901760&o[18])+I+2),I++}function gp(o,a,l,d){const f=l[d]<0,g=l[d+1],E=o[f?-l[d]:l[d]];if(f){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{g.call(E)}finally{}}}else try{g.call(E)}finally{}}class pi{constructor(a,l,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=d}}function _s(o,a,l){let d=0;for(;d<l.length;){const f=l[d];if("number"==typeof f){if(0!==f)break;d++;const g=l[d++],v=l[d++],E=l[d++];o.setAttribute(a,v,E,g)}else{const g=f,v=l[++d];Vd(g)?o.setProperty(a,g,v):o.setAttribute(a,g,v),d++}}return d}function Ud(o){return 3===o||4===o||6===o}function Vd(o){return 64===o.charCodeAt(0)}function Tl(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let l=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?l=f:0===l||mp(o,l,f,null,-1===l||2===l?a[++d]:null)}}return o}function mp(o,a,l,d,f){let g=0,v=o.length;if(-1===a)v=-1;else for(;g<o.length;){const E=o[g++];if("number"==typeof E){if(E===a){v=-1;break}if(E>a){v=g-1;break}}}for(;g<o.length;){const E=o[g];if("number"==typeof E)break;if(E===l){if(null===d)return void(null!==f&&(o[g+1]=f));if(d===o[g+1])return void(o[g+2]=f)}g++,null!==d&&g++,null!==f&&g++}-1!==v&&(o.splice(v,0,a),g=v+1),o.splice(g++,0,l),null!==d&&o.splice(g++,0,d),null!==f&&o.splice(g++,0,f)}function by(o){return-1!==o}function Vo(o){return 32767&o}function Ws(o,a){let l=function Cy(o){return o>>16}(o),d=a;for(;l>0;)d=d[15],l--;return d}let Bd=!0;function Uu(o){const a=Bd;return Bd=o,a}let _p=0;const Si={};function Bo(o,a){const l=Vu(o,a);if(-1!==l)return l;const d=a[1];d.firstCreatePass&&(o.injectorIndex=a.length,jd(d.data,o),jd(a,null),jd(d.blueprint,null));const f=Dl(o,a),g=o.injectorIndex;if(by(f)){const v=Vo(f),E=Ws(f,a),I=E[1].data;for(let D=0;D<8;D++)a[g+D]=E[v+D]|I[v+D]}return a[g+8]=f,g}function jd(o,a){o.push(0,0,0,0,0,0,0,0,a)}function Vu(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Dl(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let l=0,d=null,f=a;for(;null!==f;){if(d=qu(f),null===d)return-1;if(l++,f=f[15],-1!==d.injectorIndex)return d.injectorIndex|l<<16}return-1}function Sl(o,a,l){!function Ty(o,a,l){let d;"string"==typeof l?d=l.charCodeAt(0)||0:l.hasOwnProperty(Mn)&&(d=l[Mn]),null==d&&(d=l[Mn]=_p++);const f=255&d;a.data[o+(f>>5)]|=1<<f}(o,a,l)}function Bu(o,a,l){if(l&Ke.Optional||void 0!==o)return o;ve()}function jo(o,a,l,d){if(l&Ke.Optional&&void 0===d&&(d=null),0==(l&(Ke.Self|Ke.Host))){const f=o[9],g=_n(void 0);try{return f?f.get(a,d,l&Ke.Optional):ei(a,d,l&Ke.Optional)}finally{_n(g)}}return Bu(d,0,l)}function ju(o,a,l,d=Ke.Default,f){if(null!==o){if(1024&a[2]){const v=function Sy(o,a,l,d,f){let g=o,v=a;for(;null!==g&&null!==v&&1024&v[2]&&!(256&v[2]);){const E=yp(g,v,l,d|Ke.Self,Si);if(E!==Si)return E;let I=g.parent;if(!I){const D=v[21];if(D){const x=D.get(l,Si,d);if(x!==Si)return x}I=qu(v),v=v[15]}g=I}return f}(o,a,l,d,Si);if(v!==Si)return v}const g=yp(o,a,l,d,Si);if(g!==Si)return g}return jo(a,l,d,f)}function yp(o,a,l,d,f){const g=function Dy(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(Mn)?o[Mn]:void 0;return"number"==typeof a?a>=0?255&a:Ep:a}(l);if("function"==typeof g){if(!hy(a,o,d))return d&Ke.Host?Bu(f,0,d):jo(a,l,d,f);try{const v=g(d);if(null!=v||d&Ke.Optional)return v;ve()}finally{pp()}}else if("number"==typeof g){let v=null,E=Vu(o,a),I=-1,D=d&Ke.Host?a[16][6]:null;for((-1===E||d&Ke.SkipSelf)&&(I=-1===E?Dl(o,a):a[E+8],-1!==I&&wp(d,!1)?(v=a[1],E=Vo(I),a=Ws(I,a)):E=-1);-1!==E;){const x=a[1];if($u(g,E,x.data)){const k=vp(E,a,l,v,d,D);if(k!==Si)return k}I=a[E+8],-1!==I&&wp(d,a[1].data[E+8]===D)&&$u(g,E,a)?(v=x,E=Vo(I),a=Ws(I,a)):E=-1}}return f}function vp(o,a,l,d,f,g){const v=a[1],E=v.data[o+8],x=xl(E,v,l,null==d?Tu(E)&&Bd:d!=v&&0!=(3&E.type),f&Ke.Host&&g===E);return null!==x?Zs(a,v,x,E):Si}function xl(o,a,l,d,f){const g=o.providerIndexes,v=a.data,E=1048575&g,I=o.directiveStart,x=g>>20,H=f?E+x:o.directiveEnd;for(let ee=d?E:E+x;ee<H;ee++){const de=v[ee];if(ee<I&&l===de||ee>=I&&de.type===l)return ee}if(f){const ee=v[I];if(ee&&Zi(ee)&&ee.type===l)return I}return null}function Zs(o,a,l,d){let f=o[l];const g=a.data;if(function Od(o){return o instanceof pi}(f)){const v=f;v.resolving&&function et(o,a){const l=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new be(-200,`Circular dependency in DI detected for ${o}${l}`)}(function ce(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():oe(o)}(g[l]));const E=Uu(v.canSeeViewProviders);v.resolving=!0;const I=v.injectImpl?_n(v.injectImpl):null;hy(o,d,Ke.Default);try{f=o[l]=v.factory(void 0,g,o,d),a.firstCreatePass&&l>=d.directiveStart&&function ku(o,a,l){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:g}=a.type.prototype;if(d){const v=ap(a);(l.preOrderHooks||(l.preOrderHooks=[])).push(o,v),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,v)}f&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-o,f),g&&((l.preOrderHooks||(l.preOrderHooks=[])).push(o,g),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(o,g))}(l,g[l],a)}finally{null!==I&&_n(I),Uu(E),v.resolving=!1,pp()}}return f}function $u(o,a,l){return!!(l[a+(o>>5)]&1<<o)}function wp(o,a){return!(o&Ke.Self||o&Ke.Host&&a)}class Ml{constructor(a,l){this._tNode=a,this._lView=l}get(a,l,d){return ju(this._tNode,this._lView,a,d,l)}}function Ep(){return new Ml(ir(),Ce())}function zs(o){return yn(()=>{const a=o.prototype.constructor,l=a[vr]||Hu(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const g=f[vr]||Hu(f);if(g&&g!==l)return g;f=Object.getPrototypeOf(f)}return g=>new g})}function Hu(o){return Le(o)?()=>{const a=Hu(Q(o));return a&&a()}:wr(o)}function qu(o){const a=o[1],l=a.type;return 2===l?a.declTNode:1===l?o[6]:null}function Gu(o){return function Al(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const l=o.attrs;if(l){const d=l.length;let f=0;for(;f<d;){const g=l[f];if(Ud(g))break;if(0===g)f+=2;else if("number"==typeof g)for(f++;f<d&&"string"==typeof l[f];)f++;else{if(g===a)return l[f+1];f+=2}}}return null}(ir(),o)}const Rl="__parameters__";function Nl(o,a,l){return yn(()=>{const d=function bp(o){return function(...l){if(o){const d=o(...l);for(const f in d)this[f]=d[f]}}}(a);function f(...g){if(this instanceof f)return d.apply(this,g),this;const v=new f(...g);return E.annotation=v,E;function E(I,D,x){const k=I.hasOwnProperty(Rl)?I[Rl]:Object.defineProperty(I,Rl,{value:[]})[Rl];for(;k.length<=x;)k.push(null);return(k[x]=k[x]||[]).push(v),I}}return l&&(f.prototype=Object.create(l.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class fn{constructor(a,l){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=Qt({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function mn(o,a){void 0===a&&(a=o);for(let l=0;l<o.length;l++){let d=o[l];Array.isArray(d)?(a===o&&(a=o.slice(0,l)),mn(d,a)):a!==o&&a.push(d)}return a}function vs(o,a){o.forEach(l=>Array.isArray(l)?vs(l,a):a(l))}function Ho(o,a,l){a>=o.length?o.push(l):o.splice(a,0,l)}function qn(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function Je(o,a,l){let d=Ys(o,a);return d>=0?o[1|d]=l:(d=~d,function xy(o,a,l,d){let f=o.length;if(f==a)o.push(l,d);else if(1===f)o.push(d,o[0]),o[0]=l;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=l,o[a+1]=d}}(o,d,a,l)),d}function qd(o,a){const l=Ys(o,a);if(l>=0)return o[1|l]}function Ys(o,a){return function Gd(o,a,l){let d=0,f=o.length>>l;for(;f!==d;){const g=d+(f-d>>1),v=o[g<<l];if(a===v)return g<<l;v>a?f=g:d=g+1}return~(f<<l)}(o,a,1)}const ba={},zd="__NG_DI_FLAG__",ws="ngTempTokenPath",Es=/\n/gm,Un="__source";let Js;function Xs(o){const a=Js;return Js=o,a}function Vn(o,a=Ke.Default){if(void 0===Js)throw new be(-203,!1);return null===Js?ei(o,void 0,a):Js.get(o,a&Ke.Optional?null:void 0,a)}function vn(o,a=Ke.Default){return(function nr(){return dr}()||Vn)(Q(o),a)}function gi(o,a=Ke.Default){return"number"!=typeof a&&(a=0|(a.optional&&8)|(a.host&&1)|(a.self&&2)|(a.skipSelf&&4)),vn(o,a)}function fr(o){const a=[];for(let l=0;l<o.length;l++){const d=Q(o[l]);if(Array.isArray(d)){if(0===d.length)throw new be(900,!1);let f,g=Ke.Default;for(let v=0;v<d.length;v++){const E=d[v],I=xp(E);"number"==typeof I?-1===I?f=E.token:g|=I:f=E}a.push(vn(f,g))}else a.push(vn(d))}return a}function Yi(o,a){return o[zd]=a,o.prototype[zd]=a,o}function xp(o){return o[zd]}const Dn=Yi(Nl("Optional"),8),Ko=Yi(Nl("SkipSelf"),4);let eh;function Pp(o){eh=o}class Op{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Qi(o){return o instanceof Op?o.changingThisBreaksApplicationSecurity:o}const m=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var wn=(()=>((wn=wn||{})[wn.NONE=0]="NONE",wn[wn.HTML=1]="HTML",wn[wn.STYLE=2]="STYLE",wn[wn.SCRIPT=3]="SCRIPT",wn[wn.URL=4]="URL",wn[wn.RESOURCE_URL=5]="RESOURCE_URL",wn))();function Lp(o){const a=function lh(){const o=Ce();return o&&o[12]}();return a?a.sanitize(wn.URL,o)||"":function Ds(o,a){const l=function ih(o){return o instanceof Op&&o.getTypeName()||null}(o);if(null!=l&&l!==a){if("ResourceURL"===l&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===a}(o,"URL")?Qi(o):function y(o){return(o=String(o)).match(m)?o:"unsafe:"+o}(oe(o))}const Uy=new fn("ENVIRONMENT_INITIALIZER"),Ib=new fn("INJECTOR",-1),Tb=new fn("INJECTOR_DEF_TYPES");class Db{get(a,l=ba){if(l===ba){const d=new Error(`NullInjectorError: No provider for ${me(a)}!`);throw d.name="NullInjectorError",d}return l}}function mA(...o){return{\u0275providers:Sb(0,o)}}function Sb(o,...a){const l=[],d=new Set;let f;return vs(a,g=>{const v=g;Vp(v,l,[],d)&&(f||(f=[]),f.push(v))}),void 0!==f&&Ab(f,l),l}function Ab(o,a){for(let l=0;l<o.length;l++){const{providers:f}=o[l];vs(f,g=>{a.push(g)})}}function Vp(o,a,l,d){if(!(o=Q(o)))return!1;let f=null,g=Gi(o);const v=!g&&M(o);if(g||v){if(v&&!v.standalone)return!1;f=o}else{const I=o.ngModule;if(g=Gi(I),!g)return!1;f=I}const E=d.has(f);if(v){if(E)return!1;if(d.add(f),v.dependencies){const I="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const D of I)Vp(D,a,l,d)}}else{if(!g)return!1;{if(null!=g.imports&&!E){let D;d.add(f);try{vs(g.imports,x=>{Vp(x,a,l,d)&&(D||(D=[]),D.push(x))})}finally{}void 0!==D&&Ab(D,a)}if(!E){const D=wr(f)||(()=>new f);a.push({provide:f,useFactory:D,deps:Et},{provide:Tb,useValue:f,multi:!0},{provide:Uy,useValue:()=>vn(f),multi:!0})}const I=g.providers;null==I||E||vs(I,x=>{a.push(x)})}}return f!==o&&void 0!==o.providers}const xb=ye({provide:String,useValue:ye});function uh(o){return null!==o&&"object"==typeof o&&xb in o}function Ji(o){return"function"==typeof o}const jp=new fn("Set Injector scope."),$p={},$l={};let Hp;function qp(){return void 0===Hp&&(Hp=new Db),Hp}class io{}class Vy extends io{constructor(a,l,d,f){super(),this.parent=l,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wp(a,v=>this.processProvider(v)),this.records.set(Ib,tc(void 0,this)),f.has("environment")&&this.records.set(io,tc(void 0,this));const g=this.records.get(jp);null!=g&&"string"==typeof g.value&&this.scopes.add(g.value),this.injectorDefTypes=new Set(this.get(Tb.multi,Et,Ke.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const l=Xs(this),d=_n(void 0);try{return a()}finally{Xs(l),_n(d)}}get(a,l=ba,d=Ke.Default){this.assertNotDestroyed();const f=Xs(this),g=_n(void 0);try{if(!(d&Ke.SkipSelf)){let E=this.records.get(a);if(void 0===E){const I=function yA(o){return"function"==typeof o||"object"==typeof o&&o instanceof fn}(a)&&xr(a);E=I&&this.injectableDefInScope(I)?tc(ch(a),$p):null,this.records.set(a,E)}if(null!=E)return this.hydrate(a,E)}return(d&Ke.Self?qp():this.parent).get(a,l=d&Ke.Optional&&l===ba?null:l)}catch(v){if("NullInjectorError"===v.name){if((v[ws]=v[ws]||[]).unshift(me(a)),f)throw v;return function My(o,a,l,d){const f=o[ws];throw a[Un]&&f.unshift(a[Un]),o.message=function xi(o,a,l,d=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.slice(2):o;let f=me(a);if(Array.isArray(a))f=a.map(me).join(" -> ");else if("object"==typeof a){let g=[];for(let v in a)if(a.hasOwnProperty(v)){let E=a[v];g.push(v+":"+("string"==typeof E?JSON.stringify(E):me(E)))}f=`{${g.join(", ")}}`}return`${l}${d?"("+d+")":""}[${f}]: ${o.replace(Es,"\n  ")}`}("\n"+o.message,f,l,d),o.ngTokenPath=f,o[ws]=null,o}(v,a,"R3InjectorError",this.source)}throw v}finally{_n(g),Xs(f)}}resolveInjectorInitializers(){const a=Xs(this),l=_n(void 0);try{const d=this.get(Uy.multi,Et,Ke.Self);for(const f of d)f()}finally{Xs(a),_n(l)}}toString(){const a=[],l=this.records;for(const d of l.keys())a.push(me(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new be(205,!1)}processProvider(a){let l=Ji(a=Q(a))?a:Q(a&&a.provide);const d=function By(o){return uh(o)?tc(void 0,o.useValue):tc(Gp(o),$p)}(a);if(Ji(a)||!0!==a.multi)this.records.get(l);else{let f=this.records.get(l);f||(f=tc(void 0,$p,!0),f.factory=()=>fr(f.multi),this.records.set(l,f)),l=a,f.multi.push(a)}this.records.set(l,d)}hydrate(a,l){return l.value===$p&&(l.value=$l,l.value=l.factory()),"object"==typeof l.value&&l.value&&function _A(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(a){if(!a.providedIn)return!1;const l=Q(a.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function ch(o){const a=xr(o),l=null!==a?a.factory:wr(o);if(null!==l)return l;if(o instanceof fn)throw new be(204,!1);if(o instanceof Function)return function Rb(o){const a=o.length;if(a>0)throw function qo(o,a){const l=[];for(let d=0;d<o;d++)l.push(a);return l}(a,"?"),new be(204,!1);const l=function Fn(o){const a=o&&(o[Fr]||o[ps]);if(a){const l=function fs(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),a}return null}(o);return null!==l?()=>l.factory(o):()=>new o}(o);throw new be(204,!1)}function Gp(o,a,l){let d;if(Ji(o)){const f=Q(o);return wr(f)||ch(f)}if(uh(o))d=()=>Q(o.useValue);else if(function ro(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...fr(o.deps||[]));else if(function Bp(o){return!(!o||!o.useExisting)}(o))d=()=>vn(Q(o.useExisting));else{const f=Q(o&&(o.useClass||o.provide));if(!function dh(o){return!!o.deps}(o))return wr(f)||ch(f);d=()=>new f(...fr(o.deps))}return d}function tc(o,a,l=!1){return{factory:o,value:a,multi:l?[]:void 0}}function jy(o){return!!o.\u0275providers}function Wp(o,a){for(const l of o)Array.isArray(l)?Wp(l,a):jy(l)?Wp(l.\u0275providers,a):a(l)}class $y{}class zp{resolveComponentFactory(a){throw function Pb(o){const a=Error(`No component factory found for ${me(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let Aa=(()=>{class o{}return o.NULL=new zp,o})();function vA(){return nc(ir(),Ce())}function nc(o,a){return new Hl(Vr(o,a))}let Hl=(()=>{class o{constructor(l){this.nativeElement=l}}return o.__NG_ELEMENT_ID__=vA,o})();function Ob(o){return o instanceof Hl?o.nativeElement:o}class wA{}let TO=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function DO(){const o=Ce(),l=en(ir().index,o);return(hr(l)?l:o)[11]}(),o})(),Hy=(()=>{class o{}return o.\u0275prov=Qt({token:o,providedIn:"root",factory:()=>null}),o})();class Fb{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Lb=new Fb("14.2.11"),qy={};function Yy(o){return o.ngOriginalError}class ph{constructor(){this._console=console}handleError(a){const l=this._findOriginalError(a);this._console.error("ERROR",a),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(a){let l=a&&Yy(a);for(;l&&Yy(l);)l=Yy(l);return l||null}}const Qy=new Map;let SA=0;const eg="__ngContext__";function br(o,a){hr(a)?(o[eg]=a[20],function xA(o){Qy.set(o[20],o)}(a)):o[eg]=a}function Xo(o){return o instanceof Function?o():o}var so=(()=>((so=so||{})[so.Important=1]="Important",so[so.DashCase=2]="DashCase",so))();function nv(o,a){return undefined(o,a)}function ac(o){const a=o[3];return ti(a)?a[3]:a}function rg(o){return Kb(o[13])}function ig(o){return Kb(o[4])}function Kb(o){for(;null!==o&&!ti(o);)o=o[4];return o}function lc(o,a,l,d,f){if(null!=d){let g,v=!1;ti(d)?g=d:hr(d)&&(v=!0,d=d[0]);const E=Nn(d);0===o&&null!==l?null==f?nC(a,l,E):oo(a,l,E,f||null,!0):1===o&&null!==l?oo(a,l,E,f||null,!0):2===o?function HA(o,a,l){const d=ag(o,a);d&&function $A(o,a,l,d){o.removeChild(a,l,d)}(o,d,a,l)}(a,E,v):3===o&&a.destroyNode(E),null!=g&&function FO(o,a,l,d,f){const g=l[7];g!==Nn(l)&&lc(a,o,d,g,f);for(let E=10;E<l.length;E++){const I=l[E];Gl(I[1],I,o,a,d,g)}}(a,o,g,l,f)}}function sg(o,a,l){return o.createElement(a,l)}function Xb(o,a){const l=o[9],d=l.indexOf(a),f=a[3];512&a[2]&&(a[2]&=-513,vl(f,-1)),l.splice(d,1)}function ov(o,a){if(o.length<=10)return;const l=10+a,d=o[l];if(d){const f=d[17];null!==f&&f!==o&&Xb(f,d),a>0&&(o[l-1][4]=d[4]);const g=qn(o,10+a);!function sv(o,a){Gl(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(d[1],d);const v=g[19];null!==v&&v.detachView(g[1]),d[3]=null,d[4]=null,d[2]&=-65}return d}function _h(o,a){if(!(128&a[2])){const l=a[11];l.destroyNode&&Gl(o,a,l,3,null,null),function kO(o){let a=o[13];if(!a)return og(o[1],o);for(;a;){let l=null;if(hr(a))l=a[13];else{const d=a[10];d&&(l=d)}if(!l){for(;a&&!a[4]&&a!==o;)hr(a)&&og(a[1],a),a=a[3];null===a&&(a=o),hr(a)&&og(a[1],a),l=a&&a[4]}a=l}}(a)}}function og(o,a){if(!(128&a[2])){a[2]&=-65,a[2]|=128,function lv(o,a){let l;if(null!=o&&null!=(l=o.destroyHooks))for(let d=0;d<l.length;d+=2){const f=a[l[d]];if(!(f instanceof pi)){const g=l[d+1];if(Array.isArray(g))for(let v=0;v<g.length;v+=2){const E=f[g[v]],I=g[v+1];try{I.call(E)}finally{}}else try{g.call(f)}finally{}}}}(o,a),function av(o,a){const l=o.cleanup,d=a[7];let f=-1;if(null!==l)for(let g=0;g<l.length-1;g+=2)if("string"==typeof l[g]){const v=l[g+1],E="function"==typeof v?v(a):Nn(a[v]),I=d[f=l[g+2]],D=l[g+3];"boolean"==typeof D?E.removeEventListener(l[g],I,D):D>=0?d[f=D]():d[f=-D].unsubscribe(),g+=2}else{const v=d[f=l[g+1]];l[g].call(v)}if(null!==d){for(let g=f+1;g<d.length;g++)(0,d[g])();a[7]=null}}(o,a),1===a[1].type&&a[11].destroy();const l=a[17];if(null!==l&&ti(a[3])){l!==a[3]&&Xb(l,a);const d=a[19];null!==d&&d.detachView(o)}!function MA(o){Qy.delete(o[20])}(a)}}function eC(o,a,l){return function tC(o,a,l){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return l[0];if(2&d.flags){const f=o.data[d.directiveStart].encapsulation;if(f===ct.None||f===ct.Emulated)return null}return Vr(d,l)}(o,a.parent,l)}function oo(o,a,l,d,f){o.insertBefore(a,l,d,f)}function nC(o,a,l){o.appendChild(a,l)}function rC(o,a,l,d,f){null!==d?oo(o,a,l,d,f):nC(o,a,l)}function ag(o,a){return o.parentNode(a)}let uv=function sC(o,a,l){return 40&o.type?Vr(o,l):null};function lg(o,a,l,d){const f=eC(o,d,a),g=a[11],E=function Cr(o,a,l){return uv(o,a,l)}(d.parent||a[6],d,a);if(null!=f)if(Array.isArray(l))for(let I=0;I<l.length;I++)rC(g,f,l[I],E,!1);else rC(g,f,l,E,!1)}function ug(o,a){if(null!==a){const l=a.type;if(3&l)return Vr(a,o);if(4&l)return oC(-1,o[a.index]);if(8&l){const d=a.child;if(null!==d)return ug(o,d);{const f=o[a.index];return ti(f)?oC(-1,f):Nn(f)}}if(32&l)return nv(a,o)()||Nn(o[a.index]);{const d=cv(o,a);return null!==d?Array.isArray(d)?d[0]:ug(ac(o[16]),d):ug(o,a.next)}}return null}function cv(o,a){return null!==a?o[16][6].projection[a.projection]:null}function oC(o,a){const l=10+o+1;if(l<a.length){const d=a[l],f=d[1].firstChild;if(null!==f)return ug(d,f)}return a[7]}function dv(o,a,l,d,f,g,v){for(;null!=l;){const E=d[l.index],I=l.type;if(v&&0===a&&(E&&br(Nn(E),d),l.flags|=4),64!=(64&l.flags))if(8&I)dv(o,a,l.child,d,f,g,!1),lc(a,o,f,E,g);else if(32&I){const D=nv(l,d);let x;for(;x=D();)lc(a,o,f,x,g);lc(a,o,f,E,g)}else 16&I?vh(o,a,d,l,f,g):lc(a,o,f,E,g);l=v?l.projectionNext:l.next}}function Gl(o,a,l,d,f,g){dv(l,d,o.firstChild,a,f,g,!1)}function vh(o,a,l,d,f,g){const v=l[16],I=v[6].projection[d.projection];if(Array.isArray(I))for(let D=0;D<I.length;D++)lc(a,o,f,I[D],g);else dv(o,a,I,v[3],f,g,!0)}function Wl(o,a,l){o.setAttribute(a,"style",l)}function wh(o,a,l){""===l?o.removeAttribute(a,"class"):o.setAttribute(a,"class",l)}function qA(o,a,l){let d=o.length;for(;;){const f=o.indexOf(a,l);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const g=a.length;if(f+g===d||o.charCodeAt(f+g)<=32)return f}l=f+1}}const hv="ng-template";function fv(o,a,l){let d=0;for(;d<o.length;){let f=o[d++];if(l&&"class"===f){if(f=o[d],-1!==qA(f.toLowerCase(),a,0))return!0}else if(1===f){for(;d<o.length&&"string"==typeof(f=o[d++]);)if(f.toLowerCase()===a)return!0;return!1}}return!1}function uC(o){return 4===o.type&&o.value!==hv}function WA(o,a,l){return a===(4!==o.type||l?o.value:hv)}function ZA(o,a,l){let d=4;const f=o.attrs||[],g=function LO(o){for(let a=0;a<o.length;a++)if(Ud(o[a]))return a;return o.length}(f);let v=!1;for(let E=0;E<a.length;E++){const I=a[E];if("number"!=typeof I){if(!v)if(4&d){if(d=2|1&d,""!==I&&!WA(o,I,l)||""===I&&1===a.length){if(es(d))return!1;v=!0}}else{const D=8&d?I:a[++E];if(8&d&&null!==o.attrs){if(!fv(o.attrs,D,l)){if(es(d))return!1;v=!0}continue}const k=zA(8&d?"class":I,f,uC(o),l);if(-1===k){if(es(d))return!1;v=!0;continue}if(""!==D){let H;H=k>g?"":f[k+1].toLowerCase();const ee=8&d?H:null;if(ee&&-1!==qA(ee,D,0)||2&d&&D!==H){if(es(d))return!1;v=!0}}}}else{if(!v&&!es(d)&&!es(I))return!1;if(v&&es(I))continue;v=!1,d=I|1&d}}return es(d)||v}function es(o){return 0==(1&o)}function zA(o,a,l,d){if(null===a)return-1;let f=0;if(d||!l){let g=!1;for(;f<a.length;){const v=a[f];if(v===o)return f;if(3===v||6===v)g=!0;else{if(1===v||2===v){let E=a[++f];for(;"string"==typeof E;)E=a[++f];continue}if(4===v)break;if(0===v){f+=4;continue}}f+=g?1:2}return-1}return function cC(o,a){let l=o.indexOf(4);if(l>-1)for(l++;l<o.length;){const d=o[l];if("number"==typeof d)return-1;if(d===a)return l;l++}return-1}(a,o)}function KA(o,a,l=!1){for(let d=0;d<a.length;d++)if(ZA(o,a[d],l))return!0;return!1}function dC(o,a){return o?":not("+a.trim()+")":a}function pv(o){let a=o[0],l=1,d=2,f="",g=!1;for(;l<o.length;){let v=o[l];if("string"==typeof v)if(2&d){const E=o[++l];f+="["+v+(E.length>0?'="'+E+'"':"")+"]"}else 8&d?f+="."+v:4&d&&(f+=" "+v);else""!==f&&!es(v)&&(a+=dC(g,f),f=""),d=v,g=g||!es(d);l++}return""!==f&&(a+=dC(g,f)),a}const Nt={};function hC(o){fC($t(),Ce(),In()+o,!1)}function fC(o,a,l,d){if(!d)if(3==(3&a[2])){const g=o.preOrderCheckHooks;null!==g&&Ou(a,g,l)}else{const g=o.preOrderHooks;null!==g&&Uo(a,g,0,l)}ms(l)}function gC(o,a=null,l=null,d){const f=mC(o,a,l,d);return f.resolveInjectorInitializers(),f}function mC(o,a=null,l=null,d,f=new Set){const g=[l||Et,mA(o)];return d=d||("object"==typeof o?void 0:me(o)),new Vy(g,a||qp(),d||null,f)}let z=(()=>{class o{static create(l,d){if(Array.isArray(l))return gC({name:""},d,l,"");{const f=l.name??"";return gC({name:f},l.parent,l.providers,f)}}}return o.THROW_IF_NOT_FOUND=ba,o.NULL=new Db,o.\u0275prov=Qt({token:o,providedIn:"any",factory:()=>vn(Ib)}),o.__NG_ELEMENT_ID__=-1,o})();function Ma(o,a=Ke.Default){const l=Ce();return null===l?vn(o,a):ju(ir(),l,Q(o),a)}function SC(){throw new Error("invalid")}function ea(o,a){return o<<17|a<<2}function $r(o){return o>>17&32767}function Cv(o){return 2|o}function ao(o){return(131068&o)>>2}function Iv(o,a){return-131069&o|a<<2}function pg(o){return 1|o}function yg(o,a){const l=o.contentQueries;if(null!==l)for(let d=0;d<l.length;d+=2){const f=l[d],g=l[d+1];if(-1!==g){const v=o.data[g];xd(f),v.contentQueries(2,a[g],g)}}}function vg(o,a,l,d,f,g,v,E,I,D,x){const k=a.blueprint.slice();return k[0]=f,k[2]=76|d,(null!==x||o&&1024&o[2])&&(k[2]|=1024),yl(k),k[3]=k[15]=o,k[8]=l,k[10]=v||o&&o[10],k[11]=E||o&&o[11],k[12]=I||o&&o[12]||null,k[9]=D||o&&o[9]||null,k[6]=g,k[20]=function AA(){return SA++}(),k[21]=x,k[16]=2==a.type?o[16]:k,k}function Th(o,a,l,d,f){let g=o.data[a];if(null===g)g=function Dh(o,a,l,d,f){const g=xu(),v=Td(),I=o.data[a]=function yx(o,a,l,d,f,g){return{type:l,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:g,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?g:g&&g.parent,l,a,d,f);return null===o.firstChild&&(o.firstChild=I),null!==g&&(v?null==g.child&&null!==I.parent&&(g.child=I):null===g.next&&(g.next=I)),I}(o,a,l,d,f),function hp(){return Tt.lFrame.inI18n}()&&(g.flags|=64);else if(64&g.type){g.type=l,g.value=d,g.attrs=f;const v=function Mu(){const o=Tt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}();g.injectorIndex=null===v?-1:v.injectorIndex}return fi(g,!0),g}function Sh(o,a,l,d){if(0===l)return-1;const f=a.length;for(let g=0;g<l;g++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function BC(o,a,l){Pu(a);try{const d=o.viewQuery;null!==d&&WC(1,d,l);const f=o.template;null!==f&&Eg(o,a,f,1,l),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&yg(o,a),o.staticViewQueries&&WC(2,o.viewQuery,l);const g=o.components;null!==g&&function Nv(o,a){for(let l=0;l<a.length;l++)Rx(o,a[l])}(a,g)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[2]&=-5,ya()}}function wg(o,a,l,d){const f=a[2];if(128!=(128&f)){Pu(a);try{yl(a),function El(o){return Tt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==l&&Eg(o,a,l,2,d);const v=3==(3&f);if(v){const D=o.preOrderCheckHooks;null!==D&&Ou(a,D,null)}else{const D=o.preOrderHooks;null!==D&&Uo(a,D,0,null),Pd(a,0)}if(function Mx(o){for(let a=rg(o);null!==a;a=ig(a)){if(!a[2])continue;const l=a[9];for(let d=0;d<l.length;d++){const f=l[d],g=f[3];0==(512&f[2])&&vl(g,1),f[2]|=512}}}(a),function xx(o){for(let a=rg(o);null!==a;a=ig(a))for(let l=10;l<a.length;l++){const d=a[l],f=d[1];qs(d)&&wg(f,d,f.template,d[8])}}(a),null!==o.contentQueries&&yg(o,a),v){const D=o.contentCheckHooks;null!==D&&Ou(a,D)}else{const D=o.contentHooks;null!==D&&Uo(a,D,1),Pd(a,1)}!function px(o,a){const l=o.hostBindingOpCodes;if(null!==l)try{for(let d=0;d<l.length;d++){const f=l[d];if(f<0)ms(~f);else{const g=f,v=l[++d],E=l[++d];fp(v,g),E(2,a[g])}}}finally{ms(-1)}}(o,a);const E=o.components;null!==E&&function gx(o,a){for(let l=0;l<a.length;l++)Ig(o,a[l])}(a,E);const I=o.viewQuery;if(null!==I&&WC(2,I,d),v){const D=o.viewCheckHooks;null!==D&&Ou(a,D)}else{const D=o.viewHooks;null!==D&&Uo(a,D,2),Pd(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-41,512&a[2]&&(a[2]&=-513,vl(a[3],-1))}finally{ya()}}}function Eg(o,a,l,d,f){const g=In(),v=2&d;try{ms(-1),v&&a.length>22&&fC(o,a,22,!1),l(d,f)}finally{ms(g)}}function Pv(o,a,l){if(Po(a)){const f=a.directiveEnd;for(let g=a.directiveStart;g<f;g++){const v=o.data[g];v.contentQueries&&v.contentQueries(1,l[g],g)}}}function kv(o,a,l){!wl()||(function bx(o,a,l,d){const f=l.directiveStart,g=l.directiveEnd;o.firstCreatePass||Bo(l,a),br(d,a);const v=l.initialInputs;for(let E=f;E<g;E++){const I=o.data[E],D=Zi(I);D&&Dx(a,l,I);const x=Zs(a,o,E,l);br(x,a),null!==v&&Sx(0,E-f,x,I,0,v),D&&(en(l.index,a)[8]=x)}}(o,a,l,Vr(l,a)),128==(128&l.flags)&&function jv(o,a,l){const d=l.directiveStart,f=l.directiveEnd,g=l.index,v=function db(){return Tt.lFrame.currentDirectiveIndex}();try{ms(g);for(let E=d;E<f;E++){const I=o.data[E],D=a[E];Nu(E),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&Cx(I,D)}}finally{ms(-1),Nu(v)}}(o,a,l))}function Ov(o,a,l=Vr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let g=0;g<d.length;g+=2){const v=d[g+1],E=-1===v?l(a,o):o[v];o[f++]=E}}}function jC(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Fv(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Fv(o,a,l,d,f,g,v,E,I,D){const x=22+d,k=x+f,H=function Lv(o,a){const l=[];for(let d=0;d<a;d++)l.push(d<o?null:Nt);return l}(x,k),ee="function"==typeof D?D():D;return H[1]={type:o,blueprint:H,template:l,queries:null,viewQuery:E,declTNode:a,data:H.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:k,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof g?g():g,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:I,consts:ee,incompleteFirstPass:!1}}function Uv(o,a,l,d){const f=zC(a);null===l?f.push(d):(f.push(l),o.firstCreatePass&&Sg(o).push(d,f.length-1))}function ri(o,a,l){for(let d in o)if(o.hasOwnProperty(d)){const f=o[d];(l=null===l?{}:l).hasOwnProperty(d)?l[d].push(a,f):l[d]=[a,f]}return l}function $C(o,a){const d=a.directiveEnd,f=o.data,g=a.attrs,v=[];let E=null,I=null;for(let D=a.directiveStart;D<d;D++){const x=f[D],k=x.inputs,H=null===g||uC(a)?null:Ax(k,g);v.push(H),E=ri(k,D,E),I=ri(x.outputs,D,I)}null!==E&&(E.hasOwnProperty("class")&&(a.flags|=16),E.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=v,a.inputs=E,a.outputs=I}function Ni(o,a,l,d,f,g,v,E){const I=Vr(a,l);let x,D=a.inputs;!E&&null!=D&&(x=D[d])?(Ag(o,l,x,d,f),Tu(a)&&Vv(l,a.index)):3&a.type&&(d=function vx(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=v?v(f,a.value||"",d):f,g.setProperty(I,d,f))}function Vv(o,a){const l=en(a,o);16&l[2]||(l[2]|=32)}function Bv(o,a,l,d){let f=!1;if(wl()){const g=function KO(o,a,l){const d=o.directiveRegistry;let f=null;if(d)for(let g=0;g<d.length;g++){const v=d[g];KA(l,v.selectors,!1)&&(f||(f=[]),Sl(Bo(l,a),o,v.type),Zi(v)?(Ix(o,l),f.unshift(v)):f.push(v))}return f}(o,a,l),v=null===d?null:{"":-1};if(null!==g){f=!0,Tx(l,o.data.length,g.length);for(let x=0;x<g.length;x++){const k=g[x];k.providersResolver&&k.providersResolver(k)}let E=!1,I=!1,D=Sh(o,a,g.length,null);for(let x=0;x<g.length;x++){const k=g[x];l.mergedAttrs=Tl(l.mergedAttrs,k.hostAttrs),qC(o,l,a,D,k),Cg(D,k,v),null!==k.contentQueries&&(l.flags|=8),(null!==k.hostBindings||null!==k.hostAttrs||0!==k.hostVars)&&(l.flags|=128);const H=k.type.prototype;!E&&(H.ngOnChanges||H.ngOnInit||H.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(l.index),E=!0),!I&&(H.ngOnChanges||H.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(l.index),I=!0),D++}$C(o,l)}v&&function YO(o,a,l){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const g=l[a[f+1]];if(null==g)throw new be(-301,!1);d.push(a[f],g)}}}(l,d,v)}return l.mergedAttrs=Tl(l.mergedAttrs,l.attrs),f}function bg(o,a,l,d,f,g){const v=g.hostBindings;if(v){let E=o.hostBindingOpCodes;null===E&&(E=o.hostBindingOpCodes=[]);const I=~a.index;(function Ex(o){let a=o.length;for(;a>0;){const l=o[--a];if("number"==typeof l&&l<0)return l}return 0})(E)!=I&&E.push(I),E.push(d,f,v)}}function Cx(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Ix(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function Cg(o,a,l){if(l){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)l[a.exportAs[d]]=o;Zi(a)&&(l[""]=o)}}function Tx(o,a,l){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+l,o.providerIndexes=a}function qC(o,a,l,d,f){o.data[d]=f;const g=f.factory||(f.factory=wr(f.type)),v=new pi(g,Zi(f),Ma);o.blueprint[d]=v,l[d]=v,bg(o,a,0,d,Sh(o,l,f.hostVars,Nt),f)}function Dx(o,a,l){const d=Vr(a,o),f=jC(l),g=o[10],v=Tg(o,vg(o,f,null,l.onPush?32:16,d,a,g,g.createRenderer(d,l),null,null,null));o[a.index]=v}function co(o,a,l,d,f,g){const v=Vr(o,a);!function $v(o,a,l,d,f,g,v){if(null==g)o.removeAttribute(a,f,l);else{const E=null==v?oe(g):v(g,d||"",f);o.setAttribute(a,f,E,l)}}(a[11],v,g,o.value,l,d,f)}function Sx(o,a,l,d,f,g){const v=g[a];if(null!==v){const E=d.setInput;for(let I=0;I<v.length;){const D=v[I++],x=v[I++],k=v[I++];null!==E?d.setInput(l,k,D,x):l[x]=k}}}function Ax(o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;o.hasOwnProperty(f)&&(null===l&&(l=[]),l.push(f,o[f],a[d+1])),d+=2}else d+=2;else d+=4}return l}function GC(o,a,l,d){return new Array(o,!0,!1,a,null,0,d,l,null,null)}function Ig(o,a){const l=en(a,o);if(qs(l)){const d=l[1];48&l[2]?wg(d,l,d.template,l[8]):l[5]>0&&ta(l)}}function ta(o){for(let d=rg(o);null!==d;d=ig(d))for(let f=10;f<d.length;f++){const g=d[f];if(qs(g))if(512&g[2]){const v=g[1];wg(v,g,v.template,g[8])}else g[5]>0&&ta(g)}const l=o[1].components;if(null!==l)for(let d=0;d<l.length;d++){const f=en(l[d],o);qs(f)&&f[5]>0&&ta(f)}}function Rx(o,a){const l=en(a,o),d=l[1];(function Nx(o,a){for(let l=a.length;l<o.blueprint.length;l++)a.push(o.blueprint[l])})(d,l),BC(d,l,l[8])}function Tg(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Hv(o){for(;o;){o[2]|=32;const a=ac(o);if(Du(o)&&!a)return o;o=a}return null}function Dg(o,a,l,d=!0){const f=a[10];f.begin&&f.begin();try{wg(o,a,o.template,l)}catch(v){throw d&&YC(a,v),v}finally{f.end&&f.end()}}function WC(o,a,l){xd(0),a(o,l)}function zC(o){return o[7]||(o[7]=[])}function Sg(o){return o.cleanup||(o.cleanup=[])}function YC(o,a){const l=o[9],d=l?l.get(ph,null):null;d&&d.handleError(a)}function Ag(o,a,l,d,f){for(let g=0;g<l.length;){const v=l[g++],E=l[g++],I=a[v],D=o.data[v];null!==D.setInput?D.setInput(I,f,d,E):I[E]=f}}function na(o,a,l){const d=ml(a,o);!function Yb(o,a,l){o.setValue(a,l)}(o[11],d,l)}function Ah(o,a,l){let d=l?o.styles:null,f=l?o.classes:null,g=0;if(null!==a)for(let v=0;v<a.length;v++){const E=a[v];"number"==typeof E?g=E:1==g?f=Ne(f,E):2==g&&(d=Ne(d,E+": "+a[++v]+";"))}l?o.styles=d:o.stylesWithoutHost=d,l?o.classes=f:o.classesWithoutHost=f}function xg(o,a,l,d,f=!1){for(;null!==l;){const g=a[l.index];if(null!==g&&d.push(Nn(g)),ti(g))for(let E=10;E<g.length;E++){const I=g[E],D=I[1].firstChild;null!==D&&xg(I[1],I,D,d)}const v=l.type;if(8&v)xg(o,a,l.child,d);else if(32&v){const E=nv(l,a);let I;for(;I=E();)d.push(I)}else if(16&v){const E=cv(a,l);if(Array.isArray(E))d.push(...E);else{const I=ac(a[16]);xg(I[1],I,E,d,!0)}}l=f?l.projectionNext:l.next}return d}class xh{constructor(a,l){this._lView=a,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,l=a[1];return xg(l,a,l.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(ti(a)){const l=a[8],d=l?l.indexOf(this):-1;d>-1&&(ov(a,d),qn(l,d))}this._attachedToViewContainer=!1}_h(this._lView[1],this._lView)}onDestroy(a){Uv(this._lView[1],this._lView,null,a)}markForCheck(){Hv(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Dg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new be(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Jb(o,a){Gl(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new be(902,!1);this._appRef=a}}class Px extends xh{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;Dg(a[1],a,a[8],!1)}checkNoChanges(){}get context(){return null}}class QC extends Aa{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const l=M(a);return new zl(l,this.ngModule)}}function Zl(o){const a=[];for(let l in o)o.hasOwnProperty(l)&&a.push({propName:o[l],templateName:l});return a}class kx{constructor(a,l){this.injector=a,this.parentInjector=l}get(a,l,d){const f=this.injector.get(a,qy,d);return f!==qy||l===qy?f:this.parentInjector.get(a,l,d)}}class zl extends $y{constructor(a,l){super(),this.componentDef=a,this.ngModule=l,this.componentType=a.type,this.selector=function QA(o){return o.map(pv).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Zl(this.componentDef.inputs)}get outputs(){return Zl(this.componentDef.outputs)}create(a,l,d,f){let g=(f=f||this.ngModule)instanceof io?f:f?.injector;g&&null!==this.componentDef.getStandaloneInjector&&(g=this.componentDef.getStandaloneInjector(g)||g);const v=g?new kx(a,g):a,E=v.get(wA,null);if(null===E)throw new be(407,!1);const I=v.get(Hy,null),D=E.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",k=d?function _x(o,a,l){return o.selectRootElement(a,l===ct.ShadowDom)}(D,d,this.componentDef.encapsulation):sg(D,x,function ra(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(x)),H=this.componentDef.onPush?288:272,ee=Fv(0,null,null,1,0,null,null,null,null,null),de=vg(null,ee,null,H,null,null,E,D,I,v,null);let Fe,He;Pu(de);try{const Xe=function Ux(o,a,l,d,f,g){const v=l[1];l[22]=o;const I=Th(v,22,2,"#host",null),D=I.mergedAttrs=a.hostAttrs;null!==D&&(Ah(I,D,!0),null!==o&&(_s(f,o,D),null!==I.classes&&wh(f,o,I.classes),null!==I.styles&&Wl(f,o,I.styles)));const x=d.createRenderer(o,a),k=vg(l,jC(a),null,a.onPush?32:16,l[22],I,d,x,g||null,null,null);return v.firstCreatePass&&(Sl(Bo(I,l),v,a.type),Ix(v,I),Tx(I,l.length,1)),Tg(l,k),l[22]=k}(k,this.componentDef,de,E,D);if(k)if(d)_s(D,k,["ng-version",Lb.full]);else{const{attrs:_t,classes:Ee}=function JA(o){const a=[],l=[];let d=1,f=2;for(;d<o.length;){let g=o[d];if("string"==typeof g)2===f?""!==g&&a.push(g,o[++d]):8===f&&l.push(g);else{if(!es(f))break;f=g}d++}return{attrs:a,classes:l}}(this.componentDef.selectors[0]);_t&&_s(D,k,_t),Ee&&Ee.length>0&&wh(D,k,Ee.join(" "))}if(He=_l(ee,22),void 0!==l){const _t=He.projection=[];for(let Ee=0;Ee<this.ngContentSelectors.length;Ee++){const vt=l[Ee];_t.push(null!=vt?Array.from(vt):null)}}Fe=function Vx(o,a,l,d){const f=l[1],g=function zO(o,a,l){const d=ir();o.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),qC(o,d,a,Sh(o,a,1,null),l),$C(o,d));const f=Zs(a,o,d.directiveStart,d);br(f,a);const g=Vr(d,a);return g&&br(g,a),f}(f,l,a);if(o[8]=l[8]=g,null!==d)for(const E of d)E(g,a);if(a.contentQueries){const E=ir();a.contentQueries(1,g,E.directiveStart)}const v=ir();return!f.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(ms(v.index),bg(l[1],v,0,v.directiveStart,v.directiveEnd,a),Cx(a,g)),g}(Xe,this.componentDef,de,[Bx]),BC(ee,de,null)}finally{ya()}return new Lx(this.componentType,Fe,nc(He,de),de,He)}}class Lx extends class Nb{}{constructor(a,l,d,f,g){super(),this.location=d,this._rootLView=f,this._tNode=g,this.instance=l,this.hostView=this.changeDetectorRef=new Px(f),this.componentType=a}setInput(a,l){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const g=this._rootLView;Ag(g[1],g,f,a,l),Vv(g,this._tNode.index)}}get injector(){return new Ml(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function Bx(){const o=ir();Cl(Ce()[1],o)}function Mh(o){let a=function Pa(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),l=!0;const d=[o];for(;a;){let f;if(Zi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new be(903,!1);f=a.\u0275dir}if(f){if(l){d.push(f);const v=o;v.inputs=Mg(o.inputs),v.declaredInputs=Mg(o.declaredInputs),v.outputs=Mg(o.outputs);const E=f.hostBindings;E&&Zv(o,E);const I=f.viewQuery,D=f.contentQueries;if(I&&Gv(o,I),D&&Wv(o,D),Ie(o.inputs,f.inputs),Ie(o.declaredInputs,f.declaredInputs),Ie(o.outputs,f.outputs),Zi(f)&&f.data.animation){const x=o.data;x.animation=(x.animation||[]).concat(f.data.animation)}}const g=f.features;if(g)for(let v=0;v<g.length;v++){const E=g[v];E&&E.ngInherit&&E(o),E===Mh&&(l=!1)}}a=Object.getPrototypeOf(a)}!function qv(o){let a=0,l=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=Tl(f.hostAttrs,l=Tl(l,f.hostAttrs))}}(d)}function Mg(o){return o===Ur?{}:o===Et?[]:o}function Gv(o,a){const l=o.viewQuery;o.viewQuery=l?(d,f)=>{a(d,f),l(d,f)}:a}function Wv(o,a){const l=o.contentQueries;o.contentQueries=l?(d,f,g)=>{a(d,f,g),l(d,f,g)}:a}function Zv(o,a){const l=o.hostBindings;o.hostBindings=l?(d,f)=>{a(d,f),l(d,f)}:a}let Rg=null;function Bn(){if(!Rg){const o=St.Symbol;if(o&&o.iterator)Rg=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<a.length;++l){const d=a[l];"entries"!==d&&"size"!==d&&Map.prototype[d]===Map.prototype.entries&&(Rg=d)}}}return Rg}function Kl(o){return!!Ng(o)&&(Array.isArray(o)||!(o instanceof Map)&&Bn()in o)}function Ng(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function ns(o,a,l){return o[a]=l}function Ir(o,a,l){return!Object.is(o[a],l)&&(o[a]=l,!0)}function ka(o,a,l,d){const f=Ir(o,a,l);return Ir(o,a+1,d)||f}function Rh(o,a,l,d){const f=Ce();return Ir(f,bl(),a)&&($t(),co(Tn(),f,o,a,l,d)),Rh}function Oa(o,a,l,d){return Ir(o,bl(),l)?a+oe(l)+d:Nt}function fc(o,a,l,d,f,g){const E=ka(o,function Ki(){return Tt.lFrame.bindingIndex}(),l,f);return Gs(2),E?a+oe(l)+d+oe(f)+g:Nt}function oI(o,a,l,d,f,g,v,E){const I=Ce(),D=$t(),x=o+22,k=D.firstCreatePass?function e0(o,a,l,d,f,g,v,E,I){const D=a.consts,x=Th(a,o,4,v||null,zi(D,E));Bv(a,l,x,zi(D,I)),Cl(a,x);const k=x.tViews=Fv(2,x,d,f,g,a.directiveRegistry,a.pipeRegistry,null,a.schemas,D);return null!==a.queries&&(a.queries.template(a,x),k.queries=a.queries.embeddedTView(x)),x}(x,D,I,a,l,d,f,g,v):D.data[x];fi(k,!1);const H=I[11].createComment("");lg(D,I,H,k),br(H,I),Tg(I,I[x]=GC(H,I,H,k)),fa(k)&&kv(D,I,k),null!=v&&Ov(I,k,E)}function aI(o){return Hs(function Dd(){return Tt.lFrame.contextLView}(),22+o)}function Nh(o,a,l){const d=Ce();return Ir(d,bl(),a)&&Ni($t(),Tn(),d,o,a,d[11],l,!1),Nh}function Og(o,a,l,d,f){const v=f?"class":"style";Ag(o,l,a.inputs[v],v,d)}function Fg(o,a,l,d){const f=Ce(),g=$t(),v=22+o,E=f[11],I=f[v]=sg(E,a,function Nd(){return Tt.lFrame.currentNamespace}()),D=g.firstCreatePass?function n0(o,a,l,d,f,g,v){const E=a.consts,D=Th(a,o,2,f,zi(E,g));return Bv(a,l,D,zi(E,v)),null!==D.attrs&&Ah(D,D.attrs,!1),null!==D.mergedAttrs&&Ah(D,D.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,D),D}(v,g,f,0,a,l,d):g.data[v];fi(D,!0);const x=D.mergedAttrs;null!==x&&_s(E,I,x);const k=D.classes;null!==k&&wh(E,I,k);const H=D.styles;return null!==H&&Wl(E,I,H),64!=(64&D.flags)&&lg(g,f,I,D),0===function Ed(){return Tt.lFrame.elementDepthCount}()&&br(I,f),function uy(){Tt.lFrame.elementDepthCount++}(),fa(D)&&(kv(g,f,D),Pv(g,D,f)),null!==d&&Ov(f,D),Fg}function mc(){let o=ir();Td()?Ru():(o=o.parent,fi(o,!1));const a=o;!function bd(){Tt.lFrame.elementDepthCount--}();const l=$t();return l.firstCreatePass&&(Cl(l,o),Po(o)&&l.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Fu(o){return 0!=(16&o.flags)}(a)&&Og(l,a,Ce(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Lu(o){return 0!=(32&o.flags)}(a)&&Og(l,a,Ce(),a.stylesWithoutHost,!1),mc}function r0(o,a,l,d){return Fg(o,a,l,d),mc(),r0}function Ph(o,a,l){const d=Ce(),f=$t(),g=o+22,v=f.firstCreatePass?function Hx(o,a,l,d,f){const g=a.consts,v=zi(g,d),E=Th(a,o,8,"ng-container",v);return null!==v&&Ah(E,v,!0),Bv(a,l,E,zi(g,f)),null!==a.queries&&a.queries.elementStart(a,E),E}(g,f,d,a,l):f.data[g];fi(v,!0);const E=d[g]=d[11].createComment("");return lg(f,d,E,v),br(E,d),fa(v)&&(kv(f,d,v),Pv(f,v,d)),null!=l&&Ov(d,v),Ph}function Lg(){let o=ir();const a=$t();return Td()?Ru():(o=o.parent,fi(o,!1)),a.firstCreatePass&&(Cl(a,o),Po(o)&&a.queries.elementEnd(o)),Lg}function Ug(o,a,l){return Ph(o,a,l),Lg(),Ug}function s0(o){return!!o&&"function"==typeof o.then}function lI(o){return!!o&&"function"==typeof o.subscribe}const o0=lI;function kh(o,a,l,d){const f=Ce(),g=$t(),v=ir();return function cI(o,a,l,d,f,g,v,E){const I=fa(d),x=o.firstCreatePass&&Sg(o),k=a[8],H=zC(a);let ee=!0;if(3&d.type||E){const He=Vr(d,a),Xe=E?E(He):He,_t=H.length,Ee=E?Xt=>E(Nn(Xt[d.index])):d.index;let vt=null;if(!E&&I&&(vt=function a0(o,a,l,d){const f=o.cleanup;if(null!=f)for(let g=0;g<f.length-1;g+=2){const v=f[g];if(v===l&&f[g+1]===d){const E=a[7],I=f[g+2];return E.length>I?E[I]:null}"string"==typeof v&&(g+=2)}return null}(o,a,f,d.index)),null!==vt)(vt.__ngLastListenerFn__||vt).__ngNextListenerFn__=g,vt.__ngLastListenerFn__=g,ee=!1;else{g=Wx(d,a,k,g,!1);const Xt=l.listen(Xe,f,g);H.push(g,Xt),x&&x.push(f,Ee,_t,_t+1)}}else g=Wx(d,a,k,g,!1);const de=d.outputs;let Fe;if(ee&&null!==de&&(Fe=de[f])){const He=Fe.length;if(He)for(let Xe=0;Xe<He;Xe+=2){const An=a[Fe[Xe]][Fe[Xe+1]].subscribe(g),_o=H.length;H.push(g,An),x&&x.push(f,d.index,_o,-(_o+1))}}}(g,f,f[11],v,o,a,0,d),kh}function Gx(o,a,l,d){try{return!1!==l(d)}catch(f){return YC(o,f),!1}}function Wx(o,a,l,d,f){return function g(v){if(v===Function)return d;Hv(2&o.flags?en(o.index,a):a);let I=Gx(a,0,d,v),D=g.__ngNextListenerFn__;for(;D;)I=Gx(a,0,D,v)&&I,D=D.__ngNextListenerFn__;return f&&!1===I&&(v.preventDefault(),v.returnValue=!1),I}}function Vg(o=1){return function Lo(o){return(Tt.lFrame.contextLView=function gy(o,a){for(;o>0;)a=a[15],o--;return a}(o,Tt.lFrame.contextLView))[8]}(o)}function l0(o,a,l){return u0(o,"",a,"",l),l0}function u0(o,a,l,d,f){const g=Ce(),v=Oa(g,a,l,d);return v!==Nt&&Ni($t(),Tn(),g,o,v,g[11],f,!1),u0}function _I(o,a,l,d,f){const g=o[l+1],v=null===a;let E=d?$r(g):ao(g),I=!1;for(;0!==E&&(!1===I||v);){const x=o[E+1];zx(o[E],a)&&(I=!0,o[E+1]=d?pg(x):Cv(x)),E=d?$r(x):ao(x)}I&&(o[l+1]=d?Cv(g):pg(g))}function zx(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Ys(o,a)>=0}function g0(o,a,l){return ki(o,a,l,!1),g0}function m0(o,a){return ki(o,a,null,!0),m0}function ki(o,a,l,d){const f=Ce(),g=$t(),v=Gs(2);g.firstUpdatePass&&function bI(o,a,l,d){const f=o.data;if(null===f[l+1]){const g=f[In()],v=function Hg(o,a){return a>=o.expandoStartIndex}(o,l);(function E0(o,a){return 0!=(o.flags&(a?16:32))})(g,d)&&null===a&&!v&&(a=!1),a=function y0(o,a,l,d){const f=function Sd(o){const a=Tt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let g=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(l=yc(l=qg(null,o,a,l,d),a.attrs,d),g=null);else{const v=a.directiveStylingLast;if(-1===v||o[v]!==f)if(l=qg(f,o,a,l,d),null===g){let I=function Xx(o,a,l){const d=l?a.classBindings:a.styleBindings;if(0!==ao(d))return o[$r(d)]}(o,a,d);void 0!==I&&Array.isArray(I)&&(I=qg(null,o,a,I[1],d),I=yc(I,a.attrs,d),function v0(o,a,l,d){o[$r(l?a.classBindings:a.styleBindings)]=d}(o,a,d,I))}else g=function w0(o,a,l){let d;const f=a.directiveEnd;for(let g=1+a.directiveStylingLast;g<f;g++)d=yc(d,o[g].hostAttrs,l);return yc(d,a.attrs,l)}(o,a,d)}return void 0!==g&&(d?a.residualClasses=g:a.residualStyles=g),l}(f,g,a,d),function Zx(o,a,l,d,f,g){let v=g?a.classBindings:a.styleBindings,E=$r(v),I=ao(v);o[d]=l;let x,D=!1;if(Array.isArray(l)){const k=l;x=k[1],(null===x||Ys(k,x)>0)&&(D=!0)}else x=l;if(f)if(0!==I){const H=$r(o[E+1]);o[d+1]=ea(H,E),0!==H&&(o[H+1]=Iv(o[H+1],d)),o[E+1]=function lx(o,a){return 131071&o|a<<17}(o[E+1],d)}else o[d+1]=ea(E,0),0!==E&&(o[E+1]=Iv(o[E+1],d)),E=d;else o[d+1]=ea(I,0),0===E?E=d:o[I+1]=Iv(o[I+1],d),I=d;D&&(o[d+1]=Cv(o[d+1])),_I(o,x,d,!0),_I(o,x,d,!1),function h0(o,a,l,d,f){const g=f?o.residualClasses:o.residualStyles;null!=g&&"string"==typeof a&&Ys(g,a)>=0&&(l[d+1]=pg(l[d+1]))}(a,x,o,d,g),v=ea(E,I),g?a.classBindings=v:a.styleBindings=v}(f,g,a,l,v,d)}}(g,o,v,d),a!==Nt&&Ir(f,v,a)&&function Wg(o,a,l,d,f,g,v,E){if(!(3&a.type))return;const I=o.data,D=I[E+1];ss(function Ra(o){return 1==(1&o)}(D)?CI(I,a,l,f,ao(D),v):void 0)||(ss(g)||function bv(o){return 2==(2&o)}(D)&&(g=CI(I,null,l,f,E,v)),function lC(o,a,l,d,f){if(a)f?o.addClass(l,d):o.removeClass(l,d);else{let g=-1===d.indexOf("-")?void 0:so.DashCase;null==f?o.removeStyle(l,d,g):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),g|=so.Important),o.setStyle(l,d,f,g))}}(d,v,ml(In(),l),f,g))}(g,g.data[In()],f,f[11],o,f[v+1]=function II(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=me(Qi(o)))),o}(a,l),d,v)}function qg(o,a,l,d,f){let g=null;const v=l.directiveEnd;let E=l.directiveStylingLast;for(-1===E?E=l.directiveStart:E++;E<v&&(g=a[E],d=yc(d,g.hostAttrs,f),g!==o);)E++;return null!==o&&(l.directiveStylingLast=E),d}function yc(o,a,l){const d=l?1:2;let f=-1;if(null!==a)for(let g=0;g<a.length;g++){const v=a[g];"number"==typeof v?f=v:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Je(o,v,!!l||a[++g]))}return void 0===o?null:o}function CI(o,a,l,d,f,g){const v=null===a;let E;for(;f>0;){const I=o[f],D=Array.isArray(I),x=D?I[1]:I,k=null===x;let H=l[f+1];H===Nt&&(H=k?Et:void 0);let ee=k?qd(H,d):x===d?H:void 0;if(D&&!ss(ee)&&(ee=qd(I,d)),ss(ee)&&(E=ee,v))return E;const de=o[f+1];f=v?$r(de):ao(de)}if(null!==a){let I=g?a.residualClasses:a.residualStyles;null!=I&&(E=qd(I,d))}return E}function ss(o){return void 0!==o}function Oh(o,a=""){const l=Ce(),d=$t(),f=o+22,g=d.firstCreatePass?Th(d,f,1,a,null):d.data[f],v=l[f]=function iv(o,a){return o.createText(a)}(l[11],a);lg(d,l,v,g),fi(g,!1)}function Zg(o){return Fh("",o,""),Zg}function Fh(o,a,l){const d=Ce(),f=Oa(d,o,a,l);return f!==Nt&&na(d,In(),f),Fh}function As(o,a,l,d,f){const g=Ce(),v=fc(g,o,a,l,d,f);return v!==Nt&&na(g,In(),v),As}const ia=void 0;var D0=["en",[["a","p"],["AM","PM"],ia],[["AM","PM"],ia,ia],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ia,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ia,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ia,"{1} 'at' {0}",ia],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function T0(o){const l=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===d?1:5}];let ja={};function OI(o){const a=function LI(o){return o.toLowerCase().replace(/_/g,"-")}(o);let l=Jg(a);if(l)return l;const d=a.split("-")[0];if(l=Jg(d),l)return l;if("en"===d)return D0;throw new be(701,!1)}function d1(o){return OI(o)[pt.PluralCase]}function Jg(o){return o in ja||(ja[o]=St.ng&&St.ng.common&&St.ng.common.locales&&St.ng.common.locales[o]),ja[o]}var pt=(()=>((pt=pt||{})[pt.LocaleId=0]="LocaleId",pt[pt.DayPeriodsFormat=1]="DayPeriodsFormat",pt[pt.DayPeriodsStandalone=2]="DayPeriodsStandalone",pt[pt.DaysFormat=3]="DaysFormat",pt[pt.DaysStandalone=4]="DaysStandalone",pt[pt.MonthsFormat=5]="MonthsFormat",pt[pt.MonthsStandalone=6]="MonthsStandalone",pt[pt.Eras=7]="Eras",pt[pt.FirstDayOfWeek=8]="FirstDayOfWeek",pt[pt.WeekendRange=9]="WeekendRange",pt[pt.DateFormat=10]="DateFormat",pt[pt.TimeFormat=11]="TimeFormat",pt[pt.DateTimeFormat=12]="DateTimeFormat",pt[pt.NumberSymbols=13]="NumberSymbols",pt[pt.NumberFormats=14]="NumberFormats",pt[pt.CurrencyCode=15]="CurrencyCode",pt[pt.CurrencySymbol=16]="CurrencySymbol",pt[pt.CurrencyName=17]="CurrencyName",pt[pt.Currencies=18]="Currencies",pt[pt.Directionality=19]="Directionality",pt[pt.PluralCase=20]="PluralCase",pt[pt.ExtraData=21]="ExtraData",pt))();const os="en-US";let UI=os;function ZI(o,a,l,d,f){if(o=Q(o),Array.isArray(o))for(let g=0;g<o.length;g++)ZI(o[g],a,l,d,f);else{const g=$t(),v=Ce();let E=Ji(o)?o:Q(o.provide),I=Gp(o);const D=ir(),x=1048575&D.providerIndexes,k=D.directiveStart,H=D.providerIndexes>>20;if(Ji(o)||!o.multi){const ee=new pi(I,f,Ma),de=jh(E,a,f?x:x+H,k);-1===de?(Sl(Bo(D,v),g,E),zI(g,o,a.length),a.push(E),D.directiveStart++,D.directiveEnd++,f&&(D.providerIndexes+=1048576),l.push(ee),v.push(ee)):(l[de]=ee,v[de]=ee)}else{const ee=jh(E,a,x+H,k),de=jh(E,a,x,x+H),Fe=ee>=0&&l[ee],He=de>=0&&l[de];if(f&&!He||!f&&!Fe){Sl(Bo(D,v),g,E);const Xe=function V1(o,a,l,d,f){const g=new pi(o,l,Ma);return g.multi=[],g.index=a,g.componentProviders=0,L1(g,f,d&&!l),g}(f?U1:KI,l.length,f,d,I);!f&&He&&(l[de].providerFactory=Xe),zI(g,o,a.length,0),a.push(E),D.directiveStart++,D.directiveEnd++,f&&(D.providerIndexes+=1048576),l.push(Xe),v.push(Xe)}else zI(g,o,ee>-1?ee:de,L1(l[f?de:ee],I,!f&&d));!f&&d&&He&&l[de].componentProviders++}}}function zI(o,a,l,d){const f=Ji(a),g=function Mb(o){return!!o.useClass}(a);if(f||g){const I=(g?Q(a.useClass):a).prototype.ngOnDestroy;if(I){const D=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const x=D.indexOf(l);-1===x?D.push(l,[d,I]):D[x+1].push(d,I)}else D.push(l,I)}}}function L1(o,a,l){return l&&o.componentProviders++,o.multi.push(a)-1}function jh(o,a,l,d){for(let f=l;f<d;f++)if(a[f]===o)return f;return-1}function KI(o,a,l,d){return gr(this.multi,[])}function U1(o,a,l,d){const f=this.multi;let g;if(this.providerFactory){const v=this.providerFactory.componentProviders,E=Zs(l,l[1],this.providerFactory.index,d);g=E.slice(0,v),gr(f,g);for(let I=v;I<E.length;I++)g.push(E[I])}else g=[],gr(f,g);return g}function gr(o,a){for(let l=0;l<o.length;l++)a.push((0,o[l])());return a}function $h(o,a=[]){return l=>{l.providersResolver=(d,f)=>function $F(o,a,l){const d=$t();if(d.firstCreatePass){const f=Zi(o);ZI(l,d.data,d.blueprint,f,!0),ZI(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class $a{}class YI{}function B1(o,a){return new N0(o,a??null)}class N0 extends $a{constructor(a,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new QC(this);const d=Qe(a);this._bootstrapComponents=Xo(d.bootstrap),this._r3Injector=mC(a,l,[{provide:$a,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],me(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class P0 extends YI{constructor(a){super(),this.moduleType=a}create(a){return new N0(this.moduleType,a)}}class j1 extends $a{constructor(a,l,d){super(),this.componentFactoryResolver=new QC(this),this.instance=null;const f=new Vy([...a,{provide:$a,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],l||qp(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function k0(o,a,l=null){return new j1(o,a,l).injector}let $1=(()=>{class o{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const d=Sb(0,l.type),f=d.length>0?k0([d],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,f)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=Qt({token:o,providedIn:"environment",factory:()=>new o(vn(io))}),o})();function Hr(o){o.getStandaloneInjector=a=>a.get($1).getOrCreateStandaloneInjector(o)}function Gh(o,a){const l=o[a];return l===Nt?void 0:l}function rT(o,a){const l=$t();let d;const f=o+22;l.firstCreatePass?(d=function Q1(o,a){if(a)for(let l=a.length-1;l>=0;l--){const d=a[l];if(o===d.name)return d}}(a,l.pipeRegistry),l.data[f]=d,d.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(f,d.onDestroy)):d=l.data[f];const g=d.factory||(d.factory=wr(d.type)),v=_n(Ma);try{const E=Uu(!1),I=g();return Uu(E),function t0(o,a,l,d){l>=o.data.length&&(o.data[l]=null,o.blueprint[l]=null),a[l]=d}(l,Ce(),f,I),I}finally{_n(v)}}function cm(o,a,l){const d=o+22,f=Ce(),g=Hs(f,d);return Cc(f,d)?function lm(o,a,l,d,f,g){const v=a+l;return Ir(o,v,f)?ns(o,v+1,g?d.call(g,f):d(f)):Gh(o,v+1)}(f,Kn(),a,g.transform,l,g):g.transform(l)}function dm(o,a,l,d){const f=o+22,g=Ce(),v=Hs(g,f);return Cc(g,f)?function j0(o,a,l,d,f,g,v){const E=a+l;return ka(o,E,f,g)?ns(o,E+2,v?d.call(v,f,g):d(f,g)):Gh(o,E+2)}(g,Kn(),a,v.transform,l,d,v):v.transform(l,d)}function Cc(o,a){return o[1].data[a].pure}function hm(o){return a=>{setTimeout(o,void 0,a)}}const po=class Ic extends c.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,l,d){let f=a,g=l||(()=>null),v=d;if(a&&"object"==typeof a){const I=a;f=I.next?.bind(I),g=I.error?.bind(I),v=I.complete?.bind(I)}this.__isAsync&&(g=hm(g),f&&(f=hm(f)),v&&(v=hm(v)));const E=super.subscribe({next:f,error:g,complete:v});return a instanceof j.w0&&a.add(E),E}};function X1(){return this._results[Bn()]()}class G0{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=Bn(),d=G0.prototype;d[l]||(d[l]=X1)}get changes(){return this._changes||(this._changes=new po)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,l){return this._results.reduce(a,l)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,l){const d=this;d.dirty=!1;const f=mn(a);(this._changesDetected=!function ys(o,a,l){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],g=a[d];if(l&&(f=l(f),g=l(g)),g!==f)return!1}return!0}(d._results,f,l))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Wh=(()=>{class o{}return o.__NG_ELEMENT_ID__=nM,o})();const eM=Wh,tM=class extends eM{constructor(a,l,d){super(),this._declarationLView=a,this._declarationTContainer=l,this.elementRef=d}createEmbeddedView(a,l){const d=this._declarationTContainer.tViews,f=vg(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,l||null);f[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(f[19]=v.createEmbeddedView(d)),BC(d,f,a),new xh(f)}};function nM(){return fm(ir(),Ce())}function fm(o,a){return 4&o.type?new tM(a,o,nc(o,a)):null}let pm=(()=>{class o{}return o.__NG_ELEMENT_ID__=gm,o})();function gm(){return oT(ir(),Ce())}const sT=pm,W0=class extends sT{constructor(a,l,d){super(),this._lContainer=a,this._hostTNode=l,this._hostLView=d}get element(){return nc(this._hostTNode,this._hostLView)}get injector(){return new Ml(this._hostTNode,this._hostLView)}get parentInjector(){const a=Dl(this._hostTNode,this._hostLView);if(by(a)){const l=Ws(a,this._hostLView),d=Vo(a);return new Ml(l[1].data[d+8],l)}return new Ml(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const l=mm(this._lContainer);return null!==l&&l[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,l,d){let f,g;"number"==typeof d?f=d:null!=d&&(f=d.index,g=d.injector);const v=a.createEmbeddedView(l||{},g);return this.insert(v,f),v}createComponent(a,l,d,f,g){const v=a&&!function Ai(o){return"function"==typeof o}(a);let E;if(v)E=l;else{const k=l||{};E=k.index,d=k.injector,f=k.projectableNodes,g=k.environmentInjector||k.ngModuleRef}const I=v?a:new zl(M(a)),D=d||this.parentInjector;if(!g&&null==I.ngModule){const H=(v?D:this.parentInjector).get(io,null);H&&(g=H)}const x=I.create(D,f,void 0,g);return this.insert(x.hostView,E),x}insert(a,l){const d=a._lView,f=d[1];if(function ly(o){return ti(o[3])}(d)){const x=this.indexOf(a);if(-1!==x)this.detach(x);else{const k=d[3],H=new W0(k,k[6],k[3]);H.detach(H.indexOf(a))}}const g=this._adjustIndex(l),v=this._lContainer;!function BA(o,a,l,d){const f=10+d,g=l.length;d>0&&(l[f-1][4]=a),d<g-10?(a[4]=l[f],Ho(l,10+d,a)):(l.push(a),a[4]=null),a[3]=l;const v=a[17];null!==v&&l!==v&&function jA(o,a){const l=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===l?o[9]=[a]:l.push(a)}(v,a);const E=a[19];null!==E&&E.insertView(o),a[2]|=64}(f,d,v,g);const E=oC(g,v),I=d[11],D=ag(I,v[7]);return null!==D&&function Qb(o,a,l,d,f,g){d[0]=f,d[6]=a,Gl(o,d,l,1,f,g)}(f,v[6],I,d,D,E),a.attachToViewContainerRef(),Ho(Z0(v),g,a),a}move(a,l){return this.insert(a,l)}indexOf(a){const l=mm(this._lContainer);return null!==l?l.indexOf(a):-1}remove(a){const l=this._adjustIndex(a,-1),d=ov(this._lContainer,l);d&&(qn(Z0(this._lContainer),l),_h(d[1],d))}detach(a){const l=this._adjustIndex(a,-1),d=ov(this._lContainer,l);return d&&null!=qn(Z0(this._lContainer),l)?new xh(d):null}_adjustIndex(a,l=0){return a??this.length+l}};function mm(o){return o[8]}function Z0(o){return o[8]||(o[8]=[])}function oT(o,a){let l;const d=a[o.index];if(ti(d))l=d;else{let f;if(8&o.type)f=Nn(d);else{const g=a[11];f=g.createComment("");const v=Vr(o,a);oo(g,ag(g,v),f,function iC(o,a){return o.nextSibling(a)}(g,v),!1)}a[o.index]=l=GC(d,a,f,o),Tg(a,l)}return new W0(l,o,a)}class _m{constructor(a){this.queryList=a,this.matches=null}clone(){return new _m(this.queryList)}setDirty(){this.queryList.setDirty()}}class ym{constructor(a=[]){this.queries=a}createEmbeddedView(a){const l=a.queries;if(null!==l){const d=null!==a.contentQueries?a.contentQueries[0]:l.length,f=[];for(let g=0;g<d;g++){const v=l.getByIndex(g);f.push(this.queries[v.indexInDeclarationView].clone())}return new ym(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let l=0;l<this.queries.length;l++)null!==aM(a,l).matches&&this.queries[l].setDirty()}}class z0{constructor(a,l,d=null){this.predicate=a,this.flags=l,this.read=d}}class lT{constructor(a=[]){this.queries=a}elementStart(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,l)}elementEnd(a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(a)}embeddedTView(a){let l=null;for(let d=0;d<this.length;d++){const f=null!==l?l.length:0,g=this.getByIndex(d).embeddedTView(a,f);g&&(g.indexInDeclarationView=d,null!==l?l.push(g):l=[g])}return null!==l?new lT(l):null}template(a,l){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,l)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class K0{constructor(a,l=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(a,l){this.isApplyingToNode(l)&&this.matchTNode(a,l)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,l){this.elementStart(a,l)}embeddedTView(a,l){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,l),new K0(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==l;)d=d.parent;return l===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,l){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const g=d[f];this.matchTNodeWithReadOption(a,l,WF(l,g)),this.matchTNodeWithReadOption(a,l,xl(l,a,g,!1,!1))}else d===Wh?4&l.type&&this.matchTNodeWithReadOption(a,l,-1):this.matchTNodeWithReadOption(a,l,xl(l,a,d,!1,!1))}matchTNodeWithReadOption(a,l,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===Hl||f===pm||f===Wh&&4&l.type)this.addMatch(l.index,-2);else{const g=xl(l,a,f,!1,!1);null!==g&&this.addMatch(l.index,g)}else this.addMatch(l.index,d)}}addMatch(a,l){null===this.matches?this.matches=[a,l]:this.matches.push(a,l)}}function WF(o,a){const l=o.localNames;if(null!==l)for(let d=0;d<l.length;d+=2)if(l[d]===a)return l[d+1];return null}function Y0(o,a,l,d){return-1===l?function ZF(o,a){return 11&o.type?nc(o,a):4&o.type?fm(o,a):null}(a,o):-2===l?function zF(o,a,l){return l===Hl?nc(a,o):l===Wh?fm(a,o):l===pm?oT(a,o):void 0}(o,a,d):Zs(o,o[1],l,a)}function uT(o,a,l,d){const f=a[19].queries[d];if(null===f.matches){const g=o.data,v=l.matches,E=[];for(let I=0;I<v.length;I+=2){const D=v[I];E.push(D<0?null:Y0(a,g[D],v[I+1],l.metadata.read))}f.matches=E}return f.matches}function vm(o,a,l,d){const f=o.queries.getByIndex(l),g=f.matches;if(null!==g){const v=uT(o,a,f,l);for(let E=0;E<g.length;E+=2){const I=g[E];if(I>0)d.push(v[E/2]);else{const D=g[E+1],x=a[-I];for(let k=10;k<x.length;k++){const H=x[k];H[17]===H[3]&&vm(H[1],H,D,d)}if(null!==x[9]){const k=x[9];for(let H=0;H<k.length;H++){const ee=k[H];vm(ee[1],ee,D,d)}}}}}return d}function cT(o){const a=Ce(),l=$t(),d=Ad();xd(d+1);const f=aM(l,d);if(o.dirty&&function ay(o){return 4==(4&o[2])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const g=f.crossesNgTemplate?vm(l,a,d,[]):uT(l,a,f,d);o.reset(g,Ob),o.notifyOnChanges()}return!0}return!1}function wm(o,a,l,d){const f=$t();if(f.firstCreatePass){const g=ir();(function sM(o,a,l){null===o.queries&&(o.queries=new lT),o.queries.track(new K0(a,l))})(f,new z0(a,l,d),g.index),function oM(o,a){const l=o.contentQueries||(o.contentQueries=[]);a!==(l.length?l[l.length-1]:-1)&&l.push(o.queries.length-1,a)}(f,o),2==(2&l)&&(f.staticContentQueries=!0)}!function Em(o,a,l){const d=new G0(4==(4&l));Uv(o,a,d,d.destroy),null===a[19]&&(a[19]=new ym),a[19].queries.push(new _m(d))}(f,Ce(),l)}function eu(){return function KF(o,a){return o[19].queries[a].queryList}(Ce(),Ad())}function aM(o,a){return o.queries.getByIndex(a)}function hT(o,a){return fm(o,a)}function nu(...o){}const iw=new fn("Application Initializer");let Qh=(()=>{class o{constructor(l){this.appInits=l,this.resolve=nu,this.reject=nu,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const l=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const g=this.appInits[f]();if(s0(g))l.push(g);else if(o0(g)){const v=new Promise((E,I)=>{g.subscribe({complete:E,error:I})});l.push(v)}}Promise.all(l).then(()=>{d()}).catch(f=>{this.reject(f)}),0===l.length&&d(),this.initialized=!0}}return o.\u0275fac=function(l){return new(l||o)(vn(iw,8))},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const sw=new fn("AppId",{providedIn:"root",factory:function Jh(){return`${Xh()}${Xh()}${Xh()}`}});function Xh(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const km=new fn("Platform Initializer"),ow=new fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),aw=new fn("appBootstrapListener"),mM=new fn("AnimationModuleType");let IT=(()=>{class o{log(l){console.log(l)}warn(l){console.warn(l)}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Dc=new fn("LocaleId",{providedIn:"root",factory:()=>gi(Dc,Ke.Optional|Ke.SkipSelf)||function TT(){return typeof $localize<"u"&&$localize.locale||os}()}),DT=new fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class lw{constructor(a,l){this.ngModuleFactory=a,this.componentFactories=l}}let Sr=(()=>{class o{compileModuleSync(l){return new P0(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const d=this.compileModuleSync(l),g=Xo(Qe(l).declarations).reduce((v,E)=>{const I=M(E);return I&&v.push(new zl(I)),v},[]);return new lw(d,g)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const yM=(()=>Promise.resolve(0))();function Om(o){typeof Zone>"u"?yM.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class as{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new po(!1),this.onMicrotaskEmpty=new po(!1),this.onStable=new po(!1),this.onError=new po(!1),typeof Zone>"u")throw new be(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const g=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new g("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&l,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function dw(){let o=St.requestAnimationFrame,a=St.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function Lm(o){const a=()=>{!function vM(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(St,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,ef(o),o.isCheckStableRunning=!0,Fm(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),ef(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,d,f,g,v,E)=>{try{return Um(o),l.invokeTask(f,g,v,E)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===g.type||o.shouldCoalesceRunChangeDetection)&&a(),fw(o)}},onInvoke:(l,d,f,g,v,E,I)=>{try{return Um(o),l.invoke(f,g,v,E,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),fw(o)}},onHasTask:(l,d,f,g)=>{l.hasTask(f,g),d===f&&("microTask"==g.change?(o._hasPendingMicrotasks=g.microTask,ef(o),Fm(o)):"macroTask"==g.change&&(o.hasPendingMacrotasks=g.macroTask))},onHandleError:(l,d,f,g)=>(l.handleError(f,g),o.runOutsideAngular(()=>o.onError.emit(g)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!as.isInAngularZone())throw new be(909,!1)}static assertNotInAngularZone(){if(as.isInAngularZone())throw new be(909,!1)}run(a,l,d){return this._inner.run(a,l,d)}runTask(a,l,d,f){const g=this._inner,v=g.scheduleEventTask("NgZoneEvent: "+f,a,hw,nu,nu);try{return g.runTask(v,l,d)}finally{g.cancelTask(v)}}runGuarded(a,l,d){return this._inner.runGuarded(a,l,d)}runOutsideAngular(a){return this._outer.run(a)}}const hw={};function Fm(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function ef(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function Um(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function fw(o){o._nesting--,Fm(o)}class wM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new po,this.onMicrotaskEmpty=new po,this.onStable=new po,this.onError=new po}run(a,l,d){return a.apply(l,d)}runGuarded(a,l,d){return a.apply(l,d)}runOutsideAngular(a){return a()}runTask(a,l,d,f){return a.apply(l,d)}}const Sc=new fn(""),pw=new fn("");let mw,RT=(()=>{class o{constructor(l,d,f){this._ngZone=l,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,mw||(function Vm(o){mw=o}(f),f.addToWindow(d)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{as.assertNotInAngularZone(),Om(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Om(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(l)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,d,f){let g=-1;d&&d>0&&(g=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==g),l(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:l,timeoutId:g,updateCb:f})}whenStable(l,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,d,f){return[]}}return o.\u0275fac=function(l){return new(l||o)(vn(as),vn(gw),vn(pw))},o.\u0275prov=Qt({token:o,factory:o.\u0275fac}),o})(),gw=(()=>{class o{constructor(){this._applications=new Map}registerApplication(l,d){this._applications.set(l,d)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,d=!0){return mw?.findTestabilityInTree(this,l,d)??null}}return o.\u0275fac=function(l){return new(l||o)},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})(),Ha=null;const ru=new fn("AllowMultipleToken"),_w=new fn("PlatformDestroyListeners");class NT{constructor(a,l){this.name=a,this.token=l}}function Ac(o,a,l=[]){const d=`Platform: ${a}`,f=new fn(d);return(g=[])=>{let v=$m();if(!v||v.injector.get(ru,!1)){const E=[...l,...g,{provide:f,useValue:!0}];o?o(E):function tf(o){if(Ha&&!Ha.get(ru,!1))throw new be(400,!1);Ha=o;const a=o.get(vw);(function Gr(o){const a=o.get(km,null);a&&a.forEach(l=>l())})(o)}(function yw(o=[],a){return z.create({name:a,providers:[{provide:jp,useValue:"platform"},{provide:_w,useValue:new Set([()=>Ha=null])},...o]})}(E,d))}return function jm(o){const a=$m();if(!a)throw new be(401,!1);return a}()}}function $m(){return Ha?.get(vw)??null}let vw=(()=>{class o{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,d){const f=function Hm(o,a){let l;return l="noop"===o?new wM:("zone.js"===o?void 0:o)||new as(a),l}(d?.ngZone,function xc(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),g=[{provide:as,useValue:f}];return f.run(()=>{const v=z.create({providers:g,parent:this.injector,name:l.moduleType.name}),E=l.create(v),I=E.injector.get(ph,null);if(!I)throw new be(402,!1);return f.runOutsideAngular(()=>{const D=f.onError.subscribe({next:x=>{I.handleError(x)}});E.onDestroy(()=>{qa(this._modules,E),D.unsubscribe()})}),function qm(o,a,l){try{const d=l();return s0(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(I,f,()=>{const D=E.injector.get(Qh);return D.runInitializers(),D.donePromise.then(()=>(function VI(o){Ut(o,"Expected localeId to be defined"),"string"==typeof o&&(UI=o.toLowerCase().replace(/_/g,"-"))}(E.injector.get(Dc,os)||os),this._moduleDoBootstrap(E),E))})})}bootstrapModule(l,d=[]){const f=Gm({},d);return function iu(o,a,l){const d=new P0(l);return Promise.resolve(d)}(0,0,l).then(g=>this.bootstrapModuleFactory(g,f))}_moduleDoBootstrap(l){const d=l.injector.get(su);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!l.instance.ngDoBootstrap)throw new be(403,!1);l.instance.ngDoBootstrap(d)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new be(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const l=this._injector.get(_w,null);l&&(l.forEach(d=>d()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(l){return new(l||o)(vn(z))},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function Gm(o,a){return Array.isArray(a)?a.reduce(Gm,o):{...o,...a}}let su=(()=>{class o{constructor(l,d,f){this._zone=l,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const g=new L.y(E=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{E.next(this._stable),E.complete()})}),v=new L.y(E=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{as.assertNotInAngularZone(),Om(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,E.next(!0))})})});const D=this._zone.onUnstable.subscribe(()=>{as.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{E.next(!1)}))});return()=>{I.unsubscribe(),D.unsubscribe()}});this.isStable=(0,le.T)(g,v.pipe((0,we.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,d){const f=l instanceof $y;if(!this._injector.get(Qh).done)throw!f&&Te(l),new be(405,false);let v;v=f?l:this._injector.get(Aa).resolveComponentFactory(l),this.componentTypes.push(v.componentType);const E=function Bm(o){return o.isBoundToModule}(v)?void 0:this._injector.get($a),D=v.create(z.NULL,[],d||v.selector,E),x=D.location.nativeElement,k=D.injector.get(Sc,null);return k?.registerApplication(x),D.onDestroy(()=>{this.detachView(D.hostView),qa(this.components,D),k?.unregisterApplication(x)}),this._loadComponent(D),D}tick(){if(this._runningTick)throw new be(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const d=l;this._views.push(d),d.attachToAppRef(this)}detachView(l){const d=l;qa(this._views,d),d.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(aw,[]).concat(this._bootstrapListeners).forEach(f=>f(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>qa(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new be(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(l){return new(l||o)(vn(as),vn(io),vn(ph))},o.\u0275prov=Qt({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function qa(o,a){const l=o.indexOf(a);l>-1&&o.splice(l,1)}let Wm=!0,nf=!1;function Ew(){return nf=!0,Wm}function OT(){if(nf)throw new Error("Cannot enable prod mode after platform setup.");Wm=!1}let rf=(()=>{class o{}return o.__NG_ELEMENT_ID__=LT,o})();function LT(o){return function Zm(o,a,l){if(Tu(o)&&!l){const d=en(o.index,a);return new xh(d,d)}return 47&o.type?new xh(a[16],a):null}(ir(),Ce(),16==(16&o))}class BT{constructor(){}supports(a){return Kl(a)}create(a){return new Ga(a)}}const lf=(o,a)=>a;class Ga{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||lf}forEachItem(a){let l;for(l=this._itHead;null!==l;l=l._next)a(l)}forEachOperation(a){let l=this._itHead,d=this._removalsHead,f=0,g=null;for(;l||d;){const v=!d||l&&l.currentIndex<uu(d,f,g)?l:d,E=uu(v,f,g),I=v.currentIndex;if(v===d)f--,d=d._nextRemoved;else if(l=l._next,null==v.previousIndex)f++;else{g||(g=[]);const D=E-f,x=I-f;if(D!=x){for(let H=0;H<D;H++){const ee=H<g.length?g[H]:g[H]=0,de=ee+H;x<=de&&de<D&&(g[H]=ee+1)}g[v.previousIndex]=x-D}}E!==I&&a(v,E,I)}}forEachPreviousItem(a){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachMovedItem(a){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}forEachIdentityChange(a){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)a(l)}diff(a){if(null==a&&(a=[]),!Kl(a))throw new be(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,g,v,l=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let E=0;E<this.length;E++)g=a[E],v=this._trackByFn(E,g),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,g,v,E)),Object.is(l.item,g)||this._addIdentityChange(l,g)):(l=this._mismatch(l,g,v,E),d=!0),l=l._next}else f=0,function Yv(o,a){if(Array.isArray(o))for(let l=0;l<o.length;l++)a(o[l]);else{const l=o[Bn()]();let d;for(;!(d=l.next()).done;)a(d.value)}}(a,E=>{v=this._trackByFn(f,E),null!==l&&Object.is(l.trackById,v)?(d&&(l=this._verifyReinsertion(l,E,v,f)),Object.is(l.item,E)||this._addIdentityChange(l,E)):(l=this._mismatch(l,E,v,f),d=!0),l=l._next,f++}),this.length=f;return this._truncate(l),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,l,d,f){let g;return null===a?g=this._itTail:(g=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._reinsertAfter(a,g,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,l)||this._addIdentityChange(a,l),this._moveAfter(a,g,f)):a=this._addAfter(new jT(l,d),g,f),a}_verifyReinsertion(a,l,d,f){let g=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==g?a=this._reinsertAfter(g,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const l=a._next;this._addToRemovals(this._unlink(a)),a=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,l,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,g=a._nextRemoved;return null===f?this._removalsHead=g:f._nextRemoved=g,null===g?this._removalsTail=f:g._prevRemoved=f,this._insertAfter(a,l,d),this._addToMoves(a,d),a}_moveAfter(a,l,d){return this._unlink(a),this._insertAfter(a,l,d),this._addToMoves(a,d),a}_addAfter(a,l,d){return this._insertAfter(a,l,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,l,d){const f=null===l?this._itHead:l._next;return a._next=f,a._prev=l,null===f?this._itTail=a:f._prev=a,null===l?this._itHead=a:l._next=a,null===this._linkedRecords&&(this._linkedRecords=new bw),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const l=a._prev,d=a._next;return null===l?this._itHead=d:l._next=d,null===d?this._itTail=l:d._prev=l,a}_addToMoves(a,l){return a.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new bw),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,l){return a.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class jT{constructor(a,l){this.item=a,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class $T{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,l){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===l||l<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const l=a._prevDup,d=a._nextDup;return null===l?this._head=d:l._nextDup=d,null===d?this._tail=l:d._prevDup=l,null===this._head}}class bw{constructor(){this.map=new Map}put(a){const l=a.trackById;let d=this.map.get(l);d||(d=new $T,this.map.set(l,d)),d.add(a)}get(a,l){const f=this.map.get(a);return f?f.get(a,l):null}remove(a){const l=a.trackById;return this.map.get(l).remove(a)&&this.map.delete(l),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uu(o,a,l){const d=o.previousIndex;if(null===d)return d;let f=0;return l&&d<l.length&&(f=l[d]),d+a+f}class HT{constructor(){}supports(a){return a instanceof Map||Ng(a)}create(){return new AM}}class AM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let l;for(l=this._mapHead;null!==l;l=l._next)a(l)}forEachPreviousItem(a){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)a(l)}forEachChangedItem(a){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)a(l)}forEachAddedItem(a){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)a(l)}forEachRemovedItem(a){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)a(l)}diff(a){if(a){if(!(a instanceof Map||Ng(a)))throw new be(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(l&&l.key===f)this._maybeAddToChanges(l,d),this._appendAfter=l,l=l._next;else{const g=this._getOrCreateRecordForKey(f,d);l=this._insertBeforeOrAppend(l,g)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let d=l;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,l){if(a){const d=a._prev;return l._next=a,l._prev=d,a._prev=l,d&&(d._next=l),a===this._mapHead&&(this._mapHead=l),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(a,l){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,l);const g=f._prev,v=f._next;return g&&(g._next=v),v&&(v._prev=g),f._next=null,f._prev=null,f}const d=new qT(a);return this._records.set(a,d),d.currentValue=l,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,l){Object.is(l,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=l,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,l){a instanceof Map?a.forEach(l):Object.keys(a).forEach(d=>l(a[d],d))}}class qT{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function GT(){return new Jm([new BT])}let Jm=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(null!=d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||GT()),deps:[[o,new Ko,new Dn]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(null!=d)return d;throw new be(901,!1)}}return o.\u0275prov=Qt({token:o,providedIn:"root",factory:GT}),o})();function Xm(){return new uf([new HT])}let uf=(()=>{class o{constructor(l){this.factories=l}static create(l,d){if(d){const f=d.factories.slice();l=l.concat(f)}return new o(l)}static extend(l){return{provide:o,useFactory:d=>o.create(l,d||Xm()),deps:[[o,new Ko,new Dn]]}}find(l){const d=this.factories.find(f=>f.supports(l));if(d)return d;throw new be(901,!1)}}return o.\u0275prov=Qt({token:o,providedIn:"root",factory:Xm}),o})();const MM=Ac(null,"core",[]);let RM=(()=>{class o{constructor(l){}}return o.\u0275fac=function(l){return new(l||o)(vn(su))},o.\u0275mod=Zt({type:o}),o.\u0275inj=xt({}),o})();function e_(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}},3394:(gt,Se,U)=>{U.d(Se,{Z:()=>be});var c=U(3854),j=U(3910),L=U(8026),le=U(5422);class we{constructor(oe,ce){this._delegate=oe,this.firebase=ce,(0,L._addComponent)(oe,new j.wA("app-compat",()=>this,"PUBLIC")),this.container=oe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(oe){this._delegate.automaticDataCollectionEnabled=oe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(oe=>{this._delegate.checkDestroyed(),oe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,L.deleteApp)(this._delegate)))}_getService(oe,ce=L._DEFAULT_ENTRY_NAME){var et;this._delegate.checkDestroyed();const tt=this._delegate.container.getProvider(oe);return!tt.isInitialized()&&"EXPLICIT"===(null===(et=tt.getComponent())||void 0===et?void 0:et.instantiationMode)&&tt.initialize(),tt.getImmediate({identifier:ce})}_removeServiceInstance(oe,ce=L._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(oe).clearInstance(ce)}_addComponent(oe){(0,L._addComponent)(this._delegate,oe)}_addOrOverwriteComponent(oe){(0,L._addOrOverwriteComponent)(this._delegate,oe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ie=new c.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),q=function Ne(){const ze=function me(ze){const oe={},ce={__esModule:!0,initializeApp:function Pe(ne,ie={}){const he=L.initializeApp(ne,ie);if((0,c.r3)(oe,he.name))return oe[he.name];const K=new ze(he,ce);return oe[he.name]=K,K},app:tt,registerVersion:L.registerVersion,setLogLevel:L.setLogLevel,onLog:L.onLog,apps:null,SDK_VERSION:L.SDK_VERSION,INTERNAL:{registerComponent:function fe(ne){const ie=ne.name,he=ie.replace("-compat","");if(L._registerComponent(ne)&&"PUBLIC"===ne.type){const K=(Y=tt())=>{if("function"!=typeof Y[he])throw Ie.create("invalid-app-argument",{appName:ie});return Y[he]()};void 0!==ne.serviceProps&&(0,c.ZB)(K,ne.serviceProps),ce[he]=K,ze.prototype[he]=function(...Y){return this._getService.bind(this,ie).apply(this,ne.multipleInstances?Y:[])}}return"PUBLIC"===ne.type?ce[he]:null},removeApp:function et(ne){delete oe[ne]},useAsService:function je(ne,ie){return"serverAuth"===ie?null:ie},modularAPIs:L}};function tt(ne){if(!(0,c.r3)(oe,ne=ne||L._DEFAULT_ENTRY_NAME))throw Ie.create("no-app",{appName:ne});return oe[ne]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function ve(){return Object.keys(oe).map(ne=>oe[ne])}}),tt.App=ze,ce}(we);return ze.INTERNAL=Object.assign(Object.assign({},ze.INTERNAL),{createFirebaseNamespace:Ne,extendNamespace:function oe(ce){(0,c.ZB)(ze,ce)},createSubscribe:c.ne,ErrorFactory:c.LL,deepExtend:c.ZB}),ze}(),G=new le.Yd("@firebase/app-compat");if((0,c.jU)()&&void 0!==self.firebase){G.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const ze=self.firebase.SDK_VERSION;ze&&ze.indexOf("LITE")>=0&&G.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const be=q;!function Oe(ze){(0,L.registerVersion)("@firebase/app-compat","0.1.39",ze)}()},8026:(gt,Se,U)=>{U.r(Se),U.d(Se,{FirebaseError:()=>le.ZR,SDK_VERSION:()=>Gi,_DEFAULT_ENTRY_NAME:()=>Ut,_addComponent:()=>un,_addOrOverwriteComponent:()=>Qt,_apps:()=>ln,_clearComponents:()=>qi,_components:()=>Hn,_getProvider:()=>xt,_registerComponent:()=>Vt,_removeServiceInstance:()=>xr,deleteApp:()=>$s,getApp:()=>Mr,getApps:()=>ps,initializeApp:()=>Fr,onLog:()=>nr,registerVersion:()=>dr,setLogLevel:()=>_n});var c=U(8239),j=U(3910),L=U(5422),le=U(3854),we=U(8479);class ye{constructor(_e){this.container=_e}getPlatformInfoString(){return this.container.getProviders().map(Ye=>{if(function Ie(We){return"VERSION"===We.getComponent()?.type}(Ye)){const mt=Ye.getImmediate();return`${mt.library}/${mt.version}`}return null}).filter(Ye=>Ye).join(" ")}}const me="@firebase/app",q=new L.Yd("@firebase/app"),Ut="[DEFAULT]",$e={[me]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ln=new Map,Hn=new Map;function un(We,_e){try{We.container.addComponent(_e)}catch(Ye){q.debug(`Component ${_e.name} failed to register with FirebaseApp ${We.name}`,Ye)}}function Qt(We,_e){We.container.addOrOverwriteComponent(_e)}function Vt(We){const _e=We.name;if(Hn.has(_e))return q.debug(`There were multiple attempts to register component ${_e}.`),!1;Hn.set(_e,We);for(const Ye of ln.values())un(Ye,We);return!0}function xt(We,_e){const Ye=We.container.getProvider("heartbeat").getImmediate({optional:!0});return Ye&&Ye.triggerHeartbeat(),We.container.getProvider(_e)}function xr(We,_e,Ye=Ut){xt(We,_e).clearInstance(Ye)}function qi(){Hn.clear()}const Fn=new le.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class fs{constructor(_e,Ye,mt){this._isDeleted=!1,this._options=Object.assign({},_e),this._config=Object.assign({},Ye),this._name=Ye.name,this._automaticDataCollectionEnabled=Ye.automaticDataCollectionEnabled,this._container=mt,this.container.addComponent(new j.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this.checkDestroyed(),this._automaticDataCollectionEnabled=_e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(_e){this._isDeleted=_e}checkDestroyed(){if(this.isDeleted)throw Fn.create("app-deleted",{appName:this._name})}}const Gi="9.14.0";function Fr(We,_e={}){let Ye=We;"object"!=typeof _e&&(_e={name:_e});const mt=Object.assign({name:Ut,automaticDataCollectionEnabled:!1},_e),yt=mt.name;if("string"!=typeof yt||!yt)throw Fn.create("bad-app-name",{appName:String(yt)});if(Ye||(Ye=(0,le.aH)()),!Ye)throw Fn.create("no-options");const Zt=ln.get(yt);if(Zt){if((0,le.vZ)(Ye,Zt.options)&&(0,le.vZ)(mt,Zt.config))return Zt;throw Fn.create("duplicate-app",{appName:yt})}const $=new j.H0(yt);for(const Z of Hn.values())$.addComponent(Z);const B=new fs(Ye,mt,$);return ln.set(yt,B),B}function Mr(We=Ut){const _e=ln.get(We);if(!_e&&We===Ut)return Fr();if(!_e)throw Fn.create("no-app",{appName:We});return _e}function ps(){return Array.from(ln.values())}function $s(We){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,c.Z)(function*(We){const _e=We.name;ln.has(_e)&&(ln.delete(_e),yield Promise.all(We.container.getProviders().map(Ye=>Ye.delete())),We.isDeleted=!0)})).apply(this,arguments)}function dr(We,_e,Ye){var mt;let yt=null!==(mt=$e[We])&&void 0!==mt?mt:We;Ye&&(yt+=`-${Ye}`);const Zt=yt.match(/\s|\//),$=_e.match(/\s|\//);if(Zt||$){const B=[`Unable to register library "${yt}" with version "${_e}":`];return Zt&&B.push(`library name "${yt}" contains illegal characters (whitespace or "/")`),Zt&&$&&B.push("and"),$&&B.push(`version name "${_e}" contains illegal characters (whitespace or "/")`),void q.warn(B.join(" "))}Vt(new j.wA(`${yt}-version`,()=>({library:yt,version:_e}),"VERSION"))}function nr(We,_e){if(null!==We&&"function"!=typeof We)throw Fn.create("invalid-log-argument");(0,L.Am)(We,_e)}function _n(We){(0,L.Ub)(We)}const yn="firebase-heartbeat-store";let Cn=null;function hn(){return Cn||(Cn=(0,we.X3)("firebase-heartbeat-database",1,{upgrade:(We,_e)=>{0===_e&&We.createObjectStore(yn)}}).catch(We=>{throw Fn.create("idb-open",{originalErrorMessage:We.message})})),Cn}function ct(){return(ct=(0,c.Z)(function*(We){var _e;try{return(yield hn()).transaction(yn).objectStore(yn).get(rr(We))}catch(Ye){if(Ye instanceof le.ZR)q.warn(Ye.message);else{const mt=Fn.create("idb-get",{originalErrorMessage:null===(_e=Ye)||void 0===_e?void 0:_e.message});q.warn(mt.message)}}})).apply(this,arguments)}function St(We,_e){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,c.Z)(function*(We,_e){var Ye;try{const yt=(yield hn()).transaction(yn,"readwrite");return yield yt.objectStore(yn).put(_e,rr(We)),yt.done}catch(mt){if(mt instanceof le.ZR)q.warn(mt.message);else{const yt=Fn.create("idb-set",{originalErrorMessage:null===(Ye=mt)||void 0===Ye?void 0:Ye.message});q.warn(yt.message)}}})).apply(this,arguments)}function rr(We){return`${We.name}!${We.options.appId}`}class Rr{constructor(_e){this.container=_e,this._heartbeatsCache=null;const Ye=this.container.getProvider("app").getImmediate();this._storage=new Ht(Ye),this._heartbeatsCachePromise=this._storage.read().then(mt=>(this._heartbeatsCache=mt,mt))}triggerHeartbeat(){var _e=this;return(0,c.Z)(function*(){const mt=_e.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),yt=At();if(null===_e._heartbeatsCache&&(_e._heartbeatsCache=yield _e._heartbeatsCachePromise),_e._heartbeatsCache.lastSentHeartbeatDate!==yt&&!_e._heartbeatsCache.heartbeats.some(Zt=>Zt.date===yt))return _e._heartbeatsCache.heartbeats.push({date:yt,agent:mt}),_e._heartbeatsCache.heartbeats=_e._heartbeatsCache.heartbeats.filter(Zt=>{const $=new Date(Zt.date).valueOf();return Date.now()-$<=2592e6}),_e._storage.overwrite(_e._heartbeatsCache)})()}getHeartbeatsHeader(){var _e=this;return(0,c.Z)(function*(){if(null===_e._heartbeatsCache&&(yield _e._heartbeatsCachePromise),null===_e._heartbeatsCache||0===_e._heartbeatsCache.heartbeats.length)return"";const Ye=At(),{heartbeatsToSend:mt,unsentEntries:yt}=function Ci(We,_e=1024){const Ye=[];let mt=We.slice();for(const yt of We){const Zt=Ye.find($=>$.agent===yt.agent);if(Zt){if(Zt.dates.push(yt.date),vr(Ye)>_e){Zt.dates.pop();break}}else if(Ye.push({agent:yt.agent,dates:[yt.date]}),vr(Ye)>_e){Ye.pop();break}mt=mt.slice(1)}return{heartbeatsToSend:Ye,unsentEntries:mt}}(_e._heartbeatsCache.heartbeats),Zt=(0,le.L)(JSON.stringify({version:2,heartbeats:mt}));return _e._heartbeatsCache.lastSentHeartbeatDate=Ye,yt.length>0?(_e._heartbeatsCache.heartbeats=yt,yield _e._storage.overwrite(_e._heartbeatsCache)):(_e._heartbeatsCache.heartbeats=[],_e._storage.overwrite(_e._heartbeatsCache)),Zt})()}}function At(){return(new Date).toISOString().substring(0,10)}class Ht{constructor(_e){this.app=_e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,c.Z)(function*(){return!!(0,le.hl)()&&(0,le.eu)().then(()=>!0).catch(()=>!1)})()}read(){var _e=this;return(0,c.Z)(function*(){return(yield _e._canUseIndexedDBPromise)&&(yield function ut(We){return ct.apply(this,arguments)}(_e.app))||{heartbeats:[]}})()}overwrite(_e){var Ye=this;return(0,c.Z)(function*(){var mt;if(yield Ye._canUseIndexedDBPromise){const Zt=yield Ye.read();return St(Ye.app,{lastSentHeartbeatDate:null!==(mt=_e.lastSentHeartbeatDate)&&void 0!==mt?mt:Zt.lastSentHeartbeatDate,heartbeats:_e.heartbeats})}})()}add(_e){var Ye=this;return(0,c.Z)(function*(){var mt;if(yield Ye._canUseIndexedDBPromise){const Zt=yield Ye.read();return St(Ye.app,{lastSentHeartbeatDate:null!==(mt=_e.lastSentHeartbeatDate)&&void 0!==mt?mt:Zt.lastSentHeartbeatDate,heartbeats:[...Zt.heartbeats,..._e.heartbeats]})}})()}}function vr(We){return(0,le.L)(JSON.stringify({version:2,heartbeats:We})).length}!function Mn(We){Vt(new j.wA("platform-logger",_e=>new ye(_e),"PRIVATE")),Vt(new j.wA("heartbeat",_e=>new Rr(_e),"PRIVATE")),dr(me,"0.8.4",We),dr(me,"0.8.4","esm2017"),dr("fire-js","")}("")},3910:(gt,Se,U)=>{U.d(Se,{H0:()=>me,wA:()=>L,zt:()=>we});var c=U(8239),j=U(3854);class L{constructor(q,G,Q){this.name=q,this.instanceFactory=G,this.type=Q,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(q){return this.instantiationMode=q,this}setMultipleInstances(q){return this.multipleInstances=q,this}setServiceProps(q){return this.serviceProps=q,this}setInstanceCreatedCallback(q){return this.onInstanceCreated=q,this}}const le="[DEFAULT]";class we{constructor(q,G){this.name=q,this.container=G,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(q){const G=this.normalizeInstanceIdentifier(q);if(!this.instancesDeferred.has(G)){const Q=new j.BH;if(this.instancesDeferred.set(G,Q),this.isInitialized(G)||this.shouldAutoInitialize())try{const Le=this.getOrInitializeService({instanceIdentifier:G});Le&&Q.resolve(Le)}catch{}}return this.instancesDeferred.get(G).promise}getImmediate(q){var G;const Q=this.normalizeInstanceIdentifier(q?.identifier),Le=null!==(G=q?.optional)&&void 0!==G&&G;if(!this.isInitialized(Q)&&!this.shouldAutoInitialize()){if(Le)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Q})}catch(Oe){if(Le)return null;throw Oe}}getComponent(){return this.component}setComponent(q){if(q.name!==this.name)throw Error(`Mismatching Component ${q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=q,this.shouldAutoInitialize()){if(function Ie(Ne){return"EAGER"===Ne.instantiationMode}(q))try{this.getOrInitializeService({instanceIdentifier:le})}catch{}for(const[G,Q]of this.instancesDeferred.entries()){const Le=this.normalizeInstanceIdentifier(G);try{const Oe=this.getOrInitializeService({instanceIdentifier:Le});Q.resolve(Oe)}catch{}}}}clearInstance(q=le){this.instancesDeferred.delete(q),this.instancesOptions.delete(q),this.instances.delete(q)}delete(){var q=this;return(0,c.Z)(function*(){const G=Array.from(q.instances.values());yield Promise.all([...G.filter(Q=>"INTERNAL"in Q).map(Q=>Q.INTERNAL.delete()),...G.filter(Q=>"_delete"in Q).map(Q=>Q._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(q=le){return this.instances.has(q)}getOptions(q=le){return this.instancesOptions.get(q)||{}}initialize(q={}){const{options:G={}}=q,Q=this.normalizeInstanceIdentifier(q.instanceIdentifier);if(this.isInitialized(Q))throw Error(`${this.name}(${Q}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Le=this.getOrInitializeService({instanceIdentifier:Q,options:G});for(const[Oe,be]of this.instancesDeferred.entries())Q===this.normalizeInstanceIdentifier(Oe)&&be.resolve(Le);return Le}onInit(q,G){var Q;const Le=this.normalizeInstanceIdentifier(G),Oe=null!==(Q=this.onInitCallbacks.get(Le))&&void 0!==Q?Q:new Set;Oe.add(q),this.onInitCallbacks.set(Le,Oe);const be=this.instances.get(Le);return be&&q(be,Le),()=>{Oe.delete(q)}}invokeOnInitCallbacks(q,G){const Q=this.onInitCallbacks.get(G);if(Q)for(const Le of Q)try{Le(q,G)}catch{}}getOrInitializeService({instanceIdentifier:q,options:G={}}){let Q=this.instances.get(q);if(!Q&&this.component&&(Q=this.component.instanceFactory(this.container,{instanceIdentifier:(Ne=q,Ne===le?void 0:Ne),options:G}),this.instances.set(q,Q),this.instancesOptions.set(q,G),this.invokeOnInitCallbacks(Q,q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,q,Q)}catch{}var Ne;return Q||null}normalizeInstanceIdentifier(q=le){return this.component?this.component.multipleInstances?q:le:q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class me{constructor(q){this.name=q,this.providers=new Map}addComponent(q){const G=this.getProvider(q.name);if(G.isComponentSet())throw new Error(`Component ${q.name} has already been registered with ${this.name}`);G.setComponent(q)}addOrOverwriteComponent(q){this.getProvider(q.name).isComponentSet()&&this.providers.delete(q.name),this.addComponent(q)}getProvider(q){if(this.providers.has(q))return this.providers.get(q);const G=new we(q,this);return this.providers.set(q,G),G}getProviders(){return Array.from(this.providers.values())}}},5422:(gt,Se,U)=>{U.d(Se,{Am:()=>Ne,Ub:()=>me,Yd:()=>Ie,in:()=>j});const c=[];var j=(()=>{return(q=j||(j={}))[q.DEBUG=0]="DEBUG",q[q.VERBOSE=1]="VERBOSE",q[q.INFO=2]="INFO",q[q.WARN=3]="WARN",q[q.ERROR=4]="ERROR",q[q.SILENT=5]="SILENT",j;var q})();const L={debug:j.DEBUG,verbose:j.VERBOSE,info:j.INFO,warn:j.WARN,error:j.ERROR,silent:j.SILENT},le=j.INFO,we={[j.DEBUG]:"log",[j.VERBOSE]:"log",[j.INFO]:"info",[j.WARN]:"warn",[j.ERROR]:"error"},ye=(q,G,...Q)=>{if(G<q.logLevel)return;const Le=(new Date).toISOString(),Oe=we[G];if(!Oe)throw new Error(`Attempted to log a message with an invalid logType (value: ${G})`);console[Oe](`[${Le}]  ${q.name}:`,...Q)};class Ie{constructor(G){this.name=G,this._logLevel=le,this._logHandler=ye,this._userLogHandler=null,c.push(this)}get logLevel(){return this._logLevel}set logLevel(G){if(!(G in j))throw new TypeError(`Invalid value "${G}" assigned to \`logLevel\``);this._logLevel=G}setLogLevel(G){this._logLevel="string"==typeof G?L[G]:G}get logHandler(){return this._logHandler}set logHandler(G){if("function"!=typeof G)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=G}get userLogHandler(){return this._userLogHandler}set userLogHandler(G){this._userLogHandler=G}debug(...G){this._userLogHandler&&this._userLogHandler(this,j.DEBUG,...G),this._logHandler(this,j.DEBUG,...G)}log(...G){this._userLogHandler&&this._userLogHandler(this,j.VERBOSE,...G),this._logHandler(this,j.VERBOSE,...G)}info(...G){this._userLogHandler&&this._userLogHandler(this,j.INFO,...G),this._logHandler(this,j.INFO,...G)}warn(...G){this._userLogHandler&&this._userLogHandler(this,j.WARN,...G),this._logHandler(this,j.WARN,...G)}error(...G){this._userLogHandler&&this._userLogHandler(this,j.ERROR,...G),this._logHandler(this,j.ERROR,...G)}}function me(q){c.forEach(G=>{G.setLogLevel(q)})}function Ne(q,G){for(const Q of c){let Le=null;G&&G.level&&(Le=L[G.level]),Q.userLogHandler=null===q?null:(Oe,be,...ze)=>{const oe=ze.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch{return null}}).filter(ce=>ce).join(" ");be>=(Le??Oe.logLevel)&&q({level:j[be].toLowerCase(),message:oe,args:ze,type:Oe.name})}}}},8479:(gt,Se,U)=>{U.d(Se,{Lj:()=>Pe,X3:()=>tt});var c=U(8239);let L,le;const Ie=new WeakMap,me=new WeakMap,Ne=new WeakMap,q=new WeakMap,G=new WeakMap;let Oe={get(ie,he,K){if(ie instanceof IDBTransaction){if("done"===he)return me.get(ie);if("objectStoreNames"===he)return ie.objectStoreNames||Ne.get(ie);if("store"===he)return K.objectStoreNames[1]?void 0:K.objectStore(K.objectStoreNames[0])}return ce(ie[he])},set:(ie,he,K)=>(ie[he]=K,!0),has:(ie,he)=>ie instanceof IDBTransaction&&("done"===he||"store"===he)||he in ie};function oe(ie){return"function"==typeof ie?function ze(ie){return ie!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ye(){return le||(le=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ie)?function(...he){return ie.apply(et(this),he),ce(Ie.get(this))}:function(...he){return ce(ie.apply(et(this),he))}:function(he,...K){const Y=ie.call(et(this),he,...K);return Ne.set(Y,he.sort?he.sort():[he]),ce(Y)}}(ie):(ie instanceof IDBTransaction&&function Le(ie){if(me.has(ie))return;const he=new Promise((K,Y)=>{const ae=()=>{ie.removeEventListener("complete",re),ie.removeEventListener("error",Re),ie.removeEventListener("abort",Re)},re=()=>{K(),ae()},Re=()=>{Y(ie.error||new DOMException("AbortError","AbortError")),ae()};ie.addEventListener("complete",re),ie.addEventListener("error",Re),ie.addEventListener("abort",Re)});me.set(ie,he)}(ie),((ie,he)=>he.some(K=>ie instanceof K))(ie,function we(){return L||(L=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ie,Oe):ie)}function ce(ie){if(ie instanceof IDBRequest)return function Q(ie){const he=new Promise((K,Y)=>{const ae=()=>{ie.removeEventListener("success",re),ie.removeEventListener("error",Re)},re=()=>{K(ce(ie.result)),ae()},Re=()=>{Y(ie.error),ae()};ie.addEventListener("success",re),ie.addEventListener("error",Re)});return he.then(K=>{K instanceof IDBCursor&&Ie.set(K,ie)}).catch(()=>{}),G.set(he,ie),he}(ie);if(q.has(ie))return q.get(ie);const he=oe(ie);return he!==ie&&(q.set(ie,he),G.set(he,ie)),he}const et=ie=>G.get(ie);function tt(ie,he,{blocked:K,upgrade:Y,blocking:ae,terminated:re}={}){const Re=indexedDB.open(ie,he),xe=ce(Re);return Y&&Re.addEventListener("upgradeneeded",lt=>{Y(ce(Re.result),lt.oldVersion,lt.newVersion,ce(Re.transaction))}),K&&Re.addEventListener("blocked",()=>K()),xe.then(lt=>{re&&lt.addEventListener("close",()=>re()),ae&&lt.addEventListener("versionchange",()=>ae())}).catch(()=>{}),xe}function Pe(ie,{blocked:he}={}){const K=indexedDB.deleteDatabase(ie);return he&&K.addEventListener("blocked",()=>he()),ce(K).then(()=>{})}const ve=["get","getKey","getAll","getAllKeys","count"],fe=["put","add","delete","clear"],je=new Map;function ne(ie,he){if(!(ie instanceof IDBDatabase)||he in ie||"string"!=typeof he)return;if(je.get(he))return je.get(he);const K=he.replace(/FromIndex$/,""),Y=he!==K,ae=fe.includes(K);if(!(K in(Y?IDBIndex:IDBObjectStore).prototype)||!ae&&!ve.includes(K))return;const re=function(){var Re=(0,c.Z)(function*(xe,...lt){const Yt=this.transaction(xe,ae?"readwrite":"readonly");let Ut=Yt.store;return Y&&(Ut=Ut.index(lt.shift())),(yield Promise.all([Ut[K](...lt),ae&&Yt.done]))[0]});return function(lt){return Re.apply(this,arguments)}}();return je.set(he,re),re}!function be(ie){Oe=ie(Oe)}(ie=>({...ie,get:(he,K,Y)=>ne(he,K)||ie.get(he,K,Y),has:(he,K)=>!!ne(he,K)||ie.has(he,K)}))},8239:(gt,Se,U)=>{function c(L,le,we,ye,Ie,me,Ne){try{var q=L[me](Ne),G=q.value}catch(Q){return void we(Q)}q.done?le(G):Promise.resolve(G).then(ye,Ie)}function j(L){return function(){var le=this,we=arguments;return new Promise(function(ye,Ie){var me=L.apply(le,we);function Ne(G){c(me,ye,Ie,Ne,q,"next",G)}function q(G){c(me,ye,Ie,Ne,q,"throw",G)}Ne(void 0)})}}U.d(Se,{Z:()=>j})}},gt=>{gt(gt.s=4275)}]);